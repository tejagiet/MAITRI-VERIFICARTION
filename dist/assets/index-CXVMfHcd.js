(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const x of document.querySelectorAll('link[rel="modulepreload"]'))d(x);new MutationObserver(x=>{for(const m of x)if(m.type==="childList")for(const E of m.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&d(E)}).observe(document,{childList:!0,subtree:!0});function l(x){const m={};return x.integrity&&(m.integrity=x.integrity),x.referrerPolicy&&(m.referrerPolicy=x.referrerPolicy),x.crossOrigin==="use-credentials"?m.credentials="include":x.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function d(x){if(x.ep)return;x.ep=!0;const m=l(x);fetch(x.href,m)}})();var _c=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},kh={exports:{}},Vl={};var m1;function em(){if(m1)return Vl;m1=1;var c=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function l(d,x,m){var E=null;if(m!==void 0&&(E=""+m),x.key!==void 0&&(E=""+x.key),"key"in x){m={};for(var S in x)S!=="key"&&(m[S]=x[S])}else m=x;return x=m.ref,{$$typeof:c,type:d,key:E,ref:x!==void 0?x:null,props:m}}return Vl.Fragment=r,Vl.jsx=l,Vl.jsxs=l,Vl}var p1;function tm(){return p1||(p1=1,kh.exports=em()),kh.exports}var H=tm(),Uh={exports:{}},Ve={};var x1;function nm(){if(x1)return Ve;x1=1;var c=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),E=Symbol.for("react.context"),S=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),A=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),U=Symbol.iterator;function P(F){return F===null||typeof F!="object"?null:(F=U&&F[U]||F["@@iterator"],typeof F=="function"?F:null)}var X={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},W=Object.assign,se={};function me(F,re,Ae){this.props=F,this.context=re,this.refs=se,this.updater=Ae||X}me.prototype.isReactComponent={},me.prototype.setState=function(F,re){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,re,"setState")},me.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function ce(){}ce.prototype=me.prototype;function Y(F,re,Ae){this.props=F,this.context=re,this.refs=se,this.updater=Ae||X}var fe=Y.prototype=new ce;fe.constructor=Y,W(fe,me.prototype),fe.isPureReactComponent=!0;var Se=Array.isArray;function we(){}var Q={H:null,A:null,T:null,S:null},Te=Object.prototype.hasOwnProperty;function oe(F,re,Ae){var Ee=Ae.ref;return{$$typeof:c,type:F,key:re,ref:Ee!==void 0?Ee:null,props:Ae}}function zt(F,re){return oe(F.type,re,F.props)}function yt(F){return typeof F=="object"&&F!==null&&F.$$typeof===c}function ve(F){var re={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(Ae){return re[Ae]})}var Ye=/\/+/g;function gt(F,re){return typeof F=="object"&&F!==null&&F.key!=null?ve(""+F.key):re.toString(36)}function ie(F){switch(F.status){case"fulfilled":return F.value;case"rejected":throw F.reason;default:switch(typeof F.status=="string"?F.then(we,we):(F.status="pending",F.then(function(re){F.status==="pending"&&(F.status="fulfilled",F.value=re)},function(re){F.status==="pending"&&(F.status="rejected",F.reason=re)})),F.status){case"fulfilled":return F.value;case"rejected":throw F.reason}}throw F}function te(F,re,Ae,Ee,Fe){var be=typeof F;(be==="undefined"||be==="boolean")&&(F=null);var ct=!1;if(F===null)ct=!0;else switch(be){case"bigint":case"string":case"number":ct=!0;break;case"object":switch(F.$$typeof){case c:case r:ct=!0;break;case I:return ct=F._init,te(ct(F._payload),re,Ae,Ee,Fe)}}if(ct)return Fe=Fe(F),ct=Ee===""?"."+gt(F,0):Ee,Se(Fe)?(Ae="",ct!=null&&(Ae=ct.replace(Ye,"$&/")+"/"),te(Fe,re,Ae,"",function(Li){return Li})):Fe!=null&&(yt(Fe)&&(Fe=zt(Fe,Ae+(Fe.key==null||F&&F.key===Fe.key?"":(""+Fe.key).replace(Ye,"$&/")+"/")+ct)),re.push(Fe)),1;ct=0;var ut=Ee===""?".":Ee+":";if(Se(F))for(var Bt=0;Bt<F.length;Bt++)Ee=F[Bt],be=ut+gt(Ee,Bt),ct+=te(Ee,re,Ae,be,Fe);else if(Bt=P(F),typeof Bt=="function")for(F=Bt.call(F),Bt=0;!(Ee=F.next()).done;)Ee=Ee.value,be=ut+gt(Ee,Bt++),ct+=te(Ee,re,Ae,be,Fe);else if(be==="object"){if(typeof F.then=="function")return te(ie(F),re,Ae,Ee,Fe);throw re=String(F),Error("Objects are not valid as a React child (found: "+(re==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":re)+"). If you meant to render a collection of children, use an array instead.")}return ct}function ue(F,re,Ae){if(F==null)return F;var Ee=[],Fe=0;return te(F,Ee,"","",function(be){return re.call(Ae,be,Fe++)}),Ee}function Be(F){if(F._status===-1){var re=F._result;re=re(),re.then(function(Ae){(F._status===0||F._status===-1)&&(F._status=1,F._result=Ae)},function(Ae){(F._status===0||F._status===-1)&&(F._status=2,F._result=Ae)}),F._status===-1&&(F._status=0,F._result=re)}if(F._status===1)return F._result.default;throw F._result}var Je=typeof reportError=="function"?reportError:function(F){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var re=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof F=="object"&&F!==null&&typeof F.message=="string"?String(F.message):String(F),error:F});if(!window.dispatchEvent(re))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",F);return}console.error(F)},it={map:ue,forEach:function(F,re,Ae){ue(F,function(){re.apply(this,arguments)},Ae)},count:function(F){var re=0;return ue(F,function(){re++}),re},toArray:function(F){return ue(F,function(re){return re})||[]},only:function(F){if(!yt(F))throw Error("React.Children.only expected to receive a single React element child.");return F}};return Ve.Activity=D,Ve.Children=it,Ve.Component=me,Ve.Fragment=l,Ve.Profiler=x,Ve.PureComponent=Y,Ve.StrictMode=d,Ve.Suspense=C,Ve.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=Q,Ve.__COMPILER_RUNTIME={__proto__:null,c:function(F){return Q.H.useMemoCache(F)}},Ve.cache=function(F){return function(){return F.apply(null,arguments)}},Ve.cacheSignal=function(){return null},Ve.cloneElement=function(F,re,Ae){if(F==null)throw Error("The argument must be a React element, but you passed "+F+".");var Ee=W({},F.props),Fe=F.key;if(re!=null)for(be in re.key!==void 0&&(Fe=""+re.key),re)!Te.call(re,be)||be==="key"||be==="__self"||be==="__source"||be==="ref"&&re.ref===void 0||(Ee[be]=re[be]);var be=arguments.length-2;if(be===1)Ee.children=Ae;else if(1<be){for(var ct=Array(be),ut=0;ut<be;ut++)ct[ut]=arguments[ut+2];Ee.children=ct}return oe(F.type,Fe,Ee)},Ve.createContext=function(F){return F={$$typeof:E,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null},F.Provider=F,F.Consumer={$$typeof:m,_context:F},F},Ve.createElement=function(F,re,Ae){var Ee,Fe={},be=null;if(re!=null)for(Ee in re.key!==void 0&&(be=""+re.key),re)Te.call(re,Ee)&&Ee!=="key"&&Ee!=="__self"&&Ee!=="__source"&&(Fe[Ee]=re[Ee]);var ct=arguments.length-2;if(ct===1)Fe.children=Ae;else if(1<ct){for(var ut=Array(ct),Bt=0;Bt<ct;Bt++)ut[Bt]=arguments[Bt+2];Fe.children=ut}if(F&&F.defaultProps)for(Ee in ct=F.defaultProps,ct)Fe[Ee]===void 0&&(Fe[Ee]=ct[Ee]);return oe(F,be,Fe)},Ve.createRef=function(){return{current:null}},Ve.forwardRef=function(F){return{$$typeof:S,render:F}},Ve.isValidElement=yt,Ve.lazy=function(F){return{$$typeof:I,_payload:{_status:-1,_result:F},_init:Be}},Ve.memo=function(F,re){return{$$typeof:A,type:F,compare:re===void 0?null:re}},Ve.startTransition=function(F){var re=Q.T,Ae={};Q.T=Ae;try{var Ee=F(),Fe=Q.S;Fe!==null&&Fe(Ae,Ee),typeof Ee=="object"&&Ee!==null&&typeof Ee.then=="function"&&Ee.then(we,Je)}catch(be){Je(be)}finally{re!==null&&Ae.types!==null&&(re.types=Ae.types),Q.T=re}},Ve.unstable_useCacheRefresh=function(){return Q.H.useCacheRefresh()},Ve.use=function(F){return Q.H.use(F)},Ve.useActionState=function(F,re,Ae){return Q.H.useActionState(F,re,Ae)},Ve.useCallback=function(F,re){return Q.H.useCallback(F,re)},Ve.useContext=function(F){return Q.H.useContext(F)},Ve.useDebugValue=function(){},Ve.useDeferredValue=function(F,re){return Q.H.useDeferredValue(F,re)},Ve.useEffect=function(F,re){return Q.H.useEffect(F,re)},Ve.useEffectEvent=function(F){return Q.H.useEffectEvent(F)},Ve.useId=function(){return Q.H.useId()},Ve.useImperativeHandle=function(F,re,Ae){return Q.H.useImperativeHandle(F,re,Ae)},Ve.useInsertionEffect=function(F,re){return Q.H.useInsertionEffect(F,re)},Ve.useLayoutEffect=function(F,re){return Q.H.useLayoutEffect(F,re)},Ve.useMemo=function(F,re){return Q.H.useMemo(F,re)},Ve.useOptimistic=function(F,re){return Q.H.useOptimistic(F,re)},Ve.useReducer=function(F,re,Ae){return Q.H.useReducer(F,re,Ae)},Ve.useRef=function(F){return Q.H.useRef(F)},Ve.useState=function(F){return Q.H.useState(F)},Ve.useSyncExternalStore=function(F,re,Ae){return Q.H.useSyncExternalStore(F,re,Ae)},Ve.useTransition=function(){return Q.H.useTransition()},Ve.version="19.2.4",Ve}var y1;function of(){return y1||(y1=1,Uh.exports=nm()),Uh.exports}var It=of(),jh={exports:{}},Yl={},Ph={exports:{}},zh={};var w1;function im(){return w1||(w1=1,(function(c){function r(te,ue){var Be=te.length;te.push(ue);e:for(;0<Be;){var Je=Be-1>>>1,it=te[Je];if(0<x(it,ue))te[Je]=ue,te[Be]=it,Be=Je;else break e}}function l(te){return te.length===0?null:te[0]}function d(te){if(te.length===0)return null;var ue=te[0],Be=te.pop();if(Be!==ue){te[0]=Be;e:for(var Je=0,it=te.length,F=it>>>1;Je<F;){var re=2*(Je+1)-1,Ae=te[re],Ee=re+1,Fe=te[Ee];if(0>x(Ae,Be))Ee<it&&0>x(Fe,Ae)?(te[Je]=Fe,te[Ee]=Be,Je=Ee):(te[Je]=Ae,te[re]=Be,Je=re);else if(Ee<it&&0>x(Fe,Be))te[Je]=Fe,te[Ee]=Be,Je=Ee;else break e}}return ue}function x(te,ue){var Be=te.sortIndex-ue.sortIndex;return Be!==0?Be:te.id-ue.id}if(c.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;c.unstable_now=function(){return m.now()}}else{var E=Date,S=E.now();c.unstable_now=function(){return E.now()-S}}var C=[],A=[],I=1,D=null,U=3,P=!1,X=!1,W=!1,se=!1,me=typeof setTimeout=="function"?setTimeout:null,ce=typeof clearTimeout=="function"?clearTimeout:null,Y=typeof setImmediate<"u"?setImmediate:null;function fe(te){for(var ue=l(A);ue!==null;){if(ue.callback===null)d(A);else if(ue.startTime<=te)d(A),ue.sortIndex=ue.expirationTime,r(C,ue);else break;ue=l(A)}}function Se(te){if(W=!1,fe(te),!X)if(l(C)!==null)X=!0,we||(we=!0,ve());else{var ue=l(A);ue!==null&&ie(Se,ue.startTime-te)}}var we=!1,Q=-1,Te=5,oe=-1;function zt(){return se?!0:!(c.unstable_now()-oe<Te)}function yt(){if(se=!1,we){var te=c.unstable_now();oe=te;var ue=!0;try{e:{X=!1,W&&(W=!1,ce(Q),Q=-1),P=!0;var Be=U;try{t:{for(fe(te),D=l(C);D!==null&&!(D.expirationTime>te&&zt());){var Je=D.callback;if(typeof Je=="function"){D.callback=null,U=D.priorityLevel;var it=Je(D.expirationTime<=te);if(te=c.unstable_now(),typeof it=="function"){D.callback=it,fe(te),ue=!0;break t}D===l(C)&&d(C),fe(te)}else d(C);D=l(C)}if(D!==null)ue=!0;else{var F=l(A);F!==null&&ie(Se,F.startTime-te),ue=!1}}break e}finally{D=null,U=Be,P=!1}ue=void 0}}finally{ue?ve():we=!1}}}var ve;if(typeof Y=="function")ve=function(){Y(yt)};else if(typeof MessageChannel<"u"){var Ye=new MessageChannel,gt=Ye.port2;Ye.port1.onmessage=yt,ve=function(){gt.postMessage(null)}}else ve=function(){me(yt,0)};function ie(te,ue){Q=me(function(){te(c.unstable_now())},ue)}c.unstable_IdlePriority=5,c.unstable_ImmediatePriority=1,c.unstable_LowPriority=4,c.unstable_NormalPriority=3,c.unstable_Profiling=null,c.unstable_UserBlockingPriority=2,c.unstable_cancelCallback=function(te){te.callback=null},c.unstable_forceFrameRate=function(te){0>te||125<te?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Te=0<te?Math.floor(1e3/te):5},c.unstable_getCurrentPriorityLevel=function(){return U},c.unstable_next=function(te){switch(U){case 1:case 2:case 3:var ue=3;break;default:ue=U}var Be=U;U=ue;try{return te()}finally{U=Be}},c.unstable_requestPaint=function(){se=!0},c.unstable_runWithPriority=function(te,ue){switch(te){case 1:case 2:case 3:case 4:case 5:break;default:te=3}var Be=U;U=te;try{return ue()}finally{U=Be}},c.unstable_scheduleCallback=function(te,ue,Be){var Je=c.unstable_now();switch(typeof Be=="object"&&Be!==null?(Be=Be.delay,Be=typeof Be=="number"&&0<Be?Je+Be:Je):Be=Je,te){case 1:var it=-1;break;case 2:it=250;break;case 5:it=1073741823;break;case 4:it=1e4;break;default:it=5e3}return it=Be+it,te={id:I++,callback:ue,priorityLevel:te,startTime:Be,expirationTime:it,sortIndex:-1},Be>Je?(te.sortIndex=Be,r(A,te),l(C)===null&&te===l(A)&&(W?(ce(Q),Q=-1):W=!0,ie(Se,Be-Je))):(te.sortIndex=it,r(C,te),X||P||(X=!0,we||(we=!0,ve()))),te},c.unstable_shouldYield=zt,c.unstable_wrapCallback=function(te){var ue=U;return function(){var Be=U;U=ue;try{return te.apply(this,arguments)}finally{U=Be}}}})(zh)),zh}var b1;function rm(){return b1||(b1=1,Ph.exports=im()),Ph.exports}var Fh={exports:{}},Un={};var A1;function am(){if(A1)return Un;A1=1;var c=of();function r(C){var A="https://react.dev/errors/"+C;if(1<arguments.length){A+="?args[]="+encodeURIComponent(arguments[1]);for(var I=2;I<arguments.length;I++)A+="&args[]="+encodeURIComponent(arguments[I])}return"Minified React error #"+C+"; visit "+A+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var d={d:{f:l,r:function(){throw Error(r(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},x=Symbol.for("react.portal");function m(C,A,I){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:x,key:D==null?null:""+D,children:C,containerInfo:A,implementation:I}}var E=c.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function S(C,A){if(C==="font")return"";if(typeof A=="string")return A==="use-credentials"?A:""}return Un.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,Un.createPortal=function(C,A){var I=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!A||A.nodeType!==1&&A.nodeType!==9&&A.nodeType!==11)throw Error(r(299));return m(C,A,null,I)},Un.flushSync=function(C){var A=E.T,I=d.p;try{if(E.T=null,d.p=2,C)return C()}finally{E.T=A,d.p=I,d.d.f()}},Un.preconnect=function(C,A){typeof C=="string"&&(A?(A=A.crossOrigin,A=typeof A=="string"?A==="use-credentials"?A:"":void 0):A=null,d.d.C(C,A))},Un.prefetchDNS=function(C){typeof C=="string"&&d.d.D(C)},Un.preinit=function(C,A){if(typeof C=="string"&&A&&typeof A.as=="string"){var I=A.as,D=S(I,A.crossOrigin),U=typeof A.integrity=="string"?A.integrity:void 0,P=typeof A.fetchPriority=="string"?A.fetchPriority:void 0;I==="style"?d.d.S(C,typeof A.precedence=="string"?A.precedence:void 0,{crossOrigin:D,integrity:U,fetchPriority:P}):I==="script"&&d.d.X(C,{crossOrigin:D,integrity:U,fetchPriority:P,nonce:typeof A.nonce=="string"?A.nonce:void 0})}},Un.preinitModule=function(C,A){if(typeof C=="string")if(typeof A=="object"&&A!==null){if(A.as==null||A.as==="script"){var I=S(A.as,A.crossOrigin);d.d.M(C,{crossOrigin:I,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0})}}else A==null&&d.d.M(C)},Un.preload=function(C,A){if(typeof C=="string"&&typeof A=="object"&&A!==null&&typeof A.as=="string"){var I=A.as,D=S(I,A.crossOrigin);d.d.L(C,I,{crossOrigin:D,integrity:typeof A.integrity=="string"?A.integrity:void 0,nonce:typeof A.nonce=="string"?A.nonce:void 0,type:typeof A.type=="string"?A.type:void 0,fetchPriority:typeof A.fetchPriority=="string"?A.fetchPriority:void 0,referrerPolicy:typeof A.referrerPolicy=="string"?A.referrerPolicy:void 0,imageSrcSet:typeof A.imageSrcSet=="string"?A.imageSrcSet:void 0,imageSizes:typeof A.imageSizes=="string"?A.imageSizes:void 0,media:typeof A.media=="string"?A.media:void 0})}},Un.preloadModule=function(C,A){if(typeof C=="string")if(A){var I=S(A.as,A.crossOrigin);d.d.m(C,{as:typeof A.as=="string"&&A.as!=="script"?A.as:void 0,crossOrigin:I,integrity:typeof A.integrity=="string"?A.integrity:void 0})}else d.d.m(C)},Un.requestFormReset=function(C){d.d.r(C)},Un.unstable_batchedUpdates=function(C,A){return C(A)},Un.useFormState=function(C,A,I){return E.H.useFormState(C,A,I)},Un.useFormStatus=function(){return E.H.useHostTransitionStatus()},Un.version="19.2.4",Un}var E1;function sm(){if(E1)return Fh.exports;E1=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(r){console.error(r)}}return c(),Fh.exports=am(),Fh.exports}var v1;function lm(){if(v1)return Yl;v1=1;var c=rm(),r=of(),l=sm();function d(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function x(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function m(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function E(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function S(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function C(e){if(m(e)!==e)throw Error(d(188))}function A(e){var n=e.alternate;if(!n){if(n=m(e),n===null)throw Error(d(188));return n!==e?null:e}for(var s=e,h=n;;){var p=s.return;if(p===null)break;var w=p.alternate;if(w===null){if(h=p.return,h!==null){s=h;continue}break}if(p.child===w.child){for(w=p.child;w;){if(w===s)return C(p),e;if(w===h)return C(p),n;w=w.sibling}throw Error(d(188))}if(s.return!==h.return)s=p,h=w;else{for(var _=!1,R=p.child;R;){if(R===s){_=!0,s=p,h=w;break}if(R===h){_=!0,h=p,s=w;break}R=R.sibling}if(!_){for(R=w.child;R;){if(R===s){_=!0,s=w,h=p;break}if(R===h){_=!0,h=w,s=p;break}R=R.sibling}if(!_)throw Error(d(189))}}if(s.alternate!==h)throw Error(d(190))}if(s.tag!==3)throw Error(d(188));return s.stateNode.current===s?e:n}function I(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=I(e),n!==null)return n;e=e.sibling}return null}var D=Object.assign,U=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),X=Symbol.for("react.portal"),W=Symbol.for("react.fragment"),se=Symbol.for("react.strict_mode"),me=Symbol.for("react.profiler"),ce=Symbol.for("react.consumer"),Y=Symbol.for("react.context"),fe=Symbol.for("react.forward_ref"),Se=Symbol.for("react.suspense"),we=Symbol.for("react.suspense_list"),Q=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),oe=Symbol.for("react.activity"),zt=Symbol.for("react.memo_cache_sentinel"),yt=Symbol.iterator;function ve(e){return e===null||typeof e!="object"?null:(e=yt&&e[yt]||e["@@iterator"],typeof e=="function"?e:null)}var Ye=Symbol.for("react.client.reference");function gt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===Ye?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case W:return"Fragment";case me:return"Profiler";case se:return"StrictMode";case Se:return"Suspense";case we:return"SuspenseList";case oe:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case X:return"Portal";case Y:return e.displayName||"Context";case ce:return(e._context.displayName||"Context")+".Consumer";case fe:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Q:return n=e.displayName||null,n!==null?n:gt(e.type)||"Memo";case Te:n=e._payload,e=e._init;try{return gt(e(n))}catch{}}return null}var ie=Array.isArray,te=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Be={pending:!1,data:null,method:null,action:null},Je=[],it=-1;function F(e){return{current:e}}function re(e){0>it||(e.current=Je[it],Je[it]=null,it--)}function Ae(e,n){it++,Je[it]=e.current,e.current=n}var Ee=F(null),Fe=F(null),be=F(null),ct=F(null);function ut(e,n){switch(Ae(be,n),Ae(Fe,e),Ae(Ee,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?jd(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=jd(n),e=Pd(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}re(Ee),Ae(Ee,e)}function Bt(){re(Ee),re(Fe),re(be)}function Li(e){e.memoizedState!==null&&Ae(ct,e);var n=Ee.current,s=Pd(n,e.type);n!==s&&(Ae(Fe,e),Ae(Ee,s))}function yn(e){Fe.current===e&&(re(Ee),re(Fe)),ct.current===e&&(re(ct),zl._currentValue=Be)}var Lr,ht;function Yn(e){if(Lr===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Lr=n&&n[1]||"",ht=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Lr+e+ht}var qn=!1;function lr(e,n){if(!e||qn)return"";qn=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(n){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(ne){var J=ne}Reflect.construct(e,[],he)}else{try{he.call()}catch(ne){J=ne}e.call(he.prototype)}}else{try{throw Error()}catch(ne){J=ne}(he=e())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(ne){if(ne&&J&&typeof ne.stack=="string")return[ne.stack,J.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var p=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");p&&p.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),_=w[0],R=w[1];if(_&&R){var B=_.split(`
`),K=R.split(`
`);for(p=h=0;h<B.length&&!B[h].includes("DetermineComponentFrameRoot");)h++;for(;p<K.length&&!K[p].includes("DetermineComponentFrameRoot");)p++;if(h===B.length||p===K.length)for(h=B.length-1,p=K.length-1;1<=h&&0<=p&&B[h]!==K[p];)p--;for(;1<=h&&0<=p;h--,p--)if(B[h]!==K[p]){if(h!==1||p!==1)do if(h--,p--,0>p||B[h]!==K[p]){var ae=`
`+B[h].replace(" at new "," at ");return e.displayName&&ae.includes("<anonymous>")&&(ae=ae.replace("<anonymous>",e.displayName)),ae}while(1<=h&&0<=p);break}}}finally{qn=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Yn(s):""}function wn(e,n){switch(e.tag){case 26:case 27:case 5:return Yn(e.type);case 16:return Yn("Lazy");case 13:return e.child!==n&&n!==null?Yn("Suspense Fallback"):Yn("Suspense");case 19:return Yn("SuspenseList");case 0:case 15:return lr(e.type,!1);case 11:return lr(e.type.render,!1);case 1:return lr(e.type,!0);case 31:return Yn("Activity");default:return""}}function St(e){try{var n="",s=null;do n+=wn(e,s),s=e,e=e.return;while(e);return n}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var $e=Object.prototype.hasOwnProperty,Br=c.unstable_scheduleCallback,Ne=c.unstable_cancelCallback,$a=c.unstable_shouldYield,ao=c.unstable_requestPaint,Kt=c.unstable_now,Qs=c.unstable_getCurrentPriorityLevel,Xn=c.unstable_ImmediatePriority,Js=c.unstable_UserBlockingPriority,ii=c.unstable_NormalPriority,Nn=c.unstable_LowPriority,$s=c.unstable_IdlePriority,es=c.log,Fc=c.unstable_setDisableYieldValue,Ft=null,ye=null;function Rt(e){if(typeof es=="function"&&Fc(e),ye&&typeof ye.setStrictMode=="function")try{ye.setStrictMode(Ft,e)}catch{}}var Xe=Math.clz32?Math.clz32:el,Xt=Math.log,Ea=Math.LN2;function el(e){return e>>>=0,e===0?32:31-(Xt(e)/Ea|0)|0}var va=256,rt=262144,Ai=4194304;function Wi(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _a(e,n,s){var h=e.pendingLanes;if(h===0)return 0;var p=0,w=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var R=h&134217727;return R!==0?(h=R&~w,h!==0?p=Wi(h):(_&=R,_!==0?p=Wi(_):s||(s=R&~e,s!==0&&(p=Wi(s))))):(R=h&~w,R!==0?p=Wi(R):_!==0?p=Wi(_):s||(s=h&~e,s!==0&&(p=Wi(s)))),p===0?0:n!==0&&n!==p&&(n&w)===0&&(w=p&-p,s=n&-n,w>=s||w===32&&(s&4194048)!==0)?n:p}function On(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function tl(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function bn(){var e=Ai;return Ai<<=1,(Ai&62914560)===0&&(Ai=4194304),e}function Zi(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function Ki(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ei(e,n,s,h,p,w){var _=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var R=e.entanglements,B=e.expirationTimes,K=e.hiddenUpdates;for(s=_&~s;0<s;){var ae=31-Xe(s),he=1<<ae;R[ae]=0,B[ae]=-1;var J=K[ae];if(J!==null)for(K[ae]=null,ae=0;ae<J.length;ae++){var ne=J[ae];ne!==null&&(ne.lane&=-536870913)}s&=~he}h!==0&&so(e,h,0),w!==0&&p===0&&e.tag!==0&&(e.suspendedLanes|=w&~(_&~n))}function so(e,n,s){e.pendingLanes|=n,e.suspendedLanes&=~n;var h=31-Xe(n);e.entangledLanes|=n,e.entanglements[h]=e.entanglements[h]|1073741824|s&261930}function Qi(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var h=31-Xe(s),p=1<<h;p&n|e[h]&n&&(e[h]|=n),s&=~p}}function ts(e,n){var s=n&-n;return s=(s&42)!==0?1:Cn(s),(s&(e.suspendedLanes|n))!==0?0:s}function Cn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Bi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function jn(){var e=ue.p;return e!==0?e:(e=window.event,e===void 0?32:o1(e.type))}function _e(e,n){var s=ue.p;try{return ue.p=e,n()}finally{ue.p=s}}var Pn=Math.random().toString(36).slice(2),sn="__reactFiber$"+Pn,Ct="__reactProps$"+Pn,ri="__reactContainer$"+Pn,kr="__reactEvents$"+Pn,ns="__reactListeners$"+Pn,vi="__reactHandles$"+Pn,lo="__reactResources$"+Pn,Sa="__reactMarker$"+Pn;function Wn(e){delete e[sn],delete e[Ct],delete e[kr],delete e[ns],delete e[vi]}function Jt(e){var n=e[sn];if(n)return n;for(var s=e.parentNode;s;){if(n=s[ri]||s[sn]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=qd(e);e!==null;){if(s=e[sn])return s;e=qd(e)}return n}e=s,s=e.parentNode}return null}function wt(e){if(e=e[sn]||e[ri]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Ur(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(d(33))}function zn(e){var n=e[lo];return n||(n=e[lo]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function $t(e){e[Sa]=!0}var de=new Set,oo={};function Et(e,n){ai(e,n),ai(e+"Capture",n)}function ai(e,n){for(oo[e]=n,e=0;e<n.length;e++)de.add(n[e])}var Hc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dt={},ft={};function et(e){return $e.call(ft,e)?!0:$e.call(dt,e)?!1:Hc.test(e)?ft[e]=!0:(dt[e]=!0,!1)}function jr(e,n,s){if(et(n))if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var h=n.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+s)}}function Pr(e,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+s)}}function si(e,n,s,h){if(h===null)e.removeAttribute(s);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(n,s,""+h)}}function mt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function ki(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Gc(e,n,s){var h=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var p=h.get,w=h.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return p.call(this)},set:function(_){s=""+_,w.call(this,_)}}),Object.defineProperty(e,n,{enumerable:h.enumerable}),{getValue:function(){return s},setValue:function(_){s=""+_},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Gt(e){if(!e._valueTracker){var n=ki(e)?"checked":"value";e._valueTracker=Gc(e,n,""+e[n])}}function Ui(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),h="";return e&&(h=ki(e)?e.checked?"true":"false":e.value),e=h,e!==s?(n.setValue(e),!0):!1}function is(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var zr=/[\n"\\]/g;function Qe(e){return e.replace(zr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function hn(e,n,s,h,p,w,_,R){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),n!=null?_==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+mt(n)):e.value!==""+mt(n)&&(e.value=""+mt(n)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),n!=null?M(e,_,mt(n)):s!=null?M(e,_,mt(s)):h!=null&&e.removeAttribute("value"),p==null&&w!=null&&(e.defaultChecked=!!w),p!=null&&(e.checked=p&&typeof p!="function"&&typeof p!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?e.name=""+mt(R):e.removeAttribute("name")}function q(e,n,s,h,p,w,_,R){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(e.type=w),n!=null||s!=null){if(!(w!=="submit"&&w!=="reset"||n!=null)){Gt(e);return}s=s!=null?""+mt(s):"",n=n!=null?""+mt(n):s,R||n===e.value||(e.value=n),e.defaultValue=n}h=h??p,h=typeof h!="function"&&typeof h!="symbol"&&!!h,e.checked=R?e.checked:!!h,e.defaultChecked=!!h,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),Gt(e)}function M(e,n,s){n==="number"&&is(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Ie(e,n,s,h){if(e=e.options,n){n={};for(var p=0;p<s.length;p++)n["$"+s[p]]=!0;for(s=0;s<e.length;s++)p=n.hasOwnProperty("$"+e[s].value),e[s].selected!==p&&(e[s].selected=p),p&&h&&(e[s].defaultSelected=!0)}else{for(s=""+mt(s),n=null,p=0;p<e.length;p++){if(e[p].value===s){e[p].selected=!0,h&&(e[p].defaultSelected=!0);return}n!==null||e[p].disabled||(n=e[p])}n!==null&&(n.selected=!0)}}function ln(e,n,s){if(n!=null&&(n=""+mt(n),n!==e.value&&(e.value=n),s==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=s!=null?""+mt(s):""}function Fn(e,n,s,h){if(n==null){if(h!=null){if(s!=null)throw Error(d(92));if(ie(h)){if(1<h.length)throw Error(d(93));h=h[0]}s=h}s==null&&(s=""),n=s}s=mt(n),e.defaultValue=s,h=e.textContent,h===s&&h!==""&&h!==null&&(e.value=h),Gt(e)}function Fr(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var nl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Hn(e,n,s){var h=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?h?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":h?e.setProperty(n,s):typeof s!="number"||s===0||nl.has(n)?n==="float"?e.cssFloat=s:e[n]=(""+s).trim():e[n]=s+"px"}function Me(e,n,s){if(n!=null&&typeof n!="object")throw Error(d(62));if(e=e.style,s!=null){for(var h in s)!s.hasOwnProperty(h)||n!=null&&n.hasOwnProperty(h)||(h.indexOf("--")===0?e.setProperty(h,""):h==="float"?e.cssFloat="":e[h]="");for(var p in n)h=n[p],n.hasOwnProperty(p)&&s[p]!==h&&Hn(e,p,h)}else for(var w in n)n.hasOwnProperty(w)&&Hn(e,w,n[w])}function kt(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var co=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vc=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Hr(e){return Vc.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Zn(){}var Ca=null;function il(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Vt=null,_i=null;function ji(e){var n=wt(e);if(n&&(e=n.stateNode)){var s=e[Ct]||null;e:switch(e=n.stateNode,n.type){case"input":if(hn(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Qe(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var h=s[n];if(h!==e&&h.form===e.form){var p=h[Ct]||null;if(!p)throw Error(d(90));hn(h,p.value,p.defaultValue,p.defaultValue,p.checked,p.defaultChecked,p.type,p.name)}}for(n=0;n<s.length;n++)h=s[n],h.form===e.form&&Ui(h)}break e;case"textarea":ln(e,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&Ie(e,!!s.multiple,n,!1)}}}var ke=!1;function uo(e,n,s){if(ke)return e(n,s);ke=!0;try{var h=e(n);return h}finally{if(ke=!1,(Vt!==null||_i!==null)&&(nc(),Vt&&(n=Vt,e=_i,_i=Vt=null,ji(n),e)))for(n=0;n<e.length;n++)ji(e[n])}}function He(e,n){var s=e.stateNode;if(s===null)return null;var h=s[Ct]||null;if(h===null)return null;s=h[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(d(231,n,typeof s));return s}var Ut=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),rl=!1;if(Ut)try{var or={};Object.defineProperty(or,"passive",{get:function(){rl=!0}}),window.addEventListener("test",or,or),window.removeEventListener("test",or,or)}catch{rl=!1}var Pi=null,zi=null,rs=null;function Gr(){if(rs)return rs;var e,n=zi,s=n.length,h,p="value"in Pi?Pi.value:Pi.textContent,w=p.length;for(e=0;e<s&&n[e]===p[e];e++);var _=s-e;for(h=1;h<=_&&n[s-h]===p[w-h];h++);return rs=p.slice(e,1<h?1-h:void 0)}function Ji(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function $i(){return!0}function al(){return!1}function fn(e){function n(s,h,p,w,_){this._reactName=s,this._targetInst=p,this.type=h,this.nativeEvent=w,this.target=_,this.currentTarget=null;for(var R in e)e.hasOwnProperty(R)&&(s=e[R],this[R]=s?s(w):w[R]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?$i:al,this.isPropagationStopped=al,this}return D(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=$i)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=$i)},persist:function(){},isPersistent:$i}),n}var li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},An=fn(li),Vr=D({},li,{view:0,detail:0}),ho=fn(Vr),as,sl,Ta,ss=D({},Vr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Na,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ta&&(Ta&&e.type==="mousemove"?(as=e.screenX-Ta.screenX,sl=e.screenY-Ta.screenY):sl=as=0,Ta=e),as)},movementY:function(e){return"movementY"in e?e.movementY:sl}}),bt=fn(ss),fo=D({},ss,{dataTransfer:0}),ls=fn(fo),er=D({},Vr,{relatedTarget:0}),ll=fn(er),ee=D({},li,{animationName:0,elapsedTime:0,pseudoElement:0}),We=fn(ee),En=D({},li,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),os=fn(En),go=D({},li,{data:0}),mo=fn(go),Yc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ol={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function on(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=ol[e])?!!n[e]:!1}function Na(){return on}var Wt=D({},Vr,{key:function(e){if(e.key){var n=Yc[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Ji(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?qc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Na,charCode:function(e){return e.type==="keypress"?Ji(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ji(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),cs=fn(Wt),cr=D({},ss,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),vt=fn(cr),Ue=D({},Vr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Na}),Xc=fn(Ue),jt=D({},li,{propertyName:0,elapsedTime:0,pseudoElement:0}),ur=fn(jt),Yr=D({},ss,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Wc=fn(Yr),Si=D({},li,{newState:0,oldState:0}),cl=fn(Si),po=[9,13,27,32],Oa=Ut&&"CompositionEvent"in window,qr=null;Ut&&"documentMode"in document&&(qr=document.documentMode);var xo=Ut&&"TextEvent"in window&&!qr,yo=Ut&&(!Oa||qr&&8<qr&&11>=qr),hr=" ",us=!1;function wo(e,n){switch(e){case"keyup":return po.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xr(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Wr=!1;function tr(e,n){switch(e){case"compositionend":return Xr(n);case"keypress":return n.which!==32?null:(us=!0,hr);case"textInput":return e=n.data,e===hr&&us?null:e;default:return null}}function hs(e,n){if(Wr)return e==="compositionend"||!Oa&&wo(e,n)?(e=Gr(),rs=zi=Pi=null,Wr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return yo&&n.locale!=="ko"?null:n.data;default:return null}}var Kn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ul(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Kn[e.type]:n==="textarea"}function oi(e,n,s,h){Vt?_i?_i.push(h):_i=[h]:Vt=h,n=cc(n,"onChange"),0<n.length&&(s=new An("onChange","change",null,s,h),e.push({event:s,listeners:n}))}var Ia=null,fr=null;function Zc(e){Dd(e,0)}function Ra(e){var n=Ur(e);if(Ui(n))return e}function ci(e,n){if(e==="change")return n}var bo=!1;if(Ut){var Da;if(Ut){var dr="oninput"in document;if(!dr){var at=document.createElement("div");at.setAttribute("oninput","return;"),dr=typeof at.oninput=="function"}Da=dr}else Da=!1;bo=Da&&(!document.documentMode||9<document.documentMode)}function Ma(){Ia&&(Ia.detachEvent("onpropertychange",T),fr=Ia=null)}function T(e){if(e.propertyName==="value"&&Ra(fr)){var n=[];oi(n,fr,e,il(e)),uo(Zc,n)}}function t(e,n,s){e==="focusin"?(Ma(),Ia=n,fr=s,Ia.attachEvent("onpropertychange",T)):e==="focusout"&&Ma()}function i(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Ra(fr)}function a(e,n){if(e==="click")return Ra(n)}function o(e,n){if(e==="input"||e==="change")return Ra(n)}function u(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var f=typeof Object.is=="function"?Object.is:u;function g(e,n){if(f(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),h=Object.keys(n);if(s.length!==h.length)return!1;for(h=0;h<s.length;h++){var p=s[h];if(!$e.call(n,p)||!f(e[p],n[p]))return!1}return!0}function y(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function b(e,n){var s=y(e);e=0;for(var h;s;){if(s.nodeType===3){if(h=e+s.textContent.length,e<=n&&h>=n)return{node:s,offset:n-e};e=h}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=y(s)}}function v(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?v(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function N(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=is(e.document);n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=is(e.document)}return n}function O(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var L=Ut&&"documentMode"in document&&11>=document.documentMode,k=null,j=null,V=null,$=!1;function xe(e,n,s){var h=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;$||k==null||k!==is(h)||(h=k,"selectionStart"in h&&O(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),V&&g(V,h)||(V=h,h=cc(j,"onSelect"),0<h.length&&(n=new An("onSelect","select",null,n,s),e.push({event:n,listeners:h}),n.target=k)))}function pe(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var ge={animationend:pe("Animation","AnimationEnd"),animationiteration:pe("Animation","AnimationIteration"),animationstart:pe("Animation","AnimationStart"),transitionrun:pe("Transition","TransitionRun"),transitionstart:pe("Transition","TransitionStart"),transitioncancel:pe("Transition","TransitionCancel"),transitionend:pe("Transition","TransitionEnd")},Ke={},Ge={};Ut&&(Ge=document.createElement("div").style,"AnimationEvent"in window||(delete ge.animationend.animation,delete ge.animationiteration.animation,delete ge.animationstart.animation),"TransitionEvent"in window||delete ge.transitionend.transition);function en(e){if(Ke[e])return Ke[e];if(!ge[e])return e;var n=ge[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in Ge)return Ke[e]=n[s];return e}var Qn=en("animationend"),In=en("animationiteration"),_t=en("animationstart"),vn=en("transitionrun"),Gn=en("transitionstart"),Zr=en("transitioncancel"),gr=en("transitionend"),Ao=new Map,hl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");hl.push("scrollEnd");function Fi(e,n){Ao.set(e,n),Et(n,[e])}var Eo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Ci=[],fs=0,Kc=0;function vo(){for(var e=fs,n=Kc=fs=0;n<e;){var s=Ci[n];Ci[n++]=null;var h=Ci[n];Ci[n++]=null;var p=Ci[n];Ci[n++]=null;var w=Ci[n];if(Ci[n++]=null,h!==null&&p!==null){var _=h.pending;_===null?p.next=p:(p.next=_.next,_.next=p),h.pending=p}w!==0&&df(s,p,w)}}function _o(e,n,s,h){Ci[fs++]=e,Ci[fs++]=n,Ci[fs++]=s,Ci[fs++]=h,Kc|=h,e.lanes|=h,e=e.alternate,e!==null&&(e.lanes|=h)}function Qc(e,n,s,h){return _o(e,n,s,h),So(e)}function La(e,n){return _o(e,null,null,n),So(e)}function df(e,n,s){e.lanes|=s;var h=e.alternate;h!==null&&(h.lanes|=s);for(var p=!1,w=e.return;w!==null;)w.childLanes|=s,h=w.alternate,h!==null&&(h.childLanes|=s),w.tag===22&&(e=w.stateNode,e===null||e._visibility&1||(p=!0)),e=w,w=w.return;return e.tag===3?(w=e.stateNode,p&&n!==null&&(p=31-Xe(s),e=w.hiddenUpdates,h=e[p],h===null?e[p]=[n]:h.push(n),n.lane=s|536870912),w):null}function So(e){if(50<Ml)throw Ml=0,sh=null,Error(d(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var ds={};function Ug(e,n,s,h){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ui(e,n,s,h){return new Ug(e,n,s,h)}function Jc(e){return e=e.prototype,!(!e||!e.isReactComponent)}function mr(e,n){var s=e.alternate;return s===null?(s=ui(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function gf(e,n){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,n=s.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function Co(e,n,s,h,p,w){var _=0;if(h=e,typeof e=="function")Jc(e)&&(_=1);else if(typeof e=="string")_=H2(e,s,Ee.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case oe:return e=ui(31,s,n,p),e.elementType=oe,e.lanes=w,e;case W:return Ba(s.children,p,w,n);case se:_=8,p|=24;break;case me:return e=ui(12,s,n,p|2),e.elementType=me,e.lanes=w,e;case Se:return e=ui(13,s,n,p),e.elementType=Se,e.lanes=w,e;case we:return e=ui(19,s,n,p),e.elementType=we,e.lanes=w,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case Y:_=10;break e;case ce:_=9;break e;case fe:_=11;break e;case Q:_=14;break e;case Te:_=16,h=null;break e}_=29,s=Error(d(130,e===null?"null":typeof e,"")),h=null}return n=ui(_,s,n,p),n.elementType=e,n.type=h,n.lanes=w,n}function Ba(e,n,s,h){return e=ui(7,e,h,n),e.lanes=s,e}function $c(e,n,s){return e=ui(6,e,null,n),e.lanes=s,e}function mf(e){var n=ui(18,null,null,0);return n.stateNode=e,n}function eu(e,n,s){return n=ui(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var pf=new WeakMap;function Ti(e,n){if(typeof e=="object"&&e!==null){var s=pf.get(e);return s!==void 0?s:(n={value:e,source:n,stack:St(n)},pf.set(e,n),n)}return{value:e,source:n,stack:St(n)}}var gs=[],ms=0,To=null,fl=0,Ni=[],Oi=0,Kr=null,nr=1,ir="";function pr(e,n){gs[ms++]=fl,gs[ms++]=To,To=e,fl=n}function xf(e,n,s){Ni[Oi++]=nr,Ni[Oi++]=ir,Ni[Oi++]=Kr,Kr=e;var h=nr;e=ir;var p=32-Xe(h)-1;h&=~(1<<p),s+=1;var w=32-Xe(n)+p;if(30<w){var _=p-p%5;w=(h&(1<<_)-1).toString(32),h>>=_,p-=_,nr=1<<32-Xe(n)+p|s<<p|h,ir=w+e}else nr=1<<w|s<<p|h,ir=e}function tu(e){e.return!==null&&(pr(e,1),xf(e,1,0))}function nu(e){for(;e===To;)To=gs[--ms],gs[ms]=null,fl=gs[--ms],gs[ms]=null;for(;e===Kr;)Kr=Ni[--Oi],Ni[Oi]=null,ir=Ni[--Oi],Ni[Oi]=null,nr=Ni[--Oi],Ni[Oi]=null}function yf(e,n){Ni[Oi++]=nr,Ni[Oi++]=ir,Ni[Oi++]=Kr,nr=n.id,ir=n.overflow,Kr=e}var Rn=null,Yt=null,ot=!1,Qr=null,Ii=!1,iu=Error(d(519));function Jr(e){var n=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw dl(Ti(n,e)),iu}function wf(e){var n=e.stateNode,s=e.type,h=e.memoizedProps;switch(n[sn]=e,n[Ct]=h,s){case"dialog":nt("cancel",n),nt("close",n);break;case"iframe":case"object":case"embed":nt("load",n);break;case"video":case"audio":for(s=0;s<Bl.length;s++)nt(Bl[s],n);break;case"source":nt("error",n);break;case"img":case"image":case"link":nt("error",n),nt("load",n);break;case"details":nt("toggle",n);break;case"input":nt("invalid",n),q(n,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":nt("invalid",n);break;case"textarea":nt("invalid",n),Fn(n,h.value,h.defaultValue,h.children)}s=h.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||h.suppressHydrationWarning===!0||kd(n.textContent,s)?(h.popover!=null&&(nt("beforetoggle",n),nt("toggle",n)),h.onScroll!=null&&nt("scroll",n),h.onScrollEnd!=null&&nt("scrollend",n),h.onClick!=null&&(n.onclick=Zn),n=!0):n=!1,n||Jr(e,!0)}function bf(e){for(Rn=e.return;Rn;)switch(Rn.tag){case 5:case 31:case 13:Ii=!1;return;case 27:case 3:Ii=!0;return;default:Rn=Rn.return}}function ps(e){if(e!==Rn)return!1;if(!ot)return bf(e),ot=!0,!1;var n=e.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Ah(e.type,e.memoizedProps)),s=!s),s&&Yt&&Jr(e),bf(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));Yt=Yd(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));Yt=Yd(e)}else n===27?(n=Yt,fa(e.type)?(e=Ch,Ch=null,Yt=e):Yt=n):Yt=Rn?Di(e.stateNode.nextSibling):null;return!0}function ka(){Yt=Rn=null,ot=!1}function ru(){var e=Qr;return e!==null&&(ti===null?ti=e:ti.push.apply(ti,e),Qr=null),e}function dl(e){Qr===null?Qr=[e]:Qr.push(e)}var au=F(null),Ua=null,xr=null;function $r(e,n,s){Ae(au,n._currentValue),n._currentValue=s}function yr(e){e._currentValue=au.current,re(au)}function su(e,n,s){for(;e!==null;){var h=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,h!==null&&(h.childLanes|=n)):h!==null&&(h.childLanes&n)!==n&&(h.childLanes|=n),e===s)break;e=e.return}}function lu(e,n,s,h){var p=e.child;for(p!==null&&(p.return=e);p!==null;){var w=p.dependencies;if(w!==null){var _=p.child;w=w.firstContext;e:for(;w!==null;){var R=w;w=p;for(var B=0;B<n.length;B++)if(R.context===n[B]){w.lanes|=s,R=w.alternate,R!==null&&(R.lanes|=s),su(w.return,s,e),h||(_=null);break e}w=R.next}}else if(p.tag===18){if(_=p.return,_===null)throw Error(d(341));_.lanes|=s,w=_.alternate,w!==null&&(w.lanes|=s),su(_,s,e),_=null}else _=p.child;if(_!==null)_.return=p;else for(_=p;_!==null;){if(_===e){_=null;break}if(p=_.sibling,p!==null){p.return=_.return,_=p;break}_=_.return}p=_}}function xs(e,n,s,h){e=null;for(var p=n,w=!1;p!==null;){if(!w){if((p.flags&524288)!==0)w=!0;else if((p.flags&262144)!==0)break}if(p.tag===10){var _=p.alternate;if(_===null)throw Error(d(387));if(_=_.memoizedProps,_!==null){var R=p.type;f(p.pendingProps.value,_.value)||(e!==null?e.push(R):e=[R])}}else if(p===ct.current){if(_=p.alternate,_===null)throw Error(d(387));_.memoizedState.memoizedState!==p.memoizedState.memoizedState&&(e!==null?e.push(zl):e=[zl])}p=p.return}e!==null&&lu(n,e,s,h),n.flags|=262144}function No(e){for(e=e.firstContext;e!==null;){if(!f(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function ja(e){Ua=e,xr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Dn(e){return Af(Ua,e)}function Oo(e,n){return Ua===null&&ja(e),Af(e,n)}function Af(e,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},xr===null){if(e===null)throw Error(d(308));xr=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else xr=xr.next=n;return s}var jg=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(s,h){e.push(h)}};this.abort=function(){n.aborted=!0,e.forEach(function(s){return s()})}},Pg=c.unstable_scheduleCallback,zg=c.unstable_NormalPriority,dn={$$typeof:Y,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ou(){return{controller:new jg,data:new Map,refCount:0}}function gl(e){e.refCount--,e.refCount===0&&Pg(zg,function(){e.controller.abort()})}var ml=null,cu=0,ys=0,ws=null;function Fg(e,n){if(ml===null){var s=ml=[];cu=0,ys=fh(),ws={status:"pending",value:void 0,then:function(h){s.push(h)}}}return cu++,n.then(Ef,Ef),n}function Ef(){if(--cu===0&&ml!==null){ws!==null&&(ws.status="fulfilled");var e=ml;ml=null,ys=0,ws=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function Hg(e,n){var s=[],h={status:"pending",value:null,reason:null,then:function(p){s.push(p)}};return e.then(function(){h.status="fulfilled",h.value=n;for(var p=0;p<s.length;p++)(0,s[p])(n)},function(p){for(h.status="rejected",h.reason=p,p=0;p<s.length;p++)(0,s[p])(void 0)}),h}var vf=te.S;te.S=function(e,n){sd=Kt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Fg(e,n),vf!==null&&vf(e,n)};var Pa=F(null);function uu(){var e=Pa.current;return e!==null?e:Pt.pooledCache}function Io(e,n){n===null?Ae(Pa,Pa.current):Ae(Pa,n.pool)}function _f(){var e=uu();return e===null?null:{parent:dn._currentValue,pool:e}}var bs=Error(d(460)),hu=Error(d(474)),Ro=Error(d(542)),Do={then:function(){}};function Sf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Cf(e,n,s){switch(s=e[s],s===void 0?e.push(n):s!==n&&(n.then(Zn,Zn),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Nf(e),e;default:if(typeof n.status=="string")n.then(Zn,Zn);else{if(e=Pt,e!==null&&100<e.shellSuspendCounter)throw Error(d(482));e=n,e.status="pending",e.then(function(h){if(n.status==="pending"){var p=n;p.status="fulfilled",p.value=h}},function(h){if(n.status==="pending"){var p=n;p.status="rejected",p.reason=h}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Nf(e),e}throw Fa=n,bs}}function za(e){try{var n=e._init;return n(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Fa=s,bs):s}}var Fa=null;function Tf(){if(Fa===null)throw Error(d(459));var e=Fa;return Fa=null,e}function Nf(e){if(e===bs||e===Ro)throw Error(d(483))}var As=null,pl=0;function Mo(e){var n=pl;return pl+=1,As===null&&(As=[]),Cf(As,e,n)}function xl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Lo(e,n){throw n.$$typeof===U?Error(d(525)):(e=Object.prototype.toString.call(n),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Of(e){function n(G,z){if(e){var Z=G.deletions;Z===null?(G.deletions=[z],G.flags|=16):Z.push(z)}}function s(G,z){if(!e)return null;for(;z!==null;)n(G,z),z=z.sibling;return null}function h(G){for(var z=new Map;G!==null;)G.key!==null?z.set(G.key,G):z.set(G.index,G),G=G.sibling;return z}function p(G,z){return G=mr(G,z),G.index=0,G.sibling=null,G}function w(G,z,Z){return G.index=Z,e?(Z=G.alternate,Z!==null?(Z=Z.index,Z<z?(G.flags|=67108866,z):Z):(G.flags|=67108866,z)):(G.flags|=1048576,z)}function _(G){return e&&G.alternate===null&&(G.flags|=67108866),G}function R(G,z,Z,le){return z===null||z.tag!==6?(z=$c(Z,G.mode,le),z.return=G,z):(z=p(z,Z),z.return=G,z)}function B(G,z,Z,le){var Le=Z.type;return Le===W?ae(G,z,Z.props.children,le,Z.key):z!==null&&(z.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===Te&&za(Le)===z.type)?(z=p(z,Z.props),xl(z,Z),z.return=G,z):(z=Co(Z.type,Z.key,Z.props,null,G.mode,le),xl(z,Z),z.return=G,z)}function K(G,z,Z,le){return z===null||z.tag!==4||z.stateNode.containerInfo!==Z.containerInfo||z.stateNode.implementation!==Z.implementation?(z=eu(Z,G.mode,le),z.return=G,z):(z=p(z,Z.children||[]),z.return=G,z)}function ae(G,z,Z,le,Le){return z===null||z.tag!==7?(z=Ba(Z,G.mode,le,Le),z.return=G,z):(z=p(z,Z),z.return=G,z)}function he(G,z,Z){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=$c(""+z,G.mode,Z),z.return=G,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case P:return Z=Co(z.type,z.key,z.props,null,G.mode,Z),xl(Z,z),Z.return=G,Z;case X:return z=eu(z,G.mode,Z),z.return=G,z;case Te:return z=za(z),he(G,z,Z)}if(ie(z)||ve(z))return z=Ba(z,G.mode,Z,null),z.return=G,z;if(typeof z.then=="function")return he(G,Mo(z),Z);if(z.$$typeof===Y)return he(G,Oo(G,z),Z);Lo(G,z)}return null}function J(G,z,Z,le){var Le=z!==null?z.key:null;if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return Le!==null?null:R(G,z,""+Z,le);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case P:return Z.key===Le?B(G,z,Z,le):null;case X:return Z.key===Le?K(G,z,Z,le):null;case Te:return Z=za(Z),J(G,z,Z,le)}if(ie(Z)||ve(Z))return Le!==null?null:ae(G,z,Z,le,null);if(typeof Z.then=="function")return J(G,z,Mo(Z),le);if(Z.$$typeof===Y)return J(G,z,Oo(G,Z),le);Lo(G,Z)}return null}function ne(G,z,Z,le,Le){if(typeof le=="string"&&le!==""||typeof le=="number"||typeof le=="bigint")return G=G.get(Z)||null,R(z,G,""+le,Le);if(typeof le=="object"&&le!==null){switch(le.$$typeof){case P:return G=G.get(le.key===null?Z:le.key)||null,B(z,G,le,Le);case X:return G=G.get(le.key===null?Z:le.key)||null,K(z,G,le,Le);case Te:return le=za(le),ne(G,z,Z,le,Le)}if(ie(le)||ve(le))return G=G.get(Z)||null,ae(z,G,le,Le,null);if(typeof le.then=="function")return ne(G,z,Z,Mo(le),Le);if(le.$$typeof===Y)return ne(G,z,Z,Oo(z,le),Le);Lo(z,le)}return null}function Oe(G,z,Z,le){for(var Le=null,pt=null,Re=z,Ze=z=0,lt=null;Re!==null&&Ze<Z.length;Ze++){Re.index>Ze?(lt=Re,Re=null):lt=Re.sibling;var xt=J(G,Re,Z[Ze],le);if(xt===null){Re===null&&(Re=lt);break}e&&Re&&xt.alternate===null&&n(G,Re),z=w(xt,z,Ze),pt===null?Le=xt:pt.sibling=xt,pt=xt,Re=lt}if(Ze===Z.length)return s(G,Re),ot&&pr(G,Ze),Le;if(Re===null){for(;Ze<Z.length;Ze++)Re=he(G,Z[Ze],le),Re!==null&&(z=w(Re,z,Ze),pt===null?Le=Re:pt.sibling=Re,pt=Re);return ot&&pr(G,Ze),Le}for(Re=h(Re);Ze<Z.length;Ze++)lt=ne(Re,G,Ze,Z[Ze],le),lt!==null&&(e&&lt.alternate!==null&&Re.delete(lt.key===null?Ze:lt.key),z=w(lt,z,Ze),pt===null?Le=lt:pt.sibling=lt,pt=lt);return e&&Re.forEach(function(xa){return n(G,xa)}),ot&&pr(G,Ze),Le}function je(G,z,Z,le){if(Z==null)throw Error(d(151));for(var Le=null,pt=null,Re=z,Ze=z=0,lt=null,xt=Z.next();Re!==null&&!xt.done;Ze++,xt=Z.next()){Re.index>Ze?(lt=Re,Re=null):lt=Re.sibling;var xa=J(G,Re,xt.value,le);if(xa===null){Re===null&&(Re=lt);break}e&&Re&&xa.alternate===null&&n(G,Re),z=w(xa,z,Ze),pt===null?Le=xa:pt.sibling=xa,pt=xa,Re=lt}if(xt.done)return s(G,Re),ot&&pr(G,Ze),Le;if(Re===null){for(;!xt.done;Ze++,xt=Z.next())xt=he(G,xt.value,le),xt!==null&&(z=w(xt,z,Ze),pt===null?Le=xt:pt.sibling=xt,pt=xt);return ot&&pr(G,Ze),Le}for(Re=h(Re);!xt.done;Ze++,xt=Z.next())xt=ne(Re,G,Ze,xt.value,le),xt!==null&&(e&&xt.alternate!==null&&Re.delete(xt.key===null?Ze:xt.key),z=w(xt,z,Ze),pt===null?Le=xt:pt.sibling=xt,pt=xt);return e&&Re.forEach(function($2){return n(G,$2)}),ot&&pr(G,Ze),Le}function Lt(G,z,Z,le){if(typeof Z=="object"&&Z!==null&&Z.type===W&&Z.key===null&&(Z=Z.props.children),typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case P:e:{for(var Le=Z.key;z!==null;){if(z.key===Le){if(Le=Z.type,Le===W){if(z.tag===7){s(G,z.sibling),le=p(z,Z.props.children),le.return=G,G=le;break e}}else if(z.elementType===Le||typeof Le=="object"&&Le!==null&&Le.$$typeof===Te&&za(Le)===z.type){s(G,z.sibling),le=p(z,Z.props),xl(le,Z),le.return=G,G=le;break e}s(G,z);break}else n(G,z);z=z.sibling}Z.type===W?(le=Ba(Z.props.children,G.mode,le,Z.key),le.return=G,G=le):(le=Co(Z.type,Z.key,Z.props,null,G.mode,le),xl(le,Z),le.return=G,G=le)}return _(G);case X:e:{for(Le=Z.key;z!==null;){if(z.key===Le)if(z.tag===4&&z.stateNode.containerInfo===Z.containerInfo&&z.stateNode.implementation===Z.implementation){s(G,z.sibling),le=p(z,Z.children||[]),le.return=G,G=le;break e}else{s(G,z);break}else n(G,z);z=z.sibling}le=eu(Z,G.mode,le),le.return=G,G=le}return _(G);case Te:return Z=za(Z),Lt(G,z,Z,le)}if(ie(Z))return Oe(G,z,Z,le);if(ve(Z)){if(Le=ve(Z),typeof Le!="function")throw Error(d(150));return Z=Le.call(Z),je(G,z,Z,le)}if(typeof Z.then=="function")return Lt(G,z,Mo(Z),le);if(Z.$$typeof===Y)return Lt(G,z,Oo(G,Z),le);Lo(G,Z)}return typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint"?(Z=""+Z,z!==null&&z.tag===6?(s(G,z.sibling),le=p(z,Z),le.return=G,G=le):(s(G,z),le=$c(Z,G.mode,le),le.return=G,G=le),_(G)):s(G,z)}return function(G,z,Z,le){try{pl=0;var Le=Lt(G,z,Z,le);return As=null,Le}catch(Re){if(Re===bs||Re===Ro)throw Re;var pt=ui(29,Re,null,G.mode);return pt.lanes=le,pt.return=G,pt}}}var Ha=Of(!0),If=Of(!1),ea=!1;function fu(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function du(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function ta(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function na(e,n,s){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,(At&2)!==0){var p=h.pending;return p===null?n.next=n:(n.next=p.next,p.next=n),h.pending=n,n=So(e),df(e,null,s),n}return _o(e,h,n,s),So(e)}function yl(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var h=n.lanes;h&=e.pendingLanes,s|=h,n.lanes=s,Qi(e,s)}}function gu(e,n){var s=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,s===h)){var p=null,w=null;if(s=s.firstBaseUpdate,s!==null){do{var _={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};w===null?p=w=_:w=w.next=_,s=s.next}while(s!==null);w===null?p=w=n:w=w.next=n}else p=w=n;s={baseState:h.baseState,firstBaseUpdate:p,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}var mu=!1;function wl(){if(mu){var e=ws;if(e!==null)throw e}}function bl(e,n,s,h){mu=!1;var p=e.updateQueue;ea=!1;var w=p.firstBaseUpdate,_=p.lastBaseUpdate,R=p.shared.pending;if(R!==null){p.shared.pending=null;var B=R,K=B.next;B.next=null,_===null?w=K:_.next=K,_=B;var ae=e.alternate;ae!==null&&(ae=ae.updateQueue,R=ae.lastBaseUpdate,R!==_&&(R===null?ae.firstBaseUpdate=K:R.next=K,ae.lastBaseUpdate=B))}if(w!==null){var he=p.baseState;_=0,ae=K=B=null,R=w;do{var J=R.lane&-536870913,ne=J!==R.lane;if(ne?(st&J)===J:(h&J)===J){J!==0&&J===ys&&(mu=!0),ae!==null&&(ae=ae.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var Oe=e,je=R;J=n;var Lt=s;switch(je.tag){case 1:if(Oe=je.payload,typeof Oe=="function"){he=Oe.call(Lt,he,J);break e}he=Oe;break e;case 3:Oe.flags=Oe.flags&-65537|128;case 0:if(Oe=je.payload,J=typeof Oe=="function"?Oe.call(Lt,he,J):Oe,J==null)break e;he=D({},he,J);break e;case 2:ea=!0}}J=R.callback,J!==null&&(e.flags|=64,ne&&(e.flags|=8192),ne=p.callbacks,ne===null?p.callbacks=[J]:ne.push(J))}else ne={lane:J,tag:R.tag,payload:R.payload,callback:R.callback,next:null},ae===null?(K=ae=ne,B=he):ae=ae.next=ne,_|=J;if(R=R.next,R===null){if(R=p.shared.pending,R===null)break;ne=R,R=ne.next,ne.next=null,p.lastBaseUpdate=ne,p.shared.pending=null}}while(!0);ae===null&&(B=he),p.baseState=B,p.firstBaseUpdate=K,p.lastBaseUpdate=ae,w===null&&(p.shared.lanes=0),la|=_,e.lanes=_,e.memoizedState=he}}function Rf(e,n){if(typeof e!="function")throw Error(d(191,e));e.call(n)}function Df(e,n){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)Rf(s[e],n)}var Es=F(null),Bo=F(0);function Mf(e,n){e=Tr,Ae(Bo,e),Ae(Es,n),Tr=e|n.baseLanes}function pu(){Ae(Bo,Tr),Ae(Es,Es.current)}function xu(){Tr=Bo.current,re(Es),re(Bo)}var hi=F(null),Ri=null;function ia(e){var n=e.alternate;Ae(cn,cn.current&1),Ae(hi,e),Ri===null&&(n===null||Es.current!==null||n.memoizedState!==null)&&(Ri=e)}function yu(e){Ae(cn,cn.current),Ae(hi,e),Ri===null&&(Ri=e)}function Lf(e){e.tag===22?(Ae(cn,cn.current),Ae(hi,e),Ri===null&&(Ri=e)):ra()}function ra(){Ae(cn,cn.current),Ae(hi,hi.current)}function fi(e){re(hi),Ri===e&&(Ri=null),re(cn)}var cn=F(0);function ko(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||_h(s)||Sh(s)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var wr=0,qe=null,Dt=null,gn=null,Uo=!1,vs=!1,Ga=!1,jo=0,Al=0,_s=null,Gg=0;function tn(){throw Error(d(321))}function wu(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!f(e[s],n[s]))return!1;return!0}function bu(e,n,s,h,p,w){return wr=w,qe=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,te.H=e===null||e.memoizedState===null?x0:Bu,Ga=!1,w=s(h,p),Ga=!1,vs&&(w=kf(n,s,h,p)),Bf(e),w}function Bf(e){te.H=_l;var n=Dt!==null&&Dt.next!==null;if(wr=0,gn=Dt=qe=null,Uo=!1,Al=0,_s=null,n)throw Error(d(300));e===null||mn||(e=e.dependencies,e!==null&&No(e)&&(mn=!0))}function kf(e,n,s,h){qe=e;var p=0;do{if(vs&&(_s=null),Al=0,vs=!1,25<=p)throw Error(d(301));if(p+=1,gn=Dt=null,e.updateQueue!=null){var w=e.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}te.H=y0,w=n(s,h)}while(vs);return w}function Vg(){var e=te.H,n=e.useState()[0];return n=typeof n.then=="function"?El(n):n,e=e.useState()[0],(Dt!==null?Dt.memoizedState:null)!==e&&(qe.flags|=1024),n}function Au(){var e=jo!==0;return jo=0,e}function Eu(e,n,s){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~s}function vu(e){if(Uo){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}Uo=!1}wr=0,gn=Dt=qe=null,vs=!1,Al=jo=0,_s=null}function Vn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gn===null?qe.memoizedState=gn=e:gn=gn.next=e,gn}function un(){if(Dt===null){var e=qe.alternate;e=e!==null?e.memoizedState:null}else e=Dt.next;var n=gn===null?qe.memoizedState:gn.next;if(n!==null)gn=n,Dt=e;else{if(e===null)throw qe.alternate===null?Error(d(467)):Error(d(310));Dt=e,e={memoizedState:Dt.memoizedState,baseState:Dt.baseState,baseQueue:Dt.baseQueue,queue:Dt.queue,next:null},gn===null?qe.memoizedState=gn=e:gn=gn.next=e}return gn}function Po(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function El(e){var n=Al;return Al+=1,_s===null&&(_s=[]),e=Cf(_s,e,n),n=qe,(gn===null?n.memoizedState:gn.next)===null&&(n=n.alternate,te.H=n===null||n.memoizedState===null?x0:Bu),e}function zo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return El(e);if(e.$$typeof===Y)return Dn(e)}throw Error(d(438,String(e)))}function _u(e){var n=null,s=qe.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var h=qe.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(n={data:h.data.map(function(p){return p.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=Po(),qe.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(e),h=0;h<e;h++)s[h]=zt;return n.index++,s}function br(e,n){return typeof n=="function"?n(e):n}function Fo(e){var n=un();return Su(n,Dt,e)}function Su(e,n,s){var h=e.queue;if(h===null)throw Error(d(311));h.lastRenderedReducer=s;var p=e.baseQueue,w=h.pending;if(w!==null){if(p!==null){var _=p.next;p.next=w.next,w.next=_}n.baseQueue=p=w,h.pending=null}if(w=e.baseState,p===null)e.memoizedState=w;else{n=p.next;var R=_=null,B=null,K=n,ae=!1;do{var he=K.lane&-536870913;if(he!==K.lane?(st&he)===he:(wr&he)===he){var J=K.revertLane;if(J===0)B!==null&&(B=B.next={lane:0,revertLane:0,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null}),he===ys&&(ae=!0);else if((wr&J)===J){K=K.next,J===ys&&(ae=!0);continue}else he={lane:0,revertLane:K.revertLane,gesture:null,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},B===null?(R=B=he,_=w):B=B.next=he,qe.lanes|=J,la|=J;he=K.action,Ga&&s(w,he),w=K.hasEagerState?K.eagerState:s(w,he)}else J={lane:he,revertLane:K.revertLane,gesture:K.gesture,action:K.action,hasEagerState:K.hasEagerState,eagerState:K.eagerState,next:null},B===null?(R=B=J,_=w):B=B.next=J,qe.lanes|=he,la|=he;K=K.next}while(K!==null&&K!==n);if(B===null?_=w:B.next=R,!f(w,e.memoizedState)&&(mn=!0,ae&&(s=ws,s!==null)))throw s;e.memoizedState=w,e.baseState=_,e.baseQueue=B,h.lastRenderedState=w}return p===null&&(h.lanes=0),[e.memoizedState,h.dispatch]}function Cu(e){var n=un(),s=n.queue;if(s===null)throw Error(d(311));s.lastRenderedReducer=e;var h=s.dispatch,p=s.pending,w=n.memoizedState;if(p!==null){s.pending=null;var _=p=p.next;do w=e(w,_.action),_=_.next;while(_!==p);f(w,n.memoizedState)||(mn=!0),n.memoizedState=w,n.baseQueue===null&&(n.baseState=w),s.lastRenderedState=w}return[w,h]}function Uf(e,n,s){var h=qe,p=un(),w=ot;if(w){if(s===void 0)throw Error(d(407));s=s()}else s=n();var _=!f((Dt||p).memoizedState,s);if(_&&(p.memoizedState=s,mn=!0),p=p.queue,Ou(zf.bind(null,h,p,e),[e]),p.getSnapshot!==n||_||gn!==null&&gn.memoizedState.tag&1){if(h.flags|=2048,Ss(9,{destroy:void 0},Pf.bind(null,h,p,s,n),null),Pt===null)throw Error(d(349));w||(wr&127)!==0||jf(h,n,s)}return s}function jf(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=qe.updateQueue,n===null?(n=Po(),qe.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Pf(e,n,s,h){n.value=s,n.getSnapshot=h,Ff(n)&&Hf(e)}function zf(e,n,s){return s(function(){Ff(n)&&Hf(e)})}function Ff(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!f(e,s)}catch{return!0}}function Hf(e){var n=La(e,2);n!==null&&ni(n,e,2)}function Tu(e){var n=Vn();if(typeof e=="function"){var s=e;if(e=s(),Ga){Rt(!0);try{s()}finally{Rt(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:e},n}function Gf(e,n,s,h){return e.baseState=s,Su(e,Dt,typeof h=="function"?h:br)}function Yg(e,n,s,h,p){if(Vo(e))throw Error(d(485));if(e=n.action,e!==null){var w={payload:p,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){w.listeners.push(_)}};te.T!==null?s(!0):w.isTransition=!1,h(w),s=n.pending,s===null?(w.next=n.pending=w,Vf(n,w)):(w.next=s.next,n.pending=s.next=w)}}function Vf(e,n){var s=n.action,h=n.payload,p=e.state;if(n.isTransition){var w=te.T,_={};te.T=_;try{var R=s(p,h),B=te.S;B!==null&&B(_,R),Yf(e,n,R)}catch(K){Nu(e,n,K)}finally{w!==null&&_.types!==null&&(w.types=_.types),te.T=w}}else try{w=s(p,h),Yf(e,n,w)}catch(K){Nu(e,n,K)}}function Yf(e,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(h){qf(e,n,h)},function(h){return Nu(e,n,h)}):qf(e,n,s)}function qf(e,n,s){n.status="fulfilled",n.value=s,Xf(n),e.state=s,n=e.pending,n!==null&&(s=n.next,s===n?e.pending=null:(s=s.next,n.next=s,Vf(e,s)))}function Nu(e,n,s){var h=e.pending;if(e.pending=null,h!==null){h=h.next;do n.status="rejected",n.reason=s,Xf(n),n=n.next;while(n!==h)}e.action=null}function Xf(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function Wf(e,n){return n}function Zf(e,n){if(ot){var s=Pt.formState;if(s!==null){e:{var h=qe;if(ot){if(Yt){t:{for(var p=Yt,w=Ii;p.nodeType!==8;){if(!w){p=null;break t}if(p=Di(p.nextSibling),p===null){p=null;break t}}w=p.data,p=w==="F!"||w==="F"?p:null}if(p){Yt=Di(p.nextSibling),h=p.data==="F!";break e}}Jr(h)}h=!1}h&&(n=s[0])}}return s=Vn(),s.memoizedState=s.baseState=n,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Wf,lastRenderedState:n},s.queue=h,s=g0.bind(null,qe,h),h.dispatch=s,h=Tu(!1),w=Lu.bind(null,qe,!1,h.queue),h=Vn(),p={state:n,dispatch:null,action:e,pending:null},h.queue=p,s=Yg.bind(null,qe,p,w,s),p.dispatch=s,h.memoizedState=e,[n,s,!1]}function Kf(e){var n=un();return Qf(n,Dt,e)}function Qf(e,n,s){if(n=Su(e,n,Wf)[0],e=Fo(br)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var h=El(n)}catch(_){throw _===bs?Ro:_}else h=n;n=un();var p=n.queue,w=p.dispatch;return s!==n.memoizedState&&(qe.flags|=2048,Ss(9,{destroy:void 0},qg.bind(null,p,s),null)),[h,w,e]}function qg(e,n){e.action=n}function Jf(e){var n=un(),s=Dt;if(s!==null)return Qf(n,s,e);un(),n=n.memoizedState,s=un();var h=s.queue.dispatch;return s.memoizedState=e,[n,h,!1]}function Ss(e,n,s,h){return e={tag:e,create:s,deps:h,inst:n,next:null},n=qe.updateQueue,n===null&&(n=Po(),qe.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=e.next=e:(h=s.next,s.next=e,e.next=h,n.lastEffect=e),e}function $f(){return un().memoizedState}function Ho(e,n,s,h){var p=Vn();qe.flags|=e,p.memoizedState=Ss(1|n,{destroy:void 0},s,h===void 0?null:h)}function Go(e,n,s,h){var p=un();h=h===void 0?null:h;var w=p.memoizedState.inst;Dt!==null&&h!==null&&wu(h,Dt.memoizedState.deps)?p.memoizedState=Ss(n,w,s,h):(qe.flags|=e,p.memoizedState=Ss(1|n,w,s,h))}function e0(e,n){Ho(8390656,8,e,n)}function Ou(e,n){Go(2048,8,e,n)}function Xg(e){qe.flags|=4;var n=qe.updateQueue;if(n===null)n=Po(),qe.updateQueue=n,n.events=[e];else{var s=n.events;s===null?n.events=[e]:s.push(e)}}function t0(e){var n=un().memoizedState;return Xg({ref:n,nextImpl:e}),function(){if((At&2)!==0)throw Error(d(440));return n.impl.apply(void 0,arguments)}}function n0(e,n){return Go(4,2,e,n)}function i0(e,n){return Go(4,4,e,n)}function r0(e,n){if(typeof n=="function"){e=e();var s=n(e);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function a0(e,n,s){s=s!=null?s.concat([e]):null,Go(4,4,r0.bind(null,n,e),s)}function Iu(){}function s0(e,n){var s=un();n=n===void 0?null:n;var h=s.memoizedState;return n!==null&&wu(n,h[1])?h[0]:(s.memoizedState=[e,n],e)}function l0(e,n){var s=un();n=n===void 0?null:n;var h=s.memoizedState;if(n!==null&&wu(n,h[1]))return h[0];if(h=e(),Ga){Rt(!0);try{e()}finally{Rt(!1)}}return s.memoizedState=[h,n],h}function Ru(e,n,s){return s===void 0||(wr&1073741824)!==0&&(st&261930)===0?e.memoizedState=n:(e.memoizedState=s,e=od(),qe.lanes|=e,la|=e,s)}function o0(e,n,s,h){return f(s,n)?s:Es.current!==null?(e=Ru(e,s,h),f(e,n)||(mn=!0),e):(wr&42)===0||(wr&1073741824)!==0&&(st&261930)===0?(mn=!0,e.memoizedState=s):(e=od(),qe.lanes|=e,la|=e,n)}function c0(e,n,s,h,p){var w=ue.p;ue.p=w!==0&&8>w?w:8;var _=te.T,R={};te.T=R,Lu(e,!1,n,s);try{var B=p(),K=te.S;if(K!==null&&K(R,B),B!==null&&typeof B=="object"&&typeof B.then=="function"){var ae=Hg(B,h);vl(e,n,ae,mi(e))}else vl(e,n,h,mi(e))}catch(he){vl(e,n,{then:function(){},status:"rejected",reason:he},mi())}finally{ue.p=w,_!==null&&R.types!==null&&(_.types=R.types),te.T=_}}function Wg(){}function Du(e,n,s,h){if(e.tag!==5)throw Error(d(476));var p=u0(e).queue;c0(e,p,n,Be,s===null?Wg:function(){return h0(e),s(h)})}function u0(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:Be,baseState:Be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:Be},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:br,lastRenderedState:s},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function h0(e){var n=u0(e);n.next===null&&(n=e.alternate.memoizedState),vl(e,n.next.queue,{},mi())}function Mu(){return Dn(zl)}function f0(){return un().memoizedState}function d0(){return un().memoizedState}function Zg(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var s=mi();e=ta(s);var h=na(n,e,s);h!==null&&(ni(h,n,s),yl(h,n,s)),n={cache:ou()},e.payload=n;return}n=n.return}}function Kg(e,n,s){var h=mi();s={lane:h,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Vo(e)?m0(n,s):(s=Qc(e,n,s,h),s!==null&&(ni(s,e,h),p0(s,n,h)))}function g0(e,n,s){var h=mi();vl(e,n,s,h)}function vl(e,n,s,h){var p={lane:h,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Vo(e))m0(n,p);else{var w=e.alternate;if(e.lanes===0&&(w===null||w.lanes===0)&&(w=n.lastRenderedReducer,w!==null))try{var _=n.lastRenderedState,R=w(_,s);if(p.hasEagerState=!0,p.eagerState=R,f(R,_))return _o(e,n,p,0),Pt===null&&vo(),!1}catch{}if(s=Qc(e,n,p,h),s!==null)return ni(s,e,h),p0(s,n,h),!0}return!1}function Lu(e,n,s,h){if(h={lane:2,revertLane:fh(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Vo(e)){if(n)throw Error(d(479))}else n=Qc(e,s,h,2),n!==null&&ni(n,e,2)}function Vo(e){var n=e.alternate;return e===qe||n!==null&&n===qe}function m0(e,n){vs=Uo=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function p0(e,n,s){if((s&4194048)!==0){var h=n.lanes;h&=e.pendingLanes,s|=h,n.lanes=s,Qi(e,s)}}var _l={readContext:Dn,use:zo,useCallback:tn,useContext:tn,useEffect:tn,useImperativeHandle:tn,useLayoutEffect:tn,useInsertionEffect:tn,useMemo:tn,useReducer:tn,useRef:tn,useState:tn,useDebugValue:tn,useDeferredValue:tn,useTransition:tn,useSyncExternalStore:tn,useId:tn,useHostTransitionStatus:tn,useFormState:tn,useActionState:tn,useOptimistic:tn,useMemoCache:tn,useCacheRefresh:tn};_l.useEffectEvent=tn;var x0={readContext:Dn,use:zo,useCallback:function(e,n){return Vn().memoizedState=[e,n===void 0?null:n],e},useContext:Dn,useEffect:e0,useImperativeHandle:function(e,n,s){s=s!=null?s.concat([e]):null,Ho(4194308,4,r0.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Ho(4194308,4,e,n)},useInsertionEffect:function(e,n){Ho(4,2,e,n)},useMemo:function(e,n){var s=Vn();n=n===void 0?null:n;var h=e();if(Ga){Rt(!0);try{e()}finally{Rt(!1)}}return s.memoizedState=[h,n],h},useReducer:function(e,n,s){var h=Vn();if(s!==void 0){var p=s(n);if(Ga){Rt(!0);try{s(n)}finally{Rt(!1)}}}else p=n;return h.memoizedState=h.baseState=p,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:p},h.queue=e,e=e.dispatch=Kg.bind(null,qe,e),[h.memoizedState,e]},useRef:function(e){var n=Vn();return e={current:e},n.memoizedState=e},useState:function(e){e=Tu(e);var n=e.queue,s=g0.bind(null,qe,n);return n.dispatch=s,[e.memoizedState,s]},useDebugValue:Iu,useDeferredValue:function(e,n){var s=Vn();return Ru(s,e,n)},useTransition:function(){var e=Tu(!1);return e=c0.bind(null,qe,e.queue,!0,!1),Vn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,s){var h=qe,p=Vn();if(ot){if(s===void 0)throw Error(d(407));s=s()}else{if(s=n(),Pt===null)throw Error(d(349));(st&127)!==0||jf(h,n,s)}p.memoizedState=s;var w={value:s,getSnapshot:n};return p.queue=w,e0(zf.bind(null,h,w,e),[e]),h.flags|=2048,Ss(9,{destroy:void 0},Pf.bind(null,h,w,s,n),null),s},useId:function(){var e=Vn(),n=Pt.identifierPrefix;if(ot){var s=ir,h=nr;s=(h&~(1<<32-Xe(h)-1)).toString(32)+s,n="_"+n+"R_"+s,s=jo++,0<s&&(n+="H"+s.toString(32)),n+="_"}else s=Gg++,n="_"+n+"r_"+s.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Mu,useFormState:Zf,useActionState:Zf,useOptimistic:function(e){var n=Vn();n.memoizedState=n.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=Lu.bind(null,qe,!0,s),s.dispatch=n,[e,n]},useMemoCache:_u,useCacheRefresh:function(){return Vn().memoizedState=Zg.bind(null,qe)},useEffectEvent:function(e){var n=Vn(),s={impl:e};return n.memoizedState=s,function(){if((At&2)!==0)throw Error(d(440));return s.impl.apply(void 0,arguments)}}},Bu={readContext:Dn,use:zo,useCallback:s0,useContext:Dn,useEffect:Ou,useImperativeHandle:a0,useInsertionEffect:n0,useLayoutEffect:i0,useMemo:l0,useReducer:Fo,useRef:$f,useState:function(){return Fo(br)},useDebugValue:Iu,useDeferredValue:function(e,n){var s=un();return o0(s,Dt.memoizedState,e,n)},useTransition:function(){var e=Fo(br)[0],n=un().memoizedState;return[typeof e=="boolean"?e:El(e),n]},useSyncExternalStore:Uf,useId:f0,useHostTransitionStatus:Mu,useFormState:Kf,useActionState:Kf,useOptimistic:function(e,n){var s=un();return Gf(s,Dt,e,n)},useMemoCache:_u,useCacheRefresh:d0};Bu.useEffectEvent=t0;var y0={readContext:Dn,use:zo,useCallback:s0,useContext:Dn,useEffect:Ou,useImperativeHandle:a0,useInsertionEffect:n0,useLayoutEffect:i0,useMemo:l0,useReducer:Cu,useRef:$f,useState:function(){return Cu(br)},useDebugValue:Iu,useDeferredValue:function(e,n){var s=un();return Dt===null?Ru(s,e,n):o0(s,Dt.memoizedState,e,n)},useTransition:function(){var e=Cu(br)[0],n=un().memoizedState;return[typeof e=="boolean"?e:El(e),n]},useSyncExternalStore:Uf,useId:f0,useHostTransitionStatus:Mu,useFormState:Jf,useActionState:Jf,useOptimistic:function(e,n){var s=un();return Dt!==null?Gf(s,Dt,e,n):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:_u,useCacheRefresh:d0};y0.useEffectEvent=t0;function ku(e,n,s,h){n=e.memoizedState,s=s(h,n),s=s==null?n:D({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var Uu={enqueueSetState:function(e,n,s){e=e._reactInternals;var h=mi(),p=ta(h);p.payload=n,s!=null&&(p.callback=s),n=na(e,p,h),n!==null&&(ni(n,e,h),yl(n,e,h))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var h=mi(),p=ta(h);p.tag=1,p.payload=n,s!=null&&(p.callback=s),n=na(e,p,h),n!==null&&(ni(n,e,h),yl(n,e,h))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=mi(),h=ta(s);h.tag=2,n!=null&&(h.callback=n),n=na(e,h,s),n!==null&&(ni(n,e,s),yl(n,e,s))}};function w0(e,n,s,h,p,w,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,w,_):n.prototype&&n.prototype.isPureReactComponent?!g(s,h)||!g(p,w):!0}function b0(e,n,s,h){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,h),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,h),n.state!==e&&Uu.enqueueReplaceState(n,n.state,null)}function Va(e,n){var s=n;if("ref"in n){s={};for(var h in n)h!=="ref"&&(s[h]=n[h])}if(e=e.defaultProps){s===n&&(s=D({},s));for(var p in e)s[p]===void 0&&(s[p]=e[p])}return s}function A0(e){Eo(e)}function E0(e){console.error(e)}function v0(e){Eo(e)}function Yo(e,n){try{var s=e.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(h){setTimeout(function(){throw h})}}function _0(e,n,s){try{var h=e.onCaughtError;h(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(p){setTimeout(function(){throw p})}}function ju(e,n,s){return s=ta(s),s.tag=3,s.payload={element:null},s.callback=function(){Yo(e,n)},s}function S0(e){return e=ta(e),e.tag=3,e}function C0(e,n,s,h){var p=s.type.getDerivedStateFromError;if(typeof p=="function"){var w=h.value;e.payload=function(){return p(w)},e.callback=function(){_0(n,s,h)}}var _=s.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){_0(n,s,h),typeof p!="function"&&(oa===null?oa=new Set([this]):oa.add(this));var R=h.stack;this.componentDidCatch(h.value,{componentStack:R!==null?R:""})})}function Qg(e,n,s,h,p){if(s.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(n=s.alternate,n!==null&&xs(n,s,p,!0),s=hi.current,s!==null){switch(s.tag){case 31:case 13:return Ri===null?ic():s.alternate===null&&nn===0&&(nn=3),s.flags&=-257,s.flags|=65536,s.lanes=p,h===Do?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([h]):n.add(h),ch(e,h,p)),!1;case 22:return s.flags|=65536,h===Do?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([h])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([h]):s.add(h)),ch(e,h,p)),!1}throw Error(d(435,s.tag))}return ch(e,h,p),ic(),!1}if(ot)return n=hi.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=p,h!==iu&&(e=Error(d(422),{cause:h}),dl(Ti(e,s)))):(h!==iu&&(n=Error(d(423),{cause:h}),dl(Ti(n,s))),e=e.current.alternate,e.flags|=65536,p&=-p,e.lanes|=p,h=Ti(h,s),p=ju(e.stateNode,h,p),gu(e,p),nn!==4&&(nn=2)),!1;var w=Error(d(520),{cause:h});if(w=Ti(w,s),Dl===null?Dl=[w]:Dl.push(w),nn!==4&&(nn=2),n===null)return!0;h=Ti(h,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,e=p&-p,s.lanes|=e,e=ju(s.stateNode,h,e),gu(s,e),!1;case 1:if(n=s.type,w=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(oa===null||!oa.has(w))))return s.flags|=65536,p&=-p,s.lanes|=p,p=S0(p),C0(p,e,s,h),gu(s,p),!1}s=s.return}while(s!==null);return!1}var Pu=Error(d(461)),mn=!1;function Mn(e,n,s,h){n.child=e===null?If(n,null,s,h):Ha(n,e.child,s,h)}function T0(e,n,s,h,p){s=s.render;var w=n.ref;if("ref"in h){var _={};for(var R in h)R!=="ref"&&(_[R]=h[R])}else _=h;return ja(n),h=bu(e,n,s,_,w,p),R=Au(),e!==null&&!mn?(Eu(e,n,p),Ar(e,n,p)):(ot&&R&&tu(n),n.flags|=1,Mn(e,n,h,p),n.child)}function N0(e,n,s,h,p){if(e===null){var w=s.type;return typeof w=="function"&&!Jc(w)&&w.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=w,O0(e,n,w,h,p)):(e=Co(s.type,null,h,n,n.mode,p),e.ref=n.ref,e.return=n,n.child=e)}if(w=e.child,!Xu(e,p)){var _=w.memoizedProps;if(s=s.compare,s=s!==null?s:g,s(_,h)&&e.ref===n.ref)return Ar(e,n,p)}return n.flags|=1,e=mr(w,h),e.ref=n.ref,e.return=n,n.child=e}function O0(e,n,s,h,p){if(e!==null){var w=e.memoizedProps;if(g(w,h)&&e.ref===n.ref)if(mn=!1,n.pendingProps=h=w,Xu(e,p))(e.flags&131072)!==0&&(mn=!0);else return n.lanes=e.lanes,Ar(e,n,p)}return zu(e,n,s,h,p)}function I0(e,n,s,h){var p=h.children,w=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((n.flags&128)!==0){if(w=w!==null?w.baseLanes|s:s,e!==null){for(h=n.child=e.child,p=0;h!==null;)p=p|h.lanes|h.childLanes,h=h.sibling;h=p&~w}else h=0,n.child=null;return R0(e,n,w,s,h)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Io(n,w!==null?w.cachePool:null),w!==null?Mf(n,w):pu(),Lf(n);else return h=n.lanes=536870912,R0(e,n,w!==null?w.baseLanes|s:s,s,h)}else w!==null?(Io(n,w.cachePool),Mf(n,w),ra(),n.memoizedState=null):(e!==null&&Io(n,null),pu(),ra());return Mn(e,n,p,s),n.child}function Sl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function R0(e,n,s,h,p){var w=uu();return w=w===null?null:{parent:dn._currentValue,pool:w},n.memoizedState={baseLanes:s,cachePool:w},e!==null&&Io(n,null),pu(),Lf(n),e!==null&&xs(e,n,h,!0),n.childLanes=p,null}function qo(e,n){return n=Wo({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function D0(e,n,s){return Ha(n,e.child,null,s),e=qo(n,n.pendingProps),e.flags|=2,fi(n),n.memoizedState=null,e}function Jg(e,n,s){var h=n.pendingProps,p=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(ot){if(h.mode==="hidden")return e=qo(n,h),n.lanes=536870912,Sl(null,e);if(yu(n),(e=Yt)?(e=Vd(e,Ii),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Kr!==null?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},s=mf(e),s.return=n,n.child=s,Rn=n,Yt=null)):e=null,e===null)throw Jr(n);return n.lanes=536870912,null}return qo(n,h)}var w=e.memoizedState;if(w!==null){var _=w.dehydrated;if(yu(n),p)if(n.flags&256)n.flags&=-257,n=D0(e,n,s);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(d(558));else if(mn||xs(e,n,s,!1),p=(s&e.childLanes)!==0,mn||p){if(h=Pt,h!==null&&(_=ts(h,s),_!==0&&_!==w.retryLane))throw w.retryLane=_,La(e,_),ni(h,e,_),Pu;ic(),n=D0(e,n,s)}else e=w.treeContext,Yt=Di(_.nextSibling),Rn=n,ot=!0,Qr=null,Ii=!1,e!==null&&yf(n,e),n=qo(n,h),n.flags|=4096;return n}return e=mr(e.child,{mode:h.mode,children:h.children}),e.ref=n.ref,n.child=e,e.return=n,e}function Xo(e,n){var s=n.ref;if(s===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(d(284));(e===null||e.ref!==s)&&(n.flags|=4194816)}}function zu(e,n,s,h,p){return ja(n),s=bu(e,n,s,h,void 0,p),h=Au(),e!==null&&!mn?(Eu(e,n,p),Ar(e,n,p)):(ot&&h&&tu(n),n.flags|=1,Mn(e,n,s,p),n.child)}function M0(e,n,s,h,p,w){return ja(n),n.updateQueue=null,s=kf(n,h,s,p),Bf(e),h=Au(),e!==null&&!mn?(Eu(e,n,w),Ar(e,n,w)):(ot&&h&&tu(n),n.flags|=1,Mn(e,n,s,w),n.child)}function L0(e,n,s,h,p){if(ja(n),n.stateNode===null){var w=ds,_=s.contextType;typeof _=="object"&&_!==null&&(w=Dn(_)),w=new s(h,w),n.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=Uu,n.stateNode=w,w._reactInternals=n,w=n.stateNode,w.props=h,w.state=n.memoizedState,w.refs={},fu(n),_=s.contextType,w.context=typeof _=="object"&&_!==null?Dn(_):ds,w.state=n.memoizedState,_=s.getDerivedStateFromProps,typeof _=="function"&&(ku(n,s,_,h),w.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(_=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),_!==w.state&&Uu.enqueueReplaceState(w,w.state,null),bl(n,h,w,p),wl(),w.state=n.memoizedState),typeof w.componentDidMount=="function"&&(n.flags|=4194308),h=!0}else if(e===null){w=n.stateNode;var R=n.memoizedProps,B=Va(s,R);w.props=B;var K=w.context,ae=s.contextType;_=ds,typeof ae=="object"&&ae!==null&&(_=Dn(ae));var he=s.getDerivedStateFromProps;ae=typeof he=="function"||typeof w.getSnapshotBeforeUpdate=="function",R=n.pendingProps!==R,ae||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R||K!==_)&&b0(n,w,h,_),ea=!1;var J=n.memoizedState;w.state=J,bl(n,h,w,p),wl(),K=n.memoizedState,R||J!==K||ea?(typeof he=="function"&&(ku(n,s,he,h),K=n.memoizedState),(B=ea||w0(n,s,B,h,J,K,_))?(ae||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(n.flags|=4194308)):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=h,n.memoizedState=K),w.props=h,w.state=K,w.context=_,h=B):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),h=!1)}else{w=n.stateNode,du(e,n),_=n.memoizedProps,ae=Va(s,_),w.props=ae,he=n.pendingProps,J=w.context,K=s.contextType,B=ds,typeof K=="object"&&K!==null&&(B=Dn(K)),R=s.getDerivedStateFromProps,(K=typeof R=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(_!==he||J!==B)&&b0(n,w,h,B),ea=!1,J=n.memoizedState,w.state=J,bl(n,h,w,p),wl();var ne=n.memoizedState;_!==he||J!==ne||ea||e!==null&&e.dependencies!==null&&No(e.dependencies)?(typeof R=="function"&&(ku(n,s,R,h),ne=n.memoizedState),(ae=ea||w0(n,s,ae,h,J,ne,B)||e!==null&&e.dependencies!==null&&No(e.dependencies))?(K||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,ne,B),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,ne,B)),typeof w.componentDidUpdate=="function"&&(n.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof w.componentDidUpdate!="function"||_===e.memoizedProps&&J===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&J===e.memoizedState||(n.flags|=1024),n.memoizedProps=h,n.memoizedState=ne),w.props=h,w.state=ne,w.context=B,h=ae):(typeof w.componentDidUpdate!="function"||_===e.memoizedProps&&J===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&J===e.memoizedState||(n.flags|=1024),h=!1)}return w=h,Xo(e,n),h=(n.flags&128)!==0,w||h?(w=n.stateNode,s=h&&typeof s.getDerivedStateFromError!="function"?null:w.render(),n.flags|=1,e!==null&&h?(n.child=Ha(n,e.child,null,p),n.child=Ha(n,null,s,p)):Mn(e,n,s,p),n.memoizedState=w.state,e=n.child):e=Ar(e,n,p),e}function B0(e,n,s,h){return ka(),n.flags|=256,Mn(e,n,s,h),n.child}var Fu={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Hu(e){return{baseLanes:e,cachePool:_f()}}function Gu(e,n,s){return e=e!==null?e.childLanes&~s:0,n&&(e|=gi),e}function k0(e,n,s){var h=n.pendingProps,p=!1,w=(n.flags&128)!==0,_;if((_=w)||(_=e!==null&&e.memoizedState===null?!1:(cn.current&2)!==0),_&&(p=!0,n.flags&=-129),_=(n.flags&32)!==0,n.flags&=-33,e===null){if(ot){if(p?ia(n):ra(),(e=Yt)?(e=Vd(e,Ii),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Kr!==null?{id:nr,overflow:ir}:null,retryLane:536870912,hydrationErrors:null},s=mf(e),s.return=n,n.child=s,Rn=n,Yt=null)):e=null,e===null)throw Jr(n);return Sh(e)?n.lanes=32:n.lanes=536870912,null}var R=h.children;return h=h.fallback,p?(ra(),p=n.mode,R=Wo({mode:"hidden",children:R},p),h=Ba(h,p,s,null),R.return=n,h.return=n,R.sibling=h,n.child=R,h=n.child,h.memoizedState=Hu(s),h.childLanes=Gu(e,_,s),n.memoizedState=Fu,Sl(null,h)):(ia(n),Vu(n,R))}var B=e.memoizedState;if(B!==null&&(R=B.dehydrated,R!==null)){if(w)n.flags&256?(ia(n),n.flags&=-257,n=Yu(e,n,s)):n.memoizedState!==null?(ra(),n.child=e.child,n.flags|=128,n=null):(ra(),R=h.fallback,p=n.mode,h=Wo({mode:"visible",children:h.children},p),R=Ba(R,p,s,null),R.flags|=2,h.return=n,R.return=n,h.sibling=R,n.child=h,Ha(n,e.child,null,s),h=n.child,h.memoizedState=Hu(s),h.childLanes=Gu(e,_,s),n.memoizedState=Fu,n=Sl(null,h));else if(ia(n),Sh(R)){if(_=R.nextSibling&&R.nextSibling.dataset,_)var K=_.dgst;_=K,h=Error(d(419)),h.stack="",h.digest=_,dl({value:h,source:null,stack:null}),n=Yu(e,n,s)}else if(mn||xs(e,n,s,!1),_=(s&e.childLanes)!==0,mn||_){if(_=Pt,_!==null&&(h=ts(_,s),h!==0&&h!==B.retryLane))throw B.retryLane=h,La(e,h),ni(_,e,h),Pu;_h(R)||ic(),n=Yu(e,n,s)}else _h(R)?(n.flags|=192,n.child=e.child,n=null):(e=B.treeContext,Yt=Di(R.nextSibling),Rn=n,ot=!0,Qr=null,Ii=!1,e!==null&&yf(n,e),n=Vu(n,h.children),n.flags|=4096);return n}return p?(ra(),R=h.fallback,p=n.mode,B=e.child,K=B.sibling,h=mr(B,{mode:"hidden",children:h.children}),h.subtreeFlags=B.subtreeFlags&65011712,K!==null?R=mr(K,R):(R=Ba(R,p,s,null),R.flags|=2),R.return=n,h.return=n,h.sibling=R,n.child=h,Sl(null,h),h=n.child,R=e.child.memoizedState,R===null?R=Hu(s):(p=R.cachePool,p!==null?(B=dn._currentValue,p=p.parent!==B?{parent:B,pool:B}:p):p=_f(),R={baseLanes:R.baseLanes|s,cachePool:p}),h.memoizedState=R,h.childLanes=Gu(e,_,s),n.memoizedState=Fu,Sl(e.child,h)):(ia(n),s=e.child,e=s.sibling,s=mr(s,{mode:"visible",children:h.children}),s.return=n,s.sibling=null,e!==null&&(_=n.deletions,_===null?(n.deletions=[e],n.flags|=16):_.push(e)),n.child=s,n.memoizedState=null,s)}function Vu(e,n){return n=Wo({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Wo(e,n){return e=ui(22,e,null,n),e.lanes=0,e}function Yu(e,n,s){return Ha(n,e.child,null,s),e=Vu(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function U0(e,n,s){e.lanes|=n;var h=e.alternate;h!==null&&(h.lanes|=n),su(e.return,n,s)}function qu(e,n,s,h,p,w){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:h,tail:s,tailMode:p,treeForkCount:w}:(_.isBackwards=n,_.rendering=null,_.renderingStartTime=0,_.last=h,_.tail=s,_.tailMode=p,_.treeForkCount=w)}function j0(e,n,s){var h=n.pendingProps,p=h.revealOrder,w=h.tail;h=h.children;var _=cn.current,R=(_&2)!==0;if(R?(_=_&1|2,n.flags|=128):_&=1,Ae(cn,_),Mn(e,n,h,s),h=ot?fl:0,!R&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&U0(e,s,n);else if(e.tag===19)U0(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(p){case"forwards":for(s=n.child,p=null;s!==null;)e=s.alternate,e!==null&&ko(e)===null&&(p=s),s=s.sibling;s=p,s===null?(p=n.child,n.child=null):(p=s.sibling,s.sibling=null),qu(n,!1,p,s,w,h);break;case"backwards":case"unstable_legacy-backwards":for(s=null,p=n.child,n.child=null;p!==null;){if(e=p.alternate,e!==null&&ko(e)===null){n.child=p;break}e=p.sibling,p.sibling=s,s=p,p=e}qu(n,!0,s,null,w,h);break;case"together":qu(n,!1,null,null,void 0,h);break;default:n.memoizedState=null}return n.child}function Ar(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),la|=n.lanes,(s&n.childLanes)===0)if(e!==null){if(xs(e,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(d(153));if(n.child!==null){for(e=n.child,s=mr(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=mr(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function Xu(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&No(e)))}function $g(e,n,s){switch(n.tag){case 3:ut(n,n.stateNode.containerInfo),$r(n,dn,e.memoizedState.cache),ka();break;case 27:case 5:Li(n);break;case 4:ut(n,n.stateNode.containerInfo);break;case 10:$r(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,yu(n),null;break;case 13:var h=n.memoizedState;if(h!==null)return h.dehydrated!==null?(ia(n),n.flags|=128,null):(s&n.child.childLanes)!==0?k0(e,n,s):(ia(n),e=Ar(e,n,s),e!==null?e.sibling:null);ia(n);break;case 19:var p=(e.flags&128)!==0;if(h=(s&n.childLanes)!==0,h||(xs(e,n,s,!1),h=(s&n.childLanes)!==0),p){if(h)return j0(e,n,s);n.flags|=128}if(p=n.memoizedState,p!==null&&(p.rendering=null,p.tail=null,p.lastEffect=null),Ae(cn,cn.current),h)break;return null;case 22:return n.lanes=0,I0(e,n,s,n.pendingProps);case 24:$r(n,dn,e.memoizedState.cache)}return Ar(e,n,s)}function P0(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps)mn=!0;else{if(!Xu(e,s)&&(n.flags&128)===0)return mn=!1,$g(e,n,s);mn=(e.flags&131072)!==0}else mn=!1,ot&&(n.flags&1048576)!==0&&xf(n,fl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var h=n.pendingProps;if(e=za(n.elementType),n.type=e,typeof e=="function")Jc(e)?(h=Va(e,h),n.tag=1,n=L0(null,n,e,h,s)):(n.tag=0,n=zu(null,n,e,h,s));else{if(e!=null){var p=e.$$typeof;if(p===fe){n.tag=11,n=T0(null,n,e,h,s);break e}else if(p===Q){n.tag=14,n=N0(null,n,e,h,s);break e}}throw n=gt(e)||e,Error(d(306,n,""))}}return n;case 0:return zu(e,n,n.type,n.pendingProps,s);case 1:return h=n.type,p=Va(h,n.pendingProps),L0(e,n,h,p,s);case 3:e:{if(ut(n,n.stateNode.containerInfo),e===null)throw Error(d(387));h=n.pendingProps;var w=n.memoizedState;p=w.element,du(e,n),bl(n,h,null,s);var _=n.memoizedState;if(h=_.cache,$r(n,dn,h),h!==w.cache&&lu(n,[dn],s,!0),wl(),h=_.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:_.cache},n.updateQueue.baseState=w,n.memoizedState=w,n.flags&256){n=B0(e,n,h,s);break e}else if(h!==p){p=Ti(Error(d(424)),n),dl(p),n=B0(e,n,h,s);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Yt=Di(e.firstChild),Rn=n,ot=!0,Qr=null,Ii=!0,s=If(n,null,h,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ka(),h===p){n=Ar(e,n,s);break e}Mn(e,n,h,s)}n=n.child}return n;case 26:return Xo(e,n),e===null?(s=Kd(n.type,null,n.pendingProps,null))?n.memoizedState=s:ot||(s=n.type,e=n.pendingProps,h=uc(be.current).createElement(s),h[sn]=n,h[Ct]=e,Ln(h,s,e),$t(h),n.stateNode=h):n.memoizedState=Kd(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Li(n),e===null&&ot&&(h=n.stateNode=Xd(n.type,n.pendingProps,be.current),Rn=n,Ii=!0,p=Yt,fa(n.type)?(Ch=p,Yt=Di(h.firstChild)):Yt=p),Mn(e,n,n.pendingProps.children,s),Xo(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&ot&&((p=h=Yt)&&(h=O2(h,n.type,n.pendingProps,Ii),h!==null?(n.stateNode=h,Rn=n,Yt=Di(h.firstChild),Ii=!1,p=!0):p=!1),p||Jr(n)),Li(n),p=n.type,w=n.pendingProps,_=e!==null?e.memoizedProps:null,h=w.children,Ah(p,w)?h=null:_!==null&&Ah(p,_)&&(n.flags|=32),n.memoizedState!==null&&(p=bu(e,n,Vg,null,null,s),zl._currentValue=p),Xo(e,n),Mn(e,n,h,s),n.child;case 6:return e===null&&ot&&((e=s=Yt)&&(s=I2(s,n.pendingProps,Ii),s!==null?(n.stateNode=s,Rn=n,Yt=null,e=!0):e=!1),e||Jr(n)),null;case 13:return k0(e,n,s);case 4:return ut(n,n.stateNode.containerInfo),h=n.pendingProps,e===null?n.child=Ha(n,null,h,s):Mn(e,n,h,s),n.child;case 11:return T0(e,n,n.type,n.pendingProps,s);case 7:return Mn(e,n,n.pendingProps,s),n.child;case 8:return Mn(e,n,n.pendingProps.children,s),n.child;case 12:return Mn(e,n,n.pendingProps.children,s),n.child;case 10:return h=n.pendingProps,$r(n,n.type,h.value),Mn(e,n,h.children,s),n.child;case 9:return p=n.type._context,h=n.pendingProps.children,ja(n),p=Dn(p),h=h(p),n.flags|=1,Mn(e,n,h,s),n.child;case 14:return N0(e,n,n.type,n.pendingProps,s);case 15:return O0(e,n,n.type,n.pendingProps,s);case 19:return j0(e,n,s);case 31:return Jg(e,n,s);case 22:return I0(e,n,s,n.pendingProps);case 24:return ja(n),h=Dn(dn),e===null?(p=uu(),p===null&&(p=Pt,w=ou(),p.pooledCache=w,w.refCount++,w!==null&&(p.pooledCacheLanes|=s),p=w),n.memoizedState={parent:h,cache:p},fu(n),$r(n,dn,p)):((e.lanes&s)!==0&&(du(e,n),bl(n,null,null,s),wl()),p=e.memoizedState,w=n.memoizedState,p.parent!==h?(p={parent:h,cache:h},n.memoizedState=p,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=p),$r(n,dn,h)):(h=w.cache,$r(n,dn,h),h!==p.cache&&lu(n,[dn],s,!0))),Mn(e,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(d(156,n.tag))}function Er(e){e.flags|=4}function Wu(e,n,s,h,p){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(p&335544128)===p)if(e.stateNode.complete)e.flags|=8192;else if(fd())e.flags|=8192;else throw Fa=Do,hu}else e.flags&=-16777217}function z0(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!t1(n))if(fd())e.flags|=8192;else throw Fa=Do,hu}function Zo(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?bn():536870912,e.lanes|=n,Os|=n)}function Cl(e,n){if(!ot)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var h=null;s!==null;)s.alternate!==null&&(h=s),s=s.sibling;h===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function qt(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,h=0;if(n)for(var p=e.child;p!==null;)s|=p.lanes|p.childLanes,h|=p.subtreeFlags&65011712,h|=p.flags&65011712,p.return=e,p=p.sibling;else for(p=e.child;p!==null;)s|=p.lanes|p.childLanes,h|=p.subtreeFlags,h|=p.flags,p.return=e,p=p.sibling;return e.subtreeFlags|=h,e.childLanes=s,n}function e2(e,n,s){var h=n.pendingProps;switch(nu(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return qt(n),null;case 1:return qt(n),null;case 3:return s=n.stateNode,h=null,e!==null&&(h=e.memoizedState.cache),n.memoizedState.cache!==h&&(n.flags|=2048),yr(dn),Bt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ps(n)?Er(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,ru())),qt(n),null;case 26:var p=n.type,w=n.memoizedState;return e===null?(Er(n),w!==null?(qt(n),z0(n,w)):(qt(n),Wu(n,p,null,h,s))):w?w!==e.memoizedState?(Er(n),qt(n),z0(n,w)):(qt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==h&&Er(n),qt(n),Wu(n,p,e,h,s)),null;case 27:if(yn(n),s=be.current,p=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==h&&Er(n);else{if(!h){if(n.stateNode===null)throw Error(d(166));return qt(n),null}e=Ee.current,ps(n)?wf(n):(e=Xd(p,h,s),n.stateNode=e,Er(n))}return qt(n),null;case 5:if(yn(n),p=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==h&&Er(n);else{if(!h){if(n.stateNode===null)throw Error(d(166));return qt(n),null}if(w=Ee.current,ps(n))wf(n);else{var _=uc(be.current);switch(w){case 1:w=_.createElementNS("http://www.w3.org/2000/svg",p);break;case 2:w=_.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;default:switch(p){case"svg":w=_.createElementNS("http://www.w3.org/2000/svg",p);break;case"math":w=_.createElementNS("http://www.w3.org/1998/Math/MathML",p);break;case"script":w=_.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof h.is=="string"?_.createElement("select",{is:h.is}):_.createElement("select"),h.multiple?w.multiple=!0:h.size&&(w.size=h.size);break;default:w=typeof h.is=="string"?_.createElement(p,{is:h.is}):_.createElement(p)}}w[sn]=n,w[Ct]=h;e:for(_=n.child;_!==null;){if(_.tag===5||_.tag===6)w.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===n)break e;for(;_.sibling===null;){if(_.return===null||_.return===n)break e;_=_.return}_.sibling.return=_.return,_=_.sibling}n.stateNode=w;e:switch(Ln(w,p,h),p){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&Er(n)}}return qt(n),Wu(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,s),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==h&&Er(n);else{if(typeof h!="string"&&n.stateNode===null)throw Error(d(166));if(e=be.current,ps(n)){if(e=n.stateNode,s=n.memoizedProps,h=null,p=Rn,p!==null)switch(p.tag){case 27:case 5:h=p.memoizedProps}e[sn]=n,e=!!(e.nodeValue===s||h!==null&&h.suppressHydrationWarning===!0||kd(e.nodeValue,s)),e||Jr(n,!0)}else e=uc(e).createTextNode(h),e[sn]=n,n.stateNode=e}return qt(n),null;case 31:if(s=n.memoizedState,e===null||e.memoizedState!==null){if(h=ps(n),s!==null){if(e===null){if(!h)throw Error(d(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(557));e[sn]=n}else ka(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;qt(n),e=!1}else s=ru(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return n.flags&256?(fi(n),n):(fi(n),null);if((n.flags&128)!==0)throw Error(d(558))}return qt(n),null;case 13:if(h=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(p=ps(n),h!==null&&h.dehydrated!==null){if(e===null){if(!p)throw Error(d(318));if(p=n.memoizedState,p=p!==null?p.dehydrated:null,!p)throw Error(d(317));p[sn]=n}else ka(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;qt(n),p=!1}else p=ru(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=p),p=!0;if(!p)return n.flags&256?(fi(n),n):(fi(n),null)}return fi(n),(n.flags&128)!==0?(n.lanes=s,n):(s=h!==null,e=e!==null&&e.memoizedState!==null,s&&(h=n.child,p=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(p=h.alternate.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==p&&(h.flags|=2048)),s!==e&&s&&(n.child.flags|=8192),Zo(n,n.updateQueue),qt(n),null);case 4:return Bt(),e===null&&ph(n.stateNode.containerInfo),qt(n),null;case 10:return yr(n.type),qt(n),null;case 19:if(re(cn),h=n.memoizedState,h===null)return qt(n),null;if(p=(n.flags&128)!==0,w=h.rendering,w===null)if(p)Cl(h,!1);else{if(nn!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(w=ko(e),w!==null){for(n.flags|=128,Cl(h,!1),e=w.updateQueue,n.updateQueue=e,Zo(n,e),n.subtreeFlags=0,e=s,s=n.child;s!==null;)gf(s,e),s=s.sibling;return Ae(cn,cn.current&1|2),ot&&pr(n,h.treeForkCount),n.child}e=e.sibling}h.tail!==null&&Kt()>ec&&(n.flags|=128,p=!0,Cl(h,!1),n.lanes=4194304)}else{if(!p)if(e=ko(w),e!==null){if(n.flags|=128,p=!0,e=e.updateQueue,n.updateQueue=e,Zo(n,e),Cl(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!ot)return qt(n),null}else 2*Kt()-h.renderingStartTime>ec&&s!==536870912&&(n.flags|=128,p=!0,Cl(h,!1),n.lanes=4194304);h.isBackwards?(w.sibling=n.child,n.child=w):(e=h.last,e!==null?e.sibling=w:n.child=w,h.last=w)}return h.tail!==null?(e=h.tail,h.rendering=e,h.tail=e.sibling,h.renderingStartTime=Kt(),e.sibling=null,s=cn.current,Ae(cn,p?s&1|2:s&1),ot&&pr(n,h.treeForkCount),e):(qt(n),null);case 22:case 23:return fi(n),xu(),h=n.memoizedState!==null,e!==null?e.memoizedState!==null!==h&&(n.flags|=8192):h&&(n.flags|=8192),h?(s&536870912)!==0&&(n.flags&128)===0&&(qt(n),n.subtreeFlags&6&&(n.flags|=8192)):qt(n),s=n.updateQueue,s!==null&&Zo(n,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),h=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(h=n.memoizedState.cachePool.pool),h!==s&&(n.flags|=2048),e!==null&&re(Pa),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),yr(dn),qt(n),null;case 25:return null;case 30:return null}throw Error(d(156,n.tag))}function t2(e,n){switch(nu(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return yr(dn),Bt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return yn(n),null;case 31:if(n.memoizedState!==null){if(fi(n),n.alternate===null)throw Error(d(340));ka()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(fi(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(d(340));ka()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return re(cn),null;case 4:return Bt(),null;case 10:return yr(n.type),null;case 22:case 23:return fi(n),xu(),e!==null&&re(Pa),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return yr(dn),null;case 25:return null;default:return null}}function F0(e,n){switch(nu(n),n.tag){case 3:yr(dn),Bt();break;case 26:case 27:case 5:yn(n);break;case 4:Bt();break;case 31:n.memoizedState!==null&&fi(n);break;case 13:fi(n);break;case 19:re(cn);break;case 10:yr(n.type);break;case 22:case 23:fi(n),xu(),e!==null&&re(Pa);break;case 24:yr(dn)}}function Tl(e,n){try{var s=n.updateQueue,h=s!==null?s.lastEffect:null;if(h!==null){var p=h.next;s=p;do{if((s.tag&e)===e){h=void 0;var w=s.create,_=s.inst;h=w(),_.destroy=h}s=s.next}while(s!==p)}}catch(R){Nt(n,n.return,R)}}function aa(e,n,s){try{var h=n.updateQueue,p=h!==null?h.lastEffect:null;if(p!==null){var w=p.next;h=w;do{if((h.tag&e)===e){var _=h.inst,R=_.destroy;if(R!==void 0){_.destroy=void 0,p=n;var B=s,K=R;try{K()}catch(ae){Nt(p,B,ae)}}}h=h.next}while(h!==w)}}catch(ae){Nt(n,n.return,ae)}}function H0(e){var n=e.updateQueue;if(n!==null){var s=e.stateNode;try{Df(n,s)}catch(h){Nt(e,e.return,h)}}}function G0(e,n,s){s.props=Va(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(h){Nt(e,n,h)}}function Nl(e,n){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var h=e.stateNode;break;case 30:h=e.stateNode;break;default:h=e.stateNode}typeof s=="function"?e.refCleanup=s(h):s.current=h}}catch(p){Nt(e,n,p)}}function rr(e,n){var s=e.ref,h=e.refCleanup;if(s!==null)if(typeof h=="function")try{h()}catch(p){Nt(e,n,p)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(p){Nt(e,n,p)}else s.current=null}function V0(e){var n=e.type,s=e.memoizedProps,h=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&h.focus();break e;case"img":s.src?h.src=s.src:s.srcSet&&(h.srcset=s.srcSet)}}catch(p){Nt(e,e.return,p)}}function Zu(e,n,s){try{var h=e.stateNode;v2(h,e.type,s,n),h[Ct]=n}catch(p){Nt(e,e.return,p)}}function Y0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&fa(e.type)||e.tag===4}function Ku(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Y0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&fa(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Qu(e,n,s){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(e),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Zn));else if(h!==4&&(h===27&&fa(e.type)&&(s=e.stateNode,n=null),e=e.child,e!==null))for(Qu(e,n,s),e=e.sibling;e!==null;)Qu(e,n,s),e=e.sibling}function Ko(e,n,s){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(h!==4&&(h===27&&fa(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Ko(e,n,s),e=e.sibling;e!==null;)Ko(e,n,s),e=e.sibling}function q0(e){var n=e.stateNode,s=e.memoizedProps;try{for(var h=e.type,p=n.attributes;p.length;)n.removeAttributeNode(p[0]);Ln(n,h,s),n[sn]=e,n[Ct]=s}catch(w){Nt(e,e.return,w)}}var vr=!1,pn=!1,Ju=!1,X0=typeof WeakSet=="function"?WeakSet:Set,Tn=null;function n2(e,n){if(e=e.containerInfo,wh=xc,e=N(e),O(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var h=s.getSelection&&s.getSelection();if(h&&h.rangeCount!==0){s=h.anchorNode;var p=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{s.nodeType,w.nodeType}catch{s=null;break e}var _=0,R=-1,B=-1,K=0,ae=0,he=e,J=null;t:for(;;){for(var ne;he!==s||p!==0&&he.nodeType!==3||(R=_+p),he!==w||h!==0&&he.nodeType!==3||(B=_+h),he.nodeType===3&&(_+=he.nodeValue.length),(ne=he.firstChild)!==null;)J=he,he=ne;for(;;){if(he===e)break t;if(J===s&&++K===p&&(R=_),J===w&&++ae===h&&(B=_),(ne=he.nextSibling)!==null)break;he=J,J=he.parentNode}he=ne}s=R===-1||B===-1?null:{start:R,end:B}}else s=null}s=s||{start:0,end:0}}else s=null;for(bh={focusedElem:e,selectionRange:s},xc=!1,Tn=n;Tn!==null;)if(n=Tn,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,Tn=e;else for(;Tn!==null;){switch(n=Tn,w=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)p=e[s],p.ref.impl=p.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&w!==null){e=void 0,s=n,p=w.memoizedProps,w=w.memoizedState,h=s.stateNode;try{var Oe=Va(s.type,p);e=h.getSnapshotBeforeUpdate(Oe,w),h.__reactInternalSnapshotBeforeUpdate=e}catch(je){Nt(s,s.return,je)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,s=e.nodeType,s===9)vh(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":vh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(d(163))}if(e=n.sibling,e!==null){e.return=n.return,Tn=e;break}Tn=n.return}}function W0(e,n,s){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Sr(e,s),h&4&&Tl(5,s);break;case 1:if(Sr(e,s),h&4)if(e=s.stateNode,n===null)try{e.componentDidMount()}catch(_){Nt(s,s.return,_)}else{var p=Va(s.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(p,n,e.__reactInternalSnapshotBeforeUpdate)}catch(_){Nt(s,s.return,_)}}h&64&&H0(s),h&512&&Nl(s,s.return);break;case 3:if(Sr(e,s),h&64&&(e=s.updateQueue,e!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{Df(e,n)}catch(_){Nt(s,s.return,_)}}break;case 27:n===null&&h&4&&q0(s);case 26:case 5:Sr(e,s),n===null&&h&4&&V0(s),h&512&&Nl(s,s.return);break;case 12:Sr(e,s);break;case 31:Sr(e,s),h&4&&Q0(e,s);break;case 13:Sr(e,s),h&4&&J0(e,s),h&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=h2.bind(null,s),R2(e,s))));break;case 22:if(h=s.memoizedState!==null||vr,!h){n=n!==null&&n.memoizedState!==null||pn,p=vr;var w=pn;vr=h,(pn=n)&&!w?Cr(e,s,(s.subtreeFlags&8772)!==0):Sr(e,s),vr=p,pn=w}break;case 30:break;default:Sr(e,s)}}function Z0(e){var n=e.alternate;n!==null&&(e.alternate=null,Z0(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&Wn(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Zt=null,Jn=!1;function _r(e,n,s){for(s=s.child;s!==null;)K0(e,n,s),s=s.sibling}function K0(e,n,s){if(ye&&typeof ye.onCommitFiberUnmount=="function")try{ye.onCommitFiberUnmount(Ft,s)}catch{}switch(s.tag){case 26:pn||rr(s,n),_r(e,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:pn||rr(s,n);var h=Zt,p=Jn;fa(s.type)&&(Zt=s.stateNode,Jn=!1),_r(e,n,s),Ul(s.stateNode),Zt=h,Jn=p;break;case 5:pn||rr(s,n);case 6:if(h=Zt,p=Jn,Zt=null,_r(e,n,s),Zt=h,Jn=p,Zt!==null)if(Jn)try{(Zt.nodeType===9?Zt.body:Zt.nodeName==="HTML"?Zt.ownerDocument.body:Zt).removeChild(s.stateNode)}catch(w){Nt(s,n,w)}else try{Zt.removeChild(s.stateNode)}catch(w){Nt(s,n,w)}break;case 18:Zt!==null&&(Jn?(e=Zt,Hd(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),Us(e)):Hd(Zt,s.stateNode));break;case 4:h=Zt,p=Jn,Zt=s.stateNode.containerInfo,Jn=!0,_r(e,n,s),Zt=h,Jn=p;break;case 0:case 11:case 14:case 15:aa(2,s,n),pn||aa(4,s,n),_r(e,n,s);break;case 1:pn||(rr(s,n),h=s.stateNode,typeof h.componentWillUnmount=="function"&&G0(s,n,h)),_r(e,n,s);break;case 21:_r(e,n,s);break;case 22:pn=(h=pn)||s.memoizedState!==null,_r(e,n,s),pn=h;break;default:_r(e,n,s)}}function Q0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{Us(e)}catch(s){Nt(n,n.return,s)}}}function J0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{Us(e)}catch(s){Nt(n,n.return,s)}}function i2(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new X0),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new X0),n;default:throw Error(d(435,e.tag))}}function Qo(e,n){var s=i2(e);n.forEach(function(h){if(!s.has(h)){s.add(h);var p=f2.bind(null,e,h);h.then(p,p)}})}function $n(e,n){var s=n.deletions;if(s!==null)for(var h=0;h<s.length;h++){var p=s[h],w=e,_=n,R=_;e:for(;R!==null;){switch(R.tag){case 27:if(fa(R.type)){Zt=R.stateNode,Jn=!1;break e}break;case 5:Zt=R.stateNode,Jn=!1;break e;case 3:case 4:Zt=R.stateNode.containerInfo,Jn=!0;break e}R=R.return}if(Zt===null)throw Error(d(160));K0(w,_,p),Zt=null,Jn=!1,w=p.alternate,w!==null&&(w.return=null),p.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)$0(n,e),n=n.sibling}var Hi=null;function $0(e,n){var s=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:$n(n,e),ei(e),h&4&&(aa(3,e,e.return),Tl(3,e),aa(5,e,e.return));break;case 1:$n(n,e),ei(e),h&512&&(pn||s===null||rr(s,s.return)),h&64&&vr&&(e=e.updateQueue,e!==null&&(h=e.callbacks,h!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?h:s.concat(h))));break;case 26:var p=Hi;if($n(n,e),ei(e),h&512&&(pn||s===null||rr(s,s.return)),h&4){var w=s!==null?s.memoizedState:null;if(h=e.memoizedState,s===null)if(h===null)if(e.stateNode===null){e:{h=e.type,s=e.memoizedProps,p=p.ownerDocument||p;t:switch(h){case"title":w=p.getElementsByTagName("title")[0],(!w||w[Sa]||w[sn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=p.createElement(h),p.head.insertBefore(w,p.querySelector("head > title"))),Ln(w,h,s),w[sn]=e,$t(w),h=w;break e;case"link":var _=$d("link","href",p).get(h+(s.href||""));if(_){for(var R=0;R<_.length;R++)if(w=_[R],w.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&w.getAttribute("rel")===(s.rel==null?null:s.rel)&&w.getAttribute("title")===(s.title==null?null:s.title)&&w.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){_.splice(R,1);break t}}w=p.createElement(h),Ln(w,h,s),p.head.appendChild(w);break;case"meta":if(_=$d("meta","content",p).get(h+(s.content||""))){for(R=0;R<_.length;R++)if(w=_[R],w.getAttribute("content")===(s.content==null?null:""+s.content)&&w.getAttribute("name")===(s.name==null?null:s.name)&&w.getAttribute("property")===(s.property==null?null:s.property)&&w.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&w.getAttribute("charset")===(s.charSet==null?null:s.charSet)){_.splice(R,1);break t}}w=p.createElement(h),Ln(w,h,s),p.head.appendChild(w);break;default:throw Error(d(468,h))}w[sn]=e,$t(w),h=w}e.stateNode=h}else e1(p,e.type,e.stateNode);else e.stateNode=Jd(p,h,e.memoizedProps);else w!==h?(w===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):w.count--,h===null?e1(p,e.type,e.stateNode):Jd(p,h,e.memoizedProps)):h===null&&e.stateNode!==null&&Zu(e,e.memoizedProps,s.memoizedProps)}break;case 27:$n(n,e),ei(e),h&512&&(pn||s===null||rr(s,s.return)),s!==null&&h&4&&Zu(e,e.memoizedProps,s.memoizedProps);break;case 5:if($n(n,e),ei(e),h&512&&(pn||s===null||rr(s,s.return)),e.flags&32){p=e.stateNode;try{Fr(p,"")}catch(Oe){Nt(e,e.return,Oe)}}h&4&&e.stateNode!=null&&(p=e.memoizedProps,Zu(e,p,s!==null?s.memoizedProps:p)),h&1024&&(Ju=!0);break;case 6:if($n(n,e),ei(e),h&4){if(e.stateNode===null)throw Error(d(162));h=e.memoizedProps,s=e.stateNode;try{s.nodeValue=h}catch(Oe){Nt(e,e.return,Oe)}}break;case 3:if(dc=null,p=Hi,Hi=hc(n.containerInfo),$n(n,e),Hi=p,ei(e),h&4&&s!==null&&s.memoizedState.isDehydrated)try{Us(n.containerInfo)}catch(Oe){Nt(e,e.return,Oe)}Ju&&(Ju=!1,ed(e));break;case 4:h=Hi,Hi=hc(e.stateNode.containerInfo),$n(n,e),ei(e),Hi=h;break;case 12:$n(n,e),ei(e);break;case 31:$n(n,e),ei(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Qo(e,h)));break;case 13:$n(n,e),ei(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&($o=Kt()),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Qo(e,h)));break;case 22:p=e.memoizedState!==null;var B=s!==null&&s.memoizedState!==null,K=vr,ae=pn;if(vr=K||p,pn=ae||B,$n(n,e),pn=ae,vr=K,ei(e),h&8192)e:for(n=e.stateNode,n._visibility=p?n._visibility&-2:n._visibility|1,p&&(s===null||B||vr||pn||Ya(e)),s=null,n=e;;){if(n.tag===5||n.tag===26){if(s===null){B=s=n;try{if(w=B.stateNode,p)_=w.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{R=B.stateNode;var he=B.memoizedProps.style,J=he!=null&&he.hasOwnProperty("display")?he.display:null;R.style.display=J==null||typeof J=="boolean"?"":(""+J).trim()}}catch(Oe){Nt(B,B.return,Oe)}}}else if(n.tag===6){if(s===null){B=n;try{B.stateNode.nodeValue=p?"":B.memoizedProps}catch(Oe){Nt(B,B.return,Oe)}}}else if(n.tag===18){if(s===null){B=n;try{var ne=B.stateNode;p?Gd(ne,!0):Gd(B.stateNode,!1)}catch(Oe){Nt(B,B.return,Oe)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}h&4&&(h=e.updateQueue,h!==null&&(s=h.retryQueue,s!==null&&(h.retryQueue=null,Qo(e,s))));break;case 19:$n(n,e),ei(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Qo(e,h)));break;case 30:break;case 21:break;default:$n(n,e),ei(e)}}function ei(e){var n=e.flags;if(n&2){try{for(var s,h=e.return;h!==null;){if(Y0(h)){s=h;break}h=h.return}if(s==null)throw Error(d(160));switch(s.tag){case 27:var p=s.stateNode,w=Ku(e);Ko(e,w,p);break;case 5:var _=s.stateNode;s.flags&32&&(Fr(_,""),s.flags&=-33);var R=Ku(e);Ko(e,R,_);break;case 3:case 4:var B=s.stateNode.containerInfo,K=Ku(e);Qu(e,K,B);break;default:throw Error(d(161))}}catch(ae){Nt(e,e.return,ae)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function ed(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;ed(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Sr(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)W0(e,n.alternate,n),n=n.sibling}function Ya(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:aa(4,n,n.return),Ya(n);break;case 1:rr(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&G0(n,n.return,s),Ya(n);break;case 27:Ul(n.stateNode);case 26:case 5:rr(n,n.return),Ya(n);break;case 22:n.memoizedState===null&&Ya(n);break;case 30:Ya(n);break;default:Ya(n)}e=e.sibling}}function Cr(e,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var h=n.alternate,p=e,w=n,_=w.flags;switch(w.tag){case 0:case 11:case 15:Cr(p,w,s),Tl(4,w);break;case 1:if(Cr(p,w,s),h=w,p=h.stateNode,typeof p.componentDidMount=="function")try{p.componentDidMount()}catch(K){Nt(h,h.return,K)}if(h=w,p=h.updateQueue,p!==null){var R=h.stateNode;try{var B=p.shared.hiddenCallbacks;if(B!==null)for(p.shared.hiddenCallbacks=null,p=0;p<B.length;p++)Rf(B[p],R)}catch(K){Nt(h,h.return,K)}}s&&_&64&&H0(w),Nl(w,w.return);break;case 27:q0(w);case 26:case 5:Cr(p,w,s),s&&h===null&&_&4&&V0(w),Nl(w,w.return);break;case 12:Cr(p,w,s);break;case 31:Cr(p,w,s),s&&_&4&&Q0(p,w);break;case 13:Cr(p,w,s),s&&_&4&&J0(p,w);break;case 22:w.memoizedState===null&&Cr(p,w,s),Nl(w,w.return);break;case 30:break;default:Cr(p,w,s)}n=n.sibling}}function $u(e,n){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&gl(s))}function eh(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&gl(e))}function Gi(e,n,s,h){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)td(e,n,s,h),n=n.sibling}function td(e,n,s,h){var p=n.flags;switch(n.tag){case 0:case 11:case 15:Gi(e,n,s,h),p&2048&&Tl(9,n);break;case 1:Gi(e,n,s,h);break;case 3:Gi(e,n,s,h),p&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&gl(e)));break;case 12:if(p&2048){Gi(e,n,s,h),e=n.stateNode;try{var w=n.memoizedProps,_=w.id,R=w.onPostCommit;typeof R=="function"&&R(_,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(B){Nt(n,n.return,B)}}else Gi(e,n,s,h);break;case 31:Gi(e,n,s,h);break;case 13:Gi(e,n,s,h);break;case 23:break;case 22:w=n.stateNode,_=n.alternate,n.memoizedState!==null?w._visibility&2?Gi(e,n,s,h):Ol(e,n):w._visibility&2?Gi(e,n,s,h):(w._visibility|=2,Cs(e,n,s,h,(n.subtreeFlags&10256)!==0||!1)),p&2048&&$u(_,n);break;case 24:Gi(e,n,s,h),p&2048&&eh(n.alternate,n);break;default:Gi(e,n,s,h)}}function Cs(e,n,s,h,p){for(p=p&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var w=e,_=n,R=s,B=h,K=_.flags;switch(_.tag){case 0:case 11:case 15:Cs(w,_,R,B,p),Tl(8,_);break;case 23:break;case 22:var ae=_.stateNode;_.memoizedState!==null?ae._visibility&2?Cs(w,_,R,B,p):Ol(w,_):(ae._visibility|=2,Cs(w,_,R,B,p)),p&&K&2048&&$u(_.alternate,_);break;case 24:Cs(w,_,R,B,p),p&&K&2048&&eh(_.alternate,_);break;default:Cs(w,_,R,B,p)}n=n.sibling}}function Ol(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=e,h=n,p=h.flags;switch(h.tag){case 22:Ol(s,h),p&2048&&$u(h.alternate,h);break;case 24:Ol(s,h),p&2048&&eh(h.alternate,h);break;default:Ol(s,h)}n=n.sibling}}var Il=8192;function Ts(e,n,s){if(e.subtreeFlags&Il)for(e=e.child;e!==null;)nd(e,n,s),e=e.sibling}function nd(e,n,s){switch(e.tag){case 26:Ts(e,n,s),e.flags&Il&&e.memoizedState!==null&&G2(s,Hi,e.memoizedState,e.memoizedProps);break;case 5:Ts(e,n,s);break;case 3:case 4:var h=Hi;Hi=hc(e.stateNode.containerInfo),Ts(e,n,s),Hi=h;break;case 22:e.memoizedState===null&&(h=e.alternate,h!==null&&h.memoizedState!==null?(h=Il,Il=16777216,Ts(e,n,s),Il=h):Ts(e,n,s));break;default:Ts(e,n,s)}}function id(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Rl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var h=n[s];Tn=h,ad(h,e)}id(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)rd(e),e=e.sibling}function rd(e){switch(e.tag){case 0:case 11:case 15:Rl(e),e.flags&2048&&aa(9,e,e.return);break;case 3:Rl(e);break;case 12:Rl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Jo(e)):Rl(e);break;default:Rl(e)}}function Jo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var h=n[s];Tn=h,ad(h,e)}id(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:aa(8,n,n.return),Jo(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,Jo(n));break;default:Jo(n)}e=e.sibling}}function ad(e,n){for(;Tn!==null;){var s=Tn;switch(s.tag){case 0:case 11:case 15:aa(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var h=s.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:gl(s.memoizedState.cache)}if(h=s.child,h!==null)h.return=s,Tn=h;else e:for(s=e;Tn!==null;){h=Tn;var p=h.sibling,w=h.return;if(Z0(h),h===s){Tn=null;break e}if(p!==null){p.return=w,Tn=p;break e}Tn=w}}}var r2={getCacheForType:function(e){var n=Dn(dn),s=n.data.get(e);return s===void 0&&(s=e(),n.data.set(e,s)),s},cacheSignal:function(){return Dn(dn).controller.signal}},a2=typeof WeakMap=="function"?WeakMap:Map,At=0,Pt=null,tt=null,st=0,Tt=0,di=null,sa=!1,Ns=!1,th=!1,Tr=0,nn=0,la=0,qa=0,nh=0,gi=0,Os=0,Dl=null,ti=null,ih=!1,$o=0,sd=0,ec=1/0,tc=null,oa=null,_n=0,ca=null,Is=null,Nr=0,rh=0,ah=null,ld=null,Ml=0,sh=null;function mi(){return(At&2)!==0&&st!==0?st&-st:te.T!==null?fh():jn()}function od(){if(gi===0)if((st&536870912)===0||ot){var e=rt;rt<<=1,(rt&3932160)===0&&(rt=262144),gi=e}else gi=536870912;return e=hi.current,e!==null&&(e.flags|=32),gi}function ni(e,n,s){(e===Pt&&(Tt===2||Tt===9)||e.cancelPendingCommit!==null)&&(Rs(e,0),ua(e,st,gi,!1)),Ki(e,s),((At&2)===0||e!==Pt)&&(e===Pt&&((At&2)===0&&(qa|=s),nn===4&&ua(e,st,gi,!1)),ar(e))}function cd(e,n,s){if((At&6)!==0)throw Error(d(327));var h=!s&&(n&127)===0&&(n&e.expiredLanes)===0||On(e,n),p=h?o2(e,n):oh(e,n,!0),w=h;do{if(p===0){Ns&&!h&&ua(e,n,0,!1);break}else{if(s=e.current.alternate,w&&!s2(s)){p=oh(e,n,!1),w=!1;continue}if(p===2){if(w=n,e.errorRecoveryDisabledLanes&w)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){n=_;e:{var R=e;p=Dl;var B=R.current.memoizedState.isDehydrated;if(B&&(Rs(R,_).flags|=256),_=oh(R,_,!1),_!==2){if(th&&!B){R.errorRecoveryDisabledLanes|=w,qa|=w,p=4;break e}w=ti,ti=p,w!==null&&(ti===null?ti=w:ti.push.apply(ti,w))}p=_}if(w=!1,p!==2)continue}}if(p===1){Rs(e,0),ua(e,n,0,!0);break}e:{switch(h=e,w=p,w){case 0:case 1:throw Error(d(345));case 4:if((n&4194048)!==n)break;case 6:ua(h,n,gi,!sa);break e;case 2:ti=null;break;case 3:case 5:break;default:throw Error(d(329))}if((n&62914560)===n&&(p=$o+300-Kt(),10<p)){if(ua(h,n,gi,!sa),_a(h,0,!0)!==0)break e;Nr=n,h.timeoutHandle=zd(ud.bind(null,h,s,ti,tc,ih,n,gi,qa,Os,sa,w,"Throttled",-0,0),p);break e}ud(h,s,ti,tc,ih,n,gi,qa,Os,sa,w,null,-0,0)}}break}while(!0);ar(e)}function ud(e,n,s,h,p,w,_,R,B,K,ae,he,J,ne){if(e.timeoutHandle=-1,he=n.subtreeFlags,he&8192||(he&16785408)===16785408){he={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Zn},nd(n,w,he);var Oe=(w&62914560)===w?$o-Kt():(w&4194048)===w?sd-Kt():0;if(Oe=V2(he,Oe),Oe!==null){Nr=w,e.cancelPendingCommit=Oe(yd.bind(null,e,n,w,s,h,p,_,R,B,ae,he,null,J,ne)),ua(e,w,_,!K);return}}yd(e,n,w,s,h,p,_,R,B)}function s2(e){for(var n=e;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var h=0;h<s.length;h++){var p=s[h],w=p.getSnapshot;p=p.value;try{if(!f(w(),p))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function ua(e,n,s,h){n&=~nh,n&=~qa,e.suspendedLanes|=n,e.pingedLanes&=~n,h&&(e.warmLanes|=n),h=e.expirationTimes;for(var p=n;0<p;){var w=31-Xe(p),_=1<<w;h[w]=-1,p&=~_}s!==0&&so(e,s,n)}function nc(){return(At&6)===0?(Ll(0),!1):!0}function lh(){if(tt!==null){if(Tt===0)var e=tt.return;else e=tt,xr=Ua=null,vu(e),As=null,pl=0,e=tt;for(;e!==null;)F0(e.alternate,e),e=e.return;tt=null}}function Rs(e,n){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,C2(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Nr=0,lh(),Pt=e,tt=s=mr(e.current,null),st=n,Tt=0,di=null,sa=!1,Ns=On(e,n),th=!1,Os=gi=nh=qa=la=nn=0,ti=Dl=null,ih=!1,(n&8)!==0&&(n|=n&32);var h=e.entangledLanes;if(h!==0)for(e=e.entanglements,h&=n;0<h;){var p=31-Xe(h),w=1<<p;n|=e[p],h&=~w}return Tr=n,vo(),s}function hd(e,n){qe=null,te.H=_l,n===bs||n===Ro?(n=Tf(),Tt=3):n===hu?(n=Tf(),Tt=4):Tt=n===Pu?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,di=n,tt===null&&(nn=1,Yo(e,Ti(n,e.current)))}function fd(){var e=hi.current;return e===null?!0:(st&4194048)===st?Ri===null:(st&62914560)===st||(st&536870912)!==0?e===Ri:!1}function dd(){var e=te.H;return te.H=_l,e===null?_l:e}function gd(){var e=te.A;return te.A=r2,e}function ic(){nn=4,sa||(st&4194048)!==st&&hi.current!==null||(Ns=!0),(la&134217727)===0&&(qa&134217727)===0||Pt===null||ua(Pt,st,gi,!1)}function oh(e,n,s){var h=At;At|=2;var p=dd(),w=gd();(Pt!==e||st!==n)&&(tc=null,Rs(e,n)),n=!1;var _=nn;e:do try{if(Tt!==0&&tt!==null){var R=tt,B=di;switch(Tt){case 8:lh(),_=6;break e;case 3:case 2:case 9:case 6:hi.current===null&&(n=!0);var K=Tt;if(Tt=0,di=null,Ds(e,R,B,K),s&&Ns){_=0;break e}break;default:K=Tt,Tt=0,di=null,Ds(e,R,B,K)}}l2(),_=nn;break}catch(ae){hd(e,ae)}while(!0);return n&&e.shellSuspendCounter++,xr=Ua=null,At=h,te.H=p,te.A=w,tt===null&&(Pt=null,st=0,vo()),_}function l2(){for(;tt!==null;)md(tt)}function o2(e,n){var s=At;At|=2;var h=dd(),p=gd();Pt!==e||st!==n?(tc=null,ec=Kt()+500,Rs(e,n)):Ns=On(e,n);e:do try{if(Tt!==0&&tt!==null){n=tt;var w=di;t:switch(Tt){case 1:Tt=0,di=null,Ds(e,n,w,1);break;case 2:case 9:if(Sf(w)){Tt=0,di=null,pd(n);break}n=function(){Tt!==2&&Tt!==9||Pt!==e||(Tt=7),ar(e)},w.then(n,n);break e;case 3:Tt=7;break e;case 4:Tt=5;break e;case 7:Sf(w)?(Tt=0,di=null,pd(n)):(Tt=0,di=null,Ds(e,n,w,7));break;case 5:var _=null;switch(tt.tag){case 26:_=tt.memoizedState;case 5:case 27:var R=tt;if(_?t1(_):R.stateNode.complete){Tt=0,di=null;var B=R.sibling;if(B!==null)tt=B;else{var K=R.return;K!==null?(tt=K,rc(K)):tt=null}break t}}Tt=0,di=null,Ds(e,n,w,5);break;case 6:Tt=0,di=null,Ds(e,n,w,6);break;case 8:lh(),nn=6;break e;default:throw Error(d(462))}}c2();break}catch(ae){hd(e,ae)}while(!0);return xr=Ua=null,te.H=h,te.A=p,At=s,tt!==null?0:(Pt=null,st=0,vo(),nn)}function c2(){for(;tt!==null&&!$a();)md(tt)}function md(e){var n=P0(e.alternate,e,Tr);e.memoizedProps=e.pendingProps,n===null?rc(e):tt=n}function pd(e){var n=e,s=n.alternate;switch(n.tag){case 15:case 0:n=M0(s,n,n.pendingProps,n.type,void 0,st);break;case 11:n=M0(s,n,n.pendingProps,n.type.render,n.ref,st);break;case 5:vu(n);default:F0(s,n),n=tt=gf(n,Tr),n=P0(s,n,Tr)}e.memoizedProps=e.pendingProps,n===null?rc(e):tt=n}function Ds(e,n,s,h){xr=Ua=null,vu(n),As=null,pl=0;var p=n.return;try{if(Qg(e,p,n,s,st)){nn=1,Yo(e,Ti(s,e.current)),tt=null;return}}catch(w){if(p!==null)throw tt=p,w;nn=1,Yo(e,Ti(s,e.current)),tt=null;return}n.flags&32768?(ot||h===1?e=!0:Ns||(st&536870912)!==0?e=!1:(sa=e=!0,(h===2||h===9||h===3||h===6)&&(h=hi.current,h!==null&&h.tag===13&&(h.flags|=16384))),xd(n,e)):rc(n)}function rc(e){var n=e;do{if((n.flags&32768)!==0){xd(n,sa);return}e=n.return;var s=e2(n.alternate,n,Tr);if(s!==null){tt=s;return}if(n=n.sibling,n!==null){tt=n;return}tt=n=e}while(n!==null);nn===0&&(nn=5)}function xd(e,n){do{var s=t2(e.alternate,e);if(s!==null){s.flags&=32767,tt=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(e=e.sibling,e!==null)){tt=e;return}tt=e=s}while(e!==null);nn=6,tt=null}function yd(e,n,s,h,p,w,_,R,B){e.cancelPendingCommit=null;do ac();while(_n!==0);if((At&6)!==0)throw Error(d(327));if(n!==null){if(n===e.current)throw Error(d(177));if(w=n.lanes|n.childLanes,w|=Kc,Ei(e,s,w,_,R,B),e===Pt&&(tt=Pt=null,st=0),Is=n,ca=e,Nr=s,rh=w,ah=p,ld=h,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,d2(ii,function(){return vd(),null})):(e.callbackNode=null,e.callbackPriority=0),h=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||h){h=te.T,te.T=null,p=ue.p,ue.p=2,_=At,At|=4;try{n2(e,n,s)}finally{At=_,ue.p=p,te.T=h}}_n=1,wd(),bd(),Ad()}}function wd(){if(_n===1){_n=0;var e=ca,n=Is,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=te.T,te.T=null;var h=ue.p;ue.p=2;var p=At;At|=4;try{$0(n,e);var w=bh,_=N(e.containerInfo),R=w.focusedElem,B=w.selectionRange;if(_!==R&&R&&R.ownerDocument&&v(R.ownerDocument.documentElement,R)){if(B!==null&&O(R)){var K=B.start,ae=B.end;if(ae===void 0&&(ae=K),"selectionStart"in R)R.selectionStart=K,R.selectionEnd=Math.min(ae,R.value.length);else{var he=R.ownerDocument||document,J=he&&he.defaultView||window;if(J.getSelection){var ne=J.getSelection(),Oe=R.textContent.length,je=Math.min(B.start,Oe),Lt=B.end===void 0?je:Math.min(B.end,Oe);!ne.extend&&je>Lt&&(_=Lt,Lt=je,je=_);var G=b(R,je),z=b(R,Lt);if(G&&z&&(ne.rangeCount!==1||ne.anchorNode!==G.node||ne.anchorOffset!==G.offset||ne.focusNode!==z.node||ne.focusOffset!==z.offset)){var Z=he.createRange();Z.setStart(G.node,G.offset),ne.removeAllRanges(),je>Lt?(ne.addRange(Z),ne.extend(z.node,z.offset)):(Z.setEnd(z.node,z.offset),ne.addRange(Z))}}}}for(he=[],ne=R;ne=ne.parentNode;)ne.nodeType===1&&he.push({element:ne,left:ne.scrollLeft,top:ne.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<he.length;R++){var le=he[R];le.element.scrollLeft=le.left,le.element.scrollTop=le.top}}xc=!!wh,bh=wh=null}finally{At=p,ue.p=h,te.T=s}}e.current=n,_n=2}}function bd(){if(_n===2){_n=0;var e=ca,n=Is,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=te.T,te.T=null;var h=ue.p;ue.p=2;var p=At;At|=4;try{W0(e,n.alternate,n)}finally{At=p,ue.p=h,te.T=s}}_n=3}}function Ad(){if(_n===4||_n===3){_n=0,ao();var e=ca,n=Is,s=Nr,h=ld;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?_n=5:(_n=0,Is=ca=null,Ed(e,e.pendingLanes));var p=e.pendingLanes;if(p===0&&(oa=null),Bi(s),n=n.stateNode,ye&&typeof ye.onCommitFiberRoot=="function")try{ye.onCommitFiberRoot(Ft,n,void 0,(n.current.flags&128)===128)}catch{}if(h!==null){n=te.T,p=ue.p,ue.p=2,te.T=null;try{for(var w=e.onRecoverableError,_=0;_<h.length;_++){var R=h[_];w(R.value,{componentStack:R.stack})}}finally{te.T=n,ue.p=p}}(Nr&3)!==0&&ac(),ar(e),p=e.pendingLanes,(s&261930)!==0&&(p&42)!==0?e===sh?Ml++:(Ml=0,sh=e):Ml=0,Ll(0)}}function Ed(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,gl(n)))}function ac(){return wd(),bd(),Ad(),vd()}function vd(){if(_n!==5)return!1;var e=ca,n=rh;rh=0;var s=Bi(Nr),h=te.T,p=ue.p;try{ue.p=32>s?32:s,te.T=null,s=ah,ah=null;var w=ca,_=Nr;if(_n=0,Is=ca=null,Nr=0,(At&6)!==0)throw Error(d(331));var R=At;if(At|=4,rd(w.current),td(w,w.current,_,s),At=R,Ll(0,!1),ye&&typeof ye.onPostCommitFiberRoot=="function")try{ye.onPostCommitFiberRoot(Ft,w)}catch{}return!0}finally{ue.p=p,te.T=h,Ed(e,n)}}function _d(e,n,s){n=Ti(s,n),n=ju(e.stateNode,n,2),e=na(e,n,2),e!==null&&(Ki(e,2),ar(e))}function Nt(e,n,s){if(e.tag===3)_d(e,e,s);else for(;n!==null;){if(n.tag===3){_d(n,e,s);break}else if(n.tag===1){var h=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(oa===null||!oa.has(h))){e=Ti(s,e),s=S0(2),h=na(n,s,2),h!==null&&(C0(s,h,n,e),Ki(h,2),ar(h));break}}n=n.return}}function ch(e,n,s){var h=e.pingCache;if(h===null){h=e.pingCache=new a2;var p=new Set;h.set(n,p)}else p=h.get(n),p===void 0&&(p=new Set,h.set(n,p));p.has(s)||(th=!0,p.add(s),e=u2.bind(null,e,n,s),n.then(e,e))}function u2(e,n,s){var h=e.pingCache;h!==null&&h.delete(n),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Pt===e&&(st&s)===s&&(nn===4||nn===3&&(st&62914560)===st&&300>Kt()-$o?(At&2)===0&&Rs(e,0):nh|=s,Os===st&&(Os=0)),ar(e)}function Sd(e,n){n===0&&(n=bn()),e=La(e,n),e!==null&&(Ki(e,n),ar(e))}function h2(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),Sd(e,s)}function f2(e,n){var s=0;switch(e.tag){case 31:case 13:var h=e.stateNode,p=e.memoizedState;p!==null&&(s=p.retryLane);break;case 19:h=e.stateNode;break;case 22:h=e.stateNode._retryCache;break;default:throw Error(d(314))}h!==null&&h.delete(n),Sd(e,s)}function d2(e,n){return Br(e,n)}var sc=null,Ms=null,uh=!1,lc=!1,hh=!1,ha=0;function ar(e){e!==Ms&&e.next===null&&(Ms===null?sc=Ms=e:Ms=Ms.next=e),lc=!0,uh||(uh=!0,m2())}function Ll(e,n){if(!hh&&lc){hh=!0;do for(var s=!1,h=sc;h!==null;){if(e!==0){var p=h.pendingLanes;if(p===0)var w=0;else{var _=h.suspendedLanes,R=h.pingedLanes;w=(1<<31-Xe(42|e)+1)-1,w&=p&~(_&~R),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(s=!0,Od(h,w))}else w=st,w=_a(h,h===Pt?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||On(h,w)||(s=!0,Od(h,w));h=h.next}while(s);hh=!1}}function g2(){Cd()}function Cd(){lc=uh=!1;var e=0;ha!==0&&S2()&&(e=ha);for(var n=Kt(),s=null,h=sc;h!==null;){var p=h.next,w=Td(h,n);w===0?(h.next=null,s===null?sc=p:s.next=p,p===null&&(Ms=s)):(s=h,(e!==0||(w&3)!==0)&&(lc=!0)),h=p}_n!==0&&_n!==5||Ll(e),ha!==0&&(ha=0)}function Td(e,n){for(var s=e.suspendedLanes,h=e.pingedLanes,p=e.expirationTimes,w=e.pendingLanes&-62914561;0<w;){var _=31-Xe(w),R=1<<_,B=p[_];B===-1?((R&s)===0||(R&h)!==0)&&(p[_]=tl(R,n)):B<=n&&(e.expiredLanes|=R),w&=~R}if(n=Pt,s=st,s=_a(e,e===n?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),h=e.callbackNode,s===0||e===n&&(Tt===2||Tt===9)||e.cancelPendingCommit!==null)return h!==null&&h!==null&&Ne(h),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||On(e,s)){if(n=s&-s,n===e.callbackPriority)return n;switch(h!==null&&Ne(h),Bi(s)){case 2:case 8:s=Js;break;case 32:s=ii;break;case 268435456:s=$s;break;default:s=ii}return h=Nd.bind(null,e),s=Br(s,h),e.callbackPriority=n,e.callbackNode=s,n}return h!==null&&h!==null&&Ne(h),e.callbackPriority=2,e.callbackNode=null,2}function Nd(e,n){if(_n!==0&&_n!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(ac()&&e.callbackNode!==s)return null;var h=st;return h=_a(e,e===Pt?h:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),h===0?null:(cd(e,h,n),Td(e,Kt()),e.callbackNode!=null&&e.callbackNode===s?Nd.bind(null,e):null)}function Od(e,n){if(ac())return null;cd(e,n,!0)}function m2(){T2(function(){(At&6)!==0?Br(Xn,g2):Cd()})}function fh(){if(ha===0){var e=ys;e===0&&(e=va,va<<=1,(va&261888)===0&&(va=256)),ha=e}return ha}function Id(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Hr(""+e)}function Rd(e,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,e.id&&s.setAttribute("form",e.id),n.parentNode.insertBefore(s,n),e=new FormData(e),s.parentNode.removeChild(s),e}function p2(e,n,s,h,p){if(n==="submit"&&s&&s.stateNode===p){var w=Id((p[Ct]||null).action),_=h.submitter;_&&(n=(n=_[Ct]||null)?Id(n.formAction):_.getAttribute("formAction"),n!==null&&(w=n,_=null));var R=new An("action","action",null,h,p);e.push({event:R,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(ha!==0){var B=_?Rd(p,_):new FormData(p);Du(s,{pending:!0,data:B,method:p.method,action:w},null,B)}}else typeof w=="function"&&(R.preventDefault(),B=_?Rd(p,_):new FormData(p),Du(s,{pending:!0,data:B,method:p.method,action:w},w,B))},currentTarget:p}]})}}for(var dh=0;dh<hl.length;dh++){var gh=hl[dh],x2=gh.toLowerCase(),y2=gh[0].toUpperCase()+gh.slice(1);Fi(x2,"on"+y2)}Fi(Qn,"onAnimationEnd"),Fi(In,"onAnimationIteration"),Fi(_t,"onAnimationStart"),Fi("dblclick","onDoubleClick"),Fi("focusin","onFocus"),Fi("focusout","onBlur"),Fi(vn,"onTransitionRun"),Fi(Gn,"onTransitionStart"),Fi(Zr,"onTransitionCancel"),Fi(gr,"onTransitionEnd"),ai("onMouseEnter",["mouseout","mouseover"]),ai("onMouseLeave",["mouseout","mouseover"]),ai("onPointerEnter",["pointerout","pointerover"]),ai("onPointerLeave",["pointerout","pointerover"]),Et("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Et("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Et("onBeforeInput",["compositionend","keypress","textInput","paste"]),Et("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Et("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Et("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),w2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bl));function Dd(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var h=e[s],p=h.event;h=h.listeners;e:{var w=void 0;if(n)for(var _=h.length-1;0<=_;_--){var R=h[_],B=R.instance,K=R.currentTarget;if(R=R.listener,B!==w&&p.isPropagationStopped())break e;w=R,p.currentTarget=K;try{w(p)}catch(ae){Eo(ae)}p.currentTarget=null,w=B}else for(_=0;_<h.length;_++){if(R=h[_],B=R.instance,K=R.currentTarget,R=R.listener,B!==w&&p.isPropagationStopped())break e;w=R,p.currentTarget=K;try{w(p)}catch(ae){Eo(ae)}p.currentTarget=null,w=B}}}}function nt(e,n){var s=n[kr];s===void 0&&(s=n[kr]=new Set);var h=e+"__bubble";s.has(h)||(Md(n,e,2,!1),s.add(h))}function mh(e,n,s){var h=0;n&&(h|=4),Md(s,e,h,n)}var oc="_reactListening"+Math.random().toString(36).slice(2);function ph(e){if(!e[oc]){e[oc]=!0,de.forEach(function(s){s!=="selectionchange"&&(w2.has(s)||mh(s,!1,e),mh(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[oc]||(n[oc]=!0,mh("selectionchange",!1,n))}}function Md(e,n,s,h){switch(o1(n)){case 2:var p=X2;break;case 8:p=W2;break;default:p=Rh}s=p.bind(null,n,s,e),p=void 0,!rl||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(p=!0),h?p!==void 0?e.addEventListener(n,s,{capture:!0,passive:p}):e.addEventListener(n,s,!0):p!==void 0?e.addEventListener(n,s,{passive:p}):e.addEventListener(n,s,!1)}function xh(e,n,s,h,p){var w=h;if((n&1)===0&&(n&2)===0&&h!==null)e:for(;;){if(h===null)return;var _=h.tag;if(_===3||_===4){var R=h.stateNode.containerInfo;if(R===p)break;if(_===4)for(_=h.return;_!==null;){var B=_.tag;if((B===3||B===4)&&_.stateNode.containerInfo===p)return;_=_.return}for(;R!==null;){if(_=Jt(R),_===null)return;if(B=_.tag,B===5||B===6||B===26||B===27){h=w=_;continue e}R=R.parentNode}}h=h.return}uo(function(){var K=w,ae=il(s),he=[];e:{var J=Ao.get(e);if(J!==void 0){var ne=An,Oe=e;switch(e){case"keypress":if(Ji(s)===0)break e;case"keydown":case"keyup":ne=cs;break;case"focusin":Oe="focus",ne=ll;break;case"focusout":Oe="blur",ne=ll;break;case"beforeblur":case"afterblur":ne=ll;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ne=bt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ne=ls;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ne=Xc;break;case Qn:case In:case _t:ne=We;break;case gr:ne=ur;break;case"scroll":case"scrollend":ne=ho;break;case"wheel":ne=Wc;break;case"copy":case"cut":case"paste":ne=os;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ne=vt;break;case"toggle":case"beforetoggle":ne=cl}var je=(n&4)!==0,Lt=!je&&(e==="scroll"||e==="scrollend"),G=je?J!==null?J+"Capture":null:J;je=[];for(var z=K,Z;z!==null;){var le=z;if(Z=le.stateNode,le=le.tag,le!==5&&le!==26&&le!==27||Z===null||G===null||(le=He(z,G),le!=null&&je.push(kl(z,le,Z))),Lt)break;z=z.return}0<je.length&&(J=new ne(J,Oe,null,s,ae),he.push({event:J,listeners:je}))}}if((n&7)===0){e:{if(J=e==="mouseover"||e==="pointerover",ne=e==="mouseout"||e==="pointerout",J&&s!==Ca&&(Oe=s.relatedTarget||s.fromElement)&&(Jt(Oe)||Oe[ri]))break e;if((ne||J)&&(J=ae.window===ae?ae:(J=ae.ownerDocument)?J.defaultView||J.parentWindow:window,ne?(Oe=s.relatedTarget||s.toElement,ne=K,Oe=Oe?Jt(Oe):null,Oe!==null&&(Lt=m(Oe),je=Oe.tag,Oe!==Lt||je!==5&&je!==27&&je!==6)&&(Oe=null)):(ne=null,Oe=K),ne!==Oe)){if(je=bt,le="onMouseLeave",G="onMouseEnter",z="mouse",(e==="pointerout"||e==="pointerover")&&(je=vt,le="onPointerLeave",G="onPointerEnter",z="pointer"),Lt=ne==null?J:Ur(ne),Z=Oe==null?J:Ur(Oe),J=new je(le,z+"leave",ne,s,ae),J.target=Lt,J.relatedTarget=Z,le=null,Jt(ae)===K&&(je=new je(G,z+"enter",Oe,s,ae),je.target=Z,je.relatedTarget=Lt,le=je),Lt=le,ne&&Oe)t:{for(je=b2,G=ne,z=Oe,Z=0,le=G;le;le=je(le))Z++;le=0;for(var Le=z;Le;Le=je(Le))le++;for(;0<Z-le;)G=je(G),Z--;for(;0<le-Z;)z=je(z),le--;for(;Z--;){if(G===z||z!==null&&G===z.alternate){je=G;break t}G=je(G),z=je(z)}je=null}else je=null;ne!==null&&Ld(he,J,ne,je,!1),Oe!==null&&Lt!==null&&Ld(he,Lt,Oe,je,!0)}}e:{if(J=K?Ur(K):window,ne=J.nodeName&&J.nodeName.toLowerCase(),ne==="select"||ne==="input"&&J.type==="file")var pt=ci;else if(ul(J))if(bo)pt=o;else{pt=i;var Re=t}else ne=J.nodeName,!ne||ne.toLowerCase()!=="input"||J.type!=="checkbox"&&J.type!=="radio"?K&&kt(K.elementType)&&(pt=ci):pt=a;if(pt&&(pt=pt(e,K))){oi(he,pt,s,ae);break e}Re&&Re(e,J,K),e==="focusout"&&K&&J.type==="number"&&K.memoizedProps.value!=null&&M(J,"number",J.value)}switch(Re=K?Ur(K):window,e){case"focusin":(ul(Re)||Re.contentEditable==="true")&&(k=Re,j=K,V=null);break;case"focusout":V=j=k=null;break;case"mousedown":$=!0;break;case"contextmenu":case"mouseup":case"dragend":$=!1,xe(he,s,ae);break;case"selectionchange":if(L)break;case"keydown":case"keyup":xe(he,s,ae)}var Ze;if(Oa)e:{switch(e){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else Wr?wo(e,s)&&(lt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(lt="onCompositionStart");lt&&(yo&&s.locale!=="ko"&&(Wr||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&Wr&&(Ze=Gr()):(Pi=ae,zi="value"in Pi?Pi.value:Pi.textContent,Wr=!0)),Re=cc(K,lt),0<Re.length&&(lt=new mo(lt,e,null,s,ae),he.push({event:lt,listeners:Re}),Ze?lt.data=Ze:(Ze=Xr(s),Ze!==null&&(lt.data=Ze)))),(Ze=xo?tr(e,s):hs(e,s))&&(lt=cc(K,"onBeforeInput"),0<lt.length&&(Re=new mo("onBeforeInput","beforeinput",null,s,ae),he.push({event:Re,listeners:lt}),Re.data=Ze)),p2(he,e,K,s,ae)}Dd(he,n)})}function kl(e,n,s){return{instance:e,listener:n,currentTarget:s}}function cc(e,n){for(var s=n+"Capture",h=[];e!==null;){var p=e,w=p.stateNode;if(p=p.tag,p!==5&&p!==26&&p!==27||w===null||(p=He(e,s),p!=null&&h.unshift(kl(e,p,w)),p=He(e,n),p!=null&&h.push(kl(e,p,w))),e.tag===3)return h;e=e.return}return[]}function b2(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Ld(e,n,s,h,p){for(var w=n._reactName,_=[];s!==null&&s!==h;){var R=s,B=R.alternate,K=R.stateNode;if(R=R.tag,B!==null&&B===h)break;R!==5&&R!==26&&R!==27||K===null||(B=K,p?(K=He(s,w),K!=null&&_.unshift(kl(s,K,B))):p||(K=He(s,w),K!=null&&_.push(kl(s,K,B)))),s=s.return}_.length!==0&&e.push({event:n,listeners:_})}var A2=/\r\n?/g,E2=/\u0000|\uFFFD/g;function Bd(e){return(typeof e=="string"?e:""+e).replace(A2,`
`).replace(E2,"")}function kd(e,n){return n=Bd(n),Bd(e)===n}function Mt(e,n,s,h,p,w){switch(s){case"children":typeof h=="string"?n==="body"||n==="textarea"&&h===""||Fr(e,h):(typeof h=="number"||typeof h=="bigint")&&n!=="body"&&Fr(e,""+h);break;case"className":Pr(e,"class",h);break;case"tabIndex":Pr(e,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Pr(e,s,h);break;case"style":Me(e,h,w);break;case"data":if(n!=="object"){Pr(e,"data",h);break}case"src":case"href":if(h===""&&(n!=="a"||s!=="href")){e.removeAttribute(s);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(s);break}h=Hr(""+h),e.setAttribute(s,h);break;case"action":case"formAction":if(typeof h=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(s==="formAction"?(n!=="input"&&Mt(e,n,"name",p.name,p,null),Mt(e,n,"formEncType",p.formEncType,p,null),Mt(e,n,"formMethod",p.formMethod,p,null),Mt(e,n,"formTarget",p.formTarget,p,null)):(Mt(e,n,"encType",p.encType,p,null),Mt(e,n,"method",p.method,p,null),Mt(e,n,"target",p.target,p,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(s);break}h=Hr(""+h),e.setAttribute(s,h);break;case"onClick":h!=null&&(e.onclick=Zn);break;case"onScroll":h!=null&&nt("scroll",e);break;case"onScrollEnd":h!=null&&nt("scrollend",e);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(d(61));if(s=h.__html,s!=null){if(p.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"multiple":e.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":e.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){e.removeAttribute("xlink:href");break}s=Hr(""+h),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(s,""+h):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":h===!0?e.setAttribute(s,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(s,h):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?e.setAttribute(s,h):e.removeAttribute(s);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?e.removeAttribute(s):e.setAttribute(s,h);break;case"popover":nt("beforetoggle",e),nt("toggle",e),jr(e,"popover",h);break;case"xlinkActuate":si(e,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":si(e,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":si(e,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":si(e,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":si(e,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":si(e,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":si(e,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":si(e,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":si(e,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":jr(e,"is",h);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=co.get(s)||s,jr(e,s,h))}}function yh(e,n,s,h,p,w){switch(s){case"style":Me(e,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(d(61));if(s=h.__html,s!=null){if(p.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"children":typeof h=="string"?Fr(e,h):(typeof h=="number"||typeof h=="bigint")&&Fr(e,""+h);break;case"onScroll":h!=null&&nt("scroll",e);break;case"onScrollEnd":h!=null&&nt("scrollend",e);break;case"onClick":h!=null&&(e.onclick=Zn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oo.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(p=s.endsWith("Capture"),n=s.slice(2,p?s.length-7:void 0),w=e[Ct]||null,w=w!=null?w[s]:null,typeof w=="function"&&e.removeEventListener(n,w,p),typeof h=="function")){typeof w!="function"&&w!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(n,h,p);break e}s in e?e[s]=h:h===!0?e.setAttribute(s,""):jr(e,s,h)}}}function Ln(e,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",e),nt("load",e);var h=!1,p=!1,w;for(w in s)if(s.hasOwnProperty(w)){var _=s[w];if(_!=null)switch(w){case"src":h=!0;break;case"srcSet":p=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,n));default:Mt(e,n,w,_,s,null)}}p&&Mt(e,n,"srcSet",s.srcSet,s,null),h&&Mt(e,n,"src",s.src,s,null);return;case"input":nt("invalid",e);var R=w=_=p=null,B=null,K=null;for(h in s)if(s.hasOwnProperty(h)){var ae=s[h];if(ae!=null)switch(h){case"name":p=ae;break;case"type":_=ae;break;case"checked":B=ae;break;case"defaultChecked":K=ae;break;case"value":w=ae;break;case"defaultValue":R=ae;break;case"children":case"dangerouslySetInnerHTML":if(ae!=null)throw Error(d(137,n));break;default:Mt(e,n,h,ae,s,null)}}q(e,w,R,B,K,_,p,!1);return;case"select":nt("invalid",e),h=_=w=null;for(p in s)if(s.hasOwnProperty(p)&&(R=s[p],R!=null))switch(p){case"value":w=R;break;case"defaultValue":_=R;break;case"multiple":h=R;default:Mt(e,n,p,R,s,null)}n=w,s=_,e.multiple=!!h,n!=null?Ie(e,!!h,n,!1):s!=null&&Ie(e,!!h,s,!0);return;case"textarea":nt("invalid",e),w=p=h=null;for(_ in s)if(s.hasOwnProperty(_)&&(R=s[_],R!=null))switch(_){case"value":h=R;break;case"defaultValue":p=R;break;case"children":w=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(d(91));break;default:Mt(e,n,_,R,s,null)}Fn(e,h,p,w);return;case"option":for(B in s)s.hasOwnProperty(B)&&(h=s[B],h!=null)&&(B==="selected"?e.selected=h&&typeof h!="function"&&typeof h!="symbol":Mt(e,n,B,h,s,null));return;case"dialog":nt("beforetoggle",e),nt("toggle",e),nt("cancel",e),nt("close",e);break;case"iframe":case"object":nt("load",e);break;case"video":case"audio":for(h=0;h<Bl.length;h++)nt(Bl[h],e);break;case"image":nt("error",e),nt("load",e);break;case"details":nt("toggle",e);break;case"embed":case"source":case"link":nt("error",e),nt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(K in s)if(s.hasOwnProperty(K)&&(h=s[K],h!=null))switch(K){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,n));default:Mt(e,n,K,h,s,null)}return;default:if(kt(n)){for(ae in s)s.hasOwnProperty(ae)&&(h=s[ae],h!==void 0&&yh(e,n,ae,h,s,void 0));return}}for(R in s)s.hasOwnProperty(R)&&(h=s[R],h!=null&&Mt(e,n,R,h,s,null))}function v2(e,n,s,h){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var p=null,w=null,_=null,R=null,B=null,K=null,ae=null;for(ne in s){var he=s[ne];if(s.hasOwnProperty(ne)&&he!=null)switch(ne){case"checked":break;case"value":break;case"defaultValue":B=he;default:h.hasOwnProperty(ne)||Mt(e,n,ne,null,h,he)}}for(var J in h){var ne=h[J];if(he=s[J],h.hasOwnProperty(J)&&(ne!=null||he!=null))switch(J){case"type":w=ne;break;case"name":p=ne;break;case"checked":K=ne;break;case"defaultChecked":ae=ne;break;case"value":_=ne;break;case"defaultValue":R=ne;break;case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(d(137,n));break;default:ne!==he&&Mt(e,n,J,ne,h,he)}}hn(e,_,R,B,K,ae,w,p);return;case"select":ne=_=R=J=null;for(w in s)if(B=s[w],s.hasOwnProperty(w)&&B!=null)switch(w){case"value":break;case"multiple":ne=B;default:h.hasOwnProperty(w)||Mt(e,n,w,null,h,B)}for(p in h)if(w=h[p],B=s[p],h.hasOwnProperty(p)&&(w!=null||B!=null))switch(p){case"value":J=w;break;case"defaultValue":R=w;break;case"multiple":_=w;default:w!==B&&Mt(e,n,p,w,h,B)}n=R,s=_,h=ne,J!=null?Ie(e,!!s,J,!1):!!h!=!!s&&(n!=null?Ie(e,!!s,n,!0):Ie(e,!!s,s?[]:"",!1));return;case"textarea":ne=J=null;for(R in s)if(p=s[R],s.hasOwnProperty(R)&&p!=null&&!h.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Mt(e,n,R,null,h,p)}for(_ in h)if(p=h[_],w=s[_],h.hasOwnProperty(_)&&(p!=null||w!=null))switch(_){case"value":J=p;break;case"defaultValue":ne=p;break;case"children":break;case"dangerouslySetInnerHTML":if(p!=null)throw Error(d(91));break;default:p!==w&&Mt(e,n,_,p,h,w)}ln(e,J,ne);return;case"option":for(var Oe in s)J=s[Oe],s.hasOwnProperty(Oe)&&J!=null&&!h.hasOwnProperty(Oe)&&(Oe==="selected"?e.selected=!1:Mt(e,n,Oe,null,h,J));for(B in h)J=h[B],ne=s[B],h.hasOwnProperty(B)&&J!==ne&&(J!=null||ne!=null)&&(B==="selected"?e.selected=J&&typeof J!="function"&&typeof J!="symbol":Mt(e,n,B,J,h,ne));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in s)J=s[je],s.hasOwnProperty(je)&&J!=null&&!h.hasOwnProperty(je)&&Mt(e,n,je,null,h,J);for(K in h)if(J=h[K],ne=s[K],h.hasOwnProperty(K)&&J!==ne&&(J!=null||ne!=null))switch(K){case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(d(137,n));break;default:Mt(e,n,K,J,h,ne)}return;default:if(kt(n)){for(var Lt in s)J=s[Lt],s.hasOwnProperty(Lt)&&J!==void 0&&!h.hasOwnProperty(Lt)&&yh(e,n,Lt,void 0,h,J);for(ae in h)J=h[ae],ne=s[ae],!h.hasOwnProperty(ae)||J===ne||J===void 0&&ne===void 0||yh(e,n,ae,J,h,ne);return}}for(var G in s)J=s[G],s.hasOwnProperty(G)&&J!=null&&!h.hasOwnProperty(G)&&Mt(e,n,G,null,h,J);for(he in h)J=h[he],ne=s[he],!h.hasOwnProperty(he)||J===ne||J==null&&ne==null||Mt(e,n,he,J,h,ne)}function Ud(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function _2(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,s=performance.getEntriesByType("resource"),h=0;h<s.length;h++){var p=s[h],w=p.transferSize,_=p.initiatorType,R=p.duration;if(w&&R&&Ud(_)){for(_=0,R=p.responseEnd,h+=1;h<s.length;h++){var B=s[h],K=B.startTime;if(K>R)break;var ae=B.transferSize,he=B.initiatorType;ae&&Ud(he)&&(B=B.responseEnd,_+=ae*(B<R?1:(R-K)/(B-K)))}if(--h,n+=8*(w+_)/(p.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var wh=null,bh=null;function uc(e){return e.nodeType===9?e:e.ownerDocument}function jd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Pd(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Ah(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var Eh=null;function S2(){var e=window.event;return e&&e.type==="popstate"?e===Eh?!1:(Eh=e,!0):(Eh=null,!1)}var zd=typeof setTimeout=="function"?setTimeout:void 0,C2=typeof clearTimeout=="function"?clearTimeout:void 0,Fd=typeof Promise=="function"?Promise:void 0,T2=typeof queueMicrotask=="function"?queueMicrotask:typeof Fd<"u"?function(e){return Fd.resolve(null).then(e).catch(N2)}:zd;function N2(e){setTimeout(function(){throw e})}function fa(e){return e==="head"}function Hd(e,n){var s=n,h=0;do{var p=s.nextSibling;if(e.removeChild(s),p&&p.nodeType===8)if(s=p.data,s==="/$"||s==="/&"){if(h===0){e.removeChild(p),Us(n);return}h--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")h++;else if(s==="html")Ul(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,Ul(s);for(var w=s.firstChild;w;){var _=w.nextSibling,R=w.nodeName;w[Sa]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&w.rel.toLowerCase()==="stylesheet"||s.removeChild(w),w=_}}else s==="body"&&Ul(e.ownerDocument.body);s=p}while(s);Us(n)}function Gd(e,n){var s=e;e=0;do{var h=s.nextSibling;if(s.nodeType===1?n?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(n?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),h&&h.nodeType===8)if(s=h.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=h}while(s)}function vh(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":vh(s),Wn(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function O2(e,n,s,h){for(;e.nodeType===1;){var p=s;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!h&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(h){if(!e[Sa])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(w=e.getAttribute("rel"),w==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(w!==p.rel||e.getAttribute("href")!==(p.href==null||p.href===""?null:p.href)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin)||e.getAttribute("title")!==(p.title==null?null:p.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(w=e.getAttribute("src"),(w!==(p.src==null?null:p.src)||e.getAttribute("type")!==(p.type==null?null:p.type)||e.getAttribute("crossorigin")!==(p.crossOrigin==null?null:p.crossOrigin))&&w&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var w=p.name==null?null:""+p.name;if(p.type==="hidden"&&e.getAttribute("name")===w)return e}else return e;if(e=Di(e.nextSibling),e===null)break}return null}function I2(e,n,s){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Di(e.nextSibling),e===null))return null;return e}function Vd(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Di(e.nextSibling),e===null))return null;return e}function _h(e){return e.data==="$?"||e.data==="$~"}function Sh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function R2(e,n){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||s.readyState!=="loading")n();else{var h=function(){n(),s.removeEventListener("DOMContentLoaded",h)};s.addEventListener("DOMContentLoaded",h),e._reactRetry=h}}function Di(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var Ch=null;function Yd(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(n===0)return Di(e.nextSibling);n--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||n++}e=e.nextSibling}return null}function qd(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(n===0)return e;n--}else s!=="/$"&&s!=="/&"||n++}e=e.previousSibling}return null}function Xd(e,n,s){switch(n=uc(s),e){case"html":if(e=n.documentElement,!e)throw Error(d(452));return e;case"head":if(e=n.head,!e)throw Error(d(453));return e;case"body":if(e=n.body,!e)throw Error(d(454));return e;default:throw Error(d(451))}}function Ul(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);Wn(e)}var Mi=new Map,Wd=new Set;function hc(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Or=ue.d;ue.d={f:D2,r:M2,D:L2,C:B2,L:k2,m:U2,X:P2,S:j2,M:z2};function D2(){var e=Or.f(),n=nc();return e||n}function M2(e){var n=wt(e);n!==null&&n.tag===5&&n.type==="form"?h0(n):Or.r(e)}var Ls=typeof document>"u"?null:document;function Zd(e,n,s){var h=Ls;if(h&&typeof n=="string"&&n){var p=Qe(n);p='link[rel="'+e+'"][href="'+p+'"]',typeof s=="string"&&(p+='[crossorigin="'+s+'"]'),Wd.has(p)||(Wd.add(p),e={rel:e,crossOrigin:s,href:n},h.querySelector(p)===null&&(n=h.createElement("link"),Ln(n,"link",e),$t(n),h.head.appendChild(n)))}}function L2(e){Or.D(e),Zd("dns-prefetch",e,null)}function B2(e,n){Or.C(e,n),Zd("preconnect",e,n)}function k2(e,n,s){Or.L(e,n,s);var h=Ls;if(h&&e&&n){var p='link[rel="preload"][as="'+Qe(n)+'"]';n==="image"&&s&&s.imageSrcSet?(p+='[imagesrcset="'+Qe(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(p+='[imagesizes="'+Qe(s.imageSizes)+'"]')):p+='[href="'+Qe(e)+'"]';var w=p;switch(n){case"style":w=Bs(e);break;case"script":w=ks(e)}Mi.has(w)||(e=D({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:e,as:n},s),Mi.set(w,e),h.querySelector(p)!==null||n==="style"&&h.querySelector(jl(w))||n==="script"&&h.querySelector(Pl(w))||(n=h.createElement("link"),Ln(n,"link",e),$t(n),h.head.appendChild(n)))}}function U2(e,n){Or.m(e,n);var s=Ls;if(s&&e){var h=n&&typeof n.as=="string"?n.as:"script",p='link[rel="modulepreload"][as="'+Qe(h)+'"][href="'+Qe(e)+'"]',w=p;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=ks(e)}if(!Mi.has(w)&&(e=D({rel:"modulepreload",href:e},n),Mi.set(w,e),s.querySelector(p)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(Pl(w)))return}h=s.createElement("link"),Ln(h,"link",e),$t(h),s.head.appendChild(h)}}}function j2(e,n,s){Or.S(e,n,s);var h=Ls;if(h&&e){var p=zn(h).hoistableStyles,w=Bs(e);n=n||"default";var _=p.get(w);if(!_){var R={loading:0,preload:null};if(_=h.querySelector(jl(w)))R.loading=5;else{e=D({rel:"stylesheet",href:e,"data-precedence":n},s),(s=Mi.get(w))&&Th(e,s);var B=_=h.createElement("link");$t(B),Ln(B,"link",e),B._p=new Promise(function(K,ae){B.onload=K,B.onerror=ae}),B.addEventListener("load",function(){R.loading|=1}),B.addEventListener("error",function(){R.loading|=2}),R.loading|=4,fc(_,n,h)}_={type:"stylesheet",instance:_,count:1,state:R},p.set(w,_)}}}function P2(e,n){Or.X(e,n);var s=Ls;if(s&&e){var h=zn(s).hoistableScripts,p=ks(e),w=h.get(p);w||(w=s.querySelector(Pl(p)),w||(e=D({src:e,async:!0},n),(n=Mi.get(p))&&Nh(e,n),w=s.createElement("script"),$t(w),Ln(w,"link",e),s.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(p,w))}}function z2(e,n){Or.M(e,n);var s=Ls;if(s&&e){var h=zn(s).hoistableScripts,p=ks(e),w=h.get(p);w||(w=s.querySelector(Pl(p)),w||(e=D({src:e,async:!0,type:"module"},n),(n=Mi.get(p))&&Nh(e,n),w=s.createElement("script"),$t(w),Ln(w,"link",e),s.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(p,w))}}function Kd(e,n,s,h){var p=(p=be.current)?hc(p):null;if(!p)throw Error(d(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Bs(s.href),s=zn(p).hoistableStyles,h=s.get(n),h||(h={type:"style",instance:null,count:0,state:null},s.set(n,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Bs(s.href);var w=zn(p).hoistableStyles,_=w.get(e);if(_||(p=p.ownerDocument||p,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(e,_),(w=p.querySelector(jl(e)))&&!w._p&&(_.instance=w,_.state.loading=5),Mi.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Mi.set(e,s),w||F2(p,e,s,_.state))),n&&h===null)throw Error(d(528,""));return _}if(n&&h!==null)throw Error(d(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=ks(s),s=zn(p).hoistableScripts,h=s.get(n),h||(h={type:"script",instance:null,count:0,state:null},s.set(n,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,e))}}function Bs(e){return'href="'+Qe(e)+'"'}function jl(e){return'link[rel="stylesheet"]['+e+"]"}function Qd(e){return D({},e,{"data-precedence":e.precedence,precedence:null})}function F2(e,n,s,h){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?h.loading=1:(n=e.createElement("link"),h.preload=n,n.addEventListener("load",function(){return h.loading|=1}),n.addEventListener("error",function(){return h.loading|=2}),Ln(n,"link",s),$t(n),e.head.appendChild(n))}function ks(e){return'[src="'+Qe(e)+'"]'}function Pl(e){return"script[async]"+e}function Jd(e,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var h=e.querySelector('style[data-href~="'+Qe(s.href)+'"]');if(h)return n.instance=h,$t(h),h;var p=D({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return h=(e.ownerDocument||e).createElement("style"),$t(h),Ln(h,"style",p),fc(h,s.precedence,e),n.instance=h;case"stylesheet":p=Bs(s.href);var w=e.querySelector(jl(p));if(w)return n.state.loading|=4,n.instance=w,$t(w),w;h=Qd(s),(p=Mi.get(p))&&Th(h,p),w=(e.ownerDocument||e).createElement("link"),$t(w);var _=w;return _._p=new Promise(function(R,B){_.onload=R,_.onerror=B}),Ln(w,"link",h),n.state.loading|=4,fc(w,s.precedence,e),n.instance=w;case"script":return w=ks(s.src),(p=e.querySelector(Pl(w)))?(n.instance=p,$t(p),p):(h=s,(p=Mi.get(w))&&(h=D({},s),Nh(h,p)),e=e.ownerDocument||e,p=e.createElement("script"),$t(p),Ln(p,"link",h),e.head.appendChild(p),n.instance=p);case"void":return null;default:throw Error(d(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(h=n.instance,n.state.loading|=4,fc(h,s.precedence,e));return n.instance}function fc(e,n,s){for(var h=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),p=h.length?h[h.length-1]:null,w=p,_=0;_<h.length;_++){var R=h[_];if(R.dataset.precedence===n)w=R;else if(w!==p)break}w?w.parentNode.insertBefore(e,w.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(e,n.firstChild))}function Th(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Nh(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var dc=null;function $d(e,n,s){if(dc===null){var h=new Map,p=dc=new Map;p.set(s,h)}else p=dc,h=p.get(s),h||(h=new Map,p.set(s,h));if(h.has(e))return h;for(h.set(e,null),s=s.getElementsByTagName(e),p=0;p<s.length;p++){var w=s[p];if(!(w[Sa]||w[sn]||e==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var _=w.getAttribute(n)||"";_=e+_;var R=h.get(_);R?R.push(w):h.set(_,[w])}}return h}function e1(e,n,s){e=e.ownerDocument||e,e.head.insertBefore(s,n==="title"?e.querySelector("head > title"):null)}function H2(e,n,s){if(s===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function t1(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function G2(e,n,s,h){if(s.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var p=Bs(h.href),w=n.querySelector(jl(p));if(w){n=w._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=gc.bind(e),n.then(e,e)),s.state.loading|=4,s.instance=w,$t(w);return}w=n.ownerDocument||n,h=Qd(h),(p=Mi.get(p))&&Th(h,p),w=w.createElement("link"),$t(w);var _=w;_._p=new Promise(function(R,B){_.onload=R,_.onerror=B}),Ln(w,"link",h),s.instance=w}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=gc.bind(e),n.addEventListener("load",s),n.addEventListener("error",s))}}var Oh=0;function V2(e,n){return e.stylesheets&&e.count===0&&pc(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var h=setTimeout(function(){if(e.stylesheets&&pc(e,e.stylesheets),e.unsuspend){var w=e.unsuspend;e.unsuspend=null,w()}},6e4+n);0<e.imgBytes&&Oh===0&&(Oh=62500*_2());var p=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&pc(e,e.stylesheets),e.unsuspend)){var w=e.unsuspend;e.unsuspend=null,w()}},(e.imgBytes>Oh?50:800)+n);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(h),clearTimeout(p)}}:null}function gc(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)pc(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var mc=null;function pc(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,mc=new Map,n.forEach(Y2,e),mc=null,gc.call(e))}function Y2(e,n){if(!(n.state.loading&4)){var s=mc.get(e);if(s)var h=s.get(null);else{s=new Map,mc.set(e,s);for(var p=e.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<p.length;w++){var _=p[w];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(s.set(_.dataset.precedence,_),h=_)}h&&s.set(null,h)}p=n.instance,_=p.getAttribute("data-precedence"),w=s.get(_)||h,w===h&&s.set(null,p),s.set(_,p),this.count++,h=gc.bind(this),p.addEventListener("load",h),p.addEventListener("error",h),w?w.parentNode.insertBefore(p,w.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(p,e.firstChild)),n.state.loading|=4}}var zl={$$typeof:Y,Provider:null,Consumer:null,_currentValue:Be,_currentValue2:Be,_threadCount:0};function q2(e,n,s,h,p,w,_,R,B){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zi(0),this.hiddenUpdates=Zi(null),this.identifierPrefix=h,this.onUncaughtError=p,this.onCaughtError=w,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=B,this.incompleteTransitions=new Map}function n1(e,n,s,h,p,w,_,R,B,K,ae,he){return e=new q2(e,n,s,_,B,K,ae,he,R),n=1,w===!0&&(n|=24),w=ui(3,null,null,n),e.current=w,w.stateNode=e,n=ou(),n.refCount++,e.pooledCache=n,n.refCount++,w.memoizedState={element:h,isDehydrated:s,cache:n},fu(w),e}function i1(e){return e?(e=ds,e):ds}function r1(e,n,s,h,p,w){p=i1(p),h.context===null?h.context=p:h.pendingContext=p,h=ta(n),h.payload={element:s},w=w===void 0?null:w,w!==null&&(h.callback=w),s=na(e,h,n),s!==null&&(ni(s,e,n),yl(s,e,n))}function a1(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Ih(e,n){a1(e,n),(e=e.alternate)&&a1(e,n)}function s1(e){if(e.tag===13||e.tag===31){var n=La(e,67108864);n!==null&&ni(n,e,67108864),Ih(e,67108864)}}function l1(e){if(e.tag===13||e.tag===31){var n=mi();n=Cn(n);var s=La(e,n);s!==null&&ni(s,e,n),Ih(e,n)}}var xc=!0;function X2(e,n,s,h){var p=te.T;te.T=null;var w=ue.p;try{ue.p=2,Rh(e,n,s,h)}finally{ue.p=w,te.T=p}}function W2(e,n,s,h){var p=te.T;te.T=null;var w=ue.p;try{ue.p=8,Rh(e,n,s,h)}finally{ue.p=w,te.T=p}}function Rh(e,n,s,h){if(xc){var p=Dh(h);if(p===null)xh(e,n,h,yc,s),c1(e,h);else if(K2(p,e,n,s,h))h.stopPropagation();else if(c1(e,h),n&4&&-1<Z2.indexOf(e)){for(;p!==null;){var w=wt(p);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var _=Wi(w.pendingLanes);if(_!==0){var R=w;for(R.pendingLanes|=2,R.entangledLanes|=2;_;){var B=1<<31-Xe(_);R.entanglements[1]|=B,_&=~B}ar(w),(At&6)===0&&(ec=Kt()+500,Ll(0))}}break;case 31:case 13:R=La(w,2),R!==null&&ni(R,w,2),nc(),Ih(w,2)}if(w=Dh(h),w===null&&xh(e,n,h,yc,s),w===p)break;p=w}p!==null&&h.stopPropagation()}else xh(e,n,h,null,s)}}function Dh(e){return e=il(e),Mh(e)}var yc=null;function Mh(e){if(yc=null,e=Jt(e),e!==null){var n=m(e);if(n===null)e=null;else{var s=n.tag;if(s===13){if(e=E(n),e!==null)return e;e=null}else if(s===31){if(e=S(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return yc=e,null}function o1(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Qs()){case Xn:return 2;case Js:return 8;case ii:case Nn:return 32;case $s:return 268435456;default:return 32}default:return 32}}var Lh=!1,da=null,ga=null,ma=null,Fl=new Map,Hl=new Map,pa=[],Z2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function c1(e,n){switch(e){case"focusin":case"focusout":da=null;break;case"dragenter":case"dragleave":ga=null;break;case"mouseover":case"mouseout":ma=null;break;case"pointerover":case"pointerout":Fl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Hl.delete(n.pointerId)}}function Gl(e,n,s,h,p,w){return e===null||e.nativeEvent!==w?(e={blockedOn:n,domEventName:s,eventSystemFlags:h,nativeEvent:w,targetContainers:[p]},n!==null&&(n=wt(n),n!==null&&s1(n)),e):(e.eventSystemFlags|=h,n=e.targetContainers,p!==null&&n.indexOf(p)===-1&&n.push(p),e)}function K2(e,n,s,h,p){switch(n){case"focusin":return da=Gl(da,e,n,s,h,p),!0;case"dragenter":return ga=Gl(ga,e,n,s,h,p),!0;case"mouseover":return ma=Gl(ma,e,n,s,h,p),!0;case"pointerover":var w=p.pointerId;return Fl.set(w,Gl(Fl.get(w)||null,e,n,s,h,p)),!0;case"gotpointercapture":return w=p.pointerId,Hl.set(w,Gl(Hl.get(w)||null,e,n,s,h,p)),!0}return!1}function u1(e){var n=Jt(e.target);if(n!==null){var s=m(n);if(s!==null){if(n=s.tag,n===13){if(n=E(s),n!==null){e.blockedOn=n,_e(e.priority,function(){l1(s)});return}}else if(n===31){if(n=S(s),n!==null){e.blockedOn=n,_e(e.priority,function(){l1(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function wc(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Dh(e.nativeEvent);if(s===null){s=e.nativeEvent;var h=new s.constructor(s.type,s);Ca=h,s.target.dispatchEvent(h),Ca=null}else return n=wt(s),n!==null&&s1(n),e.blockedOn=s,!1;n.shift()}return!0}function h1(e,n,s){wc(e)&&s.delete(n)}function Q2(){Lh=!1,da!==null&&wc(da)&&(da=null),ga!==null&&wc(ga)&&(ga=null),ma!==null&&wc(ma)&&(ma=null),Fl.forEach(h1),Hl.forEach(h1)}function bc(e,n){e.blockedOn===n&&(e.blockedOn=null,Lh||(Lh=!0,c.unstable_scheduleCallback(c.unstable_NormalPriority,Q2)))}var Ac=null;function f1(e){Ac!==e&&(Ac=e,c.unstable_scheduleCallback(c.unstable_NormalPriority,function(){Ac===e&&(Ac=null);for(var n=0;n<e.length;n+=3){var s=e[n],h=e[n+1],p=e[n+2];if(typeof h!="function"){if(Mh(h||s)===null)continue;break}var w=wt(s);w!==null&&(e.splice(n,3),n-=3,Du(w,{pending:!0,data:p,method:s.method,action:h},h,p))}}))}function Us(e){function n(B){return bc(B,e)}da!==null&&bc(da,e),ga!==null&&bc(ga,e),ma!==null&&bc(ma,e),Fl.forEach(n),Hl.forEach(n);for(var s=0;s<pa.length;s++){var h=pa[s];h.blockedOn===e&&(h.blockedOn=null)}for(;0<pa.length&&(s=pa[0],s.blockedOn===null);)u1(s),s.blockedOn===null&&pa.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(h=0;h<s.length;h+=3){var p=s[h],w=s[h+1],_=p[Ct]||null;if(typeof w=="function")_||f1(s);else if(_){var R=null;if(w&&w.hasAttribute("formAction")){if(p=w,_=w[Ct]||null)R=_.formAction;else if(Mh(p)!==null)continue}else R=_.action;typeof R=="function"?s[h+1]=R:(s.splice(h,3),h-=3),f1(s)}}}function d1(){function e(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(_){return p=_})},focusReset:"manual",scroll:"manual"})}function n(){p!==null&&(p(),p=null),h||setTimeout(s,20)}function s(){if(!h&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,p=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(s,100),function(){h=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),p!==null&&(p(),p=null)}}}function Bh(e){this._internalRoot=e}Ec.prototype.render=Bh.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(d(409));var s=n.current,h=mi();r1(s,h,e,n,null,null)},Ec.prototype.unmount=Bh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;r1(e.current,2,null,e,null,null),nc(),n[ri]=null}};function Ec(e){this._internalRoot=e}Ec.prototype.unstable_scheduleHydration=function(e){if(e){var n=jn();e={blockedOn:null,target:e,priority:n};for(var s=0;s<pa.length&&n!==0&&n<pa[s].priority;s++);pa.splice(s,0,e),s===0&&u1(e)}};var g1=r.version;if(g1!=="19.2.4")throw Error(d(527,g1,"19.2.4"));ue.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=A(n),e=e!==null?I(e):null,e=e===null?null:e.stateNode,e};var J2={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:te,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vc.isDisabled&&vc.supportsFiber)try{Ft=vc.inject(J2),ye=vc}catch{}}return Yl.createRoot=function(e,n){if(!x(e))throw Error(d(299));var s=!1,h="",p=A0,w=E0,_=v0;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onUncaughtError!==void 0&&(p=n.onUncaughtError),n.onCaughtError!==void 0&&(w=n.onCaughtError),n.onRecoverableError!==void 0&&(_=n.onRecoverableError)),n=n1(e,1,!1,null,null,s,h,null,p,w,_,d1),e[ri]=n.current,ph(e),new Bh(n)},Yl.hydrateRoot=function(e,n,s){if(!x(e))throw Error(d(299));var h=!1,p="",w=A0,_=E0,R=v0,B=null;return s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(p=s.identifierPrefix),s.onUncaughtError!==void 0&&(w=s.onUncaughtError),s.onCaughtError!==void 0&&(_=s.onCaughtError),s.onRecoverableError!==void 0&&(R=s.onRecoverableError),s.formState!==void 0&&(B=s.formState)),n=n1(e,1,!0,n,s??null,h,p,B,w,_,R,d1),n.context=i1(null),s=n.current,h=mi(),h=Cn(h),p=ta(h),p.callback=null,na(s,p,h),s=h,n.current.lanes=s,Ki(n,s),ar(n),e[ri]=n.current,ph(e),new Ec(n)},Yl.version="19.2.4",Yl}var _1;function om(){if(_1)return jh.exports;_1=1;function c(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(c)}catch(r){console.error(r)}}return c(),jh.exports=lm(),jh.exports}var cm=om(),Ce;(function(c){c[c.QR_CODE=0]="QR_CODE",c[c.AZTEC=1]="AZTEC",c[c.CODABAR=2]="CODABAR",c[c.CODE_39=3]="CODE_39",c[c.CODE_93=4]="CODE_93",c[c.CODE_128=5]="CODE_128",c[c.DATA_MATRIX=6]="DATA_MATRIX",c[c.MAXICODE=7]="MAXICODE",c[c.ITF=8]="ITF",c[c.EAN_13=9]="EAN_13",c[c.EAN_8=10]="EAN_8",c[c.PDF_417=11]="PDF_417",c[c.RSS_14=12]="RSS_14",c[c.RSS_EXPANDED=13]="RSS_EXPANDED",c[c.UPC_A=14]="UPC_A",c[c.UPC_E=15]="UPC_E",c[c.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Ce||(Ce={}));var S1=new Map([[Ce.QR_CODE,"QR_CODE"],[Ce.AZTEC,"AZTEC"],[Ce.CODABAR,"CODABAR"],[Ce.CODE_39,"CODE_39"],[Ce.CODE_93,"CODE_93"],[Ce.CODE_128,"CODE_128"],[Ce.DATA_MATRIX,"DATA_MATRIX"],[Ce.MAXICODE,"MAXICODE"],[Ce.ITF,"ITF"],[Ce.EAN_13,"EAN_13"],[Ce.EAN_8,"EAN_8"],[Ce.PDF_417,"PDF_417"],[Ce.RSS_14,"RSS_14"],[Ce.RSS_EXPANDED,"RSS_EXPANDED"],[Ce.UPC_A,"UPC_A"],[Ce.UPC_E,"UPC_E"],[Ce.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),C1;(function(c){c[c.UNKNOWN=0]="UNKNOWN",c[c.URL=1]="URL"})(C1||(C1={}));function um(c){return Object.values(Ce).includes(c)}var Dr;(function(c){c[c.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",c[c.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Dr||(Dr={}));var qi=(function(){function c(){}return c.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",c.SCAN_DEFAULT_FPS=2,c.DEFAULT_DISABLE_FLIP=!1,c.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,c.DEFAULT_SUPPORTED_SCAN_TYPE=[Dr.SCAN_TYPE_CAMERA,Dr.SCAN_TYPE_FILE],c})(),fg=(function(){function c(r,l){this.format=r,this.formatName=l}return c.prototype.toString=function(){return this.formatName},c.create=function(r){if(!S1.has(r))throw"".concat(r," not in html5QrcodeSupportedFormatsTextMap");return new c(r,S1.get(r))},c})(),T1=(function(){function c(){}return c.createFromText=function(r){var l={text:r};return{decodedText:r,result:l}},c.createFromQrcodeResult=function(r){return{decodedText:r.text,result:r}},c})(),Zh;(function(c){c[c.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",c[c.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",c[c.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Zh||(Zh={}));var dg=(function(){function c(){}return c.createFrom=function(r){return{errorMessage:r,type:Zh.UNKWOWN_ERROR}},c})(),gg=(function(){function c(r){this.verbose=r}return c.prototype.log=function(r){this.verbose&&console.log(r)},c.prototype.warn=function(r){this.verbose&&console.warn(r)},c.prototype.logError=function(r,l){(this.verbose||l===!0)&&console.error(r)},c.prototype.logErrors=function(r){if(r.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(r)},c})();function sr(c){return typeof c>"u"||c===null}function hm(c,r,l){return c>l?l:c<r?r:c}var Xs=(function(){function c(){}return c.codeParseError=function(r){return"QR code parse error, error = ".concat(r)},c.errorGettingUserMedia=function(r){return"Error getting userMedia, error = ".concat(r)},c.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},c.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},c.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},c.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},c.scannerPaused=function(){return"Scanner paused"},c})(),Ot=(function(){function c(){}return c.scanningStatus=function(){return"Scanning"},c.idleStatus=function(){return"Idle"},c.errorStatus=function(){return"Error"},c.permissionStatus=function(){return"Permission"},c.noCameraFoundErrorStatus=function(){return"No Cameras"},c.lastMatch=function(r){return"Last Match: ".concat(r)},c.codeScannerTitle=function(){return"Code Scanner"},c.cameraPermissionTitle=function(){return"Request Camera Permissions"},c.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},c.noCameraFound=function(){return"No camera found"},c.scanButtonStopScanningText=function(){return"Stop Scanning"},c.scanButtonStartScanningText=function(){return"Start Scanning"},c.torchOnButton=function(){return"Switch On Torch"},c.torchOffButton=function(){return"Switch Off Torch"},c.torchOnFailedMessage=function(){return"Failed to turn on torch"},c.torchOffFailedMessage=function(){return"Failed to turn off torch"},c.scanButtonScanningStarting=function(){return"Launching Camera..."},c.textIfCameraScanSelected=function(){return"Scan an Image File"},c.textIfFileScanSelected=function(){return"Scan using camera directly"},c.selectCamera=function(){return"Select Camera"},c.fileSelectionChooseImage=function(){return"Choose Image"},c.fileSelectionChooseAnother=function(){return"Choose Another"},c.fileSelectionNoImageSelected=function(){return"No image choosen"},c.anonymousCameraPrefix=function(){return"Anonymous Camera"},c.dragAndDropMessage=function(){return"Or drop an image to scan"},c.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},c.zoom=function(){return"zoom"},c.loadingImage=function(){return"Loading image..."},c.cameraScanAltText=function(){return"Camera based scan"},c.fileScanAltText=function(){return"Fule based scan"},c})(),N1=(function(){function c(){}return c.poweredBy=function(){return"Powered by "},c.reportIssues=function(){return"Report issues"},c})(),mg=(function(){function c(){}return c.isMediaStreamConstraintsValid=function(r,l){if(typeof r!="object"){var d=typeof r;return l.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(d,"."),!0),!1}for(var x=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],m=new Set(x),E=Object.keys(r),S=0,C=E;S<C.length;S++){var A=C[S];if(m.has(A))return l.logError("".concat(A," is not supported videoConstaints."),!0),!1}return!0},c})(),Xl={exports:{}},fm=Xl.exports,O1;function dm(){return O1||(O1=1,(function(c,r){(function(l,d){d(r)})(fm,(function(l){function d(T){return T==null}var x=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,t){T.__proto__=t}||function(T,t){for(var i in t)t.hasOwnProperty(i)&&(T[i]=t[i])};function m(T,t){x(T,t);function i(){this.constructor=T}T.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function E(T,t){var i=Object.setPrototypeOf;i?i(T,t):T.__proto__=t}function S(T,t){t===void 0&&(t=T.constructor);var i=Error.captureStackTrace;i&&i(T,t)}var C=(function(T){m(t,T);function t(i){var a=this.constructor,o=T.call(this,i)||this;return Object.defineProperty(o,"name",{value:a.name,enumerable:!1}),E(o,a.prototype),S(o),o}return t})(Error);class A extends C{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}A.kind="Exception";class I extends A{}I.kind="ArgumentException";class D extends A{}D.kind="IllegalArgumentException";class U{constructor(t){if(this.binarizer=t,t===null)throw new D("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,i){return this.binarizer.getBlackRow(t,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,i,a,o){const u=this.binarizer.getLuminanceSource().crop(t,i,a,o);return new U(this.binarizer.createBinarizer(u))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new U(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new U(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class P extends A{static getChecksumInstance(){return new P}}P.kind="ChecksumException";class X{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class W{static arraycopy(t,i,a,o,u){for(;u--;)a[o++]=t[i++]}static currentTimeMillis(){return Date.now()}}class se extends A{}se.kind="IndexOutOfBoundsException";class me extends se{constructor(t=void 0,i=void 0){super(i),this.index=t,this.message=i}}me.kind="ArrayIndexOutOfBoundsException";class ce{static fill(t,i){for(let a=0,o=t.length;a<o;a++)t[a]=i}static fillWithin(t,i,a,o){ce.rangeCheck(t.length,i,a);for(let u=i;u<a;u++)t[u]=o}static rangeCheck(t,i,a){if(i>a)throw new D("fromIndex("+i+") > toIndex("+a+")");if(i<0)throw new me(i);if(a>t)throw new me(a)}static asList(...t){return t}static create(t,i,a){return Array.from({length:t}).map(u=>Array.from({length:i}).fill(a))}static createInt32Array(t,i,a){return Array.from({length:t}).map(u=>Int32Array.from({length:i}).fill(a))}static equals(t,i){if(!t||!i||!t.length||!i.length||t.length!==i.length)return!1;for(let a=0,o=t.length;a<o;a++)if(t[a]!==i[a])return!1;return!0}static hashCode(t){if(t===null)return 0;let i=1;for(const a of t)i=31*i+a;return i}static fillUint8Array(t,i){for(let a=0;a!==t.length;a++)t[a]=i}static copyOf(t,i){return t.slice(0,i)}static copyOfUint8Array(t,i){if(t.length<=i){const a=new Uint8Array(i);return a.set(t),a}return t.slice(0,i)}static copyOfRange(t,i,a){const o=a-i,u=new Int32Array(o);return W.arraycopy(t,i,u,0,o),u}static binarySearch(t,i,a){a===void 0&&(a=ce.numberComparator);let o=0,u=t.length-1;for(;o<=u;){const f=u+o>>1,g=a(i,t[f]);if(g>0)o=f+1;else if(g<0)u=f-1;else return f}return-o-1}static numberComparator(t,i){return t-i}}class Y{static numberOfTrailingZeros(t){let i;if(t===0)return 32;let a=31;return i=t<<16,i!==0&&(a-=16,t=i),i=t<<8,i!==0&&(a-=8,t=i),i=t<<4,i!==0&&(a-=4,t=i),i=t<<2,i!==0&&(a-=2,t=i),a-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let i=1;return t>>>16||(i+=16,t<<=16),t>>>24||(i+=8,t<<=8),t>>>28||(i+=4,t<<=4),t>>>30||(i+=2,t<<=2),i-=t>>>31,i}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,i){return Math.trunc(t/i)}static parseInt(t,i=void 0){return parseInt(t,i)}}Y.MIN_VALUE_32_BITS=-2147483648,Y.MAX_VALUE=Number.MAX_SAFE_INTEGER;class fe{constructor(t,i){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,i==null?this.bits=fe.makeArray(t):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const i=fe.makeArray(t);W.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const i=this.size;if(t>=i)return i;const a=this.bits;let o=Math.floor(t/32),u=a[o];u&=~((1<<(t&31))-1);const f=a.length;for(;u===0;){if(++o===f)return i;u=a[o]}const g=o*32+Y.numberOfTrailingZeros(u);return g>i?i:g}getNextUnset(t){const i=this.size;if(t>=i)return i;const a=this.bits;let o=Math.floor(t/32),u=~a[o];u&=~((1<<(t&31))-1);const f=a.length;for(;u===0;){if(++o===f)return i;u=~a[o]}const g=o*32+Y.numberOfTrailingZeros(u);return g>i?i:g}setBulk(t,i){this.bits[Math.floor(t/32)]=i}setRange(t,i){if(i<t||t<0||i>this.size)throw new D;if(i===t)return;i--;const a=Math.floor(t/32),o=Math.floor(i/32),u=this.bits;for(let f=a;f<=o;f++){const g=f>a?0:t&31,b=(2<<(f<o?31:i&31))-(1<<g);u[f]|=b}}clear(){const t=this.bits.length,i=this.bits;for(let a=0;a<t;a++)i[a]=0}isRange(t,i,a){if(i<t||t<0||i>this.size)throw new D;if(i===t)return!0;i--;const o=Math.floor(t/32),u=Math.floor(i/32),f=this.bits;for(let g=o;g<=u;g++){const y=g>o?0:t&31,v=(2<<(g<u?31:i&31))-(1<<y)&4294967295;if((f[g]&v)!==(a?v:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,i){if(i<0||i>32)throw new D("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let a=i;a>0;a--)this.appendBit((t>>a-1&1)===1)}appendBitArray(t){const i=t.size;this.ensureCapacity(this.size+i);for(let a=0;a<i;a++)this.appendBit(t.get(a))}xor(t){if(this.size!==t.size)throw new D("Sizes don't match");const i=this.bits;for(let a=0,o=i.length;a<o;a++)i[a]^=t.bits[a]}toBytes(t,i,a,o){for(let u=0;u<o;u++){let f=0;for(let g=0;g<8;g++)this.get(t)&&(f|=1<<7-g),t++;i[a+u]=f}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),a=i+1,o=this.bits;for(let u=0;u<a;u++){let f=o[u];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,t[i-u]=f}if(this.size!==a*32){const u=a*32-this.size;let f=t[0]>>>u;for(let g=1;g<a;g++){const y=t[g];f|=y<<32-u,t[g-1]=f,f=y>>>u}t[a-1]=f}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof fe))return!1;const i=t;return this.size===i.size&&ce.equals(this.bits,i.bits)}hashCode(){return 31*this.size+ce.hashCode(this.bits)}toString(){let t="";for(let i=0,a=this.size;i<a;i++)(i&7)===0&&(t+=" "),t+=this.get(i)?"X":".";return t}clone(){return new fe(this.size,this.bits.slice())}}var Se;(function(T){T[T.OTHER=0]="OTHER",T[T.PURE_BARCODE=1]="PURE_BARCODE",T[T.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",T[T.TRY_HARDER=3]="TRY_HARDER",T[T.CHARACTER_SET=4]="CHARACTER_SET",T[T.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",T[T.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",T[T.ASSUME_GS1=7]="ASSUME_GS1",T[T.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",T[T.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",T[T.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Se||(Se={}));var we=Se;class Q extends A{static getFormatInstance(){return new Q}}Q.kind="FormatException";var Te;(function(T){T[T.Cp437=0]="Cp437",T[T.ISO8859_1=1]="ISO8859_1",T[T.ISO8859_2=2]="ISO8859_2",T[T.ISO8859_3=3]="ISO8859_3",T[T.ISO8859_4=4]="ISO8859_4",T[T.ISO8859_5=5]="ISO8859_5",T[T.ISO8859_6=6]="ISO8859_6",T[T.ISO8859_7=7]="ISO8859_7",T[T.ISO8859_8=8]="ISO8859_8",T[T.ISO8859_9=9]="ISO8859_9",T[T.ISO8859_10=10]="ISO8859_10",T[T.ISO8859_11=11]="ISO8859_11",T[T.ISO8859_13=12]="ISO8859_13",T[T.ISO8859_14=13]="ISO8859_14",T[T.ISO8859_15=14]="ISO8859_15",T[T.ISO8859_16=15]="ISO8859_16",T[T.SJIS=16]="SJIS",T[T.Cp1250=17]="Cp1250",T[T.Cp1251=18]="Cp1251",T[T.Cp1252=19]="Cp1252",T[T.Cp1256=20]="Cp1256",T[T.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",T[T.UTF8=22]="UTF8",T[T.ASCII=23]="ASCII",T[T.Big5=24]="Big5",T[T.GB18030=25]="GB18030",T[T.EUC_KR=26]="EUC_KR"})(Te||(Te={}));class oe{constructor(t,i,a,...o){this.valueIdentifier=t,this.name=a,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=o,oe.VALUE_IDENTIFIER_TO_ECI.set(t,this),oe.NAME_TO_ECI.set(a,this);const u=this.values;for(let f=0,g=u.length;f!==g;f++){const y=u[f];oe.VALUES_TO_ECI.set(y,this)}for(const f of o)oe.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new Q("incorect value");const i=oe.VALUES_TO_ECI.get(t);if(i===void 0)throw new Q("incorect value");return i}static getCharacterSetECIByName(t){const i=oe.NAME_TO_ECI.get(t);if(i===void 0)throw new Q("incorect value");return i}equals(t){if(!(t instanceof oe))return!1;const i=t;return this.getName()===i.getName()}}oe.VALUE_IDENTIFIER_TO_ECI=new Map,oe.VALUES_TO_ECI=new Map,oe.NAME_TO_ECI=new Map,oe.Cp437=new oe(Te.Cp437,Int32Array.from([0,2]),"Cp437"),oe.ISO8859_1=new oe(Te.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),oe.ISO8859_2=new oe(Te.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),oe.ISO8859_3=new oe(Te.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),oe.ISO8859_4=new oe(Te.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),oe.ISO8859_5=new oe(Te.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),oe.ISO8859_6=new oe(Te.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),oe.ISO8859_7=new oe(Te.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),oe.ISO8859_8=new oe(Te.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),oe.ISO8859_9=new oe(Te.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),oe.ISO8859_10=new oe(Te.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),oe.ISO8859_11=new oe(Te.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),oe.ISO8859_13=new oe(Te.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),oe.ISO8859_14=new oe(Te.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),oe.ISO8859_15=new oe(Te.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),oe.ISO8859_16=new oe(Te.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),oe.SJIS=new oe(Te.SJIS,20,"SJIS","Shift_JIS"),oe.Cp1250=new oe(Te.Cp1250,21,"Cp1250","windows-1250"),oe.Cp1251=new oe(Te.Cp1251,22,"Cp1251","windows-1251"),oe.Cp1252=new oe(Te.Cp1252,23,"Cp1252","windows-1252"),oe.Cp1256=new oe(Te.Cp1256,24,"Cp1256","windows-1256"),oe.UnicodeBigUnmarked=new oe(Te.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),oe.UTF8=new oe(Te.UTF8,26,"UTF8","UTF-8"),oe.ASCII=new oe(Te.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),oe.Big5=new oe(Te.Big5,28,"Big5"),oe.GB18030=new oe(Te.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),oe.EUC_KR=new oe(Te.EUC_KR,30,"EUC_KR","EUC-KR");class zt extends A{}zt.kind="UnsupportedOperationException";class yt{static decode(t,i){const a=this.encodingName(i);return this.customDecoder?this.customDecoder(t,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(t,a):new TextDecoder(a).decode(t)}static shouldDecodeOnFallback(t){return!yt.isBrowser()&&t==="ISO-8859-1"}static encode(t,i){const a=this.encodingName(i);return this.customEncoder?this.customEncoder(t,a):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof oe?t:oe.getCharacterSetECIByName(t)}static decodeFallback(t,i){const a=this.encodingCharacterSet(i);if(yt.isDecodeFallbackSupported(a)){let o="";for(let u=0,f=t.length;u<f;u++){let g=t[u].toString(16);g.length<2&&(g="0"+g),o+="%"+g}return decodeURIComponent(o)}if(a.equals(oe.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new zt(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(oe.UTF8)||t.equals(oe.ISO8859_1)||t.equals(oe.ASCII)}static encodeFallback(t){const a=btoa(unescape(encodeURIComponent(t))).split(""),o=[];for(let u=0;u<a.length;u++)o.push(a[u].charCodeAt(0));return new Uint8Array(o)}}class ve{static castAsNonUtf8Char(t,i=null){const a=i?i.getName():this.ISO88591;return yt.decode(new Uint8Array([t]),a)}static guessEncoding(t,i){if(i!=null&&i.get(we.CHARACTER_SET)!==void 0)return i.get(we.CHARACTER_SET).toString();const a=t.length;let o=!0,u=!0,f=!0,g=0,y=0,b=0,v=0,N=0,O=0,L=0,k=0,j=0,V=0,$=0;const xe=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let pe=0;pe<a&&(o||u||f);pe++){const ge=t[pe]&255;f&&(g>0?(ge&128)===0?f=!1:g--:(ge&128)!==0&&((ge&64)===0?f=!1:(g++,(ge&32)===0?y++:(g++,(ge&16)===0?b++:(g++,(ge&8)===0?v++:f=!1))))),o&&(ge>127&&ge<160?o=!1:ge>159&&(ge<192||ge===215||ge===247)&&$++),u&&(N>0?ge<64||ge===127||ge>252?u=!1:N--:ge===128||ge===160||ge>239?u=!1:ge>160&&ge<224?(O++,k=0,L++,L>j&&(j=L)):ge>127?(N++,L=0,k++,k>V&&(V=k)):(L=0,k=0))}return f&&g>0&&(f=!1),u&&N>0&&(u=!1),f&&(xe||y+b+v>0)?ve.UTF8:u&&(ve.ASSUME_SHIFT_JIS||j>=3||V>=3)?ve.SHIFT_JIS:o&&u?j===2&&O===2||$*10>=a?ve.SHIFT_JIS:ve.ISO88591:o?ve.ISO88591:u?ve.SHIFT_JIS:f?ve.UTF8:ve.PLATFORM_DEFAULT_ENCODING}static format(t,...i){let a=-1;function o(f,g,y,b,v,N){if(f==="%%")return"%";if(i[++a]===void 0)return;f=b?parseInt(b.substr(1)):void 0;let O=v?parseInt(v.substr(1)):void 0,L;switch(N){case"s":L=i[a];break;case"c":L=i[a][0];break;case"f":L=parseFloat(i[a]).toFixed(f);break;case"p":L=parseFloat(i[a]).toPrecision(f);break;case"e":L=parseFloat(i[a]).toExponential(f);break;case"x":L=parseInt(i[a]).toString(O||16);break;case"d":L=parseFloat(parseInt(i[a],O||10).toPrecision(f)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(O);let k=parseInt(y),j=y&&y[0]+""=="0"?"0":" ";for(;L.length<k;)L=g!==void 0?L+j:j+L;return L}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,o)}static getBytes(t,i){return yt.encode(t,i)}static getCharCode(t,i=0){return t.charCodeAt(i)}static getCharAt(t){return String.fromCharCode(t)}}ve.SHIFT_JIS=oe.SJIS.getName(),ve.GB2312="GB2312",ve.ISO88591=oe.ISO8859_1.getName(),ve.EUC_JP="EUC_JP",ve.UTF8=oe.UTF8.getName(),ve.PLATFORM_DEFAULT_ENCODING=ve.UTF8,ve.ASSUME_SHIFT_JIS=!1;class Ye{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=ve.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,i,a){for(let o=i;i<i+a;o++)this.append(t[o]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+1)}substring(t,i){return this.value.substring(t,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+i.length)}}class gt{constructor(t,i,a,o){if(this.width=t,this.height=i,this.rowSize=a,this.bits=o,i==null&&(i=t),this.height=i,t<1||i<1)throw new D("Both dimensions must be greater than 0");a==null&&(a=Math.floor((t+31)/32)),this.rowSize=a,o==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const i=t.length,a=t[0].length,o=new gt(a,i);for(let u=0;u<i;u++){const f=t[u];for(let g=0;g<a;g++)f[g]&&o.set(g,u)}return o}static parseFromString(t,i,a){if(t===null)throw new D("stringRepresentation cannot be null");const o=new Array(t.length);let u=0,f=0,g=-1,y=0,b=0;for(;b<t.length;)if(t.charAt(b)===`
`||t.charAt(b)==="\r"){if(u>f){if(g===-1)g=u-f;else if(u-f!==g)throw new D("row lengths do not match");f=u,y++}b++}else if(t.substring(b,b+i.length)===i)b+=i.length,o[u]=!0,u++;else if(t.substring(b,b+a.length)===a)b+=a.length,o[u]=!1,u++;else throw new D("illegal character encountered: "+t.substring(b));if(u>f){if(g===-1)g=u-f;else if(u-f!==g)throw new D("row lengths do not match");y++}const v=new gt(g,y);for(let N=0;N<u;N++)o[N]&&v.set(Math.floor(N%g),Math.floor(N/g));return v}get(t,i){const a=i*this.rowSize+Math.floor(t/32);return(this.bits[a]>>>(t&31)&1)!==0}set(t,i){const a=i*this.rowSize+Math.floor(t/32);this.bits[a]|=1<<(t&31)&4294967295}unset(t,i){const a=i*this.rowSize+Math.floor(t/32);this.bits[a]&=~(1<<(t&31)&4294967295)}flip(t,i){const a=i*this.rowSize+Math.floor(t/32);this.bits[a]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new D("input matrix dimensions do not match");const i=new fe(Math.floor(this.width/32)+1),a=this.rowSize,o=this.bits;for(let u=0,f=this.height;u<f;u++){const g=u*a,y=t.getRow(u,i).getBitArray();for(let b=0;b<a;b++)o[g+b]^=y[b]}}clear(){const t=this.bits,i=t.length;for(let a=0;a<i;a++)t[a]=0}setRegion(t,i,a,o){if(i<0||t<0)throw new D("Left and top must be nonnegative");if(o<1||a<1)throw new D("Height and width must be at least 1");const u=t+a,f=i+o;if(f>this.height||u>this.width)throw new D("The region must fit inside the matrix");const g=this.rowSize,y=this.bits;for(let b=i;b<f;b++){const v=b*g;for(let N=t;N<u;N++)y[v+Math.floor(N/32)]|=1<<(N&31)&4294967295}}getRow(t,i){i==null||i.getSize()<this.width?i=new fe(this.width):i.clear();const a=this.rowSize,o=this.bits,u=t*a;for(let f=0;f<a;f++)i.setBulk(f*32,o[u+f]);return i}setRow(t,i){W.arraycopy(i.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),i=this.getHeight();let a=new fe(t),o=new fe(t);for(let u=0,f=Math.floor((i+1)/2);u<f;u++)a=this.getRow(u,a),o=this.getRow(i-1-u,o),a.reverse(),o.reverse(),this.setRow(u,o),this.setRow(i-1-u,a)}getEnclosingRectangle(){const t=this.width,i=this.height,a=this.rowSize,o=this.bits;let u=t,f=i,g=-1,y=-1;for(let b=0;b<i;b++)for(let v=0;v<a;v++){const N=o[b*a+v];if(N!==0){if(b<f&&(f=b),b>y&&(y=b),v*32<u){let O=0;for(;(N<<31-O&4294967295)===0;)O++;v*32+O<u&&(u=v*32+O)}if(v*32+31>g){let O=31;for(;!(N>>>O);)O--;v*32+O>g&&(g=v*32+O)}}}return g<u||y<f?null:Int32Array.from([u,f,g-u+1,y-f+1])}getTopLeftOnBit(){const t=this.rowSize,i=this.bits;let a=0;for(;a<i.length&&i[a]===0;)a++;if(a===i.length)return null;const o=a/t;let u=a%t*32;const f=i[a];let g=0;for(;(f<<31-g&4294967295)===0;)g++;return u+=g,Int32Array.from([u,o])}getBottomRightOnBit(){const t=this.rowSize,i=this.bits;let a=i.length-1;for(;a>=0&&i[a]===0;)a--;if(a<0)return null;const o=Math.floor(a/t);let u=Math.floor(a%t)*32;const f=i[a];let g=31;for(;!(f>>>g);)g--;return u+=g,Int32Array.from([u,o])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof gt))return!1;const i=t;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&ce.equals(this.bits,i.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+ce.hashCode(this.bits),t}toString(t="X ",i="  ",a=`
`){return this.buildToString(t,i,a)}buildToString(t,i,a){let o=new Ye;for(let u=0,f=this.height;u<f;u++){for(let g=0,y=this.width;g<y;g++)o.append(this.get(g,u)?t:i);o.append(a)}return o.toString()}clone(){return new gt(this.width,this.height,this.rowSize,this.bits.slice())}}class ie extends A{static getNotFoundInstance(){return new ie}}ie.kind="NotFoundException";class te extends X{constructor(t){super(t),this.luminances=te.EMPTY,this.buckets=new Int32Array(te.LUMINANCE_BUCKETS)}getBlackRow(t,i){const a=this.getLuminanceSource(),o=a.getWidth();i==null||i.getSize()<o?i=new fe(o):i.clear(),this.initArrays(o);const u=a.getRow(t,this.luminances),f=this.buckets;for(let y=0;y<o;y++)f[(u[y]&255)>>te.LUMINANCE_SHIFT]++;const g=te.estimateBlackPoint(f);if(o<3)for(let y=0;y<o;y++)(u[y]&255)<g&&i.set(y);else{let y=u[0]&255,b=u[1]&255;for(let v=1;v<o-1;v++){const N=u[v+1]&255;(b*4-y-N)/2<g&&i.set(v),y=b,b=N}}return i}getBlackMatrix(){const t=this.getLuminanceSource(),i=t.getWidth(),a=t.getHeight(),o=new gt(i,a);this.initArrays(i);const u=this.buckets;for(let y=1;y<5;y++){const b=Math.floor(a*y/5),v=t.getRow(b,this.luminances),N=Math.floor(i*4/5);for(let O=Math.floor(i/5);O<N;O++){const L=v[O]&255;u[L>>te.LUMINANCE_SHIFT]++}}const f=te.estimateBlackPoint(u),g=t.getMatrix();for(let y=0;y<a;y++){const b=y*i;for(let v=0;v<i;v++)(g[b+v]&255)<f&&o.set(v,y)}return o}createBinarizer(t){return new te(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const i=this.buckets;for(let a=0;a<te.LUMINANCE_BUCKETS;a++)i[a]=0}static estimateBlackPoint(t){const i=t.length;let a=0,o=0,u=0;for(let v=0;v<i;v++)t[v]>u&&(o=v,u=t[v]),t[v]>a&&(a=t[v]);let f=0,g=0;for(let v=0;v<i;v++){const N=v-o,O=t[v]*N*N;O>g&&(f=v,g=O)}if(o>f){const v=o;o=f,f=v}if(f-o<=i/16)throw new ie;let y=f-1,b=-1;for(let v=f-1;v>o;v--){const N=v-o,O=N*N*(f-v)*(a-t[v]);O>b&&(y=v,b=O)}return y<<te.LUMINANCE_SHIFT}}te.LUMINANCE_BITS=5,te.LUMINANCE_SHIFT=8-te.LUMINANCE_BITS,te.LUMINANCE_BUCKETS=1<<te.LUMINANCE_BITS,te.EMPTY=Uint8ClampedArray.from([0]);class ue extends te{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),i=t.getWidth(),a=t.getHeight();if(i>=ue.MINIMUM_DIMENSION&&a>=ue.MINIMUM_DIMENSION){const o=t.getMatrix();let u=i>>ue.BLOCK_SIZE_POWER;(i&ue.BLOCK_SIZE_MASK)!==0&&u++;let f=a>>ue.BLOCK_SIZE_POWER;(a&ue.BLOCK_SIZE_MASK)!==0&&f++;const g=ue.calculateBlackPoints(o,u,f,i,a),y=new gt(i,a);ue.calculateThresholdForBlock(o,u,f,i,a,g,y),this.matrix=y}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new ue(t)}static calculateThresholdForBlock(t,i,a,o,u,f,g){const y=u-ue.BLOCK_SIZE,b=o-ue.BLOCK_SIZE;for(let v=0;v<a;v++){let N=v<<ue.BLOCK_SIZE_POWER;N>y&&(N=y);const O=ue.cap(v,2,a-3);for(let L=0;L<i;L++){let k=L<<ue.BLOCK_SIZE_POWER;k>b&&(k=b);const j=ue.cap(L,2,i-3);let V=0;for(let xe=-2;xe<=2;xe++){const pe=f[O+xe];V+=pe[j-2]+pe[j-1]+pe[j]+pe[j+1]+pe[j+2]}const $=V/25;ue.thresholdBlock(t,k,N,$,o,g)}}}static cap(t,i,a){return t<i?i:t>a?a:t}static thresholdBlock(t,i,a,o,u,f){for(let g=0,y=a*u+i;g<ue.BLOCK_SIZE;g++,y+=u)for(let b=0;b<ue.BLOCK_SIZE;b++)(t[y+b]&255)<=o&&f.set(i+b,a+g)}static calculateBlackPoints(t,i,a,o,u){const f=u-ue.BLOCK_SIZE,g=o-ue.BLOCK_SIZE,y=new Array(a);for(let b=0;b<a;b++){y[b]=new Int32Array(i);let v=b<<ue.BLOCK_SIZE_POWER;v>f&&(v=f);for(let N=0;N<i;N++){let O=N<<ue.BLOCK_SIZE_POWER;O>g&&(O=g);let L=0,k=255,j=0;for(let $=0,xe=v*o+O;$<ue.BLOCK_SIZE;$++,xe+=o){for(let pe=0;pe<ue.BLOCK_SIZE;pe++){const ge=t[xe+pe]&255;L+=ge,ge<k&&(k=ge),ge>j&&(j=ge)}if(j-k>ue.MIN_DYNAMIC_RANGE)for($++,xe+=o;$<ue.BLOCK_SIZE;$++,xe+=o)for(let pe=0;pe<ue.BLOCK_SIZE;pe++)L+=t[xe+pe]&255}let V=L>>ue.BLOCK_SIZE_POWER*2;if(j-k<=ue.MIN_DYNAMIC_RANGE&&(V=k/2,b>0&&N>0)){const $=(y[b-1][N]+2*y[b][N-1]+y[b-1][N-1])/4;k<$&&(V=$)}y[b][N]=V}}return y}}ue.BLOCK_SIZE_POWER=3,ue.BLOCK_SIZE=1<<ue.BLOCK_SIZE_POWER,ue.BLOCK_SIZE_MASK=ue.BLOCK_SIZE-1,ue.MINIMUM_DIMENSION=ue.BLOCK_SIZE*5,ue.MIN_DYNAMIC_RANGE=24;class Be{constructor(t,i){this.width=t,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,i,a,o){throw new zt("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new zt("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new zt("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let i=new Ye;for(let a=0;a<this.height;a++){const o=this.getRow(a,t);for(let u=0;u<this.width;u++){const f=o[u]&255;let g;f<64?g="#":f<128?g="+":f<192?g=".":g=" ",i.append(g)}i.append(`
`)}return i.toString()}}class Je extends Be{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,i){const a=this.delegate.getRow(t,i),o=this.getWidth();for(let u=0;u<o;u++)a[u]=255-(a[u]&255);return a}getMatrix(){const t=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(i);for(let o=0;o<i;o++)a[o]=255-(t[o]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(t,i,a,o){return new Je(this.delegate.crop(t,i,a,o))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Je(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Je(this.delegate.rotateCounterClockwise45())}}class it extends Be{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=it.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const i=t.getContext("2d").getImageData(0,0,t.width,t.height);return it.toGrayscaleBuffer(i.data,t.width,t.height)}static toGrayscaleBuffer(t,i,a){const o=new Uint8ClampedArray(i*a);for(let u=0,f=0,g=t.length;u<g;u+=4,f++){let y;if(t[u+3]===0)y=255;else{const v=t[u],N=t[u+1],O=t[u+2];y=306*v+601*N+117*O+512>>10}o[f]=y}return o}getRow(t,i){if(t<0||t>=this.getHeight())throw new D("Requested row is outside the image: "+t);const a=this.getWidth(),o=t*a;return i===null?i=this.buffer.slice(o,o+a):(i.length<a&&(i=new Uint8ClampedArray(a)),i.set(this.buffer.slice(o,o+a))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,i,a,o){return super.crop(t,i,a,o),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const i=this.getTempCanvasElement(),a=i.getContext("2d"),o=t*it.DEGREE_TO_RADIANS,u=this.canvas.width,f=this.canvas.height,g=Math.ceil(Math.abs(Math.cos(o))*u+Math.abs(Math.sin(o))*f),y=Math.ceil(Math.abs(Math.sin(o))*u+Math.abs(Math.cos(o))*f);return i.width=g,i.height=y,a.translate(g/2,y/2),a.rotate(o),a.drawImage(this.canvas,u/-2,f/-2),this.buffer=it.makeBufferFromCanvasImageData(i),this}invert(){return new Je(this)}}it.DEGREE_TO_RADIANS=Math.PI/180;class F{constructor(t,i,a){this.deviceId=t,this.label=i,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var re=(globalThis||_c||self||window||void 0)&&(globalThis||_c||self||window||void 0).__awaiter||function(T,t,i,a){function o(u){return u instanceof i?u:new i(function(f){f(u)})}return new(i||(i=Promise))(function(u,f){function g(v){try{b(a.next(v))}catch(N){f(N)}}function y(v){try{b(a.throw(v))}catch(N){f(N)}}function b(v){v.done?u(v.value):o(v.value).then(g,y)}b((a=a.apply(T,t||[])).next())})};class Ae{constructor(t,i=500,a){this.reader=t,this.timeBetweenScansMillis=i,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return re(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const a of t){const o=a.kind==="video"?"videoinput":a.kind;if(o!=="videoinput")continue;const u=a.deviceId||a.id,f=a.label||`Video device ${i.length+1}`,g=a.groupId,y={deviceId:u,label:f,kind:o,groupId:g};i.push(y)}return i})}getVideoInputDevices(){return re(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new F(i.deviceId,i.label))})}findDeviceById(t){return re(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(a=>a.deviceId===t):null})}decodeFromInputVideoDevice(t,i){return re(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,i)})}decodeOnceFromVideoDevice(t,i){return re(this,void 0,void 0,function*(){this.reset();let a;t?a={deviceId:{exact:t}}:a={facingMode:"environment"};const o={video:a};return yield this.decodeOnceFromConstraints(o,i)})}decodeOnceFromConstraints(t,i){return re(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(a,i)})}decodeOnceFromStream(t,i){return re(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(t,i);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(t,i,a){return re(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,i,a)})}decodeFromVideoDevice(t,i,a){return re(this,void 0,void 0,function*(){let o;t?o={deviceId:{exact:t}}:o={facingMode:"environment"};const u={video:o};return yield this.decodeFromConstraints(u,i,a)})}decodeFromConstraints(t,i,a){return re(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(o,i,a)})}decodeFromStream(t,i,a){return re(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(t,i);return yield this.decodeContinuously(o,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,i){return re(this,void 0,void 0,function*(){const a=this.prepareVideoElement(i);return this.addVideoSource(a,t),this.videoElement=a,this.stream=t,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(t){return new Promise((i,a)=>this.playVideoOnLoad(t,()=>i()))}playVideoOnLoad(t,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",i),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return re(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,i){const a=document.getElementById(t);if(!a)throw new I(`element with id '${t}' not found`);if(a.nodeName.toLowerCase()!==i.toLowerCase())throw new I(`element with id '${t}' must be an ${i} element`);return a}decodeFromImage(t,i){if(!t&&!i)throw new I("either imageElement with a src set or an url must be provided");return i&&!t?this.decodeFromImageUrl(i):this.decodeFromImageElement(t)}decodeFromVideo(t,i){if(!t&&!i)throw new I("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,i,a){if(t===void 0&&i===void 0)throw new I("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrlContinuously(i,a):this.decodeFromVideoElementContinuously(t,a)}decodeFromImageElement(t){if(!t)throw new I("An image element must be provided.");this.reset();const i=this.prepareImageElement(t);this.imageElement=i;let a;return this.isImageLoaded(i)?a=this.decodeOnce(i,!1,!0):a=this._decodeOnLoadImage(i),a}decodeFromVideoElement(t){const i=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(t,i){const a=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(a,i)}_decodeFromVideoElementSetup(t){if(!t)throw new I("A video element must be provided.");this.reset();const i=this.prepareVideoElement(t);return this.videoElement=i,i}decodeFromImageUrl(t){if(!t)throw new I("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const a=this._decodeOnLoadImage(i);return i.src=t,a}decodeFromVideoUrl(t){if(!t)throw new I("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),a=this.decodeFromVideoElement(i);return i.src=t,a}decodeFromVideoUrlContinuously(t,i){if(!t)throw new I("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),o=this.decodeFromVideoElementContinuously(a,i);return a.src=t,o}_decodeOnLoadImage(t){return new Promise((i,a)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(i,a),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return re(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,i){return re(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,i)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let i;return typeof t>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(i=t),i}prepareVideoElement(t){let i;return!t&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(i=t),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(t,i=!0,a=!0){this._stopAsyncDecode=!1;const o=(u,f)=>{if(this._stopAsyncDecode){f(new ie("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const g=this.decode(t);u(g)}catch(g){const y=i&&g instanceof ie,v=(g instanceof P||g instanceof Q)&&a;if(y||v)return setTimeout(o,this._timeBetweenDecodingAttempts,u,f);f(g)}};return new Promise((u,f)=>o(u,f))}decodeContinuously(t,i){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const o=this.decode(t);i(o,null),setTimeout(a,this.timeBetweenScansMillis)}catch(o){i(null,o);const u=o instanceof P||o instanceof Q,f=o instanceof ie;(u||f)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(t){const i=this.createBinaryBitmap(t);return this.decodeBitmap(i)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,i,a){i||(i={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(t,i,a=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const i=this.getCaptureCanvas(t),a=new it(i),o=new ue(a);return new U(o)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const i=this.createCaptureCanvas(t);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let a,o;return typeof t<"u"&&(t instanceof HTMLVideoElement?(a=t.videoWidth,o=t.videoHeight):t instanceof HTMLImageElement&&(a=t.naturalWidth||t.width,o=t.naturalHeight||t.height)),i.style.width=a+"px",i.style.height=o+"px",i.width=a,i.height=o,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,i){try{t.srcObject=i}catch{t.src=URL.createObjectURL(i)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class Ee{constructor(t,i,a=i==null?0:8*i.length,o,u,f=W.currentTimeMillis()){this.text=t,this.rawBytes=i,this.numBits=a,this.resultPoints=o,this.format=u,this.timestamp=f,this.text=t,this.rawBytes=i,a==null?this.numBits=i==null?0:8*i.length:this.numBits=a,this.resultPoints=o,this.format=u,this.resultMetadata=null,f==null?this.timestamp=W.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,i)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const i=this.resultPoints;if(i===null)this.resultPoints=t;else if(t!==null&&t.length>0){const a=new Array(i.length+t.length);W.arraycopy(i,0,a,0,i.length),W.arraycopy(t,0,a,i.length,t.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var Fe;(function(T){T[T.AZTEC=0]="AZTEC",T[T.CODABAR=1]="CODABAR",T[T.CODE_39=2]="CODE_39",T[T.CODE_93=3]="CODE_93",T[T.CODE_128=4]="CODE_128",T[T.DATA_MATRIX=5]="DATA_MATRIX",T[T.EAN_8=6]="EAN_8",T[T.EAN_13=7]="EAN_13",T[T.ITF=8]="ITF",T[T.MAXICODE=9]="MAXICODE",T[T.PDF_417=10]="PDF_417",T[T.QR_CODE=11]="QR_CODE",T[T.RSS_14=12]="RSS_14",T[T.RSS_EXPANDED=13]="RSS_EXPANDED",T[T.UPC_A=14]="UPC_A",T[T.UPC_E=15]="UPC_E",T[T.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(Fe||(Fe={}));var be=Fe,ct;(function(T){T[T.OTHER=0]="OTHER",T[T.ORIENTATION=1]="ORIENTATION",T[T.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",T[T.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",T[T.ISSUE_NUMBER=4]="ISSUE_NUMBER",T[T.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",T[T.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",T[T.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",T[T.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",T[T.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",T[T.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ct||(ct={}));var ut=ct;class Bt{constructor(t,i,a,o,u=-1,f=-1){this.rawBytes=t,this.text=i,this.byteSegments=a,this.ecLevel=o,this.structuredAppendSequenceNumber=u,this.structuredAppendParity=f,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Li{exp(t){return this.expTable[t]}log(t){if(t===0)throw new D;return this.logTable[t]}static addOrSubtract(t,i){return t^i}}class yn{constructor(t,i){if(i.length===0)throw new D;this.field=t;const a=i.length;if(a>1&&i[0]===0){let o=1;for(;o<a&&i[o]===0;)o++;o===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-o),W.arraycopy(i,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const i=this.coefficients;let a;if(t===1){a=0;for(let f=0,g=i.length;f!==g;f++){const y=i[f];a=Li.addOrSubtract(a,y)}return a}a=i[0];const o=i.length,u=this.field;for(let f=1;f<o;f++)a=Li.addOrSubtract(u.multiply(t,a),i[f]);return a}addOrSubtract(t){if(!this.field.equals(t.field))throw new D("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,a=t.coefficients;if(i.length>a.length){const f=i;i=a,a=f}let o=new Int32Array(a.length);const u=a.length-i.length;W.arraycopy(a,0,o,0,u);for(let f=u;f<a.length;f++)o[f]=Li.addOrSubtract(i[f-u],a[f]);return new yn(this.field,o)}multiply(t){if(!this.field.equals(t.field))throw new D("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const i=this.coefficients,a=i.length,o=t.coefficients,u=o.length,f=new Int32Array(a+u-1),g=this.field;for(let y=0;y<a;y++){const b=i[y];for(let v=0;v<u;v++)f[y+v]=Li.addOrSubtract(f[y+v],g.multiply(b,o[v]))}return new yn(g,f)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const i=this.coefficients.length,a=this.field,o=new Int32Array(i),u=this.coefficients;for(let f=0;f<i;f++)o[f]=a.multiply(u[f],t);return new yn(a,o)}multiplyByMonomial(t,i){if(t<0)throw new D;if(i===0)return this.field.getZero();const a=this.coefficients,o=a.length,u=new Int32Array(o+t),f=this.field;for(let g=0;g<o;g++)u[g]=f.multiply(a[g],i);return new yn(f,u)}divide(t){if(!this.field.equals(t.field))throw new D("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new D("Divide by 0");const i=this.field;let a=i.getZero(),o=this;const u=t.getCoefficient(t.getDegree()),f=i.inverse(u);for(;o.getDegree()>=t.getDegree()&&!o.isZero();){const g=o.getDegree()-t.getDegree(),y=i.multiply(o.getCoefficient(o.getDegree()),f),b=t.multiplyByMonomial(g,y),v=i.buildMonomial(g,y);a=a.addOrSubtract(v),o=o.addOrSubtract(b)}return[a,o]}toString(){let t="";for(let i=this.getDegree();i>=0;i--){let a=this.getCoefficient(i);if(a!==0){if(a<0?(t+=" - ",a=-a):t.length>0&&(t+=" + "),i===0||a!==1){const o=this.field.log(a);o===0?t+="1":o===1?t+="a":(t+="a^",t+=o)}i!==0&&(i===1?t+="x":(t+="x^",t+=i))}}return t}}class Lr extends A{}Lr.kind="ArithmeticException";class ht extends Li{constructor(t,i,a){super(),this.primitive=t,this.size=i,this.generatorBase=a;const o=new Int32Array(i);let u=1;for(let g=0;g<i;g++)o[g]=u,u*=2,u>=i&&(u^=t,u&=i-1);this.expTable=o;const f=new Int32Array(i);for(let g=0;g<i-1;g++)f[o[g]]=g;this.logTable=f,this.zero=new yn(this,Int32Array.from([0])),this.one=new yn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new D;if(i===0)return this.zero;const a=new Int32Array(t+1);return a[0]=i,new yn(this,a)}inverse(t){if(t===0)throw new Lr;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+Y.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}ht.AZTEC_DATA_12=new ht(4201,4096,1),ht.AZTEC_DATA_10=new ht(1033,1024,1),ht.AZTEC_DATA_6=new ht(67,64,1),ht.AZTEC_PARAM=new ht(19,16,1),ht.QR_CODE_FIELD_256=new ht(285,256,0),ht.DATA_MATRIX_FIELD_256=new ht(301,256,1),ht.AZTEC_DATA_8=ht.DATA_MATRIX_FIELD_256,ht.MAXICODE_FIELD_64=ht.AZTEC_DATA_6;class Yn extends A{}Yn.kind="ReedSolomonException";class qn extends A{}qn.kind="IllegalStateException";class lr{constructor(t){this.field=t}decode(t,i){const a=this.field,o=new yn(a,t),u=new Int32Array(i);let f=!0;for(let L=0;L<i;L++){const k=o.evaluateAt(a.exp(L+a.getGeneratorBase()));u[u.length-1-L]=k,k!==0&&(f=!1)}if(f)return;const g=new yn(a,u),y=this.runEuclideanAlgorithm(a.buildMonomial(i,1),g,i),b=y[0],v=y[1],N=this.findErrorLocations(b),O=this.findErrorMagnitudes(v,N);for(let L=0;L<N.length;L++){const k=t.length-1-a.log(N[L]);if(k<0)throw new Yn("Bad error location");t[k]=ht.addOrSubtract(t[k],O[L])}}runEuclideanAlgorithm(t,i,a){if(t.getDegree()<i.getDegree()){const L=t;t=i,i=L}const o=this.field;let u=t,f=i,g=o.getZero(),y=o.getOne();for(;f.getDegree()>=(a/2|0);){let L=u,k=g;if(u=f,g=y,u.isZero())throw new Yn("r_{i-1} was zero");f=L;let j=o.getZero();const V=u.getCoefficient(u.getDegree()),$=o.inverse(V);for(;f.getDegree()>=u.getDegree()&&!f.isZero();){const xe=f.getDegree()-u.getDegree(),pe=o.multiply(f.getCoefficient(f.getDegree()),$);j=j.addOrSubtract(o.buildMonomial(xe,pe)),f=f.addOrSubtract(u.multiplyByMonomial(xe,pe))}if(y=j.multiply(g).addOrSubtract(k),f.getDegree()>=u.getDegree())throw new qn("Division algorithm failed to reduce polynomial?")}const b=y.getCoefficient(0);if(b===0)throw new Yn("sigmaTilde(0) was zero");const v=o.inverse(b),N=y.multiplyScalar(v),O=f.multiplyScalar(v);return[N,O]}findErrorLocations(t){const i=t.getDegree();if(i===1)return Int32Array.from([t.getCoefficient(1)]);const a=new Int32Array(i);let o=0;const u=this.field;for(let f=1;f<u.getSize()&&o<i;f++)t.evaluateAt(f)===0&&(a[o]=u.inverse(f),o++);if(o!==i)throw new Yn("Error locator degree does not match number of roots");return a}findErrorMagnitudes(t,i){const a=i.length,o=new Int32Array(a),u=this.field;for(let f=0;f<a;f++){const g=u.inverse(i[f]);let y=1;for(let b=0;b<a;b++)if(f!==b){const v=u.multiply(i[b],g),N=(v&1)===0?v|1:v&-2;y=u.multiply(y,N)}o[f]=u.multiply(t.evaluateAt(g),u.inverse(y)),u.getGeneratorBase()!==0&&(o[f]=u.multiply(o[f],g))}return o}}var wn;(function(T){T[T.UPPER=0]="UPPER",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.DIGIT=3]="DIGIT",T[T.PUNCT=4]="PUNCT",T[T.BINARY=5]="BINARY"})(wn||(wn={}));class St{decode(t){this.ddata=t;let i=t.getBits(),a=this.extractBits(i),o=this.correctBits(a),u=St.convertBoolArrayToByteArray(o),f=St.getEncodedData(o),g=new Bt(u,f,null,null);return g.setNumBits(o.length),g}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let i=t.length,a=wn.UPPER,o=wn.UPPER,u="",f=0;for(;f<i;)if(o===wn.BINARY){if(i-f<5)break;let g=St.readCode(t,f,5);if(f+=5,g===0){if(i-f<11)break;g=St.readCode(t,f,11)+31,f+=11}for(let y=0;y<g;y++){if(i-f<8){f=i;break}const b=St.readCode(t,f,8);u+=ve.castAsNonUtf8Char(b),f+=8}o=a}else{let g=o===wn.DIGIT?4:5;if(i-f<g)break;let y=St.readCode(t,f,g);f+=g;let b=St.getCharacter(o,y);b.startsWith("CTRL_")?(a=o,o=St.getTable(b.charAt(5)),b.charAt(6)==="L"&&(a=o)):(u+=b,o=a)}return u}static getTable(t){switch(t){case"L":return wn.LOWER;case"P":return wn.PUNCT;case"M":return wn.MIXED;case"D":return wn.DIGIT;case"B":return wn.BINARY;default:return wn.UPPER}}static getCharacter(t,i){switch(t){case wn.UPPER:return St.UPPER_TABLE[i];case wn.LOWER:return St.LOWER_TABLE[i];case wn.MIXED:return St.MIXED_TABLE[i];case wn.PUNCT:return St.PUNCT_TABLE[i];case wn.DIGIT:return St.DIGIT_TABLE[i];default:throw new qn("Bad table")}}correctBits(t){let i,a;this.ddata.getNbLayers()<=2?(a=6,i=ht.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,i=ht.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,i=ht.AZTEC_DATA_10):(a=12,i=ht.AZTEC_DATA_12);let o=this.ddata.getNbDatablocks(),u=t.length/a;if(u<o)throw new Q;let f=t.length%a,g=new Int32Array(u);for(let O=0;O<u;O++,f+=a)g[O]=St.readCode(t,f,a);try{new lr(i).decode(g,u-o)}catch(O){throw new Q(O)}let y=(1<<a)-1,b=0;for(let O=0;O<o;O++){let L=g[O];if(L===0||L===y)throw new Q;(L===1||L===y-1)&&b++}let v=new Array(o*a-b),N=0;for(let O=0;O<o;O++){let L=g[O];if(L===1||L===y-1)v.fill(L>1,N,N+a-1),N+=a-1;else for(let k=a-1;k>=0;--k)v[N++]=(L&1<<k)!==0}return v}extractBits(t){let i=this.ddata.isCompact(),a=this.ddata.getNbLayers(),o=(i?11:14)+a*4,u=new Int32Array(o),f=new Array(this.totalBitsInLayer(a,i));if(i)for(let g=0;g<u.length;g++)u[g]=g;else{let g=o+1+2*Y.truncDivision(Y.truncDivision(o,2)-1,15),y=o/2,b=Y.truncDivision(g,2);for(let v=0;v<y;v++){let N=v+Y.truncDivision(v,15);u[y-v-1]=b-N-1,u[y+v]=b+N+1}}for(let g=0,y=0;g<a;g++){let b=(a-g)*4+(i?9:12),v=g*2,N=o-1-v;for(let O=0;O<b;O++){let L=O*2;for(let k=0;k<2;k++)f[y+L+k]=t.get(u[v+k],u[v+O]),f[y+2*b+L+k]=t.get(u[v+O],u[N-k]),f[y+4*b+L+k]=t.get(u[N-k],u[N-O]),f[y+6*b+L+k]=t.get(u[N-O],u[v+k])}y+=b*8}return f}static readCode(t,i,a){let o=0;for(let u=i;u<i+a;u++)o<<=1,t[u]&&(o|=1);return o}static readByte(t,i){let a=t.length-i;return a>=8?St.readCode(t,i,8):St.readCode(t,i,a)<<8-a}static convertBoolArrayToByteArray(t){let i=new Uint8Array((t.length+7)/8);for(let a=0;a<i.length;a++)i[a]=St.readByte(t,8*a);return i}totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}St.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],St.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],St.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],St.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],St.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class $e{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,i,a,o){const u=t-a,f=i-o;return Math.sqrt(u*u+f*f)}static sum(t){let i=0;for(let a=0,o=t.length;a!==o;a++){const u=t[a];i+=u}return i}}class Br{static floatToIntBits(t){return t}}Br.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Ne{constructor(t,i){this.x=t,this.y=i}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Ne){const i=t;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*Br.floatToIntBits(this.x)+Br.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const i=this.distance(t[0],t[1]),a=this.distance(t[1],t[2]),o=this.distance(t[0],t[2]);let u,f,g;if(a>=i&&a>=o?(f=t[0],u=t[1],g=t[2]):o>=a&&o>=i?(f=t[1],u=t[0],g=t[2]):(f=t[2],u=t[0],g=t[1]),this.crossProductZ(u,f,g)<0){const y=u;u=g,g=y}t[0]=u,t[1]=f,t[2]=g}static distance(t,i){return $e.distance(t.x,t.y,i.x,i.y)}static crossProductZ(t,i,a){const o=i.x,u=i.y;return(a.x-o)*(t.y-u)-(a.y-u)*(t.x-o)}}class $a{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class ao extends $a{constructor(t,i,a,o,u){super(t,i),this.compact=a,this.nbDatablocks=o,this.nbLayers=u}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Kt{constructor(t,i,a,o){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),i==null&&(i=Kt.INIT_SIZE),a==null&&(a=t.getWidth()/2|0),o==null&&(o=t.getHeight()/2|0);const u=i/2|0;if(this.leftInit=a-u,this.rightInit=a+u,this.upInit=o-u,this.downInit=o+u,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ie}detect(){let t=this.leftInit,i=this.rightInit,a=this.upInit,o=this.downInit,u=!1,f=!0,g=!1,y=!1,b=!1,v=!1,N=!1;const O=this.width,L=this.height;for(;f;){f=!1;let k=!0;for(;(k||!y)&&i<O;)k=this.containsBlackPoint(a,o,i,!1),k?(i++,f=!0,y=!0):y||i++;if(i>=O){u=!0;break}let j=!0;for(;(j||!b)&&o<L;)j=this.containsBlackPoint(t,i,o,!0),j?(o++,f=!0,b=!0):b||o++;if(o>=L){u=!0;break}let V=!0;for(;(V||!v)&&t>=0;)V=this.containsBlackPoint(a,o,t,!1),V?(t--,f=!0,v=!0):v||t--;if(t<0){u=!0;break}let $=!0;for(;($||!N)&&a>=0;)$=this.containsBlackPoint(t,i,a,!0),$?(a--,f=!0,N=!0):N||a--;if(a<0){u=!0;break}f&&(g=!0)}if(!u&&g){const k=i-t;let j=null;for(let pe=1;j===null&&pe<k;pe++)j=this.getBlackPointOnSegment(t,o-pe,t+pe,o);if(j==null)throw new ie;let V=null;for(let pe=1;V===null&&pe<k;pe++)V=this.getBlackPointOnSegment(t,a+pe,t+pe,a);if(V==null)throw new ie;let $=null;for(let pe=1;$===null&&pe<k;pe++)$=this.getBlackPointOnSegment(i,a+pe,i-pe,a);if($==null)throw new ie;let xe=null;for(let pe=1;xe===null&&pe<k;pe++)xe=this.getBlackPointOnSegment(i,o-pe,i-pe,o);if(xe==null)throw new ie;return this.centerEdges(xe,j,$,V)}else throw new ie}getBlackPointOnSegment(t,i,a,o){const u=$e.round($e.distance(t,i,a,o)),f=(a-t)/u,g=(o-i)/u,y=this.image;for(let b=0;b<u;b++){const v=$e.round(t+b*f),N=$e.round(i+b*g);if(y.get(v,N))return new Ne(v,N)}return null}centerEdges(t,i,a,o){const u=t.getX(),f=t.getY(),g=i.getX(),y=i.getY(),b=a.getX(),v=a.getY(),N=o.getX(),O=o.getY(),L=Kt.CORR;return u<this.width/2?[new Ne(N-L,O+L),new Ne(g+L,y+L),new Ne(b-L,v-L),new Ne(u+L,f-L)]:[new Ne(N+L,O+L),new Ne(g+L,y-L),new Ne(b-L,v+L),new Ne(u-L,f-L)]}containsBlackPoint(t,i,a,o){const u=this.image;if(o){for(let f=t;f<=i;f++)if(u.get(f,a))return!0}else for(let f=t;f<=i;f++)if(u.get(a,f))return!0;return!1}}Kt.INIT_SIZE=10,Kt.CORR=1;class Qs{static checkAndNudgePoints(t,i){const a=t.getWidth(),o=t.getHeight();let u=!0;for(let f=0;f<i.length&&u;f+=2){const g=Math.floor(i[f]),y=Math.floor(i[f+1]);if(g<-1||g>a||y<-1||y>o)throw new ie;u=!1,g===-1?(i[f]=0,u=!0):g===a&&(i[f]=a-1,u=!0),y===-1?(i[f+1]=0,u=!0):y===o&&(i[f+1]=o-1,u=!0)}u=!0;for(let f=i.length-2;f>=0&&u;f-=2){const g=Math.floor(i[f]),y=Math.floor(i[f+1]);if(g<-1||g>a||y<-1||y>o)throw new ie;u=!1,g===-1?(i[f]=0,u=!0):g===a&&(i[f]=a-1,u=!0),y===-1?(i[f+1]=0,u=!0):y===o&&(i[f+1]=o-1,u=!0)}}}class Xn{constructor(t,i,a,o,u,f,g,y,b){this.a11=t,this.a21=i,this.a31=a,this.a12=o,this.a22=u,this.a32=f,this.a13=g,this.a23=y,this.a33=b}static quadrilateralToQuadrilateral(t,i,a,o,u,f,g,y,b,v,N,O,L,k,j,V){const $=Xn.quadrilateralToSquare(t,i,a,o,u,f,g,y);return Xn.squareToQuadrilateral(b,v,N,O,L,k,j,V).times($)}transformPoints(t){const i=t.length,a=this.a11,o=this.a12,u=this.a13,f=this.a21,g=this.a22,y=this.a23,b=this.a31,v=this.a32,N=this.a33;for(let O=0;O<i;O+=2){const L=t[O],k=t[O+1],j=u*L+y*k+N;t[O]=(a*L+f*k+b)/j,t[O+1]=(o*L+g*k+v)/j}}transformPointsWithValues(t,i){const a=this.a11,o=this.a12,u=this.a13,f=this.a21,g=this.a22,y=this.a23,b=this.a31,v=this.a32,N=this.a33,O=t.length;for(let L=0;L<O;L++){const k=t[L],j=i[L],V=u*k+y*j+N;t[L]=(a*k+f*j+b)/V,i[L]=(o*k+g*j+v)/V}}static squareToQuadrilateral(t,i,a,o,u,f,g,y){const b=t-a+u-g,v=i-o+f-y;if(b===0&&v===0)return new Xn(a-t,u-a,t,o-i,f-o,i,0,0,1);{const N=a-u,O=g-u,L=o-f,k=y-f,j=N*k-O*L,V=(b*k-O*v)/j,$=(N*v-b*L)/j;return new Xn(a-t+V*a,g-t+$*g,t,o-i+V*o,y-i+$*y,i,V,$,1)}}static quadrilateralToSquare(t,i,a,o,u,f,g,y){return Xn.squareToQuadrilateral(t,i,a,o,u,f,g,y).buildAdjoint()}buildAdjoint(){return new Xn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new Xn(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class Js extends Qs{sampleGrid(t,i,a,o,u,f,g,y,b,v,N,O,L,k,j,V,$,xe,pe){const ge=Xn.quadrilateralToQuadrilateral(o,u,f,g,y,b,v,N,O,L,k,j,V,$,xe,pe);return this.sampleGridWithTransform(t,i,a,ge)}sampleGridWithTransform(t,i,a,o){if(i<=0||a<=0)throw new ie;const u=new gt(i,a),f=new Float32Array(2*i);for(let g=0;g<a;g++){const y=f.length,b=g+.5;for(let v=0;v<y;v+=2)f[v]=v/2+.5,f[v+1]=b;o.transformPoints(f),Qs.checkAndNudgePoints(t,f);try{for(let v=0;v<y;v+=2)t.get(Math.floor(f[v]),Math.floor(f[v+1]))&&u.set(v/2,g)}catch{throw new ie}}return u}}class ii{static setGridSampler(t){ii.gridSampler=t}static getInstance(){return ii.gridSampler}}ii.gridSampler=new Js;class Nn{constructor(t,i){this.x=t,this.y=i}toResultPoint(){return new Ne(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class $s{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let i=this.getMatrixCenter(),a=this.getBullsEyeCorners(i);if(t){let f=a[0];a[0]=a[2],a[2]=f}this.extractParameters(a);let o=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),u=this.getMatrixCornerPoints(a);return new ao(o,u,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new ie;let i=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(t[0],t[1],i),this.sampleLine(t[1],t[2],i),this.sampleLine(t[2],t[3],i),this.sampleLine(t[3],t[0],i)]);this.shift=this.getRotation(a,i);let o=0;for(let f=0;f<4;f++){let g=a[(this.shift+f)%4];this.compact?(o<<=7,o+=g>>1&127):(o<<=10,o+=(g>>2&992)+(g>>1&31))}let u=this.getCorrectedParameterData(o,this.compact);this.compact?(this.nbLayers=(u>>6)+1,this.nbDataBlocks=(u&63)+1):(this.nbLayers=(u>>11)+1,this.nbDataBlocks=(u&2047)+1)}getRotation(t,i){let a=0;t.forEach((o,u,f)=>{let g=(o>>i-2<<1)+(o&1);a=(a<<3)+g}),a=((a&1)<<11)+(a>>1);for(let o=0;o<4;o++)if(Y.bitCount(a^this.EXPECTED_CORNER_BITS[o])<=2)return o;throw new ie}getCorrectedParameterData(t,i){let a,o;i?(a=7,o=2):(a=10,o=4);let u=a-o,f=new Int32Array(a);for(let y=a-1;y>=0;--y)f[y]=t&15,t>>=4;try{new lr(ht.AZTEC_PARAM).decode(f,u)}catch{throw new ie}let g=0;for(let y=0;y<o;y++)g=(g<<4)+f[y];return g}getBullsEyeCorners(t){let i=t,a=t,o=t,u=t,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let N=this.getFirstDifferent(i,f,1,-1),O=this.getFirstDifferent(a,f,1,1),L=this.getFirstDifferent(o,f,-1,1),k=this.getFirstDifferent(u,f,-1,-1);if(this.nbCenterLayers>2){let j=this.distancePoint(k,N)*this.nbCenterLayers/(this.distancePoint(u,i)*(this.nbCenterLayers+2));if(j<.75||j>1.25||!this.isWhiteOrBlackRectangle(N,O,L,k))break}i=N,a=O,o=L,u=k,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ie;this.compact=this.nbCenterLayers===5;let g=new Ne(i.getX()+.5,i.getY()-.5),y=new Ne(a.getX()+.5,a.getY()+.5),b=new Ne(o.getX()-.5,o.getY()+.5),v=new Ne(u.getX()-.5,u.getY()-.5);return this.expandSquare([g,y,b,v],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,i,a,o;try{let g=new Kt(this.image).detect();t=g[0],i=g[1],a=g[2],o=g[3]}catch{let y=this.image.getWidth()/2,b=this.image.getHeight()/2;t=this.getFirstDifferent(new Nn(y+7,b-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Nn(y+7,b+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Nn(y-7,b+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new Nn(y-7,b-7),!1,-1,-1).toResultPoint()}let u=$e.round((t.getX()+o.getX()+i.getX()+a.getX())/4),f=$e.round((t.getY()+o.getY()+i.getY()+a.getY())/4);try{let g=new Kt(this.image,15,u,f).detect();t=g[0],i=g[1],a=g[2],o=g[3]}catch{t=this.getFirstDifferent(new Nn(u+7,f-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Nn(u+7,f+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Nn(u-7,f+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new Nn(u-7,f-7),!1,-1,-1).toResultPoint()}return u=$e.round((t.getX()+o.getX()+i.getX()+a.getX())/4),f=$e.round((t.getY()+o.getY()+i.getY()+a.getY())/4),new Nn(u,f)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,i,a,o,u){let f=ii.getInstance(),g=this.getDimension(),y=g/2-this.nbCenterLayers,b=g/2+this.nbCenterLayers;return f.sampleGrid(t,g,g,y,y,b,y,b,b,y,b,i.getX(),i.getY(),a.getX(),a.getY(),o.getX(),o.getY(),u.getX(),u.getY())}sampleLine(t,i,a){let o=0,u=this.distanceResultPoint(t,i),f=u/a,g=t.getX(),y=t.getY(),b=f*(i.getX()-t.getX())/u,v=f*(i.getY()-t.getY())/u;for(let N=0;N<a;N++)this.image.get($e.round(g+N*b),$e.round(y+N*v))&&(o|=1<<a-N-1);return o}isWhiteOrBlackRectangle(t,i,a,o){let u=3;t=new Nn(t.getX()-u,t.getY()+u),i=new Nn(i.getX()-u,i.getY()-u),a=new Nn(a.getX()+u,a.getY()-u),o=new Nn(o.getX()+u,o.getY()+u);let f=this.getColor(o,t);if(f===0)return!1;let g=this.getColor(t,i);return g!==f||(g=this.getColor(i,a),g!==f)?!1:(g=this.getColor(a,o),g===f)}getColor(t,i){let a=this.distancePoint(t,i),o=(i.getX()-t.getX())/a,u=(i.getY()-t.getY())/a,f=0,g=t.getX(),y=t.getY(),b=this.image.get(t.getX(),t.getY()),v=Math.ceil(a);for(let O=0;O<v;O++)g+=o,y+=u,this.image.get($e.round(g),$e.round(y))!==b&&f++;let N=f/a;return N>.1&&N<.9?0:N<=.1===b?1:-1}getFirstDifferent(t,i,a,o){let u=t.getX()+a,f=t.getY()+o;for(;this.isValid(u,f)&&this.image.get(u,f)===i;)u+=a,f+=o;for(u-=a,f-=o;this.isValid(u,f)&&this.image.get(u,f)===i;)u+=a;for(u-=a;this.isValid(u,f)&&this.image.get(u,f)===i;)f+=o;return f-=o,new Nn(u,f)}expandSquare(t,i,a){let o=a/(2*i),u=t[0].getX()-t[2].getX(),f=t[0].getY()-t[2].getY(),g=(t[0].getX()+t[2].getX())/2,y=(t[0].getY()+t[2].getY())/2,b=new Ne(g+o*u,y+o*f),v=new Ne(g-o*u,y-o*f);u=t[1].getX()-t[3].getX(),f=t[1].getY()-t[3].getY(),g=(t[1].getX()+t[3].getX())/2,y=(t[1].getY()+t[3].getY())/2;let N=new Ne(g+o*u,y+o*f),O=new Ne(g-o*u,y-o*f);return[b,N,v,O]}isValid(t,i){return t>=0&&t<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(t){let i=$e.round(t.getX()),a=$e.round(t.getY());return this.isValid(i,a)}distancePoint(t,i){return $e.distance(t.getX(),t.getY(),i.getX(),i.getY())}distanceResultPoint(t,i){return $e.distance(t.getX(),t.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(Y.truncDivision(this.nbLayers-4,8)+1)+15}}class es{decode(t,i=null){let a=null,o=new $s(t.getBlackMatrix()),u=null,f=null;try{let v=o.detectMirror(!1);u=v.getPoints(),this.reportFoundResultPoints(i,u),f=new St().decode(v)}catch(v){a=v}if(f==null)try{let v=o.detectMirror(!0);u=v.getPoints(),this.reportFoundResultPoints(i,u),f=new St().decode(v)}catch(v){throw a??v}let g=new Ee(f.getText(),f.getRawBytes(),f.getNumBits(),u,be.AZTEC,W.currentTimeMillis()),y=f.getByteSegments();y!=null&&g.putMetadata(ut.BYTE_SEGMENTS,y);let b=f.getECLevel();return b!=null&&g.putMetadata(ut.ERROR_CORRECTION_LEVEL,b),g}reportFoundResultPoints(t,i){if(t!=null){let a=t.get(we.NEED_RESULT_POINT_CALLBACK);a!=null&&i.forEach((o,u,f)=>{a.foundPossibleResultPoint(o)})}}reset(){}}class Fc extends Ae{constructor(t=500){super(new es,t)}}class Ft{decode(t,i){try{return this.doDecode(t,i)}catch{if(i&&i.get(we.TRY_HARDER)===!0&&t.isRotateSupported()){const u=t.rotateCounterClockwise(),f=this.doDecode(u,i),g=f.getResultMetadata();let y=270;g!==null&&g.get(ut.ORIENTATION)===!0&&(y=y+g.get(ut.ORIENTATION)%360),f.putMetadata(ut.ORIENTATION,y);const b=f.getResultPoints();if(b!==null){const v=u.getHeight();for(let N=0;N<b.length;N++)b[N]=new Ne(v-b[N].getY()-1,b[N].getX())}return f}else throw new ie}}reset(){}doDecode(t,i){const a=t.getWidth(),o=t.getHeight();let u=new fe(a);const f=i&&i.get(we.TRY_HARDER)===!0,g=Math.max(1,o>>(f?8:5));let y;f?y=o:y=15;const b=Math.trunc(o/2);for(let v=0;v<y;v++){const N=Math.trunc((v+1)/2),O=(v&1)===0,L=b+g*(O?N:-N);if(L<0||L>=o)break;try{u=t.getBlackRow(L,u)}catch{continue}for(let k=0;k<2;k++){if(k===1&&(u.reverse(),i&&i.get(we.NEED_RESULT_POINT_CALLBACK)===!0)){const j=new Map;i.forEach((V,$)=>j.set($,V)),j.delete(we.NEED_RESULT_POINT_CALLBACK),i=j}try{const j=this.decodeRow(L,u,i);if(k===1){j.putMetadata(ut.ORIENTATION,180);const V=j.getResultPoints();V!==null&&(V[0]=new Ne(a-V[0].getX()-1,V[0].getY()),V[1]=new Ne(a-V[1].getX()-1,V[1].getY()))}return j}catch{}}}throw new ie}static recordPattern(t,i,a){const o=a.length;for(let b=0;b<o;b++)a[b]=0;const u=t.getSize();if(i>=u)throw new ie;let f=!t.get(i),g=0,y=i;for(;y<u;){if(t.get(y)!==f)a[g]++;else{if(++g===o)break;a[g]=1,f=!f}y++}if(!(g===o||g===o-1&&y===u))throw new ie}static recordPatternInReverse(t,i,a){let o=a.length,u=t.get(i);for(;i>0&&o>=0;)t.get(--i)!==u&&(o--,u=!u);if(o>=0)throw new ie;Ft.recordPattern(t,i+1,a)}static patternMatchVariance(t,i,a){const o=t.length;let u=0,f=0;for(let b=0;b<o;b++)u+=t[b],f+=i[b];if(u<f)return Number.POSITIVE_INFINITY;const g=u/f;a*=g;let y=0;for(let b=0;b<o;b++){const v=t[b],N=i[b]*g,O=v>N?v-N:N-v;if(O>a)return Number.POSITIVE_INFINITY;y+=O}return y/u}}class ye extends Ft{static findStartPattern(t){const i=t.getSize(),a=t.getNextSet(0);let o=0,u=Int32Array.from([0,0,0,0,0,0]),f=a,g=!1;const y=6;for(let b=a;b<i;b++)if(t.get(b)!==g)u[o]++;else{if(o===y-1){let v=ye.MAX_AVG_VARIANCE,N=-1;for(let O=ye.CODE_START_A;O<=ye.CODE_START_C;O++){const L=Ft.patternMatchVariance(u,ye.CODE_PATTERNS[O],ye.MAX_INDIVIDUAL_VARIANCE);L<v&&(v=L,N=O)}if(N>=0&&t.isRange(Math.max(0,f-(b-f)/2),f,!1))return Int32Array.from([f,b,N]);f+=u[0]+u[1],u=u.slice(2,u.length-1),u[o-1]=0,u[o]=0,o--}else o++;u[o]=1,g=!g}throw new ie}static decodeCode(t,i,a){Ft.recordPattern(t,a,i);let o=ye.MAX_AVG_VARIANCE,u=-1;for(let f=0;f<ye.CODE_PATTERNS.length;f++){const g=ye.CODE_PATTERNS[f],y=this.patternMatchVariance(i,g,ye.MAX_INDIVIDUAL_VARIANCE);y<o&&(o=y,u=f)}if(u>=0)return u;throw new ie}decodeRow(t,i,a){const o=a&&a.get(we.ASSUME_GS1)===!0,u=ye.findStartPattern(i),f=u[2];let g=0;const y=new Uint8Array(20);y[g++]=f;let b;switch(f){case ye.CODE_START_A:b=ye.CODE_CODE_A;break;case ye.CODE_START_B:b=ye.CODE_CODE_B;break;case ye.CODE_START_C:b=ye.CODE_CODE_C;break;default:throw new Q}let v=!1,N=!1,O="",L=u[0],k=u[1];const j=Int32Array.from([0,0,0,0,0,0]);let V=0,$=0,xe=f,pe=0,ge=!0,Ke=!1,Ge=!1;for(;!v;){const gr=N;switch(N=!1,V=$,$=ye.decodeCode(i,j,k),y[g++]=$,$!==ye.CODE_STOP&&(ge=!0),$!==ye.CODE_STOP&&(pe++,xe+=pe*$),L=k,k+=j.reduce((Ao,hl)=>Ao+hl,0),$){case ye.CODE_START_A:case ye.CODE_START_B:case ye.CODE_START_C:throw new Q}switch(b){case ye.CODE_CODE_A:if($<64)Ge===Ke?O+=String.fromCharCode(32+$):O+=String.fromCharCode(32+$+128),Ge=!1;else if($<96)Ge===Ke?O+=String.fromCharCode($-64):O+=String.fromCharCode($+64),Ge=!1;else switch($!==ye.CODE_STOP&&(ge=!1),$){case ye.CODE_FNC_1:o&&(O.length===0?O+="]C1":O+="");break;case ye.CODE_FNC_2:case ye.CODE_FNC_3:break;case ye.CODE_FNC_4_A:!Ke&&Ge?(Ke=!0,Ge=!1):Ke&&Ge?(Ke=!1,Ge=!1):Ge=!0;break;case ye.CODE_SHIFT:N=!0,b=ye.CODE_CODE_B;break;case ye.CODE_CODE_B:b=ye.CODE_CODE_B;break;case ye.CODE_CODE_C:b=ye.CODE_CODE_C;break;case ye.CODE_STOP:v=!0;break}break;case ye.CODE_CODE_B:if($<96)Ge===Ke?O+=String.fromCharCode(32+$):O+=String.fromCharCode(32+$+128),Ge=!1;else switch($!==ye.CODE_STOP&&(ge=!1),$){case ye.CODE_FNC_1:o&&(O.length===0?O+="]C1":O+="");break;case ye.CODE_FNC_2:case ye.CODE_FNC_3:break;case ye.CODE_FNC_4_B:!Ke&&Ge?(Ke=!0,Ge=!1):Ke&&Ge?(Ke=!1,Ge=!1):Ge=!0;break;case ye.CODE_SHIFT:N=!0,b=ye.CODE_CODE_A;break;case ye.CODE_CODE_A:b=ye.CODE_CODE_A;break;case ye.CODE_CODE_C:b=ye.CODE_CODE_C;break;case ye.CODE_STOP:v=!0;break}break;case ye.CODE_CODE_C:if($<100)$<10&&(O+="0"),O+=$;else switch($!==ye.CODE_STOP&&(ge=!1),$){case ye.CODE_FNC_1:o&&(O.length===0?O+="]C1":O+="");break;case ye.CODE_CODE_A:b=ye.CODE_CODE_A;break;case ye.CODE_CODE_B:b=ye.CODE_CODE_B;break;case ye.CODE_STOP:v=!0;break}break}gr&&(b=b===ye.CODE_CODE_A?ye.CODE_CODE_B:ye.CODE_CODE_A)}const en=k-L;if(k=i.getNextUnset(k),!i.isRange(k,Math.min(i.getSize(),k+(k-L)/2),!1))throw new ie;if(xe-=pe*V,xe%103!==V)throw new P;const Qn=O.length;if(Qn===0)throw new ie;Qn>0&&ge&&(b===ye.CODE_CODE_C?O=O.substring(0,Qn-2):O=O.substring(0,Qn-1));const In=(u[1]+u[0])/2,_t=L+en/2,vn=y.length,Gn=new Uint8Array(vn);for(let gr=0;gr<vn;gr++)Gn[gr]=y[gr];const Zr=[new Ne(In,t),new Ne(_t,t)];return new Ee(O,Gn,0,Zr,be.CODE_128,new Date().getTime())}}ye.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],ye.MAX_AVG_VARIANCE=.25,ye.MAX_INDIVIDUAL_VARIANCE=.7,ye.CODE_SHIFT=98,ye.CODE_CODE_C=99,ye.CODE_CODE_B=100,ye.CODE_CODE_A=101,ye.CODE_FNC_1=102,ye.CODE_FNC_2=97,ye.CODE_FNC_3=96,ye.CODE_FNC_4_A=101,ye.CODE_FNC_4_B=100,ye.CODE_START_A=103,ye.CODE_START_B=104,ye.CODE_START_C=105,ye.CODE_STOP=106;class Rt extends Ft{constructor(t=!1,i=!1){super(),this.usingCheckDigit=t,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,i,a){let o=this.counters;o.fill(0),this.decodeRowResult="";let u=Rt.findAsteriskPattern(i,o),f=i.getNextSet(u[1]),g=i.getSize(),y,b;do{Rt.recordPattern(i,f,o);let j=Rt.toNarrowWidePattern(o);if(j<0)throw new ie;y=Rt.patternToChar(j),this.decodeRowResult+=y,b=f;for(let V of o)f+=V;f=i.getNextSet(f)}while(y!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let v=0;for(let j of o)v+=j;let N=f-b-v;if(f!==g&&N*2<v)throw new ie;if(this.usingCheckDigit){let j=this.decodeRowResult.length-1,V=0;for(let $=0;$<j;$++)V+=Rt.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt($));if(this.decodeRowResult.charAt(j)!==Rt.ALPHABET_STRING.charAt(V%43))throw new P;this.decodeRowResult=this.decodeRowResult.substring(0,j)}if(this.decodeRowResult.length===0)throw new ie;let O;this.extendedMode?O=Rt.decodeExtended(this.decodeRowResult):O=this.decodeRowResult;let L=(u[1]+u[0])/2,k=b+v/2;return new Ee(O,null,0,[new Ne(L,t),new Ne(k,t)],be.CODE_39,new Date().getTime())}static findAsteriskPattern(t,i){let a=t.getSize(),o=t.getNextSet(0),u=0,f=o,g=!1,y=i.length;for(let b=o;b<a;b++)if(t.get(b)!==g)i[u]++;else{if(u===y-1){if(this.toNarrowWidePattern(i)===Rt.ASTERISK_ENCODING&&t.isRange(Math.max(0,f-Math.floor((b-f)/2)),f,!1))return[f,b];f+=i[0]+i[1],i.copyWithin(0,2,2+u-1),i[u-1]=0,i[u]=0,u--}else u++;i[u]=1,g=!g}throw new ie}static toNarrowWidePattern(t){let i=t.length,a=0,o;do{let u=2147483647;for(let y of t)y<u&&y>a&&(u=y);a=u,o=0;let f=0,g=0;for(let y=0;y<i;y++){let b=t[y];b>a&&(g|=1<<i-1-y,o++,f+=b)}if(o===3){for(let y=0;y<i&&o>0;y++){let b=t[y];if(b>a&&(o--,b*2>=f))return-1}return g}}while(o>3);return-1}static patternToChar(t){for(let i=0;i<Rt.CHARACTER_ENCODINGS.length;i++)if(Rt.CHARACTER_ENCODINGS[i]===t)return Rt.ALPHABET_STRING.charAt(i);if(t===Rt.ASTERISK_ENCODING)return"*";throw new ie}static decodeExtended(t){let i=t.length,a="";for(let o=0;o<i;o++){let u=t.charAt(o);if(u==="+"||u==="$"||u==="%"||u==="/"){let f=t.charAt(o+1),g="\0";switch(u){case"+":if(f>="A"&&f<="Z")g=String.fromCharCode(f.charCodeAt(0)+32);else throw new Q;break;case"$":if(f>="A"&&f<="Z")g=String.fromCharCode(f.charCodeAt(0)-64);else throw new Q;break;case"%":if(f>="A"&&f<="E")g=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")g=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")g=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")g=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")g="\0";else if(f==="V")g="@";else if(f==="W")g="`";else if(f==="X"||f==="Y"||f==="Z")g="";else throw new Q;break;case"/":if(f>="A"&&f<="O")g=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")g=":";else throw new Q;break}a+=g,o++}else a+=u}return a}}Rt.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",Rt.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],Rt.ASTERISK_ENCODING=148;class Xe extends Ft{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,i,a){let o=this.decodeStart(i),u=this.decodeEnd(i),f=new Ye;Xe.decodeMiddle(i,o[1],u[0],f);let g=f.toString(),y=null;a!=null&&(y=a.get(we.ALLOWED_LENGTHS)),y==null&&(y=Xe.DEFAULT_ALLOWED_LENGTHS);let b=g.length,v=!1,N=0;for(let k of y){if(b===k){v=!0;break}k>N&&(N=k)}if(!v&&b>N&&(v=!0),!v)throw new Q;const O=[new Ne(o[1],t),new Ne(u[0],t)];return new Ee(g,null,0,O,be.ITF,new Date().getTime())}static decodeMiddle(t,i,a,o){let u=new Int32Array(10),f=new Int32Array(5),g=new Int32Array(5);for(u.fill(0),f.fill(0),g.fill(0);i<a;){Ft.recordPattern(t,i,u);for(let b=0;b<5;b++){let v=2*b;f[b]=u[v],g[b]=u[v+1]}let y=Xe.decodeDigit(f);o.append(y.toString()),y=this.decodeDigit(g),o.append(y.toString()),u.forEach(function(b){i+=b})}}decodeStart(t){let i=Xe.skipWhiteSpace(t),a=Xe.findGuardPattern(t,i,Xe.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(t,a[0]),a}validateQuietZone(t,i){let a=this.narrowLineWidth*10;a=a<i?a:i;for(let o=i-1;a>0&&o>=0&&!t.get(o);o--)a--;if(a!==0)throw new ie}static skipWhiteSpace(t){const i=t.getSize(),a=t.getNextSet(0);if(a===i)throw new ie;return a}decodeEnd(t){t.reverse();try{let i=Xe.skipWhiteSpace(t),a;try{a=Xe.findGuardPattern(t,i,Xe.END_PATTERN_REVERSED[0])}catch(u){u instanceof ie&&(a=Xe.findGuardPattern(t,i,Xe.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,a[0]);let o=a[0];return a[0]=t.getSize()-a[1],a[1]=t.getSize()-o,a}finally{t.reverse()}}static findGuardPattern(t,i,a){let o=a.length,u=new Int32Array(o),f=t.getSize(),g=!1,y=0,b=i;u.fill(0);for(let v=i;v<f;v++)if(t.get(v)!==g)u[y]++;else{if(y===o-1){if(Ft.patternMatchVariance(u,a,Xe.MAX_INDIVIDUAL_VARIANCE)<Xe.MAX_AVG_VARIANCE)return[b,v];b+=u[0]+u[1],W.arraycopy(u,2,u,0,y-1),u[y-1]=0,u[y]=0,y--}else y++;u[y]=1,g=!g}throw new ie}static decodeDigit(t){let i=Xe.MAX_AVG_VARIANCE,a=-1,o=Xe.PATTERNS.length;for(let u=0;u<o;u++){let f=Xe.PATTERNS[u],g=Ft.patternMatchVariance(t,f,Xe.MAX_INDIVIDUAL_VARIANCE);g<i?(i=g,a=u):g===i&&(a=-1)}if(a>=0)return a%10;throw new ie}}Xe.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Xe.MAX_AVG_VARIANCE=.38,Xe.MAX_INDIVIDUAL_VARIANCE=.5,Xe.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Xe.START_PATTERN=Int32Array.from([1,1,1,1]),Xe.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Xt extends Ft{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let i=!1,a,o=0,u=Int32Array.from([0,0,0]);for(;!i;){u=Int32Array.from([0,0,0]),a=Xt.findGuardPattern(t,o,!1,this.START_END_PATTERN,u);let f=a[0];o=a[1];let g=f-(o-f);g>=0&&(i=t.isRange(g,f,!1))}return a}static checkChecksum(t){return Xt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let a=parseInt(t.charAt(i-1),10);return Xt.getStandardUPCEANChecksum(t.substring(0,i-1))===a}static getStandardUPCEANChecksum(t){let i=t.length,a=0;for(let o=i-1;o>=0;o-=2){let u=t.charAt(o).charCodeAt(0)-48;if(u<0||u>9)throw new Q;a+=u}a*=3;for(let o=i-2;o>=0;o-=2){let u=t.charAt(o).charCodeAt(0)-48;if(u<0||u>9)throw new Q;a+=u}return(1e3-a)%10}static decodeEnd(t,i){return Xt.findGuardPattern(t,i,!1,Xt.START_END_PATTERN,new Int32Array(Xt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,i,a,o){return this.findGuardPattern(t,i,a,o,new Int32Array(o.length))}static findGuardPattern(t,i,a,o,u){let f=t.getSize();i=a?t.getNextUnset(i):t.getNextSet(i);let g=0,y=i,b=o.length,v=a;for(let N=i;N<f;N++)if(t.get(N)!==v)u[g]++;else{if(g===b-1){if(Ft.patternMatchVariance(u,o,Xt.MAX_INDIVIDUAL_VARIANCE)<Xt.MAX_AVG_VARIANCE)return Int32Array.from([y,N]);y+=u[0]+u[1];let O=u.slice(2,u.length-1);for(let L=0;L<g-1;L++)u[L]=O[L];u[g-1]=0,u[g]=0,g--}else g++;u[g]=1,v=!v}throw new ie}static decodeDigit(t,i,a,o){this.recordPattern(t,a,i);let u=this.MAX_AVG_VARIANCE,f=-1,g=o.length;for(let y=0;y<g;y++){let b=o[y],v=Ft.patternMatchVariance(i,b,Xt.MAX_INDIVIDUAL_VARIANCE);v<u&&(u=v,f=y)}if(f>=0)return f;throw new ie}}Xt.MAX_AVG_VARIANCE=.48,Xt.MAX_INDIVIDUAL_VARIANCE=.7,Xt.START_END_PATTERN=Int32Array.from([1,1,1]),Xt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Xt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Xt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class Ea{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,a){let o=this.decodeRowStringBuffer,u=this.decodeMiddle(i,a,o),f=o.toString(),g=Ea.parseExtensionString(f),y=[new Ne((a[0]+a[1])/2,t),new Ne(u,t)],b=new Ee(f,null,0,y,be.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&b.putAllMetadata(g),b}decodeMiddle(t,i,a){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=t.getSize(),f=i[1],g=0;for(let b=0;b<5&&f<u;b++){let v=Xt.decodeDigit(t,o,f,Xt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+v%10);for(let N of o)f+=N;v>=10&&(g|=1<<4-b),b!==4&&(f=t.getNextSet(f),f=t.getNextUnset(f))}if(a.length!==5)throw new ie;let y=this.determineCheckDigit(g);if(Ea.extensionChecksum(a.toString())!==y)throw new ie;return f}static extensionChecksum(t){let i=t.length,a=0;for(let o=i-2;o>=0;o-=2)a+=t.charAt(o).charCodeAt(0)-48;a*=3;for(let o=i-1;o>=0;o-=2)a+=t.charAt(o).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(t){for(let i=0;i<10;i++)if(t===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new ie}static parseExtensionString(t){if(t.length!==5)return null;let i=Ea.parseExtension5String(t);return i==null?null:new Map([[ut.SUGGESTED_PRICE,i]])}static parseExtension5String(t){let i;switch(t.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let a=parseInt(t.substring(1)),o=(a/100).toString(),u=a%100,f=u<10?"0"+u:u.toString();return i+o+"."+f}}class el{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,a){let o=this.decodeRowStringBuffer,u=this.decodeMiddle(i,a,o),f=o.toString(),g=el.parseExtensionString(f),y=[new Ne((a[0]+a[1])/2,t),new Ne(u,t)],b=new Ee(f,null,0,y,be.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&b.putAllMetadata(g),b}decodeMiddle(t,i,a){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=t.getSize(),f=i[1],g=0;for(let y=0;y<2&&f<u;y++){let b=Xt.decodeDigit(t,o,f,Xt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+b%10);for(let v of o)f+=v;b>=10&&(g|=1<<1-y),y!==1&&(f=t.getNextSet(f),f=t.getNextUnset(f))}if(a.length!==2)throw new ie;if(parseInt(a.toString())%4!==g)throw new ie;return f}static parseExtensionString(t){return t.length!==2?null:new Map([[ut.ISSUE_NUMBER,parseInt(t)]])}}class va{static decodeRow(t,i,a){let o=Xt.findGuardPattern(i,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new Ea().decodeRow(t,i,o)}catch{return new el().decodeRow(t,i,o)}}}va.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class rt extends Xt{constructor(){super(),this.decodeRowStringBuffer="",rt.L_AND_G_PATTERNS=rt.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let i=rt.L_PATTERNS[t-10],a=new Int32Array(i.length);for(let o=0;o<i.length;o++)a[o]=i[i.length-o-1];rt.L_AND_G_PATTERNS[t]=a}}decodeRow(t,i,a){let o=rt.findStartGuardPattern(i),u=a==null?null:a.get(we.NEED_RESULT_POINT_CALLBACK);if(u!=null){const ge=new Ne((o[0]+o[1])/2,t);u.foundPossibleResultPoint(ge)}let f=this.decodeMiddle(i,o,this.decodeRowStringBuffer),g=f.rowOffset,y=f.resultString;if(u!=null){const ge=new Ne(g,t);u.foundPossibleResultPoint(ge)}let b=this.decodeEnd(i,g);if(u!=null){const ge=new Ne((b[0]+b[1])/2,t);u.foundPossibleResultPoint(ge)}let v=b[1],N=v+(v-b[0]);if(N>=i.getSize()||!i.isRange(v,N,!1))throw new ie;let O=y.toString();if(O.length<8)throw new Q;if(!rt.checkChecksum(O))throw new P;let L=(o[1]+o[0])/2,k=(b[1]+b[0])/2,j=this.getBarcodeFormat(),V=[new Ne(L,t),new Ne(k,t)],$=new Ee(O,null,0,V,j,new Date().getTime()),xe=0;try{let ge=va.decodeRow(t,i,b[1]);$.putMetadata(ut.UPC_EAN_EXTENSION,ge.getText()),$.putAllMetadata(ge.getResultMetadata()),$.addResultPoints(ge.getResultPoints()),xe=ge.getText().length}catch{}let pe=a==null?null:a.get(we.ALLOWED_EAN_EXTENSIONS);if(pe!=null){let ge=!1;for(let Ke in pe)if(xe.toString()===Ke){ge=!0;break}if(!ge)throw new ie}return $}decodeEnd(t,i){return rt.findGuardPattern(t,i,!1,rt.START_END_PATTERN,new Int32Array(rt.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return rt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let a=parseInt(t.charAt(i-1),10);return rt.getStandardUPCEANChecksum(t.substring(0,i-1))===a}static getStandardUPCEANChecksum(t){let i=t.length,a=0;for(let o=i-1;o>=0;o-=2){let u=t.charAt(o).charCodeAt(0)-48;if(u<0||u>9)throw new Q;a+=u}a*=3;for(let o=i-2;o>=0;o-=2){let u=t.charAt(o).charCodeAt(0)-48;if(u<0||u>9)throw new Q;a+=u}return(1e3-a)%10}}class Ai extends rt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,a){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=t.getSize(),f=i[1],g=0;for(let b=0;b<6&&f<u;b++){let v=rt.decodeDigit(t,o,f,rt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+v%10);for(let N of o)f+=N;v>=10&&(g|=1<<5-b)}a=Ai.determineFirstDigit(a,g),f=rt.findGuardPattern(t,f,!0,rt.MIDDLE_PATTERN,new Int32Array(rt.MIDDLE_PATTERN.length).fill(0))[1];for(let b=0;b<6&&f<u;b++){let v=rt.decodeDigit(t,o,f,rt.L_PATTERNS);a+=String.fromCharCode(48+v);for(let N of o)f+=N}return{rowOffset:f,resultString:a}}getBarcodeFormat(){return be.EAN_13}static determineFirstDigit(t,i){for(let a=0;a<10;a++)if(i===this.FIRST_DIGIT_ENCODINGS[a])return t=String.fromCharCode(48+a)+t,t;throw new ie}}Ai.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Wi extends rt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,a){const o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=t.getSize(),f=i[1];for(let y=0;y<4&&f<u;y++){let b=rt.decodeDigit(t,o,f,rt.L_PATTERNS);a+=String.fromCharCode(48+b);for(let v of o)f+=v}f=rt.findGuardPattern(t,f,!0,rt.MIDDLE_PATTERN,new Int32Array(rt.MIDDLE_PATTERN.length).fill(0))[1];for(let y=0;y<4&&f<u;y++){let b=rt.decodeDigit(t,o,f,rt.L_PATTERNS);a+=String.fromCharCode(48+b);for(let v of o)f+=v}return{rowOffset:f,resultString:a}}getBarcodeFormat(){return be.EAN_8}}class _a extends rt{constructor(){super(...arguments),this.ean13Reader=new Ai}getBarcodeFormat(){return be.UPC_A}decode(t,i){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,i,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,i,a))}decodeMiddle(t,i,a){return this.ean13Reader.decodeMiddle(t,i,a)}maybeReturnResult(t){let i=t.getText();if(i.charAt(0)==="0"){let a=new Ee(i.substring(1),null,null,t.getResultPoints(),be.UPC_A);return t.getResultMetadata()!=null&&a.putAllMetadata(t.getResultMetadata()),a}else throw new ie}reset(){this.ean13Reader.reset()}}class On extends rt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,i,a){const o=this.decodeMiddleCounters.map(b=>b);o[0]=0,o[1]=0,o[2]=0,o[3]=0;const u=t.getSize();let f=i[1],g=0;for(let b=0;b<6&&f<u;b++){const v=On.decodeDigit(t,o,f,On.L_AND_G_PATTERNS);a+=String.fromCharCode(48+v%10);for(let N of o)f+=N;v>=10&&(g|=1<<5-b)}let y=On.determineNumSysAndCheckDigit(a,g);return{rowOffset:f,resultString:y}}decodeEnd(t,i){return On.findGuardPatternWithoutCounters(t,i,!0,On.MIDDLE_END_PATTERN)}checkChecksum(t){return rt.checkChecksum(On.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,i){for(let a=0;a<=1;a++)for(let o=0;o<10;o++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][o]){let u=String.fromCharCode(48+a),f=String.fromCharCode(48+o);return u+t+f}throw ie.getNotFoundInstance()}getBarcodeFormat(){return be.UPC_E}static convertUPCEtoUPCA(t){const i=t.slice(1,7).split("").map(u=>u.charCodeAt(0)),a=new Ye;a.append(t.charAt(0));let o=i[5];switch(o){case 0:case 1:case 2:a.appendChars(i,0,2),a.append(o),a.append("0000"),a.appendChars(i,2,3);break;case 3:a.appendChars(i,0,3),a.append("00000"),a.appendChars(i,3,2);break;case 4:a.appendChars(i,0,4),a.append("00000"),a.append(i[4]);break;default:a.appendChars(i,0,5),a.append("0000"),a.append(o);break}return t.length>=8&&a.append(t.charAt(7)),a.toString()}}On.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),On.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class tl extends Ft{constructor(t){super();let i=t==null?null:t.get(we.POSSIBLE_FORMATS),a=[];d(i)?(a.push(new Ai),a.push(new _a),a.push(new Wi),a.push(new On)):(i.indexOf(be.EAN_13)>-1&&a.push(new Ai),i.indexOf(be.UPC_A)>-1&&a.push(new _a),i.indexOf(be.EAN_8)>-1&&a.push(new Wi),i.indexOf(be.UPC_E)>-1&&a.push(new On)),this.readers=a}decodeRow(t,i,a){for(let o of this.readers)try{const u=o.decodeRow(t,i,a),f=u.getBarcodeFormat()===be.EAN_13&&u.getText().charAt(0)==="0",g=a==null?null:a.get(we.POSSIBLE_FORMATS),y=g==null||g.includes(be.UPC_A);if(f&&y){const b=u.getRawBytes(),v=new Ee(u.getText().substring(1),b,b?b.length:null,u.getResultPoints(),be.UPC_A);return v.putAllMetadata(u.getResultMetadata()),v}return u}catch{}throw new ie}reset(){for(let t of this.readers)t.reset()}}class bn extends Ft{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,i){for(let a=0;a<i.length;a++)if(Ft.patternMatchVariance(t,i[a],bn.MAX_INDIVIDUAL_VARIANCE)<bn.MAX_AVG_VARIANCE)return a;throw new ie}static count(t){return $e.sum(new Int32Array(t))}static increment(t,i){let a=0,o=i[0];for(let u=1;u<t.length;u++)i[u]>o&&(o=i[u],a=u);t[a]++}static decrement(t,i){let a=0,o=i[0];for(let u=1;u<t.length;u++)i[u]<o&&(o=i[u],a=u);t[a]--}static isFinderPattern(t){let i=t[0]+t[1],a=i+t[2]+t[3],o=i/a;if(o>=bn.MIN_FINDER_PATTERN_RATIO&&o<=bn.MAX_FINDER_PATTERN_RATIO){let u=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let g of t)g>f&&(f=g),g<u&&(u=g);return f<10*u}return!1}}bn.MAX_AVG_VARIANCE=.2,bn.MAX_INDIVIDUAL_VARIANCE=.45,bn.MIN_FINDER_PATTERN_RATIO=9.5/12,bn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Zi{constructor(t,i){this.value=t,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof Zi))return!1;const i=t;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Ki{constructor(t,i,a,o,u){this.value=t,this.startEnd=i,this.value=t,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new Ne(a,u)),this.resultPoints.push(new Ne(o,u))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof Ki))return!1;const i=t;return this.value===i.value}hashCode(){return this.value}}class Ei{constructor(){}static getRSSvalue(t,i,a){let o=0;for(let y of t)o+=y;let u=0,f=0,g=t.length;for(let y=0;y<g-1;y++){let b;for(b=1,f|=1<<y;b<t[y];b++,f&=~(1<<y)){let v=Ei.combins(o-b-1,g-y-2);if(a&&f===0&&o-b-(g-y-1)>=g-y-1&&(v-=Ei.combins(o-b-(g-y),g-y-2)),g-y-1>1){let N=0;for(let O=o-b-(g-y-2);O>i;O--)N+=Ei.combins(o-b-O-1,g-y-3);v-=N*(g-1-y)}else o-b>i&&v--;u+=v}o-=b}return u}static combins(t,i){let a,o;t-i>i?(o=i,a=t-i):(o=t-i,a=i);let u=1,f=1;for(let g=t;g>a;g--)u*=g,f<=o&&(u/=f,f++);for(;f<=o;)u/=f,f++;return u}}class so{static buildBitArray(t){let i=t.length*2-1;t[t.length-1].getRightChar()==null&&(i-=1);let a=12*i,o=new fe(a),u=0,g=t[0].getRightChar().getValue();for(let y=11;y>=0;--y)(g&1<<y)!=0&&o.set(u),u++;for(let y=1;y<t.length;++y){let b=t[y],v=b.getLeftChar().getValue();for(let N=11;N>=0;--N)(v&1<<N)!=0&&o.set(u),u++;if(b.getRightChar()!=null){let N=b.getRightChar().getValue();for(let O=11;O>=0;--O)(N&1<<O)!=0&&o.set(u),u++}}return o}}class Qi{constructor(t,i){i?this.decodedInformation=null:(this.finished=t,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class ts{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Cn extends ts{constructor(t,i){super(t),this.value=i}getValue(){return this.value}isFNC1(){return this.value===Cn.FNC1}}Cn.FNC1="$";class Bi extends ts{constructor(t,i,a){super(t),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class jn extends ts{constructor(t,i,a){if(super(t),i<0||i>10||a<0||a>10)throw new Q;this.firstDigit=i,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===jn.FNC1}isSecondDigitFNC1(){return this.secondDigit===jn.FNC1}isAnyFNC1(){return this.firstDigit===jn.FNC1||this.secondDigit===jn.FNC1}}jn.FNC1=10;class _e{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new ie;let i=t.substring(0,2);for(let u of _e.TWO_DIGIT_DATA_LENGTH)if(u[0]===i)return u[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(2,u[2],t):_e.processFixedAI(2,u[1],t);if(t.length<3)throw new ie;let a=t.substring(0,3);for(let u of _e.THREE_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(3,u[2],t):_e.processFixedAI(3,u[1],t);for(let u of _e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(u[0]===a)return u[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(4,u[2],t):_e.processFixedAI(4,u[1],t);if(t.length<4)throw new ie;let o=t.substring(0,4);for(let u of _e.FOUR_DIGIT_DATA_LENGTH)if(u[0]===o)return u[1]===_e.VARIABLE_LENGTH?_e.processVariableAI(4,u[2],t):_e.processFixedAI(4,u[1],t);throw new ie}static processFixedAI(t,i,a){if(a.length<t)throw new ie;let o=a.substring(0,t);if(a.length<t+i)throw new ie;let u=a.substring(t,t+i),f=a.substring(t+i),g="("+o+")"+u,y=_e.parseFieldsInGeneralPurpose(f);return y==null?g:g+y}static processVariableAI(t,i,a){let o=a.substring(0,t),u;a.length<t+i?u=a.length:u=t+i;let f=a.substring(t,u),g=a.substring(u),y="("+o+")"+f,b=_e.parseFieldsInGeneralPurpose(g);return b==null?y:y+b}}_e.VARIABLE_LENGTH=[],_e.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",_e.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",_e.VARIABLE_LENGTH,20],["22",_e.VARIABLE_LENGTH,29],["30",_e.VARIABLE_LENGTH,8],["37",_e.VARIABLE_LENGTH,8],["90",_e.VARIABLE_LENGTH,30],["91",_e.VARIABLE_LENGTH,30],["92",_e.VARIABLE_LENGTH,30],["93",_e.VARIABLE_LENGTH,30],["94",_e.VARIABLE_LENGTH,30],["95",_e.VARIABLE_LENGTH,30],["96",_e.VARIABLE_LENGTH,30],["97",_e.VARIABLE_LENGTH,3],["98",_e.VARIABLE_LENGTH,30],["99",_e.VARIABLE_LENGTH,30]],_e.THREE_DIGIT_DATA_LENGTH=[["240",_e.VARIABLE_LENGTH,30],["241",_e.VARIABLE_LENGTH,30],["242",_e.VARIABLE_LENGTH,6],["250",_e.VARIABLE_LENGTH,30],["251",_e.VARIABLE_LENGTH,30],["253",_e.VARIABLE_LENGTH,17],["254",_e.VARIABLE_LENGTH,20],["400",_e.VARIABLE_LENGTH,30],["401",_e.VARIABLE_LENGTH,30],["402",17],["403",_e.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",_e.VARIABLE_LENGTH,20],["421",_e.VARIABLE_LENGTH,15],["422",3],["423",_e.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],_e.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",_e.VARIABLE_LENGTH,15],["391",_e.VARIABLE_LENGTH,18],["392",_e.VARIABLE_LENGTH,15],["393",_e.VARIABLE_LENGTH,18],["703",_e.VARIABLE_LENGTH,30]],_e.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",_e.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",_e.VARIABLE_LENGTH,20],["8003",_e.VARIABLE_LENGTH,30],["8004",_e.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",_e.VARIABLE_LENGTH,30],["8008",_e.VARIABLE_LENGTH,12],["8018",18],["8020",_e.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",_e.VARIABLE_LENGTH,70],["8200",_e.VARIABLE_LENGTH,70]];class Pn{constructor(t){this.buffer=new Ye,this.information=t}decodeAllCodes(t,i){let a=i,o=null;do{let u=this.decodeGeneralPurposeField(a,o),f=_e.parseFieldsInGeneralPurpose(u.getNewString());if(f!=null&&t.append(f),u.isRemaining()?o=""+u.getRemainingValue():o=null,a===u.getNewPosition())break;a=u.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let i=t;i<t+3;++i)if(this.information.get(i))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let u=this.extractNumericValueFromBitArray(t,4);return u===0?new jn(this.information.getSize(),jn.FNC1,jn.FNC1):new jn(this.information.getSize(),u-1,jn.FNC1)}let i=this.extractNumericValueFromBitArray(t,7),a=(i-8)/11,o=(i-8)%11;return new jn(t+7,a,o)}extractNumericValueFromBitArray(t,i){return Pn.extractNumericValueFromBitArray(this.information,t,i)}static extractNumericValueFromBitArray(t,i,a){let o=0;for(let u=0;u<a;++u)t.get(i+u)&&(o|=1<<a-u-1);return o}decodeGeneralPurposeField(t,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(t);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new Bi(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new Bi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,i;do{let a=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),t=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),t=i.isFinished()):(i=this.parseNumericBlock(),t=i.isFinished()),!(a!==this.current.getPosition())&&!t)break}while(!t);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let i;return t.isSecondDigitFNC1()?i=new Bi(this.current.getPosition(),this.buffer.toString()):i=new Bi(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Qi(!0,i)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let i=new Bi(this.current.getPosition(),this.buffer.toString());return new Qi(!0,i)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Qi(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new Bi(this.current.getPosition(),this.buffer.toString());return new Qi(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Qi(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new Bi(this.current.getPosition(),this.buffer.toString());return new Qi(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Qi(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,7);if(a>=64&&a<116)return!0;if(t+8>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,8);return o>=232&&o<253}decodeIsoIec646(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new Cn(t+5,Cn.FNC1);if(i>=5&&i<15)return new Cn(t+5,"0"+(i-5));let a=this.extractNumericValueFromBitArray(t,7);if(a>=64&&a<90)return new Cn(t+7,""+(a+1));if(a>=90&&a<116)return new Cn(t+7,""+(a+7));let o=this.extractNumericValueFromBitArray(t,8),u;switch(o){case 232:u="!";break;case 233:u='"';break;case 234:u="%";break;case 235:u="&";break;case 236:u="'";break;case 237:u="(";break;case 238:u=")";break;case 239:u="*";break;case 240:u="+";break;case 241:u=",";break;case 242:u="-";break;case 243:u=".";break;case 244:u="/";break;case 245:u=":";break;case 246:u=";";break;case 247:u="<";break;case 248:u="=";break;case 249:u=">";break;case 250:u="?";break;case 251:u="_";break;case 252:u=" ";break;default:throw new Q}return new Cn(t+8,u)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,6);return a>=16&&a<63}decodeAlphanumeric(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new Cn(t+5,Cn.FNC1);if(i>=5&&i<15)return new Cn(t+5,"0"+(i-5));let a=this.extractNumericValueFromBitArray(t,6);if(a>=32&&a<58)return new Cn(t+6,""+(a+33));let o;switch(a){case 58:o="*";break;case 59:o=",";break;case 60:o="-";break;case 61:o=".";break;case 62:o="/";break;default:throw new qn("Decoding invalid alphanumeric value: "+a)}return new Cn(t+6,o)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<5&&i+t<this.information.getSize();++i)if(i===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+i))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let i=t;i<t+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<4&&i+t<this.information.getSize();++i)if(this.information.get(t+i))return!1;return!0}}class sn{constructor(t){this.information=t,this.generalDecoder=new Pn(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class Ct extends sn{constructor(t){super(t)}encodeCompressedGtin(t,i){t.append("(01)");let a=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,i,a)}encodeCompressedGtinWithoutAI(t,i,a){for(let o=0;o<4;++o){let u=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*o,10);u/100===0&&t.append("0"),u/10===0&&t.append("0"),t.append(u)}Ct.appendCheckDigit(t,a)}static appendCheckDigit(t,i){let a=0;for(let o=0;o<13;o++){let u=t.charAt(o+i).charCodeAt(0)-48;a+=(o&1)===0?3*u:u}a=10-a%10,a===10&&(a=0),t.append(a)}}Ct.GTIN_SIZE=40;class ri extends Ct{constructor(t){super(t)}parseInformation(){let t=new Ye;t.append("(01)");let i=t.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(ri.HEADER_SIZE,4);return t.append(a),this.encodeCompressedGtinWithoutAI(t,ri.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(t,ri.HEADER_SIZE+44)}}ri.HEADER_SIZE=4;class kr extends sn{constructor(t){super(t)}parseInformation(){let t=new Ye;return this.getGeneralDecoder().decodeAllCodes(t,kr.HEADER_SIZE)}}kr.HEADER_SIZE=5;class ns extends Ct{constructor(t){super(t)}encodeCompressedWeight(t,i,a){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(i,a);this.addWeightCode(t,o);let u=this.checkWeight(o),f=1e5;for(let g=0;g<5;++g)u/f===0&&t.append("0"),f/=10;t.append(u)}}class vi extends ns{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=vi.HEADER_SIZE+ns.GTIN_SIZE+vi.WEIGHT_SIZE)throw new ie;let t=new Ye;return this.encodeCompressedGtin(t,vi.HEADER_SIZE),this.encodeCompressedWeight(t,vi.HEADER_SIZE+ns.GTIN_SIZE,vi.WEIGHT_SIZE),t.toString()}}vi.HEADER_SIZE=5,vi.WEIGHT_SIZE=15;class lo extends vi{constructor(t){super(t)}addWeightCode(t,i){t.append("(3103)")}checkWeight(t){return t}}class Sa extends vi{constructor(t){super(t)}addWeightCode(t,i){i<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class Wn extends Ct{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Wn.HEADER_SIZE+Ct.GTIN_SIZE)throw new ie;let t=new Ye;this.encodeCompressedGtin(t,Wn.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Wn.HEADER_SIZE+Ct.GTIN_SIZE,Wn.LAST_DIGIT_SIZE);t.append("(392"),t.append(i),t.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(Wn.HEADER_SIZE+Ct.GTIN_SIZE+Wn.LAST_DIGIT_SIZE,null);return t.append(a.getNewString()),t.toString()}}Wn.HEADER_SIZE=8,Wn.LAST_DIGIT_SIZE=2;class Jt extends Ct{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Jt.HEADER_SIZE+Ct.GTIN_SIZE)throw new ie;let t=new Ye;this.encodeCompressedGtin(t,Jt.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Jt.HEADER_SIZE+Ct.GTIN_SIZE,Jt.LAST_DIGIT_SIZE);t.append("(393"),t.append(i),t.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Jt.HEADER_SIZE+Ct.GTIN_SIZE+Jt.LAST_DIGIT_SIZE,Jt.FIRST_THREE_DIGITS_SIZE);a/100==0&&t.append("0"),a/10==0&&t.append("0"),t.append(a);let o=this.getGeneralDecoder().decodeGeneralPurposeField(Jt.HEADER_SIZE+Ct.GTIN_SIZE+Jt.LAST_DIGIT_SIZE+Jt.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()}}Jt.HEADER_SIZE=8,Jt.LAST_DIGIT_SIZE=2,Jt.FIRST_THREE_DIGITS_SIZE=10;class wt extends ns{constructor(t,i,a){super(t),this.dateCode=a,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=wt.HEADER_SIZE+wt.GTIN_SIZE+wt.WEIGHT_SIZE+wt.DATE_SIZE)throw new ie;let t=new Ye;return this.encodeCompressedGtin(t,wt.HEADER_SIZE),this.encodeCompressedWeight(t,wt.HEADER_SIZE+wt.GTIN_SIZE,wt.WEIGHT_SIZE),this.encodeCompressedDate(t,wt.HEADER_SIZE+wt.GTIN_SIZE+wt.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,i){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(i,wt.DATE_SIZE);if(a==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let o=a%32;a/=32;let u=a%12+1;a/=12;let f=a;f/10==0&&t.append("0"),t.append(f),u/10==0&&t.append("0"),t.append(u),o/10==0&&t.append("0"),t.append(o)}addWeightCode(t,i){t.append("("),t.append(this.firstAIdigits),t.append(i/1e5),t.append(")")}checkWeight(t){return t%1e5}}wt.HEADER_SIZE=8,wt.WEIGHT_SIZE=20,wt.DATE_SIZE=16;function Ur(T){try{if(T.get(1))return new ri(T);if(!T.get(2))return new kr(T);switch(Pn.extractNumericValueFromBitArray(T,1,4)){case 4:return new lo(T);case 5:return new Sa(T)}switch(Pn.extractNumericValueFromBitArray(T,1,5)){case 12:return new Wn(T);case 13:return new Jt(T)}switch(Pn.extractNumericValueFromBitArray(T,1,7)){case 56:return new wt(T,"310","11");case 57:return new wt(T,"320","11");case 58:return new wt(T,"310","13");case 59:return new wt(T,"320","13");case 60:return new wt(T,"310","15");case 61:return new wt(T,"320","15");case 62:return new wt(T,"310","17");case 63:return new wt(T,"320","17")}}catch(t){throw console.log(t),new qn("unknown decoder: "+T)}}class zn{constructor(t,i,a,o){this.leftchar=t,this.rightchar=i,this.finderpattern=a,this.maybeLast=o}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,i){return t instanceof zn?zn.equalsOrNull(t.leftchar,i.leftchar)&&zn.equalsOrNull(t.rightchar,i.rightchar)&&zn.equalsOrNull(t.finderpattern,i.finderpattern):!1}static equalsOrNull(t,i){return t===null?i===null:zn.equals(t,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class $t{constructor(t,i,a){this.pairs=t,this.rowNumber=i,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,i){return t instanceof $t?this.checkEqualitity(t,i)&&t.wasReversed===i.wasReversed:!1}checkEqualitity(t,i){if(!t||!i)return;let a;return t.forEach((o,u)=>{i.forEach(f=>{o.getLeftChar().getValue()===f.getLeftChar().getValue()&&o.getRightChar().getValue()===f.getRightChar().getValue()&&o.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(a=!0)})}),a}}class de extends bn{constructor(t){super(...arguments),this.pairs=new Array(de.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,i,a){this.pairs.length=0,this.startFromEven=!1;try{return de.constructResult(this.decodeRow2pairs(t,i))}catch(o){this.verbose&&console.log(o)}return this.pairs.length=0,this.startFromEven=!0,de.constructResult(this.decodeRow2pairs(t,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,i){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,t))}catch(u){if(u instanceof ie){if(!this.pairs.length)throw new ie;a=!0}}if(this.checkChecksum())return this.pairs;let o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){let u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new ie}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return t&&(this.rows=this.rows.reverse()),i}checkRows(t,i){for(let a=i;a<this.rows.length;a++){let o=this.rows[a];this.pairs.length=0;for(let f of t)this.pairs.push(f.getPairs());if(this.pairs.push(o.getPairs()),!de.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let u=new Array(t);u.push(o);try{return this.checkRows(u,a+1)}catch(f){this.verbose&&console.log(f)}}throw new ie}static isValidSequence(t){for(let i of de.FINDER_PATTERN_SEQUENCES){if(t.length>i.length)continue;let a=!0;for(let o=0;o<t.length;o++)if(t[o].getFinderPattern().getValue()!=i[o]){a=!1;break}if(a)return!0}return!1}storeRow(t,i){let a=0,o=!1,u=!1;for(;a<this.rows.length;){let f=this.rows[a];if(f.getRowNumber()>t){u=f.isEquivalent(this.pairs);break}o=f.isEquivalent(this.pairs),a++}u||o||de.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new $t(this.pairs,t,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,i){for(let a of i)if(a.getPairs().length!==t.length){for(let o of a.getPairs())for(let u of t)if(zn.equals(o,u))break}}static isPartialRow(t,i){for(let a of i){let o=!0;for(let u of t){let f=!1;for(let g of a.getPairs())if(u.equals(g)){f=!0;break}if(!f){o=!1;break}}if(o)return!0}return!1}getRows(){return this.rows}static constructResult(t){let i=so.buildBitArray(t),o=Ur(i).parseInformation(),u=t[0].getFinderPattern().getResultPoints(),f=t[t.length-1].getFinderPattern().getResultPoints(),g=[u[0],u[1],f[0],f[1]];return new Ee(o,null,null,g,be.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),i=t.getLeftChar(),a=t.getRightChar();if(a==null)return!1;let o=a.getChecksumPortion(),u=2;for(let g=1;g<this.pairs.size();++g){let y=this.pairs.get(g);o+=y.getLeftChar().getChecksumPortion(),u++;let b=y.getRightChar();b!=null&&(o+=b.getChecksumPortion(),u++)}return o%=211,211*(u-4)+o==i.getValue()}static getNextSecondBar(t,i){let a;return t.get(i)?(a=t.getNextUnset(i),a=t.getNextSet(a)):(a=t.getNextSet(i),a=t.getNextUnset(a)),a}retrieveNextPair(t,i,a){let o=i.length%2==0;this.startFromEven&&(o=!o);let u,f=!0,g=-1;do this.findNextPair(t,i,g),u=this.parseFoundFinderPattern(t,a,o),u==null?g=de.getNextSecondBar(t,this.startEnd[0]):f=!1;while(f);let y=this.decodeDataCharacter(t,u,o,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new ie;let b;try{b=this.decodeDataCharacter(t,u,o,!1)}catch(v){b=null,this.verbose&&console.log(v)}return new zn(y,b,u,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,i,a){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let u=t.getSize(),f;a>=0?f=a:this.isEmptyPair(i)?f=0:f=i[i.length-1].getFinderPattern().getStartEnd()[1];let g=i.length%2!=0;this.startFromEven&&(g=!g);let y=!1;for(;f<u&&(y=!t.get(f),!!y);)f++;let b=0,v=f;for(let N=f;N<u;N++)if(t.get(N)!=y)o[b]++;else{if(b==3){if(g&&de.reverseCounters(o),de.isFinderPattern(o)){this.startEnd[0]=v,this.startEnd[1]=N;return}g&&de.reverseCounters(o),v+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,b--}else b++;o[b]=1,y=!y}throw new ie}static reverseCounters(t){let i=t.length;for(let a=0;a<i/2;++a){let o=t[a];t[a]=t[i-a-1],t[i-a-1]=o}}parseFoundFinderPattern(t,i,a){let o,u,f;if(a){let b=this.startEnd[0]-1;for(;b>=0&&!t.get(b);)b--;b++,o=this.startEnd[0]-b,u=b,f=this.startEnd[1]}else u=this.startEnd[0],f=t.getNextUnset(this.startEnd[1]+1),o=f-this.startEnd[1];let g=this.getDecodeFinderCounters();W.arraycopy(g,0,g,1,g.length-1),g[0]=o;let y;try{y=this.parseFinderValue(g,de.FINDER_PATTERNS)}catch{return null}return new Ki(y,[u,f],u,f,i)}decodeDataCharacter(t,i,a,o){let u=this.getDataCharacterCounters();for(let _t=0;_t<u.length;_t++)u[_t]=0;if(o)de.recordPatternInReverse(t,i.getStartEnd()[0],u);else{de.recordPattern(t,i.getStartEnd()[1],u);for(let _t=0,vn=u.length-1;_t<vn;_t++,vn--){let Gn=u[_t];u[_t]=u[vn],u[vn]=Gn}}let f=17,g=$e.sum(new Int32Array(u))/f,y=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(g-y)/y>.3)throw new ie;let b=this.getOddCounts(),v=this.getEvenCounts(),N=this.getOddRoundingErrors(),O=this.getEvenRoundingErrors();for(let _t=0;_t<u.length;_t++){let vn=1*u[_t]/g,Gn=vn+.5;if(Gn<1){if(vn<.3)throw new ie;Gn=1}else if(Gn>8){if(vn>8.7)throw new ie;Gn=8}let Zr=_t/2;(_t&1)==0?(b[Zr]=Gn,N[Zr]=vn-Gn):(v[Zr]=Gn,O[Zr]=vn-Gn)}this.adjustOddEvenCounts(f);let L=4*i.getValue()+(a?0:2)+(o?0:1)-1,k=0,j=0;for(let _t=b.length-1;_t>=0;_t--){if(de.isNotA1left(i,a,o)){let vn=de.WEIGHTS[L][2*_t];j+=b[_t]*vn}k+=b[_t]}let V=0;for(let _t=v.length-1;_t>=0;_t--)if(de.isNotA1left(i,a,o)){let vn=de.WEIGHTS[L][2*_t+1];V+=v[_t]*vn}let $=j+V;if((k&1)!=0||k>13||k<4)throw new ie;let xe=(13-k)/2,pe=de.SYMBOL_WIDEST[xe],ge=9-pe,Ke=Ei.getRSSvalue(b,pe,!0),Ge=Ei.getRSSvalue(v,ge,!1),en=de.EVEN_TOTAL_SUBSET[xe],Qn=de.GSUM[xe],In=Ke*en+Ge+Qn;return new Zi(In,$)}static isNotA1left(t,i,a){return!(t.getValue()==0&&i&&a)}adjustOddEvenCounts(t){let i=$e.sum(new Int32Array(this.getOddCounts())),a=$e.sum(new Int32Array(this.getEvenCounts())),o=!1,u=!1;i>13?u=!0:i<4&&(o=!0);let f=!1,g=!1;a>13?g=!0:a<4&&(f=!0);let y=i+a-t,b=(i&1)==1,v=(a&1)==0;if(y==1)if(b){if(v)throw new ie;u=!0}else{if(!v)throw new ie;g=!0}else if(y==-1)if(b){if(v)throw new ie;o=!0}else{if(!v)throw new ie;f=!0}else if(y==0){if(b){if(!v)throw new ie;i<a?(o=!0,g=!0):(u=!0,f=!0)}else if(v)throw new ie}else throw new ie;if(o){if(u)throw new ie;de.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&de.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(g)throw new ie;de.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&de.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}de.SYMBOL_WIDEST=[7,5,4,3,1],de.EVEN_TOTAL_SUBSET=[4,20,52,104,204],de.GSUM=[0,348,1388,2948,3988],de.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],de.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],de.FINDER_PAT_A=0,de.FINDER_PAT_B=1,de.FINDER_PAT_C=2,de.FINDER_PAT_D=3,de.FINDER_PAT_E=4,de.FINDER_PAT_F=5,de.FINDER_PATTERN_SEQUENCES=[[de.FINDER_PAT_A,de.FINDER_PAT_A],[de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B],[de.FINDER_PAT_A,de.FINDER_PAT_C,de.FINDER_PAT_B,de.FINDER_PAT_D],[de.FINDER_PAT_A,de.FINDER_PAT_E,de.FINDER_PAT_B,de.FINDER_PAT_D,de.FINDER_PAT_C],[de.FINDER_PAT_A,de.FINDER_PAT_E,de.FINDER_PAT_B,de.FINDER_PAT_D,de.FINDER_PAT_D,de.FINDER_PAT_F],[de.FINDER_PAT_A,de.FINDER_PAT_E,de.FINDER_PAT_B,de.FINDER_PAT_D,de.FINDER_PAT_E,de.FINDER_PAT_F,de.FINDER_PAT_F],[de.FINDER_PAT_A,de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B,de.FINDER_PAT_C,de.FINDER_PAT_C,de.FINDER_PAT_D,de.FINDER_PAT_D],[de.FINDER_PAT_A,de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B,de.FINDER_PAT_C,de.FINDER_PAT_C,de.FINDER_PAT_D,de.FINDER_PAT_E,de.FINDER_PAT_E],[de.FINDER_PAT_A,de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B,de.FINDER_PAT_C,de.FINDER_PAT_C,de.FINDER_PAT_D,de.FINDER_PAT_E,de.FINDER_PAT_F,de.FINDER_PAT_F],[de.FINDER_PAT_A,de.FINDER_PAT_A,de.FINDER_PAT_B,de.FINDER_PAT_B,de.FINDER_PAT_C,de.FINDER_PAT_D,de.FINDER_PAT_D,de.FINDER_PAT_E,de.FINDER_PAT_E,de.FINDER_PAT_F,de.FINDER_PAT_F]],de.MAX_PAIRS=11;class oo extends Zi{constructor(t,i,a){super(t,i),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class Et extends bn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,i,a){const o=this.decodePair(i,!1,t,a);Et.addOrTally(this.possibleLeftPairs,o),i.reverse();let u=this.decodePair(i,!0,t,a);Et.addOrTally(this.possibleRightPairs,u),i.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let g of this.possibleRightPairs)if(g.getCount()>1&&Et.checkChecksum(f,g))return Et.constructResult(f,g)}throw new ie}static addOrTally(t,i){if(i==null)return;let a=!1;for(let o of t)if(o.getValue()===i.getValue()){o.incrementCount(),a=!0;break}a||t.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,i){let a=4537077*t.getValue()+i.getValue(),o=new String(a).toString(),u=new Ye;for(let b=13-o.length;b>0;b--)u.append("0");u.append(o);let f=0;for(let b=0;b<13;b++){let v=u.charAt(b).charCodeAt(0)-48;f+=(b&1)===0?3*v:v}f=10-f%10,f===10&&(f=0),u.append(f.toString());let g=t.getFinderPattern().getResultPoints(),y=i.getFinderPattern().getResultPoints();return new Ee(u.toString(),null,0,[g[0],g[1],y[0],y[1]],be.RSS_14,new Date().getTime())}static checkChecksum(t,i){let a=(t.getChecksumPortion()+16*i.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+i.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,a===o}decodePair(t,i,a,o){try{let u=this.findFinderPattern(t,i),f=this.parseFoundFinderPattern(t,a,i,u),g=o==null?null:o.get(we.NEED_RESULT_POINT_CALLBACK);if(g!=null){let v=(u[0]+u[1])/2;i&&(v=t.getSize()-1-v),g.foundPossibleResultPoint(new Ne(v,a))}let y=this.decodeDataCharacter(t,f,!0),b=this.decodeDataCharacter(t,f,!1);return new oo(1597*y.getValue()+b.getValue(),y.getChecksumPortion()+4*b.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(t,i,a){let o=this.getDataCharacterCounters();for(let V=0;V<o.length;V++)o[V]=0;if(a)Ft.recordPatternInReverse(t,i.getStartEnd()[0],o);else{Ft.recordPattern(t,i.getStartEnd()[1]+1,o);for(let V=0,$=o.length-1;V<$;V++,$--){let xe=o[V];o[V]=o[$],o[$]=xe}}let u=a?16:15,f=$e.sum(new Int32Array(o))/u,g=this.getOddCounts(),y=this.getEvenCounts(),b=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors();for(let V=0;V<o.length;V++){let $=o[V]/f,xe=Math.floor($+.5);xe<1?xe=1:xe>8&&(xe=8);let pe=Math.floor(V/2);(V&1)===0?(g[pe]=xe,b[pe]=$-xe):(y[pe]=xe,v[pe]=$-xe)}this.adjustOddEvenCounts(a,u);let N=0,O=0;for(let V=g.length-1;V>=0;V--)O*=9,O+=g[V],N+=g[V];let L=0,k=0;for(let V=y.length-1;V>=0;V--)L*=9,L+=y[V],k+=y[V];let j=O+3*L;if(a){if((N&1)!==0||N>12||N<4)throw new ie;let V=(12-N)/2,$=Et.OUTSIDE_ODD_WIDEST[V],xe=9-$,pe=Ei.getRSSvalue(g,$,!1),ge=Ei.getRSSvalue(y,xe,!0),Ke=Et.OUTSIDE_EVEN_TOTAL_SUBSET[V],Ge=Et.OUTSIDE_GSUM[V];return new Zi(pe*Ke+ge+Ge,j)}else{if((k&1)!==0||k>10||k<4)throw new ie;let V=(10-k)/2,$=Et.INSIDE_ODD_WIDEST[V],xe=9-$,pe=Ei.getRSSvalue(g,$,!0),ge=Ei.getRSSvalue(y,xe,!1),Ke=Et.INSIDE_ODD_TOTAL_SUBSET[V],Ge=Et.INSIDE_GSUM[V];return new Zi(ge*Ke+pe+Ge,j)}}findFinderPattern(t,i){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let o=t.getSize(),u=!1,f=0;for(;f<o&&(u=!t.get(f),i!==u);)f++;let g=0,y=f;for(let b=f;b<o;b++)if(t.get(b)!==u)a[g]++;else{if(g===3){if(bn.isFinderPattern(a))return[y,b];y+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,g--}else g++;a[g]=1,u=!u}throw new ie}parseFoundFinderPattern(t,i,a,o){let u=t.get(o[0]),f=o[0]-1;for(;f>=0&&u!==t.get(f);)f--;f++;const g=o[0]-f,y=this.getDecodeFinderCounters(),b=new Int32Array(y.length);W.arraycopy(y,0,b,1,y.length-1),b[0]=g;const v=this.parseFinderValue(b,Et.FINDER_PATTERNS);let N=f,O=o[1];return a&&(N=t.getSize()-1-N,O=t.getSize()-1-O),new Ki(v,[f,o[1]],N,O,i)}adjustOddEvenCounts(t,i){let a=$e.sum(new Int32Array(this.getOddCounts())),o=$e.sum(new Int32Array(this.getEvenCounts())),u=!1,f=!1,g=!1,y=!1;t?(a>12?f=!0:a<4&&(u=!0),o>12?y=!0:o<4&&(g=!0)):(a>11?f=!0:a<5&&(u=!0),o>10?y=!0:o<4&&(g=!0));let b=a+o-i,v=(a&1)===(t?1:0),N=(o&1)===1;if(b===1)if(v){if(N)throw new ie;f=!0}else{if(!N)throw new ie;y=!0}else if(b===-1)if(v){if(N)throw new ie;u=!0}else{if(!N)throw new ie;g=!0}else if(b===0){if(v){if(!N)throw new ie;a<o?(u=!0,y=!0):(f=!0,g=!0)}else if(N)throw new ie}else throw new ie;if(u){if(f)throw new ie;bn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&bn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(y)throw new ie;bn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}y&&bn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}Et.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],Et.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],Et.OUTSIDE_GSUM=[0,161,961,2015,2715],Et.INSIDE_GSUM=[0,336,1036,1516],Et.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],Et.INSIDE_ODD_WIDEST=[2,4,6,8],Et.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ai extends Ft{constructor(t,i){super(),this.readers=[],this.verbose=i===!0;const a=t?t.get(we.POSSIBLE_FORMATS):null,o=t&&t.get(we.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(be.EAN_13)||a.includes(be.UPC_A)||a.includes(be.EAN_8)||a.includes(be.UPC_E))&&this.readers.push(new tl(t)),a.includes(be.CODE_39)&&this.readers.push(new Rt(o)),a.includes(be.CODE_128)&&this.readers.push(new ye),a.includes(be.ITF)&&this.readers.push(new Xe),a.includes(be.RSS_14)&&this.readers.push(new Et),a.includes(be.RSS_EXPANDED)&&this.readers.push(new de(this.verbose))):(this.readers.push(new tl(t)),this.readers.push(new Rt),this.readers.push(new tl(t)),this.readers.push(new ye),this.readers.push(new Xe),this.readers.push(new Et),this.readers.push(new de(this.verbose)))}decodeRow(t,i,a){for(let o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,i,a)}catch{}throw new ie}reset(){this.readers.forEach(t=>t.reset())}}class Hc extends Ae{constructor(t=500,i){super(new ai(i),t,i)}}class dt{constructor(t,i,a){this.ecCodewords=t,this.ecBlocks=[i],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ft{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class et{constructor(t,i,a,o,u,f){this.versionNumber=t,this.symbolSizeRows=i,this.symbolSizeColumns=a,this.dataRegionSizeRows=o,this.dataRegionSizeColumns=u,this.ecBlocks=f;let g=0;const y=f.getECCodewords(),b=f.getECBlocks();for(let v of b)g+=v.getCount()*(v.getDataCodewords()+y);this.totalCodewords=g}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,i){if((t&1)!==0||(i&1)!==0)throw new Q;for(let a of et.VERSIONS)if(a.symbolSizeRows===t&&a.symbolSizeColumns===i)return a;throw new Q}toString(){return""+this.versionNumber}static buildVersions(){return[new et(1,10,10,8,8,new dt(5,new ft(1,3))),new et(2,12,12,10,10,new dt(7,new ft(1,5))),new et(3,14,14,12,12,new dt(10,new ft(1,8))),new et(4,16,16,14,14,new dt(12,new ft(1,12))),new et(5,18,18,16,16,new dt(14,new ft(1,18))),new et(6,20,20,18,18,new dt(18,new ft(1,22))),new et(7,22,22,20,20,new dt(20,new ft(1,30))),new et(8,24,24,22,22,new dt(24,new ft(1,36))),new et(9,26,26,24,24,new dt(28,new ft(1,44))),new et(10,32,32,14,14,new dt(36,new ft(1,62))),new et(11,36,36,16,16,new dt(42,new ft(1,86))),new et(12,40,40,18,18,new dt(48,new ft(1,114))),new et(13,44,44,20,20,new dt(56,new ft(1,144))),new et(14,48,48,22,22,new dt(68,new ft(1,174))),new et(15,52,52,24,24,new dt(42,new ft(2,102))),new et(16,64,64,14,14,new dt(56,new ft(2,140))),new et(17,72,72,16,16,new dt(36,new ft(4,92))),new et(18,80,80,18,18,new dt(48,new ft(4,114))),new et(19,88,88,20,20,new dt(56,new ft(4,144))),new et(20,96,96,22,22,new dt(68,new ft(4,174))),new et(21,104,104,24,24,new dt(56,new ft(6,136))),new et(22,120,120,18,18,new dt(68,new ft(6,175))),new et(23,132,132,20,20,new dt(62,new ft(8,163))),new et(24,144,144,22,22,new dt(62,new ft(8,156),new ft(2,155))),new et(25,8,18,6,16,new dt(7,new ft(1,5))),new et(26,8,32,6,14,new dt(11,new ft(1,10))),new et(27,12,26,10,24,new dt(14,new ft(1,16))),new et(28,12,36,10,16,new dt(18,new ft(1,22))),new et(29,16,36,14,16,new dt(24,new ft(1,32))),new et(30,16,48,14,22,new dt(28,new ft(1,49)))]}}et.VERSIONS=et.buildVersions();class jr{constructor(t){const i=t.getHeight();if(i<8||i>144||(i&1)!==0)throw new Q;this.version=jr.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new gt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const i=t.getHeight(),a=t.getWidth();return et.getVersionForDimensions(i,a)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let i=0,a=4,o=0;const u=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let g=!1,y=!1,b=!1,v=!1;do if(a===u&&o===0&&!g)t[i++]=this.readCorner1(u,f)&255,a-=2,o+=2,g=!0;else if(a===u-2&&o===0&&(f&3)!==0&&!y)t[i++]=this.readCorner2(u,f)&255,a-=2,o+=2,y=!0;else if(a===u+4&&o===2&&(f&7)===0&&!b)t[i++]=this.readCorner3(u,f)&255,a-=2,o+=2,b=!0;else if(a===u-2&&o===0&&(f&7)===4&&!v)t[i++]=this.readCorner4(u,f)&255,a-=2,o+=2,v=!0;else{do a<u&&o>=0&&!this.readMappingMatrix.get(o,a)&&(t[i++]=this.readUtah(a,o,u,f)&255),a-=2,o+=2;while(a>=0&&o<f);a+=1,o+=3;do a>=0&&o<f&&!this.readMappingMatrix.get(o,a)&&(t[i++]=this.readUtah(a,o,u,f)&255),a+=2,o-=2;while(a<u&&o>=0);a+=3,o+=1}while(a<u||o<f);if(i!==this.version.getTotalCodewords())throw new Q;return t}readModule(t,i,a,o){return t<0&&(t+=a,i+=4-(a+4&7)),i<0&&(i+=o,t+=4-(o+4&7)),this.readMappingMatrix.set(i,t),this.mappingBitMatrix.get(i,t)}readUtah(t,i,a,o){let u=0;return this.readModule(t-2,i-2,a,o)&&(u|=1),u<<=1,this.readModule(t-2,i-1,a,o)&&(u|=1),u<<=1,this.readModule(t-1,i-2,a,o)&&(u|=1),u<<=1,this.readModule(t-1,i-1,a,o)&&(u|=1),u<<=1,this.readModule(t-1,i,a,o)&&(u|=1),u<<=1,this.readModule(t,i-2,a,o)&&(u|=1),u<<=1,this.readModule(t,i-1,a,o)&&(u|=1),u<<=1,this.readModule(t,i,a,o)&&(u|=1),u}readCorner1(t,i){let a=0;return this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,1,t,i)&&(a|=1),a<<=1,this.readModule(t-1,2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a<<=1,this.readModule(2,i-1,t,i)&&(a|=1),a<<=1,this.readModule(3,i-1,t,i)&&(a|=1),a}readCorner2(t,i){let a=0;return this.readModule(t-3,0,t,i)&&(a|=1),a<<=1,this.readModule(t-2,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(0,i-4,t,i)&&(a|=1),a<<=1,this.readModule(0,i-3,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a}readCorner3(t,i){let a=0;return this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,i-1,t,i)&&(a|=1),a<<=1,this.readModule(0,i-3,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-3,t,i)&&(a|=1),a<<=1,this.readModule(1,i-2,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a}readCorner4(t,i){let a=0;return this.readModule(t-3,0,t,i)&&(a|=1),a<<=1,this.readModule(t-2,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a<<=1,this.readModule(2,i-1,t,i)&&(a|=1),a<<=1,this.readModule(3,i-1,t,i)&&(a|=1),a}extractDataRegion(t){const i=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(t.getHeight()!==i)throw new D("Dimension of bitMatrix must match the version size");const o=this.version.getDataRegionSizeRows(),u=this.version.getDataRegionSizeColumns(),f=i/o|0,g=a/u|0,y=f*o,b=g*u,v=new gt(b,y);for(let N=0;N<f;++N){const O=N*o;for(let L=0;L<g;++L){const k=L*u;for(let j=0;j<o;++j){const V=N*(o+2)+1+j,$=O+j;for(let xe=0;xe<u;++xe){const pe=L*(u+2)+1+xe;if(t.get(pe,V)){const ge=k+xe;v.set(ge,$)}}}}}return v}}class Pr{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i){const a=i.getECBlocks();let o=0;const u=a.getECBlocks();for(let j of u)o+=j.getCount();const f=new Array(o);let g=0;for(let j of u)for(let V=0;V<j.getCount();V++){const $=j.getDataCodewords(),xe=a.getECCodewords()+$;f[g++]=new Pr($,new Uint8Array(xe))}const b=f[0].codewords.length-a.getECCodewords(),v=b-1;let N=0;for(let j=0;j<v;j++)for(let V=0;V<g;V++)f[V].codewords[j]=t[N++];const O=i.getVersionNumber()===24,L=O?8:g;for(let j=0;j<L;j++)f[j].codewords[b-1]=t[N++];const k=f[0].codewords.length;for(let j=b;j<k;j++)for(let V=0;V<g;V++){const $=O?(V+8)%g:V,xe=O&&$>7?j-1:j;f[$].codewords[xe]=t[N++]}if(N!==t.length)throw new D;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class si{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new D(""+t);let i=0,a=this.bitOffset,o=this.byteOffset;const u=this.bytes;if(a>0){const f=8-a,g=t<f?t:f,y=f-g,b=255>>8-g<<y;i=(u[o]&b)>>y,t-=g,a+=g,a===8&&(a=0,o++)}if(t>0){for(;t>=8;)i=i<<8|u[o]&255,o++,t-=8;if(t>0){const f=8-t,g=255>>f<<f;i=i<<t|(u[o]&g)>>f,a+=t}}return this.bitOffset=a,this.byteOffset=o,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var mt;(function(T){T[T.PAD_ENCODE=0]="PAD_ENCODE",T[T.ASCII_ENCODE=1]="ASCII_ENCODE",T[T.C40_ENCODE=2]="C40_ENCODE",T[T.TEXT_ENCODE=3]="TEXT_ENCODE",T[T.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",T[T.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",T[T.BASE256_ENCODE=6]="BASE256_ENCODE"})(mt||(mt={}));class ki{static decode(t){const i=new si(t),a=new Ye,o=new Ye,u=new Array;let f=mt.ASCII_ENCODE;do if(f===mt.ASCII_ENCODE)f=this.decodeAsciiSegment(i,a,o);else{switch(f){case mt.C40_ENCODE:this.decodeC40Segment(i,a);break;case mt.TEXT_ENCODE:this.decodeTextSegment(i,a);break;case mt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,a);break;case mt.EDIFACT_ENCODE:this.decodeEdifactSegment(i,a);break;case mt.BASE256_ENCODE:this.decodeBase256Segment(i,a,u);break;default:throw new Q}f=mt.ASCII_ENCODE}while(f!==mt.PAD_ENCODE&&i.available()>0);return o.length()>0&&a.append(o.toString()),new Bt(t,a.toString(),u.length===0?null:u,null)}static decodeAsciiSegment(t,i,a){let o=!1;do{let u=t.readBits(8);if(u===0)throw new Q;if(u<=128)return o&&(u+=128),i.append(String.fromCharCode(u-1)),mt.ASCII_ENCODE;if(u===129)return mt.PAD_ENCODE;if(u<=229){const f=u-130;f<10&&i.append("0"),i.append(""+f)}else switch(u){case 230:return mt.C40_ENCODE;case 231:return mt.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:o=!0;break;case 236:i.append("[)>05"),a.insert(0,"");break;case 237:i.append("[)>06"),a.insert(0,"");break;case 238:return mt.ANSIX12_ENCODE;case 239:return mt.TEXT_ENCODE;case 240:return mt.EDIFACT_ENCODE;case 241:break;default:if(u!==254||t.available()!==0)throw new Q;break}}while(t.available()>0);return mt.ASCII_ENCODE}static decodeC40Segment(t,i){let a=!1;const o=[];let u=0;do{if(t.available()===8)return;const f=t.readBits(8);if(f===254)return;this.parseTwoBytes(f,t.readBits(8),o);for(let g=0;g<3;g++){const y=o[g];switch(u){case 0:if(y<3)u=y+1;else if(y<this.C40_BASIC_SET_CHARS.length){const b=this.C40_BASIC_SET_CHARS[y];a?(i.append(String.fromCharCode(b.charCodeAt(0)+128)),a=!1):i.append(b)}else throw new Q;break;case 1:a?(i.append(String.fromCharCode(y+128)),a=!1):i.append(String.fromCharCode(y)),u=0;break;case 2:if(y<this.C40_SHIFT2_SET_CHARS.length){const b=this.C40_SHIFT2_SET_CHARS[y];a?(i.append(String.fromCharCode(b.charCodeAt(0)+128)),a=!1):i.append(b)}else switch(y){case 27:i.append("");break;case 30:a=!0;break;default:throw new Q}u=0;break;case 3:a?(i.append(String.fromCharCode(y+224)),a=!1):i.append(String.fromCharCode(y+96)),u=0;break;default:throw new Q}}}while(t.available()>0)}static decodeTextSegment(t,i){let a=!1,o=[],u=0;do{if(t.available()===8)return;const f=t.readBits(8);if(f===254)return;this.parseTwoBytes(f,t.readBits(8),o);for(let g=0;g<3;g++){const y=o[g];switch(u){case 0:if(y<3)u=y+1;else if(y<this.TEXT_BASIC_SET_CHARS.length){const b=this.TEXT_BASIC_SET_CHARS[y];a?(i.append(String.fromCharCode(b.charCodeAt(0)+128)),a=!1):i.append(b)}else throw new Q;break;case 1:a?(i.append(String.fromCharCode(y+128)),a=!1):i.append(String.fromCharCode(y)),u=0;break;case 2:if(y<this.TEXT_SHIFT2_SET_CHARS.length){const b=this.TEXT_SHIFT2_SET_CHARS[y];a?(i.append(String.fromCharCode(b.charCodeAt(0)+128)),a=!1):i.append(b)}else switch(y){case 27:i.append("");break;case 30:a=!0;break;default:throw new Q}u=0;break;case 3:if(y<this.TEXT_SHIFT3_SET_CHARS.length){const b=this.TEXT_SHIFT3_SET_CHARS[y];a?(i.append(String.fromCharCode(b.charCodeAt(0)+128)),a=!1):i.append(b),u=0}else throw new Q;break;default:throw new Q}}}while(t.available()>0)}static decodeAnsiX12Segment(t,i){const a=[];do{if(t.available()===8)return;const o=t.readBits(8);if(o===254)return;this.parseTwoBytes(o,t.readBits(8),a);for(let u=0;u<3;u++){const f=a[u];switch(f){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(f<14)i.append(String.fromCharCode(f+44));else if(f<40)i.append(String.fromCharCode(f+51));else throw new Q;break}}}while(t.available()>0)}static parseTwoBytes(t,i,a){let o=(t<<8)+i-1,u=Math.floor(o/1600);a[0]=u,o-=u*1600,u=Math.floor(o/40),a[1]=u,a[2]=o-u*40}static decodeEdifactSegment(t,i){do{if(t.available()<=16)return;for(let a=0;a<4;a++){let o=t.readBits(6);if(o===31){const u=8-t.getBitOffset();u!==8&&t.readBits(u);return}(o&32)===0&&(o|=64),i.append(String.fromCharCode(o))}}while(t.available()>0)}static decodeBase256Segment(t,i,a){let o=1+t.getByteOffset();const u=this.unrandomize255State(t.readBits(8),o++);let f;if(u===0?f=t.available()/8|0:u<250?f=u:f=250*(u-249)+this.unrandomize255State(t.readBits(8),o++),f<0)throw new Q;const g=new Uint8Array(f);for(let y=0;y<f;y++){if(t.available()<8)throw new Q;g[y]=this.unrandomize255State(t.readBits(8),o++)}a.push(g);try{i.append(yt.decode(g,ve.ISO88591))}catch(y){throw new qn("Platform does not support required encoding: "+y.message)}}static unrandomize255State(t,i){const a=149*i%255+1,o=t-a;return o>=0?o:o+256}}ki.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],ki.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],ki.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],ki.TEXT_SHIFT2_SET_CHARS=ki.C40_SHIFT2_SET_CHARS,ki.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Gc{constructor(){this.rsDecoder=new lr(ht.DATA_MATRIX_FIELD_256)}decode(t){const i=new jr(t),a=i.getVersion(),o=i.readCodewords(),u=Pr.getDataBlocks(o,a);let f=0;for(let b of u)f+=b.getNumDataCodewords();const g=new Uint8Array(f),y=u.length;for(let b=0;b<y;b++){const v=u[b],N=v.getCodewords(),O=v.getNumDataCodewords();this.correctErrors(N,O);for(let L=0;L<O;L++)g[L*y+b]=N[L]}return ki.decode(g)}correctErrors(t,i){const a=new Int32Array(t);try{this.rsDecoder.decode(a,t.length-i)}catch{throw new P}for(let o=0;o<i;o++)t[o]=a[o]}}class Gt{constructor(t){this.image=t,this.rectangleDetector=new Kt(this.image)}detect(){const t=this.rectangleDetector.detect();let i=this.detectSolid1(t);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new ie;i=this.shiftToModuleCenter(i);const a=i[0],o=i[1],u=i[2],f=i[3];let g=this.transitionsBetween(a,f)+1,y=this.transitionsBetween(u,f)+1;(g&1)===1&&(g+=1),(y&1)===1&&(y+=1),4*g<7*y&&4*y<7*g&&(g=y=Math.max(g,y));let b=Gt.sampleGrid(this.image,a,o,u,f,g,y);return new $a(b,[a,o,u,f])}static shiftPoint(t,i,a){let o=(i.getX()-t.getX())/(a+1),u=(i.getY()-t.getY())/(a+1);return new Ne(t.getX()+o,t.getY()+u)}static moveAway(t,i,a){let o=t.getX(),u=t.getY();return o<i?o-=1:o+=1,u<a?u-=1:u+=1,new Ne(o,u)}detectSolid1(t){let i=t[0],a=t[1],o=t[3],u=t[2],f=this.transitionsBetween(i,a),g=this.transitionsBetween(a,o),y=this.transitionsBetween(o,u),b=this.transitionsBetween(u,i),v=f,N=[u,i,a,o];return v>g&&(v=g,N[0]=i,N[1]=a,N[2]=o,N[3]=u),v>y&&(v=y,N[0]=a,N[1]=o,N[2]=u,N[3]=i),v>b&&(N[0]=o,N[1]=u,N[2]=i,N[3]=a),N}detectSolid2(t){let i=t[0],a=t[1],o=t[2],u=t[3],f=this.transitionsBetween(i,u),g=Gt.shiftPoint(a,o,(f+1)*4),y=Gt.shiftPoint(o,a,(f+1)*4),b=this.transitionsBetween(g,i),v=this.transitionsBetween(y,u);return b<v?(t[0]=i,t[1]=a,t[2]=o,t[3]=u):(t[0]=a,t[1]=o,t[2]=u,t[3]=i),t}correctTopRight(t){let i=t[0],a=t[1],o=t[2],u=t[3],f=this.transitionsBetween(i,u),g=this.transitionsBetween(a,u),y=Gt.shiftPoint(i,a,(g+1)*4),b=Gt.shiftPoint(o,a,(f+1)*4);f=this.transitionsBetween(y,u),g=this.transitionsBetween(b,u);let v=new Ne(u.getX()+(o.getX()-a.getX())/(f+1),u.getY()+(o.getY()-a.getY())/(f+1)),N=new Ne(u.getX()+(i.getX()-a.getX())/(g+1),u.getY()+(i.getY()-a.getY())/(g+1));if(!this.isValid(v))return this.isValid(N)?N:null;if(!this.isValid(N))return v;let O=this.transitionsBetween(y,v)+this.transitionsBetween(b,v),L=this.transitionsBetween(y,N)+this.transitionsBetween(b,N);return O>L?v:N}shiftToModuleCenter(t){let i=t[0],a=t[1],o=t[2],u=t[3],f=this.transitionsBetween(i,u)+1,g=this.transitionsBetween(o,u)+1,y=Gt.shiftPoint(i,a,g*4),b=Gt.shiftPoint(o,a,f*4);f=this.transitionsBetween(y,u)+1,g=this.transitionsBetween(b,u)+1,(f&1)===1&&(f+=1),(g&1)===1&&(g+=1);let v=(i.getX()+a.getX()+o.getX()+u.getX())/4,N=(i.getY()+a.getY()+o.getY()+u.getY())/4;i=Gt.moveAway(i,v,N),a=Gt.moveAway(a,v,N),o=Gt.moveAway(o,v,N),u=Gt.moveAway(u,v,N);let O,L;return y=Gt.shiftPoint(i,a,g*4),y=Gt.shiftPoint(y,u,f*4),O=Gt.shiftPoint(a,i,g*4),O=Gt.shiftPoint(O,o,f*4),b=Gt.shiftPoint(o,u,g*4),b=Gt.shiftPoint(b,a,f*4),L=Gt.shiftPoint(u,o,g*4),L=Gt.shiftPoint(L,i,f*4),[y,O,b,L]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,i,a,o,u,f,g){return ii.getInstance().sampleGrid(t,f,g,.5,.5,f-.5,.5,f-.5,g-.5,.5,g-.5,i.getX(),i.getY(),u.getX(),u.getY(),o.getX(),o.getY(),a.getX(),a.getY())}transitionsBetween(t,i){let a=Math.trunc(t.getX()),o=Math.trunc(t.getY()),u=Math.trunc(i.getX()),f=Math.trunc(i.getY()),g=Math.abs(f-o)>Math.abs(u-a);if(g){let j=a;a=o,o=j,j=u,u=f,f=j}let y=Math.abs(u-a),b=Math.abs(f-o),v=-y/2,N=o<f?1:-1,O=a<u?1:-1,L=0,k=this.image.get(g?o:a,g?a:o);for(let j=a,V=o;j!==u;j+=O){let $=this.image.get(g?V:j,g?j:V);if($!==k&&(L++,k=$),v+=b,v>0){if(V===f)break;V+=N,v-=y}}return L}}class Ui{constructor(){this.decoder=new Gc}decode(t,i=null){let a,o;if(i!=null&&i.has(we.PURE_BARCODE)){const b=Ui.extractPureBits(t.getBlackMatrix());a=this.decoder.decode(b),o=Ui.NO_POINTS}else{const b=new Gt(t.getBlackMatrix()).detect();a=this.decoder.decode(b.getBits()),o=b.getPoints()}const u=a.getRawBytes(),f=new Ee(a.getText(),u,8*u.length,o,be.DATA_MATRIX,W.currentTimeMillis()),g=a.getByteSegments();g!=null&&f.putMetadata(ut.BYTE_SEGMENTS,g);const y=a.getECLevel();return y!=null&&f.putMetadata(ut.ERROR_CORRECTION_LEVEL,y),f}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),a=t.getBottomRightOnBit();if(i==null||a==null)throw new ie;const o=this.moduleSize(i,t);let u=i[1];const f=a[1];let g=i[0];const b=(a[0]-g+1)/o,v=(f-u+1)/o;if(b<=0||v<=0)throw new ie;const N=o/2;u+=N,g+=N;const O=new gt(b,v);for(let L=0;L<v;L++){const k=u+L*o;for(let j=0;j<b;j++)t.get(g+j*o,k)&&O.set(j,L)}return O}static moduleSize(t,i){const a=i.getWidth();let o=t[0];const u=t[1];for(;o<a&&i.get(o,u);)o++;if(o===a)throw new ie;const f=o-t[0];if(f===0)throw new ie;return f}}Ui.NO_POINTS=[];class is extends Ae{constructor(t=500){super(new Ui,t)}}var zr;(function(T){T[T.L=0]="L",T[T.M=1]="M",T[T.Q=2]="Q",T[T.H=3]="H"})(zr||(zr={}));class Qe{constructor(t,i,a){this.value=t,this.stringValue=i,this.bits=a,Qe.FOR_BITS.set(a,this),Qe.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return Qe.L;case"M":return Qe.M;case"Q":return Qe.Q;case"H":return Qe.H;default:throw new I(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof Qe))return!1;const i=t;return this.value===i.value}static forBits(t){if(t<0||t>=Qe.FOR_BITS.size)throw new D;return Qe.FOR_BITS.get(t)}}Qe.FOR_BITS=new Map,Qe.FOR_VALUE=new Map,Qe.L=new Qe(zr.L,"L",1),Qe.M=new Qe(zr.M,"M",0),Qe.Q=new Qe(zr.Q,"Q",3),Qe.H=new Qe(zr.H,"H",2);class hn{constructor(t){this.errorCorrectionLevel=Qe.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,i){return Y.bitCount(t^i)}static decodeFormatInformation(t,i){const a=hn.doDecodeFormatInformation(t,i);return a!==null?a:hn.doDecodeFormatInformation(t^hn.FORMAT_INFO_MASK_QR,i^hn.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,i){let a=Number.MAX_SAFE_INTEGER,o=0;for(const u of hn.FORMAT_INFO_DECODE_LOOKUP){const f=u[0];if(f===t||f===i)return new hn(u[1]);let g=hn.numBitsDiffering(t,f);g<a&&(o=u[1],a=g),t!==i&&(g=hn.numBitsDiffering(i,f),g<a&&(o=u[1],a=g))}return a<=3?new hn(o):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof hn))return!1;const i=t;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}hn.FORMAT_INFO_MASK_QR=21522,hn.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class q{constructor(t,...i){this.ecCodewordsPerBlock=t,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const i=this.ecBlocks;for(const a of i)t+=a.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class M{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ie{constructor(t,i,...a){this.versionNumber=t,this.alignmentPatternCenters=i,this.ecBlocks=a;let o=0;const u=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();for(const g of f)o+=g.getCount()*(g.getDataCodewords()+u);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new Q;try{return this.getVersionForNumber((t-17)/4)}catch{throw new Q}}static getVersionForNumber(t){if(t<1||t>40)throw new D;return Ie.VERSIONS[t-1]}static decodeVersionInformation(t){let i=Number.MAX_SAFE_INTEGER,a=0;for(let o=0;o<Ie.VERSION_DECODE_INFO.length;o++){const u=Ie.VERSION_DECODE_INFO[o];if(u===t)return Ie.getVersionForNumber(o+7);const f=hn.numBitsDiffering(t,u);f<i&&(a=o+7,i=f)}return i<=3?Ie.getVersionForNumber(a):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),i=new gt(t);i.setRegion(0,0,9,9),i.setRegion(t-8,0,8,9),i.setRegion(0,t-8,9,8);const a=this.alignmentPatternCenters.length;for(let o=0;o<a;o++){const u=this.alignmentPatternCenters[o]-2;for(let f=0;f<a;f++)o===0&&(f===0||f===a-1)||o===a-1&&f===0||i.setRegion(this.alignmentPatternCenters[f]-2,u,5,5)}return i.setRegion(6,9,1,t-17),i.setRegion(9,6,t-17,1),this.versionNumber>6&&(i.setRegion(t-11,0,3,6),i.setRegion(0,t-11,6,3)),i}toString(){return""+this.versionNumber}}Ie.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ie.VERSIONS=[new Ie(1,new Int32Array(0),new q(7,new M(1,19)),new q(10,new M(1,16)),new q(13,new M(1,13)),new q(17,new M(1,9))),new Ie(2,Int32Array.from([6,18]),new q(10,new M(1,34)),new q(16,new M(1,28)),new q(22,new M(1,22)),new q(28,new M(1,16))),new Ie(3,Int32Array.from([6,22]),new q(15,new M(1,55)),new q(26,new M(1,44)),new q(18,new M(2,17)),new q(22,new M(2,13))),new Ie(4,Int32Array.from([6,26]),new q(20,new M(1,80)),new q(18,new M(2,32)),new q(26,new M(2,24)),new q(16,new M(4,9))),new Ie(5,Int32Array.from([6,30]),new q(26,new M(1,108)),new q(24,new M(2,43)),new q(18,new M(2,15),new M(2,16)),new q(22,new M(2,11),new M(2,12))),new Ie(6,Int32Array.from([6,34]),new q(18,new M(2,68)),new q(16,new M(4,27)),new q(24,new M(4,19)),new q(28,new M(4,15))),new Ie(7,Int32Array.from([6,22,38]),new q(20,new M(2,78)),new q(18,new M(4,31)),new q(18,new M(2,14),new M(4,15)),new q(26,new M(4,13),new M(1,14))),new Ie(8,Int32Array.from([6,24,42]),new q(24,new M(2,97)),new q(22,new M(2,38),new M(2,39)),new q(22,new M(4,18),new M(2,19)),new q(26,new M(4,14),new M(2,15))),new Ie(9,Int32Array.from([6,26,46]),new q(30,new M(2,116)),new q(22,new M(3,36),new M(2,37)),new q(20,new M(4,16),new M(4,17)),new q(24,new M(4,12),new M(4,13))),new Ie(10,Int32Array.from([6,28,50]),new q(18,new M(2,68),new M(2,69)),new q(26,new M(4,43),new M(1,44)),new q(24,new M(6,19),new M(2,20)),new q(28,new M(6,15),new M(2,16))),new Ie(11,Int32Array.from([6,30,54]),new q(20,new M(4,81)),new q(30,new M(1,50),new M(4,51)),new q(28,new M(4,22),new M(4,23)),new q(24,new M(3,12),new M(8,13))),new Ie(12,Int32Array.from([6,32,58]),new q(24,new M(2,92),new M(2,93)),new q(22,new M(6,36),new M(2,37)),new q(26,new M(4,20),new M(6,21)),new q(28,new M(7,14),new M(4,15))),new Ie(13,Int32Array.from([6,34,62]),new q(26,new M(4,107)),new q(22,new M(8,37),new M(1,38)),new q(24,new M(8,20),new M(4,21)),new q(22,new M(12,11),new M(4,12))),new Ie(14,Int32Array.from([6,26,46,66]),new q(30,new M(3,115),new M(1,116)),new q(24,new M(4,40),new M(5,41)),new q(20,new M(11,16),new M(5,17)),new q(24,new M(11,12),new M(5,13))),new Ie(15,Int32Array.from([6,26,48,70]),new q(22,new M(5,87),new M(1,88)),new q(24,new M(5,41),new M(5,42)),new q(30,new M(5,24),new M(7,25)),new q(24,new M(11,12),new M(7,13))),new Ie(16,Int32Array.from([6,26,50,74]),new q(24,new M(5,98),new M(1,99)),new q(28,new M(7,45),new M(3,46)),new q(24,new M(15,19),new M(2,20)),new q(30,new M(3,15),new M(13,16))),new Ie(17,Int32Array.from([6,30,54,78]),new q(28,new M(1,107),new M(5,108)),new q(28,new M(10,46),new M(1,47)),new q(28,new M(1,22),new M(15,23)),new q(28,new M(2,14),new M(17,15))),new Ie(18,Int32Array.from([6,30,56,82]),new q(30,new M(5,120),new M(1,121)),new q(26,new M(9,43),new M(4,44)),new q(28,new M(17,22),new M(1,23)),new q(28,new M(2,14),new M(19,15))),new Ie(19,Int32Array.from([6,30,58,86]),new q(28,new M(3,113),new M(4,114)),new q(26,new M(3,44),new M(11,45)),new q(26,new M(17,21),new M(4,22)),new q(26,new M(9,13),new M(16,14))),new Ie(20,Int32Array.from([6,34,62,90]),new q(28,new M(3,107),new M(5,108)),new q(26,new M(3,41),new M(13,42)),new q(30,new M(15,24),new M(5,25)),new q(28,new M(15,15),new M(10,16))),new Ie(21,Int32Array.from([6,28,50,72,94]),new q(28,new M(4,116),new M(4,117)),new q(26,new M(17,42)),new q(28,new M(17,22),new M(6,23)),new q(30,new M(19,16),new M(6,17))),new Ie(22,Int32Array.from([6,26,50,74,98]),new q(28,new M(2,111),new M(7,112)),new q(28,new M(17,46)),new q(30,new M(7,24),new M(16,25)),new q(24,new M(34,13))),new Ie(23,Int32Array.from([6,30,54,78,102]),new q(30,new M(4,121),new M(5,122)),new q(28,new M(4,47),new M(14,48)),new q(30,new M(11,24),new M(14,25)),new q(30,new M(16,15),new M(14,16))),new Ie(24,Int32Array.from([6,28,54,80,106]),new q(30,new M(6,117),new M(4,118)),new q(28,new M(6,45),new M(14,46)),new q(30,new M(11,24),new M(16,25)),new q(30,new M(30,16),new M(2,17))),new Ie(25,Int32Array.from([6,32,58,84,110]),new q(26,new M(8,106),new M(4,107)),new q(28,new M(8,47),new M(13,48)),new q(30,new M(7,24),new M(22,25)),new q(30,new M(22,15),new M(13,16))),new Ie(26,Int32Array.from([6,30,58,86,114]),new q(28,new M(10,114),new M(2,115)),new q(28,new M(19,46),new M(4,47)),new q(28,new M(28,22),new M(6,23)),new q(30,new M(33,16),new M(4,17))),new Ie(27,Int32Array.from([6,34,62,90,118]),new q(30,new M(8,122),new M(4,123)),new q(28,new M(22,45),new M(3,46)),new q(30,new M(8,23),new M(26,24)),new q(30,new M(12,15),new M(28,16))),new Ie(28,Int32Array.from([6,26,50,74,98,122]),new q(30,new M(3,117),new M(10,118)),new q(28,new M(3,45),new M(23,46)),new q(30,new M(4,24),new M(31,25)),new q(30,new M(11,15),new M(31,16))),new Ie(29,Int32Array.from([6,30,54,78,102,126]),new q(30,new M(7,116),new M(7,117)),new q(28,new M(21,45),new M(7,46)),new q(30,new M(1,23),new M(37,24)),new q(30,new M(19,15),new M(26,16))),new Ie(30,Int32Array.from([6,26,52,78,104,130]),new q(30,new M(5,115),new M(10,116)),new q(28,new M(19,47),new M(10,48)),new q(30,new M(15,24),new M(25,25)),new q(30,new M(23,15),new M(25,16))),new Ie(31,Int32Array.from([6,30,56,82,108,134]),new q(30,new M(13,115),new M(3,116)),new q(28,new M(2,46),new M(29,47)),new q(30,new M(42,24),new M(1,25)),new q(30,new M(23,15),new M(28,16))),new Ie(32,Int32Array.from([6,34,60,86,112,138]),new q(30,new M(17,115)),new q(28,new M(10,46),new M(23,47)),new q(30,new M(10,24),new M(35,25)),new q(30,new M(19,15),new M(35,16))),new Ie(33,Int32Array.from([6,30,58,86,114,142]),new q(30,new M(17,115),new M(1,116)),new q(28,new M(14,46),new M(21,47)),new q(30,new M(29,24),new M(19,25)),new q(30,new M(11,15),new M(46,16))),new Ie(34,Int32Array.from([6,34,62,90,118,146]),new q(30,new M(13,115),new M(6,116)),new q(28,new M(14,46),new M(23,47)),new q(30,new M(44,24),new M(7,25)),new q(30,new M(59,16),new M(1,17))),new Ie(35,Int32Array.from([6,30,54,78,102,126,150]),new q(30,new M(12,121),new M(7,122)),new q(28,new M(12,47),new M(26,48)),new q(30,new M(39,24),new M(14,25)),new q(30,new M(22,15),new M(41,16))),new Ie(36,Int32Array.from([6,24,50,76,102,128,154]),new q(30,new M(6,121),new M(14,122)),new q(28,new M(6,47),new M(34,48)),new q(30,new M(46,24),new M(10,25)),new q(30,new M(2,15),new M(64,16))),new Ie(37,Int32Array.from([6,28,54,80,106,132,158]),new q(30,new M(17,122),new M(4,123)),new q(28,new M(29,46),new M(14,47)),new q(30,new M(49,24),new M(10,25)),new q(30,new M(24,15),new M(46,16))),new Ie(38,Int32Array.from([6,32,58,84,110,136,162]),new q(30,new M(4,122),new M(18,123)),new q(28,new M(13,46),new M(32,47)),new q(30,new M(48,24),new M(14,25)),new q(30,new M(42,15),new M(32,16))),new Ie(39,Int32Array.from([6,26,54,82,110,138,166]),new q(30,new M(20,117),new M(4,118)),new q(28,new M(40,47),new M(7,48)),new q(30,new M(43,24),new M(22,25)),new q(30,new M(10,15),new M(67,16))),new Ie(40,Int32Array.from([6,30,58,86,114,142,170]),new q(30,new M(19,118),new M(6,119)),new q(28,new M(18,47),new M(31,48)),new q(30,new M(34,24),new M(34,25)),new q(30,new M(20,15),new M(61,16)))];var ln;(function(T){T[T.DATA_MASK_000=0]="DATA_MASK_000",T[T.DATA_MASK_001=1]="DATA_MASK_001",T[T.DATA_MASK_010=2]="DATA_MASK_010",T[T.DATA_MASK_011=3]="DATA_MASK_011",T[T.DATA_MASK_100=4]="DATA_MASK_100",T[T.DATA_MASK_101=5]="DATA_MASK_101",T[T.DATA_MASK_110=6]="DATA_MASK_110",T[T.DATA_MASK_111=7]="DATA_MASK_111"})(ln||(ln={}));class Fn{constructor(t,i){this.value=t,this.isMasked=i}unmaskBitMatrix(t,i){for(let a=0;a<i;a++)for(let o=0;o<i;o++)this.isMasked(a,o)&&t.flip(o,a)}}Fn.values=new Map([[ln.DATA_MASK_000,new Fn(ln.DATA_MASK_000,(T,t)=>(T+t&1)===0)],[ln.DATA_MASK_001,new Fn(ln.DATA_MASK_001,(T,t)=>(T&1)===0)],[ln.DATA_MASK_010,new Fn(ln.DATA_MASK_010,(T,t)=>t%3===0)],[ln.DATA_MASK_011,new Fn(ln.DATA_MASK_011,(T,t)=>(T+t)%3===0)],[ln.DATA_MASK_100,new Fn(ln.DATA_MASK_100,(T,t)=>(Math.floor(T/2)+Math.floor(t/3)&1)===0)],[ln.DATA_MASK_101,new Fn(ln.DATA_MASK_101,(T,t)=>T*t%6===0)],[ln.DATA_MASK_110,new Fn(ln.DATA_MASK_110,(T,t)=>T*t%6<3)],[ln.DATA_MASK_111,new Fn(ln.DATA_MASK_111,(T,t)=>(T+t+T*t%3&1)===0)]]);class Fr{constructor(t){const i=t.getHeight();if(i<21||(i&3)!==1)throw new Q;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let u=0;u<6;u++)t=this.copyBit(u,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let u=5;u>=0;u--)t=this.copyBit(8,u,t);const i=this.bitMatrix.getHeight();let a=0;const o=i-7;for(let u=i-1;u>=o;u--)a=this.copyBit(8,u,a);for(let u=i-8;u<i;u++)a=this.copyBit(u,8,a);if(this.parsedFormatInfo=hn.decodeFormatInformation(t,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new Q}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),i=Math.floor((t-17)/4);if(i<=6)return Ie.getVersionForNumber(i);let a=0;const o=t-11;for(let f=5;f>=0;f--)for(let g=t-9;g>=o;g--)a=this.copyBit(g,f,a);let u=Ie.decodeVersionInformation(a);if(u!==null&&u.getDimensionForVersion()===t)return this.parsedVersion=u,u;a=0;for(let f=5;f>=0;f--)for(let g=t-9;g>=o;g--)a=this.copyBit(f,g,a);if(u=Ie.decodeVersionInformation(a),u!==null&&u.getDimensionForVersion()===t)return this.parsedVersion=u,u;throw new Q}copyBit(t,i,a){return(this.isMirror?this.bitMatrix.get(i,t):this.bitMatrix.get(t,i))?a<<1|1:a<<1}readCodewords(){const t=this.readFormatInformation(),i=this.readVersion(),a=Fn.values.get(t.getDataMask()),o=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,o);const u=i.buildFunctionPattern();let f=!0;const g=new Uint8Array(i.getTotalCodewords());let y=0,b=0,v=0;for(let N=o-1;N>0;N-=2){N===6&&N--;for(let O=0;O<o;O++){const L=f?o-1-O:O;for(let k=0;k<2;k++)u.get(N-k,L)||(v++,b<<=1,this.bitMatrix.get(N-k,L)&&(b|=1),v===8&&(g[y++]=b,v=0,b=0))}f=!f}if(y!==i.getTotalCodewords())throw new Q;return g}remask(){if(this.parsedFormatInfo===null)return;const t=Fn.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,i)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let i=0,a=t.getWidth();i<a;i++)for(let o=i+1,u=t.getHeight();o<u;o++)t.get(i,o)!==t.get(o,i)&&(t.flip(o,i),t.flip(i,o))}}class nl{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i,a){if(t.length!==i.getTotalCodewords())throw new D;const o=i.getECBlocksForLevel(a);let u=0;const f=o.getECBlocks();for(const k of f)u+=k.getCount();const g=new Array(u);let y=0;for(const k of f)for(let j=0;j<k.getCount();j++){const V=k.getDataCodewords(),$=o.getECCodewordsPerBlock()+V;g[y++]=new nl(V,new Uint8Array($))}const b=g[0].codewords.length;let v=g.length-1;for(;v>=0&&g[v].codewords.length!==b;)v--;v++;const N=b-o.getECCodewordsPerBlock();let O=0;for(let k=0;k<N;k++)for(let j=0;j<y;j++)g[j].codewords[k]=t[O++];for(let k=v;k<y;k++)g[k].codewords[N]=t[O++];const L=g[0].codewords.length;for(let k=N;k<L;k++)for(let j=0;j<y;j++){const V=j<v?k:k+1;g[j].codewords[V]=t[O++]}return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Hn;(function(T){T[T.TERMINATOR=0]="TERMINATOR",T[T.NUMERIC=1]="NUMERIC",T[T.ALPHANUMERIC=2]="ALPHANUMERIC",T[T.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",T[T.BYTE=4]="BYTE",T[T.ECI=5]="ECI",T[T.KANJI=6]="KANJI",T[T.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",T[T.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",T[T.HANZI=9]="HANZI"})(Hn||(Hn={}));class Me{constructor(t,i,a,o){this.value=t,this.stringValue=i,this.characterCountBitsForVersions=a,this.bits=o,Me.FOR_BITS.set(o,this),Me.FOR_VALUE.set(t,this)}static forBits(t){const i=Me.FOR_BITS.get(t);if(i===void 0)throw new D;return i}getCharacterCountBits(t){const i=t.getVersionNumber();let a;return i<=9?a=0:i<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof Me))return!1;const i=t;return this.value===i.value}toString(){return this.stringValue}}Me.FOR_BITS=new Map,Me.FOR_VALUE=new Map,Me.TERMINATOR=new Me(Hn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Me.NUMERIC=new Me(Hn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Me.ALPHANUMERIC=new Me(Hn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Me.STRUCTURED_APPEND=new Me(Hn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Me.BYTE=new Me(Hn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Me.ECI=new Me(Hn.ECI,"ECI",Int32Array.from([0,0,0]),7),Me.KANJI=new Me(Hn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Me.FNC1_FIRST_POSITION=new Me(Hn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Me.FNC1_SECOND_POSITION=new Me(Hn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Me.HANZI=new Me(Hn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class kt{static decode(t,i,a,o){const u=new si(t);let f=new Ye;const g=new Array;let y=-1,b=-1;try{let v=null,N=!1,O;do{if(u.available()<4)O=Me.TERMINATOR;else{const L=u.readBits(4);O=Me.forBits(L)}switch(O){case Me.TERMINATOR:break;case Me.FNC1_FIRST_POSITION:case Me.FNC1_SECOND_POSITION:N=!0;break;case Me.STRUCTURED_APPEND:if(u.available()<16)throw new Q;y=u.readBits(8),b=u.readBits(8);break;case Me.ECI:const L=kt.parseECIValue(u);if(v=oe.getCharacterSetECIByValue(L),v===null)throw new Q;break;case Me.HANZI:const k=u.readBits(4),j=u.readBits(O.getCharacterCountBits(i));k===kt.GB2312_SUBSET&&kt.decodeHanziSegment(u,f,j);break;default:const V=u.readBits(O.getCharacterCountBits(i));switch(O){case Me.NUMERIC:kt.decodeNumericSegment(u,f,V);break;case Me.ALPHANUMERIC:kt.decodeAlphanumericSegment(u,f,V,N);break;case Me.BYTE:kt.decodeByteSegment(u,f,V,v,g,o);break;case Me.KANJI:kt.decodeKanjiSegment(u,f,V);break;default:throw new Q}break}}while(O!==Me.TERMINATOR)}catch{throw new Q}return new Bt(t,f.toString(),g.length===0?null:g,a===null?null:a.toString(),y,b)}static decodeHanziSegment(t,i,a){if(a*13>t.available())throw new Q;const o=new Uint8Array(2*a);let u=0;for(;a>0;){const f=t.readBits(13);let g=f/96<<8&4294967295|f%96;g<959?g+=41377:g+=42657,o[u]=g>>8&255,o[u+1]=g&255,u+=2,a--}try{i.append(yt.decode(o,ve.GB2312))}catch(f){throw new Q(f)}}static decodeKanjiSegment(t,i,a){if(a*13>t.available())throw new Q;const o=new Uint8Array(2*a);let u=0;for(;a>0;){const f=t.readBits(13);let g=f/192<<8&4294967295|f%192;g<7936?g+=33088:g+=49472,o[u]=g>>8,o[u+1]=g,u+=2,a--}try{i.append(yt.decode(o,ve.SHIFT_JIS))}catch(f){throw new Q(f)}}static decodeByteSegment(t,i,a,o,u,f){if(8*a>t.available())throw new Q;const g=new Uint8Array(a);for(let b=0;b<a;b++)g[b]=t.readBits(8);let y;o===null?y=ve.guessEncoding(g,f):y=o.getName();try{i.append(yt.decode(g,y))}catch(b){throw new Q(b)}u.push(g)}static toAlphaNumericChar(t){if(t>=kt.ALPHANUMERIC_CHARS.length)throw new Q;return kt.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,i,a,o){const u=i.length();for(;a>1;){if(t.available()<11)throw new Q;const f=t.readBits(11);i.append(kt.toAlphaNumericChar(Math.floor(f/45))),i.append(kt.toAlphaNumericChar(f%45)),a-=2}if(a===1){if(t.available()<6)throw new Q;i.append(kt.toAlphaNumericChar(t.readBits(6)))}if(o)for(let f=u;f<i.length();f++)i.charAt(f)==="%"&&(f<i.length()-1&&i.charAt(f+1)==="%"?i.deleteCharAt(f+1):i.setCharAt(f,""))}static decodeNumericSegment(t,i,a){for(;a>=3;){if(t.available()<10)throw new Q;const o=t.readBits(10);if(o>=1e3)throw new Q;i.append(kt.toAlphaNumericChar(Math.floor(o/100))),i.append(kt.toAlphaNumericChar(Math.floor(o/10)%10)),i.append(kt.toAlphaNumericChar(o%10)),a-=3}if(a===2){if(t.available()<7)throw new Q;const o=t.readBits(7);if(o>=100)throw new Q;i.append(kt.toAlphaNumericChar(Math.floor(o/10))),i.append(kt.toAlphaNumericChar(o%10))}else if(a===1){if(t.available()<4)throw new Q;const o=t.readBits(4);if(o>=10)throw new Q;i.append(kt.toAlphaNumericChar(o))}}static parseECIValue(t){const i=t.readBits(8);if((i&128)===0)return i&127;if((i&192)===128){const a=t.readBits(8);return(i&63)<<8&4294967295|a}if((i&224)===192){const a=t.readBits(16);return(i&31)<<16&4294967295|a}throw new Q}}kt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",kt.GB2312_SUBSET=1;class co{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const i=t[0];t[0]=t[2],t[2]=i}}class Vc{constructor(){this.rsDecoder=new lr(ht.QR_CODE_FIELD_256)}decodeBooleanArray(t,i){return this.decodeBitMatrix(gt.parseFromBooleanArray(t),i)}decodeBitMatrix(t,i){const a=new Fr(t);let o=null;try{return this.decodeBitMatrixParser(a,i)}catch(u){o=u}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const u=this.decodeBitMatrixParser(a,i);return u.setOther(new co(!0)),u}catch(u){throw o!==null?o:u}}decodeBitMatrixParser(t,i){const a=t.readVersion(),o=t.readFormatInformation().getErrorCorrectionLevel(),u=t.readCodewords(),f=nl.getDataBlocks(u,a,o);let g=0;for(const v of f)g+=v.getNumDataCodewords();const y=new Uint8Array(g);let b=0;for(const v of f){const N=v.getCodewords(),O=v.getNumDataCodewords();this.correctErrors(N,O);for(let L=0;L<O;L++)y[b++]=N[L]}return kt.decode(y,a,o,i)}correctErrors(t,i){const a=new Int32Array(t);try{this.rsDecoder.decode(a,t.length-i)}catch{throw new P}for(let o=0;o<i;o++)t[o]=a[o]}}class Hr extends Ne{constructor(t,i,a){super(t,i),this.estimatedModuleSize=a}aboutEquals(t,i,a){if(Math.abs(i-this.getY())<=t&&Math.abs(a-this.getX())<=t){const o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(t,i,a){const o=(this.getX()+i)/2,u=(this.getY()+t)/2,f=(this.estimatedModuleSize+a)/2;return new Hr(o,u,f)}}class Zn{constructor(t,i,a,o,u,f,g){this.image=t,this.startX=i,this.startY=a,this.width=o,this.height=u,this.moduleSize=f,this.resultPointCallback=g,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,i=this.height,a=this.width,o=t+a,u=this.startY+i/2,f=new Int32Array(3),g=this.image;for(let y=0;y<i;y++){const b=u+((y&1)===0?Math.floor((y+1)/2):-Math.floor((y+1)/2));f[0]=0,f[1]=0,f[2]=0;let v=t;for(;v<o&&!g.get(v,b);)v++;let N=0;for(;v<o;){if(g.get(v,b))if(N===1)f[1]++;else if(N===2){if(this.foundPatternCross(f)){const O=this.handlePossibleCenter(f,b,v);if(O!==null)return O}f[0]=f[2],f[1]=1,f[2]=0,N=1}else f[++N]++;else N===1&&N++,f[N]++;v++}if(this.foundPatternCross(f)){const O=this.handlePossibleCenter(f,b,o);if(O!==null)return O}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ie}static centerFromEnd(t,i){return i-t[2]-t[1]/2}foundPatternCross(t){const i=this.moduleSize,a=i/2;for(let o=0;o<3;o++)if(Math.abs(i-t[o])>=a)return!1;return!0}crossCheckVertical(t,i,a,o){const u=this.image,f=u.getHeight(),g=this.crossCheckStateCount;g[0]=0,g[1]=0,g[2]=0;let y=t;for(;y>=0&&u.get(i,y)&&g[1]<=a;)g[1]++,y--;if(y<0||g[1]>a)return NaN;for(;y>=0&&!u.get(i,y)&&g[0]<=a;)g[0]++,y--;if(g[0]>a)return NaN;for(y=t+1;y<f&&u.get(i,y)&&g[1]<=a;)g[1]++,y++;if(y===f||g[1]>a)return NaN;for(;y<f&&!u.get(i,y)&&g[2]<=a;)g[2]++,y++;if(g[2]>a)return NaN;const b=g[0]+g[1]+g[2];return 5*Math.abs(b-o)>=2*o?NaN:this.foundPatternCross(g)?Zn.centerFromEnd(g,y):NaN}handlePossibleCenter(t,i,a){const o=t[0]+t[1]+t[2],u=Zn.centerFromEnd(t,a),f=this.crossCheckVertical(i,u,2*t[1],o);if(!isNaN(f)){const g=(t[0]+t[1]+t[2])/3;for(const b of this.possibleCenters)if(b.aboutEquals(g,f,u))return b.combineEstimate(f,u,g);const y=new Hr(u,f,g);this.possibleCenters.push(y),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(y)}return null}}class Ca extends Ne{constructor(t,i,a,o){super(t,i),this.estimatedModuleSize=a,this.count=o,o===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,i,a){if(Math.abs(i-this.getY())<=t&&Math.abs(a-this.getX())<=t){const o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(t,i,a){const o=this.count+1,u=(this.count*this.getX()+i)/o,f=(this.count*this.getY()+t)/o,g=(this.count*this.estimatedModuleSize+a)/o;return new Ca(u,f,g,o)}}class il{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Vt{constructor(t,i){this.image=t,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const i=t!=null&&t.get(we.TRY_HARDER)!==void 0,a=t!=null&&t.get(we.PURE_BARCODE)!==void 0,o=this.image,u=o.getHeight(),f=o.getWidth();let g=Math.floor(3*u/(4*Vt.MAX_MODULES));(g<Vt.MIN_SKIP||i)&&(g=Vt.MIN_SKIP);let y=!1;const b=new Int32Array(5);for(let N=g-1;N<u&&!y;N+=g){b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0;let O=0;for(let L=0;L<f;L++)if(o.get(L,N))(O&1)===1&&O++,b[O]++;else if((O&1)===0)if(O===4)if(Vt.foundPatternCross(b)){if(this.handlePossibleCenter(b,N,L,a)===!0)if(g=2,this.hasSkipped===!0)y=this.haveMultiplyConfirmedCenters();else{const j=this.findRowSkip();j>b[2]&&(N+=j-b[2]-g,L=f-1)}else{b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,O=3;continue}O=0,b[0]=0,b[1]=0,b[2]=0,b[3]=0,b[4]=0}else b[0]=b[2],b[1]=b[3],b[2]=b[4],b[3]=1,b[4]=0,O=3;else b[++O]++;else b[O]++;Vt.foundPatternCross(b)&&this.handlePossibleCenter(b,N,f,a)===!0&&(g=b[0],this.hasSkipped&&(y=this.haveMultiplyConfirmedCenters()))}const v=this.selectBestPatterns();return Ne.orderBestPatterns(v),new il(v)}static centerFromEnd(t,i){return i-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let i=0;for(let u=0;u<5;u++){const f=t[u];if(f===0)return!1;i+=f}if(i<7)return!1;const a=i/7,o=a/2;return Math.abs(a-t[0])<o&&Math.abs(a-t[1])<o&&Math.abs(3*a-t[2])<3*o&&Math.abs(a-t[3])<o&&Math.abs(a-t[4])<o}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,i,a,o){const u=this.getCrossCheckStateCount();let f=0;const g=this.image;for(;t>=f&&i>=f&&g.get(i-f,t-f);)u[2]++,f++;if(t<f||i<f)return!1;for(;t>=f&&i>=f&&!g.get(i-f,t-f)&&u[1]<=a;)u[1]++,f++;if(t<f||i<f||u[1]>a)return!1;for(;t>=f&&i>=f&&g.get(i-f,t-f)&&u[0]<=a;)u[0]++,f++;if(u[0]>a)return!1;const y=g.getHeight(),b=g.getWidth();for(f=1;t+f<y&&i+f<b&&g.get(i+f,t+f);)u[2]++,f++;if(t+f>=y||i+f>=b)return!1;for(;t+f<y&&i+f<b&&!g.get(i+f,t+f)&&u[3]<a;)u[3]++,f++;if(t+f>=y||i+f>=b||u[3]>=a)return!1;for(;t+f<y&&i+f<b&&g.get(i+f,t+f)&&u[4]<a;)u[4]++,f++;if(u[4]>=a)return!1;const v=u[0]+u[1]+u[2]+u[3]+u[4];return Math.abs(v-o)<2*o&&Vt.foundPatternCross(u)}crossCheckVertical(t,i,a,o){const u=this.image,f=u.getHeight(),g=this.getCrossCheckStateCount();let y=t;for(;y>=0&&u.get(i,y);)g[2]++,y--;if(y<0)return NaN;for(;y>=0&&!u.get(i,y)&&g[1]<=a;)g[1]++,y--;if(y<0||g[1]>a)return NaN;for(;y>=0&&u.get(i,y)&&g[0]<=a;)g[0]++,y--;if(g[0]>a)return NaN;for(y=t+1;y<f&&u.get(i,y);)g[2]++,y++;if(y===f)return NaN;for(;y<f&&!u.get(i,y)&&g[3]<a;)g[3]++,y++;if(y===f||g[3]>=a)return NaN;for(;y<f&&u.get(i,y)&&g[4]<a;)g[4]++,y++;if(g[4]>=a)return NaN;const b=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(b-o)>=2*o?NaN:Vt.foundPatternCross(g)?Vt.centerFromEnd(g,y):NaN}crossCheckHorizontal(t,i,a,o){const u=this.image,f=u.getWidth(),g=this.getCrossCheckStateCount();let y=t;for(;y>=0&&u.get(y,i);)g[2]++,y--;if(y<0)return NaN;for(;y>=0&&!u.get(y,i)&&g[1]<=a;)g[1]++,y--;if(y<0||g[1]>a)return NaN;for(;y>=0&&u.get(y,i)&&g[0]<=a;)g[0]++,y--;if(g[0]>a)return NaN;for(y=t+1;y<f&&u.get(y,i);)g[2]++,y++;if(y===f)return NaN;for(;y<f&&!u.get(y,i)&&g[3]<a;)g[3]++,y++;if(y===f||g[3]>=a)return NaN;for(;y<f&&u.get(y,i)&&g[4]<a;)g[4]++,y++;if(g[4]>=a)return NaN;const b=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(b-o)>=o?NaN:Vt.foundPatternCross(g)?Vt.centerFromEnd(g,y):NaN}handlePossibleCenter(t,i,a,o){const u=t[0]+t[1]+t[2]+t[3]+t[4];let f=Vt.centerFromEnd(t,a),g=this.crossCheckVertical(i,Math.floor(f),t[2],u);if(!isNaN(g)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(g),t[2],u),!isNaN(f)&&(!o||this.crossCheckDiagonal(Math.floor(g),Math.floor(f),t[2],u)))){const y=u/7;let b=!1;const v=this.possibleCenters;for(let N=0,O=v.length;N<O;N++){const L=v[N];if(L.aboutEquals(y,g,f)){v[N]=L.combineEstimate(g,f,y),b=!0;break}}if(!b){const N=new Ca(f,g,y);v.push(N),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(N)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const a of this.possibleCenters)if(a.getCount()>=Vt.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,i=0;const a=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=Vt.CENTER_QUORUM&&(t++,i+=f.getEstimatedModuleSize());if(t<3)return!1;const o=i/a;let u=0;for(const f of this.possibleCenters)u+=Math.abs(f.getEstimatedModuleSize()-o);return u<=.05*i}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new ie;const i=this.possibleCenters;let a;if(t>3){let o=0,u=0;for(const y of this.possibleCenters){const b=y.getEstimatedModuleSize();o+=b,u+=b*b}a=o/t;let f=Math.sqrt(u/t-a*a);i.sort((y,b)=>{const v=Math.abs(b.getEstimatedModuleSize()-a),N=Math.abs(y.getEstimatedModuleSize()-a);return v<N?-1:v>N?1:0});const g=Math.max(.2*a,f);for(let y=0;y<i.length&&i.length>3;y++){const b=i[y];Math.abs(b.getEstimatedModuleSize()-a)>g&&(i.splice(y,1),y--)}}if(i.length>3){let o=0;for(const u of i)o+=u.getEstimatedModuleSize();a=o/i.length,i.sort((u,f)=>{if(f.getCount()===u.getCount()){const g=Math.abs(f.getEstimatedModuleSize()-a),y=Math.abs(u.getEstimatedModuleSize()-a);return g<y?1:g>y?-1:0}else return f.getCount()-u.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}Vt.CENTER_QUORUM=2,Vt.MIN_SKIP=3,Vt.MAX_MODULES=57;class _i{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(we.NEED_RESULT_POINT_CALLBACK);const a=new Vt(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(a)}processFinderPatternInfo(t){const i=t.getTopLeft(),a=t.getTopRight(),o=t.getBottomLeft(),u=this.calculateModuleSize(i,a,o);if(u<1)throw new ie("No pattern found in proccess finder.");const f=_i.computeDimension(i,a,o,u),g=Ie.getProvisionalVersionForDimension(f),y=g.getDimensionForVersion()-7;let b=null;if(g.getAlignmentPatternCenters().length>0){const L=a.getX()-i.getX()+o.getX(),k=a.getY()-i.getY()+o.getY(),j=1-3/y,V=Math.floor(i.getX()+j*(L-i.getX())),$=Math.floor(i.getY()+j*(k-i.getY()));for(let xe=4;xe<=16;xe<<=1)try{b=this.findAlignmentInRegion(u,V,$,xe);break}catch(pe){if(!(pe instanceof ie))throw pe}}const v=_i.createTransform(i,a,o,b,f),N=_i.sampleGrid(this.image,v,f);let O;return b===null?O=[o,i,a]:O=[o,i,a,b],new $a(N,O)}static createTransform(t,i,a,o,u){const f=u-3.5;let g,y,b,v;return o!==null?(g=o.getX(),y=o.getY(),b=f-3,v=b):(g=i.getX()-t.getX()+a.getX(),y=i.getY()-t.getY()+a.getY(),b=f,v=f),Xn.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,b,v,3.5,f,t.getX(),t.getY(),i.getX(),i.getY(),g,y,a.getX(),a.getY())}static sampleGrid(t,i,a){return ii.getInstance().sampleGridWithTransform(t,a,a,i)}static computeDimension(t,i,a,o){const u=$e.round(Ne.distance(t,i)/o),f=$e.round(Ne.distance(t,a)/o);let g=Math.floor((u+f)/2)+7;switch(g&3){case 0:g++;break;case 2:g--;break;case 3:throw new ie("Dimensions could be not found.")}return g}calculateModuleSize(t,i,a){return(this.calculateModuleSizeOneWay(t,i)+this.calculateModuleSizeOneWay(t,a))/2}calculateModuleSizeOneWay(t,i){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(i.getX()),Math.floor(i.getY())),o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(a)?o/7:isNaN(o)?a/7:(a+o)/14}sizeOfBlackWhiteBlackRunBothWays(t,i,a,o){let u=this.sizeOfBlackWhiteBlackRun(t,i,a,o),f=1,g=t-(a-t);g<0?(f=t/(t-g),g=0):g>=this.image.getWidth()&&(f=(this.image.getWidth()-1-t)/(g-t),g=this.image.getWidth()-1);let y=Math.floor(i-(o-i)*f);return f=1,y<0?(f=i/(i-y),y=0):y>=this.image.getHeight()&&(f=(this.image.getHeight()-1-i)/(y-i),y=this.image.getHeight()-1),g=Math.floor(t+(g-t)*f),u+=this.sizeOfBlackWhiteBlackRun(t,i,g,y),u-1}sizeOfBlackWhiteBlackRun(t,i,a,o){const u=Math.abs(o-i)>Math.abs(a-t);if(u){let L=t;t=i,i=L,L=a,a=o,o=L}const f=Math.abs(a-t),g=Math.abs(o-i);let y=-f/2;const b=t<a?1:-1,v=i<o?1:-1;let N=0;const O=a+b;for(let L=t,k=i;L!==O;L+=b){const j=u?k:L,V=u?L:k;if(N===1===this.image.get(j,V)){if(N===2)return $e.distance(L,k,t,i);N++}if(y+=g,y>0){if(k===o)break;k+=v,y-=f}}return N===2?$e.distance(a+b,o,t,i):NaN}findAlignmentInRegion(t,i,a,o){const u=Math.floor(o*t),f=Math.max(0,i-u),g=Math.min(this.image.getWidth()-1,i+u);if(g-f<t*3)throw new ie("Alignment top exceeds estimated module size.");const y=Math.max(0,a-u),b=Math.min(this.image.getHeight()-1,a+u);if(b-y<t*3)throw new ie("Alignment bottom exceeds estimated module size.");return new Zn(this.image,f,y,g-f,b-y,t,this.resultPointCallback).find()}}class ji{constructor(){this.decoder=new Vc}getDecoder(){return this.decoder}decode(t,i){let a,o;if(i!=null&&i.get(we.PURE_BARCODE)!==void 0){const y=ji.extractPureBits(t.getBlackMatrix());a=this.decoder.decodeBitMatrix(y,i),o=ji.NO_POINTS}else{const y=new _i(t.getBlackMatrix()).detect(i);a=this.decoder.decodeBitMatrix(y.getBits(),i),o=y.getPoints()}a.getOther()instanceof co&&a.getOther().applyMirroredCorrection(o);const u=new Ee(a.getText(),a.getRawBytes(),void 0,o,be.QR_CODE,void 0),f=a.getByteSegments();f!==null&&u.putMetadata(ut.BYTE_SEGMENTS,f);const g=a.getECLevel();return g!==null&&u.putMetadata(ut.ERROR_CORRECTION_LEVEL,g),a.hasStructuredAppend()&&(u.putMetadata(ut.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),u.putMetadata(ut.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),u}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),a=t.getBottomRightOnBit();if(i===null||a===null)throw new ie;const o=this.moduleSize(i,t);let u=i[1],f=a[1],g=i[0],y=a[0];if(g>=y||u>=f)throw new ie;if(f-u!==y-g&&(y=g+(f-u),y>=t.getWidth()))throw new ie;const b=Math.round((y-g+1)/o),v=Math.round((f-u+1)/o);if(b<=0||v<=0)throw new ie;if(v!==b)throw new ie;const N=Math.floor(o/2);u+=N,g+=N;const O=g+Math.floor((b-1)*o)-y;if(O>0){if(O>N)throw new ie;g-=O}const L=u+Math.floor((v-1)*o)-f;if(L>0){if(L>N)throw new ie;u-=L}const k=new gt(b,v);for(let j=0;j<v;j++){const V=u+Math.floor(j*o);for(let $=0;$<b;$++)t.get(g+Math.floor($*o),V)&&k.set($,j)}return k}static moduleSize(t,i){const a=i.getHeight(),o=i.getWidth();let u=t[0],f=t[1],g=!0,y=0;for(;u<o&&f<a;){if(g!==i.get(u,f)){if(++y===5)break;g=!g}u++,f++}if(u===o||f===a)throw new ie;return(u-t[0])/7}}ji.NO_POINTS=new Array;class ke{PDF417Common(){}static getBitCountSum(t){return $e.sum(t)}static toIntArray(t){if(t==null||!t.length)return ke.EMPTY_INT_ARRAY;const i=new Int32Array(t.length);let a=0;for(const o of t)i[a++]=o;return i}static getCodeword(t){const i=ce.binarySearch(ke.SYMBOL_TABLE,t&262143);return i<0?-1:(ke.CODEWORD_TABLE[i]-1)%ke.NUMBER_OF_CODEWORDS}}ke.NUMBER_OF_CODEWORDS=929,ke.MAX_CODEWORDS_IN_BARCODE=ke.NUMBER_OF_CODEWORDS-1,ke.MIN_ROWS_IN_BARCODE=3,ke.MAX_ROWS_IN_BARCODE=90,ke.MODULES_IN_CODEWORD=17,ke.MODULES_IN_STOP_PATTERN=18,ke.BARS_IN_MODULE=8,ke.EMPTY_INT_ARRAY=new Int32Array([]),ke.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),ke.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class uo{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class He{static detectMultiple(t,i,a){let o=t.getBlackMatrix(),u=He.detect(a,o);return u.length||(o=o.clone(),o.rotate180(),u=He.detect(a,o)),new uo(o,u)}static detect(t,i){const a=new Array;let o=0,u=0,f=!1;for(;o<i.getHeight();){const g=He.findVertices(i,o,u);if(g[0]==null&&g[3]==null){if(!f)break;f=!1,u=0;for(const y of a)y[1]!=null&&(o=Math.trunc(Math.max(o,y[1].getY()))),y[3]!=null&&(o=Math.max(o,Math.trunc(y[3].getY())));o+=He.ROW_STEP;continue}if(f=!0,a.push(g),!t)break;g[2]!=null?(u=Math.trunc(g[2].getX()),o=Math.trunc(g[2].getY())):(u=Math.trunc(g[4].getX()),o=Math.trunc(g[4].getY()))}return a}static findVertices(t,i,a){const o=t.getHeight(),u=t.getWidth(),f=new Array(8);return He.copyToResult(f,He.findRowsWithPattern(t,o,u,i,a,He.START_PATTERN),He.INDEXES_START_PATTERN),f[4]!=null&&(a=Math.trunc(f[4].getX()),i=Math.trunc(f[4].getY())),He.copyToResult(f,He.findRowsWithPattern(t,o,u,i,a,He.STOP_PATTERN),He.INDEXES_STOP_PATTERN),f}static copyToResult(t,i,a){for(let o=0;o<a.length;o++)t[a[o]]=i[o]}static findRowsWithPattern(t,i,a,o,u,f){const g=new Array(4);let y=!1;const b=new Int32Array(f.length);for(;o<i;o+=He.ROW_STEP){let N=He.findGuardPattern(t,u,o,a,!1,f,b);if(N!=null){for(;o>0;){const O=He.findGuardPattern(t,u,--o,a,!1,f,b);if(O!=null)N=O;else{o++;break}}g[0]=new Ne(N[0],o),g[1]=new Ne(N[1],o),y=!0;break}}let v=o+1;if(y){let N=0,O=Int32Array.from([Math.trunc(g[0].getX()),Math.trunc(g[1].getX())]);for(;v<i;v++){const L=He.findGuardPattern(t,O[0],v,a,!1,f,b);if(L!=null&&Math.abs(O[0]-L[0])<He.MAX_PATTERN_DRIFT&&Math.abs(O[1]-L[1])<He.MAX_PATTERN_DRIFT)O=L,N=0;else{if(N>He.SKIPPED_ROW_COUNT_MAX)break;N++}}v-=N+1,g[2]=new Ne(O[0],v),g[3]=new Ne(O[1],v)}return v-o<He.BARCODE_MIN_HEIGHT&&ce.fill(g,null),g}static findGuardPattern(t,i,a,o,u,f,g){ce.fillWithin(g,0,g.length,0);let y=i,b=0;for(;t.get(y,a)&&y>0&&b++<He.MAX_PIXEL_DRIFT;)y--;let v=y,N=0,O=f.length;for(let L=u;v<o;v++)if(t.get(v,a)!==L)g[N]++;else{if(N===O-1){if(He.patternMatchVariance(g,f,He.MAX_INDIVIDUAL_VARIANCE)<He.MAX_AVG_VARIANCE)return new Int32Array([y,v]);y+=g[0]+g[1],W.arraycopy(g,2,g,0,N-1),g[N-1]=0,g[N]=0,N--}else N++;g[N]=1,L=!L}return N===O-1&&He.patternMatchVariance(g,f,He.MAX_INDIVIDUAL_VARIANCE)<He.MAX_AVG_VARIANCE?new Int32Array([y,v-1]):null}static patternMatchVariance(t,i,a){let o=t.length,u=0,f=0;for(let b=0;b<o;b++)u+=t[b],f+=i[b];if(u<f)return 1/0;let g=u/f;a*=g;let y=0;for(let b=0;b<o;b++){let v=t[b],N=i[b]*g,O=v>N?v-N:N-v;if(O>a)return 1/0;y+=O}return y/u}}He.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),He.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),He.MAX_AVG_VARIANCE=.42,He.MAX_INDIVIDUAL_VARIANCE=.8,He.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),He.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),He.MAX_PIXEL_DRIFT=3,He.MAX_PATTERN_DRIFT=5,He.SKIPPED_ROW_COUNT_MAX=25,He.ROW_STEP=5,He.BARCODE_MIN_HEIGHT=10;class Ut{constructor(t,i){if(i.length===0)throw new D;this.field=t;let a=i.length;if(a>1&&i[0]===0){let o=1;for(;o<a&&i[o]===0;)o++;o===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-o),W.arraycopy(i,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let o=0;for(let u of this.coefficients)o=this.field.add(o,u);return o}let i=this.coefficients[0],a=this.coefficients.length;for(let o=1;o<a;o++)i=this.field.add(this.field.multiply(t,i),this.coefficients[o]);return i}add(t){if(!this.field.equals(t.field))throw new D("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,a=t.coefficients;if(i.length>a.length){let f=i;i=a,a=f}let o=new Int32Array(a.length),u=a.length-i.length;W.arraycopy(a,0,o,0,u);for(let f=u;f<a.length;f++)o[f]=this.field.add(i[f-u],a[f]);return new Ut(this.field,o)}subtract(t){if(!this.field.equals(t.field))throw new D("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof Ut?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new D("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new Ut(this.field,new Int32Array([0]));let i=this.coefficients,a=i.length,o=t.coefficients,u=o.length,f=new Int32Array(a+u-1);for(let g=0;g<a;g++){let y=i[g];for(let b=0;b<u;b++)f[g+b]=this.field.add(f[g+b],this.field.multiply(y,o[b]))}return new Ut(this.field,f)}negative(){let t=this.coefficients.length,i=new Int32Array(t);for(let a=0;a<t;a++)i[a]=this.field.subtract(0,this.coefficients[a]);return new Ut(this.field,i)}multiplyScalar(t){if(t===0)return new Ut(this.field,new Int32Array([0]));if(t===1)return this;let i=this.coefficients.length,a=new Int32Array(i);for(let o=0;o<i;o++)a[o]=this.field.multiply(this.coefficients[o],t);return new Ut(this.field,a)}multiplyByMonomial(t,i){if(t<0)throw new D;if(i===0)return new Ut(this.field,new Int32Array([0]));let a=this.coefficients.length,o=new Int32Array(a+t);for(let u=0;u<a;u++)o[u]=this.field.multiply(this.coefficients[u],i);return new Ut(this.field,o)}toString(){let t=new Ye;for(let i=this.getDegree();i>=0;i--){let a=this.getCoefficient(i);a!==0&&(a<0?(t.append(" - "),a=-a):t.length()>0&&t.append(" + "),(i===0||a!==1)&&t.append(a),i!==0&&(i===1?t.append("x"):(t.append("x^"),t.append(i))))}return t.toString()}}class rl{add(t,i){return(t+i)%this.modulus}subtract(t,i){return(this.modulus+t-i)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new D;return this.logTable[t]}inverse(t){if(t===0)throw new Lr;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class or extends rl{constructor(t,i){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let a=1;for(let o=0;o<t;o++)this.expTable[o]=a,a=a*i%t;for(let o=0;o<t-1;o++)this.logTable[this.expTable[o]]=o;this.zero=new Ut(this,new Int32Array([0])),this.one=new Ut(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new D;if(i===0)return this.zero;let a=new Int32Array(t+1);return a[0]=i,new Ut(this,a)}}or.PDF417_GF=new or(ke.NUMBER_OF_CODEWORDS,3);class Pi{constructor(){this.field=or.PDF417_GF}decode(t,i,a){let o=new Ut(this.field,t),u=new Int32Array(i),f=!1;for(let k=i;k>0;k--){let j=o.evaluateAt(this.field.exp(k));u[i-k]=j,j!==0&&(f=!0)}if(!f)return 0;let g=this.field.getOne();if(a!=null)for(const k of a){let j=this.field.exp(t.length-1-k),V=new Ut(this.field,new Int32Array([this.field.subtract(0,j),1]));g=g.multiply(V)}let y=new Ut(this.field,u),b=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),y,i),v=b[0],N=b[1],O=this.findErrorLocations(v),L=this.findErrorMagnitudes(N,v,O);for(let k=0;k<O.length;k++){let j=t.length-1-this.field.log(O[k]);if(j<0)throw P.getChecksumInstance();t[j]=this.field.subtract(t[j],L[k])}return O.length}runEuclideanAlgorithm(t,i,a){if(t.getDegree()<i.getDegree()){let O=t;t=i,i=O}let o=t,u=i,f=this.field.getZero(),g=this.field.getOne();for(;u.getDegree()>=Math.round(a/2);){let O=o,L=f;if(o=u,f=g,o.isZero())throw P.getChecksumInstance();u=O;let k=this.field.getZero(),j=o.getCoefficient(o.getDegree()),V=this.field.inverse(j);for(;u.getDegree()>=o.getDegree()&&!u.isZero();){let $=u.getDegree()-o.getDegree(),xe=this.field.multiply(u.getCoefficient(u.getDegree()),V);k=k.add(this.field.buildMonomial($,xe)),u=u.subtract(o.multiplyByMonomial($,xe))}g=k.multiply(f).subtract(L).negative()}let y=g.getCoefficient(0);if(y===0)throw P.getChecksumInstance();let b=this.field.inverse(y),v=g.multiply(b),N=u.multiply(b);return[v,N]}findErrorLocations(t){let i=t.getDegree(),a=new Int32Array(i),o=0;for(let u=1;u<this.field.getSize()&&o<i;u++)t.evaluateAt(u)===0&&(a[o]=this.field.inverse(u),o++);if(o!==i)throw P.getChecksumInstance();return a}findErrorMagnitudes(t,i,a){let o=i.getDegree(),u=new Int32Array(o);for(let b=1;b<=o;b++)u[o-b]=this.field.multiply(b,i.getCoefficient(b));let f=new Ut(this.field,u),g=a.length,y=new Int32Array(g);for(let b=0;b<g;b++){let v=this.field.inverse(a[b]),N=this.field.subtract(0,t.evaluateAt(v)),O=this.field.inverse(f.evaluateAt(v));y[b]=this.field.multiply(N,O)}return y}}class zi{constructor(t,i,a,o,u){t instanceof zi?this.constructor_2(t):this.constructor_1(t,i,a,o,u)}constructor_1(t,i,a,o,u){const f=i==null||a==null,g=o==null||u==null;if(f&&g)throw new ie;f?(i=new Ne(0,o.getY()),a=new Ne(0,u.getY())):g&&(o=new Ne(t.getWidth()-1,i.getY()),u=new Ne(t.getWidth()-1,a.getY())),this.image=t,this.topLeft=i,this.bottomLeft=a,this.topRight=o,this.bottomRight=u,this.minX=Math.trunc(Math.min(i.getX(),a.getX())),this.maxX=Math.trunc(Math.max(o.getX(),u.getX())),this.minY=Math.trunc(Math.min(i.getY(),o.getY())),this.maxY=Math.trunc(Math.max(a.getY(),u.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,i){return t==null?i:i==null?t:new zi(t.image,t.topLeft,t.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(t,i,a){let o=this.topLeft,u=this.bottomLeft,f=this.topRight,g=this.bottomRight;if(t>0){let y=a?this.topLeft:this.topRight,b=Math.trunc(y.getY()-t);b<0&&(b=0);let v=new Ne(y.getX(),b);a?o=v:f=v}if(i>0){let y=a?this.bottomLeft:this.bottomRight,b=Math.trunc(y.getY()+i);b>=this.image.getHeight()&&(b=this.image.getHeight()-1);let v=new Ne(y.getX(),b);a?u=v:g=v}return new zi(this.image,o,u,f,g)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class rs{constructor(t,i,a,o){this.columnCount=t,this.errorCorrectionLevel=o,this.rowCountUpperPart=i,this.rowCountLowerPart=a,this.rowCount=i+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Gr{constructor(){this.buffer=""}static form(t,i){let a=-1;function o(f,g,y,b,v,N){if(f==="%%")return"%";if(i[++a]===void 0)return;f=b?parseInt(b.substr(1)):void 0;let O=v?parseInt(v.substr(1)):void 0,L;switch(N){case"s":L=i[a];break;case"c":L=i[a][0];break;case"f":L=parseFloat(i[a]).toFixed(f);break;case"p":L=parseFloat(i[a]).toPrecision(f);break;case"e":L=parseFloat(i[a]).toExponential(f);break;case"x":L=parseInt(i[a]).toString(O||16);break;case"d":L=parseFloat(parseInt(i[a],O||10).toPrecision(f)).toFixed(0);break}L=typeof L=="object"?JSON.stringify(L):(+L).toString(O);let k=parseInt(y),j=y&&y[0]+""=="0"?"0":" ";for(;L.length<k;)L=g!==void 0?L+j:j+L;return L}let u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(u,o)}format(t,...i){this.buffer+=Gr.form(t,i)}toString(){return this.buffer}}class Ji{constructor(t){this.boundingBox=new zi(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let i=this.getCodeword(t);if(i!=null)return i;for(let a=1;a<Ji.MAX_NEARBY_DISTANCE;a++){let o=this.imageRowToCodewordIndex(t)-a;if(o>=0&&(i=this.codewords[o],i!=null)||(o=this.imageRowToCodewordIndex(t)+a,o<this.codewords.length&&(i=this.codewords[o],i!=null)))return i}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,i){this.codewords[this.imageRowToCodewordIndex(t)]=i}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new Gr;let i=0;for(const a of this.codewords){if(a==null){t.format("%3d:    |   %n",i++);continue}t.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}return t.toString()}}Ji.MAX_NEARBY_DISTANCE=5;class $i{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let i=this.values.get(t);i==null&&(i=0),i++,this.values.set(t,i)}getValue(){let t=-1,i=new Array;for(const[a,o]of this.values.entries()){const u={getKey:()=>a,getValue:()=>o};u.getValue()>t?(t=u.getValue(),i=[],i.push(u.getKey())):u.getValue()===t&&i.push(u.getKey())}return ke.toIntArray(i)}getConfidence(t){return this.values.get(t)}}class al extends Ji{constructor(t,i){super(t),this._isLeft=i}setRowNumbers(){for(let t of this.getCodewords())t?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,t);let a=this.getBoundingBox(),o=this._isLeft?a.getTopLeft():a.getTopRight(),u=this._isLeft?a.getBottomLeft():a.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(o.getY())),g=this.imageRowToCodewordIndex(Math.trunc(u.getY())),y=-1,b=1,v=0;for(let N=f;N<g;N++){if(i[N]==null)continue;let O=i[N],L=O.getRowNumber()-y;if(L===0)v++;else if(L===1)b=Math.max(b,v),v=1,y=O.getRowNumber();else if(L<0||O.getRowNumber()>=t.getRowCount()||L>N)i[N]=null;else{let k;b>2?k=(b-2)*L:k=L;let j=k>=N;for(let V=1;V<=k&&!j;V++)j=i[N-V]!=null;j?i[N]=null:(y=O.getRowNumber(),v=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let i=new Int32Array(t.getRowCount());for(let a of this.getCodewords())if(a!=null){let o=a.getRowNumber();if(o>=i.length)continue;i[o]++}return i}adjustIncompleteIndicatorColumnRowNumbers(t){let i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.imageRowToCodewordIndex(Math.trunc(o.getY())),g=this.getCodewords(),y=-1;for(let b=u;b<f;b++){if(g[b]==null)continue;let v=g[b];v.setRowNumberAsRowIndicatorColumn();let N=v.getRowNumber()-y;N===0||(N===1?y=v.getRowNumber():v.getRowNumber()>=t.getRowCount()?g[b]=null:y=v.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),i=new $i,a=new $i,o=new $i,u=new $i;for(let g of t){if(g==null)continue;g.setRowNumberAsRowIndicatorColumn();let y=g.getValue()%30,b=g.getRowNumber();switch(this._isLeft||(b+=2),b%3){case 0:a.setValue(y*3+1);break;case 1:u.setValue(y/3),o.setValue(y%3);break;case 2:i.setValue(y+1);break}}if(i.getValue().length===0||a.getValue().length===0||o.getValue().length===0||u.getValue().length===0||i.getValue()[0]<1||a.getValue()[0]+o.getValue()[0]<ke.MIN_ROWS_IN_BARCODE||a.getValue()[0]+o.getValue()[0]>ke.MAX_ROWS_IN_BARCODE)return null;let f=new rs(i.getValue()[0],a.getValue()[0],o.getValue()[0],u.getValue()[0]);return this.removeIncorrectCodewords(t,f),f}removeIncorrectCodewords(t,i){for(let a=0;a<t.length;a++){let o=t[a];if(t[a]==null)continue;let u=o.getValue()%30,f=o.getRowNumber();if(f>i.getRowCount()){t[a]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:u*3+1!==i.getRowCountUpperPart()&&(t[a]=null);break;case 1:(Math.trunc(u/3)!==i.getErrorCorrectionLevel()||u%3!==i.getRowCountLowerPart())&&(t[a]=null);break;case 2:u+1!==i.getColumnCount()&&(t[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class fn{constructor(t,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=ke.MAX_CODEWORDS_IN_BARCODE,i;do i=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let a=this.detectionResultColumns[i].getCodewords();for(let o=0;o<a.length;o++)a[o]!=null&&(a[o].hasValidRowNumber()||this.adjustRowNumbers(i,o,a))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<t.length;a++)if(t[a]!=null&&i[a]!=null&&t[a].getRowNumber()===i[a].getRowNumber())for(let o=1;o<=this.barcodeColumnCount;o++){let u=this.detectionResultColumns[o].getCodewords()[a];u!=null&&(u.setRowNumber(t[a].getRowNumber()),u.hasValidRowNumber()||(this.detectionResultColumns[o].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<i.length;a++){if(i[a]==null)continue;let o=i[a].getRowNumber(),u=0;for(let f=this.barcodeColumnCount+1;f>0&&u<this.ADJUST_ROW_NUMBER_SKIP;f--){let g=this.detectionResultColumns[f].getCodewords()[a];g!=null&&(u=fn.adjustRowNumberIfValid(o,u,g),g.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,i=this.detectionResultColumns[0].getCodewords();for(let a=0;a<i.length;a++){if(i[a]==null)continue;let o=i[a].getRowNumber(),u=0;for(let f=1;f<this.barcodeColumnCount+1&&u<this.ADJUST_ROW_NUMBER_SKIP;f++){let g=this.detectionResultColumns[f].getCodewords()[a];g!=null&&(u=fn.adjustRowNumberIfValid(o,u,g),g.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,i,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(t)?(a.setRowNumber(t),i=0):++i),i}adjustRowNumbers(t,i,a){if(!this.detectionResultColumns[t-1])return;let o=a[i],u=this.detectionResultColumns[t-1].getCodewords(),f=u;this.detectionResultColumns[t+1]!=null&&(f=this.detectionResultColumns[t+1].getCodewords());let g=new Array(14);g[2]=u[i],g[3]=f[i],i>0&&(g[0]=a[i-1],g[4]=u[i-1],g[5]=f[i-1]),i>1&&(g[8]=a[i-2],g[10]=u[i-2],g[11]=f[i-2]),i<a.length-1&&(g[1]=a[i+1],g[6]=u[i+1],g[7]=f[i+1]),i<a.length-2&&(g[9]=a[i+2],g[12]=u[i+2],g[13]=f[i+2]);for(let y of g)if(fn.adjustRowNumber(o,y))return}static adjustRowNumber(t,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===t.getBucket()?(t.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,i){this.detectionResultColumns[t]=i}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new Gr;for(let a=0;a<t.getCodewords().length;a++){i.format("CW %3d:",a);for(let o=0;o<this.barcodeColumnCount+2;o++){if(this.detectionResultColumns[o]==null){i.format("    |   ");continue}let u=this.detectionResultColumns[o].getCodewords()[a];if(u==null){i.format("    |   ");continue}i.format(" %3d|%3d",u.getRowNumber(),u.getValue())}i.format("%n")}return i.toString()}}class li{constructor(t,i,a,o){this.rowNumber=li.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(i),this.bucket=Math.trunc(a),this.value=Math.trunc(o)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==li.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}li.BARCODE_ROW_UNKNOWN=-1;class An{static initialize(){for(let t=0;t<ke.SYMBOL_TABLE.length;t++){let i=ke.SYMBOL_TABLE[t],a=i&1;for(let o=0;o<ke.BARS_IN_MODULE;o++){let u=0;for(;(i&1)===a;)u+=1,i>>=1;a=i&1,An.RATIOS_TABLE[t]||(An.RATIOS_TABLE[t]=new Array(ke.BARS_IN_MODULE)),An.RATIOS_TABLE[t][ke.BARS_IN_MODULE-o-1]=Math.fround(u/ke.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let i=An.getDecodedCodewordValue(An.sampleBitCounts(t));return i!==-1?i:An.getClosestDecodedValue(t)}static sampleBitCounts(t){let i=$e.sum(t),a=new Int32Array(ke.BARS_IN_MODULE),o=0,u=0;for(let f=0;f<ke.MODULES_IN_CODEWORD;f++){let g=i/(2*ke.MODULES_IN_CODEWORD)+f*i/ke.MODULES_IN_CODEWORD;u+t[o]<=g&&(u+=t[o],o++),a[o]++}return a}static getDecodedCodewordValue(t){let i=An.getBitValue(t);return ke.getCodeword(i)===-1?-1:i}static getBitValue(t){let i=0;for(let a=0;a<t.length;a++)for(let o=0;o<t[a];o++)i=i<<1|(a%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(t){let i=$e.sum(t),a=new Array(ke.BARS_IN_MODULE);if(i>1)for(let f=0;f<a.length;f++)a[f]=Math.fround(t[f]/i);let o=Br.MAX_VALUE,u=-1;this.bSymbolTableReady||An.initialize();for(let f=0;f<An.RATIOS_TABLE.length;f++){let g=0,y=An.RATIOS_TABLE[f];for(let b=0;b<ke.BARS_IN_MODULE;b++){let v=Math.fround(y[b]-a[b]);if(g+=Math.fround(v*v),g>=o)break}g<o&&(o=g,u=ke.SYMBOL_TABLE[f])}return u}}An.bSymbolTableReady=!1,An.RATIOS_TABLE=new Array(ke.SYMBOL_TABLE.length).map(T=>new Array(ke.BARS_IN_MODULE));class Vr{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class ho{static parseLong(t,i=void 0){return parseInt(t,i)}}class as extends A{}as.kind="NullPointerException";class sl{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,i,a){if(t==null)throw new as;if(i<0||i>t.length||a<0||i+a>t.length||i+a<0)throw new se;if(a===0)return;for(let o=0;o<a;o++)this.write(t[i+o])}flush(){}close(){}}class Ta extends A{}class ss extends sl{constructor(t=32){if(super(),this.count=0,t<0)throw new D("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let a=this.buf.length<<1;if(a-t<0&&(a=t),a<0){if(t<0)throw new Ta;a=Y.MAX_VALUE}this.buf=ce.copyOfUint8Array(this.buf,a)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,i,a){if(i<0||i>t.length||a<0||i+a-t.length>0)throw new se;this.ensureCapacity(this.count+a),W.arraycopy(t,i,this.buf,this.count,a),this.count+=a}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return ce.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var bt;(function(T){T[T.ALPHA=0]="ALPHA",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.PUNCT=3]="PUNCT",T[T.ALPHA_SHIFT=4]="ALPHA_SHIFT",T[T.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(bt||(bt={}));function fo(){if(typeof window<"u")return window.BigInt||null;if(typeof _c<"u")return _c.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ls;function er(T){if(typeof ls>"u"&&(ls=fo()),ls===null)throw new Error("BigInt is not supported!");return ls(T)}function ll(){let T=[];T[0]=er(1);let t=er(900);T[1]=t;for(let i=2;i<16;i++)T[i]=T[i-1]*t;return T}class ee{static decode(t,i){let a=new Ye(""),o=oe.ISO8859_1;a.enableDecoding(o);let u=1,f=t[u++],g=new Vr;for(;u<t[0];){switch(f){case ee.TEXT_COMPACTION_MODE_LATCH:u=ee.textCompaction(t,u,a);break;case ee.BYTE_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH_6:u=ee.byteCompaction(f,t,o,u,a);break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[u++]);break;case ee.NUMERIC_COMPACTION_MODE_LATCH:u=ee.numericCompaction(t,u,a);break;case ee.ECI_CHARSET:oe.getCharacterSetECIByValue(t[u++]);break;case ee.ECI_GENERAL_PURPOSE:u+=2;break;case ee.ECI_USER_DEFINED:u++;break;case ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:u=ee.decodeMacroBlock(t,u,g);break;case ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ee.MACRO_PDF417_TERMINATOR:throw new Q;default:u--,u=ee.textCompaction(t,u,a);break}if(u<t.length)f=t[u++];else throw Q.getFormatInstance()}if(a.length()===0)throw Q.getFormatInstance();let y=new Bt(null,a.toString(),null,i);return y.setOther(g),y}static decodeMacroBlock(t,i,a){if(i+ee.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw Q.getFormatInstance();let o=new Int32Array(ee.NUMBER_OF_SEQUENCE_CODEWORDS);for(let g=0;g<ee.NUMBER_OF_SEQUENCE_CODEWORDS;g++,i++)o[g]=t[i];a.setSegmentIndex(Y.parseInt(ee.decodeBase900toBase10(o,ee.NUMBER_OF_SEQUENCE_CODEWORDS)));let u=new Ye;i=ee.textCompaction(t,i,u),a.setFileId(u.toString());let f=-1;for(t[i]===ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=i+1);i<t[0];)switch(t[i]){case ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,t[i]){case ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let g=new Ye;i=ee.textCompaction(t,i+1,g),a.setFileName(g.toString());break;case ee.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let y=new Ye;i=ee.textCompaction(t,i+1,y),a.setSender(y.toString());break;case ee.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let b=new Ye;i=ee.textCompaction(t,i+1,b),a.setAddressee(b.toString());break;case ee.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let v=new Ye;i=ee.numericCompaction(t,i+1,v),a.setSegmentCount(Y.parseInt(v.toString()));break;case ee.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let N=new Ye;i=ee.numericCompaction(t,i+1,N),a.setTimestamp(ho.parseLong(N.toString()));break;case ee.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let O=new Ye;i=ee.numericCompaction(t,i+1,O),a.setChecksum(Y.parseInt(O.toString()));break;case ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let L=new Ye;i=ee.numericCompaction(t,i+1,L),a.setFileSize(ho.parseLong(L.toString()));break;default:throw Q.getFormatInstance()}break;case ee.MACRO_PDF417_TERMINATOR:i++,a.setLastSegment(!0);break;default:throw Q.getFormatInstance()}if(f!==-1){let g=i-f;a.isLastSegment()&&g--,a.setOptionalData(ce.copyOfRange(t,f,f+g))}return i}static textCompaction(t,i,a){let o=new Int32Array((t[0]-i)*2),u=new Int32Array((t[0]-i)*2),f=0,g=!1;for(;i<t[0]&&!g;){let y=t[i++];if(y<ee.TEXT_COMPACTION_MODE_LATCH)o[f]=y/30,o[f+1]=y%30,f+=2;else switch(y){case ee.TEXT_COMPACTION_MODE_LATCH:o[f++]=ee.TEXT_COMPACTION_MODE_LATCH;break;case ee.BYTE_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH_6:case ee.NUMERIC_COMPACTION_MODE_LATCH:case ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ee.MACRO_PDF417_TERMINATOR:i--,g=!0;break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[f]=ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,y=t[i++],u[f]=y,f++;break}}return ee.decodeTextCompaction(o,u,f,a),i}static decodeTextCompaction(t,i,a,o){let u=bt.ALPHA,f=bt.ALPHA,g=0;for(;g<a;){let y=t[g],b="";switch(u){case bt.ALPHA:if(y<26)b=String.fromCharCode(65+y);else switch(y){case 26:b=" ";break;case ee.LL:u=bt.LOWER;break;case ee.ML:u=bt.MIXED;break;case ee.PS:f=u,u=bt.PUNCT_SHIFT;break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(i[g]);break;case ee.TEXT_COMPACTION_MODE_LATCH:u=bt.ALPHA;break}break;case bt.LOWER:if(y<26)b=String.fromCharCode(97+y);else switch(y){case 26:b=" ";break;case ee.AS:f=u,u=bt.ALPHA_SHIFT;break;case ee.ML:u=bt.MIXED;break;case ee.PS:f=u,u=bt.PUNCT_SHIFT;break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(i[g]);break;case ee.TEXT_COMPACTION_MODE_LATCH:u=bt.ALPHA;break}break;case bt.MIXED:if(y<ee.PL)b=ee.MIXED_CHARS[y];else switch(y){case ee.PL:u=bt.PUNCT;break;case 26:b=" ";break;case ee.LL:u=bt.LOWER;break;case ee.AL:u=bt.ALPHA;break;case ee.PS:f=u,u=bt.PUNCT_SHIFT;break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(i[g]);break;case ee.TEXT_COMPACTION_MODE_LATCH:u=bt.ALPHA;break}break;case bt.PUNCT:if(y<ee.PAL)b=ee.PUNCT_CHARS[y];else switch(y){case ee.PAL:u=bt.ALPHA;break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(i[g]);break;case ee.TEXT_COMPACTION_MODE_LATCH:u=bt.ALPHA;break}break;case bt.ALPHA_SHIFT:if(u=f,y<26)b=String.fromCharCode(65+y);else switch(y){case 26:b=" ";break;case ee.TEXT_COMPACTION_MODE_LATCH:u=bt.ALPHA;break}break;case bt.PUNCT_SHIFT:if(u=f,y<ee.PAL)b=ee.PUNCT_CHARS[y];else switch(y){case ee.PAL:u=bt.ALPHA;break;case ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(i[g]);break;case ee.TEXT_COMPACTION_MODE_LATCH:u=bt.ALPHA;break}break}b!==""&&o.append(b),g++}}static byteCompaction(t,i,a,o,u){let f=new ss,g=0,y=0,b=!1;switch(t){case ee.BYTE_COMPACTION_MODE_LATCH:let v=new Int32Array(6),N=i[o++];for(;o<i[0]&&!b;)switch(v[g++]=N,y=900*y+N,N=i[o++],N){case ee.TEXT_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH:case ee.NUMERIC_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH_6:case ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ee.MACRO_PDF417_TERMINATOR:o--,b=!0;break;default:if(g%5===0&&g>0){for(let O=0;O<6;++O)f.write(Number(er(y)>>er(8*(5-O))));y=0,g=0}break}o===i[0]&&N<ee.TEXT_COMPACTION_MODE_LATCH&&(v[g++]=N);for(let O=0;O<g;O++)f.write(v[O]);break;case ee.BYTE_COMPACTION_MODE_LATCH_6:for(;o<i[0]&&!b;){let O=i[o++];if(O<ee.TEXT_COMPACTION_MODE_LATCH)g++,y=900*y+O;else switch(O){case ee.TEXT_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH:case ee.NUMERIC_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH_6:case ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ee.MACRO_PDF417_TERMINATOR:o--,b=!0;break}if(g%5===0&&g>0){for(let L=0;L<6;++L)f.write(Number(er(y)>>er(8*(5-L))));y=0,g=0}}break}return u.append(yt.decode(f.toByteArray(),a)),o}static numericCompaction(t,i,a){let o=0,u=!1,f=new Int32Array(ee.MAX_NUMERIC_CODEWORDS);for(;i<t[0]&&!u;){let g=t[i++];if(i===t[0]&&(u=!0),g<ee.TEXT_COMPACTION_MODE_LATCH)f[o]=g,o++;else switch(g){case ee.TEXT_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH:case ee.BYTE_COMPACTION_MODE_LATCH_6:case ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case ee.MACRO_PDF417_TERMINATOR:i--,u=!0;break}(o%ee.MAX_NUMERIC_CODEWORDS===0||g===ee.NUMERIC_COMPACTION_MODE_LATCH||u)&&o>0&&(a.append(ee.decodeBase900toBase10(f,o)),o=0)}return i}static decodeBase900toBase10(t,i){let a=er(0);for(let u=0;u<i;u++)a+=ee.EXP900[i-u-1]*er(t[u]);let o=a.toString();if(o.charAt(0)!=="1")throw new Q;return o.substring(1)}}ee.TEXT_COMPACTION_MODE_LATCH=900,ee.BYTE_COMPACTION_MODE_LATCH=901,ee.NUMERIC_COMPACTION_MODE_LATCH=902,ee.BYTE_COMPACTION_MODE_LATCH_6=924,ee.ECI_USER_DEFINED=925,ee.ECI_GENERAL_PURPOSE=926,ee.ECI_CHARSET=927,ee.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,ee.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,ee.MACRO_PDF417_TERMINATOR=922,ee.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,ee.MAX_NUMERIC_CODEWORDS=15,ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,ee.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,ee.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,ee.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,ee.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,ee.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,ee.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,ee.PL=25,ee.LL=27,ee.AS=27,ee.ML=28,ee.AL=28,ee.PS=29,ee.PAL=29,ee.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,ee.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",ee.EXP900=fo()?ll():[],ee.NUMBER_OF_SEQUENCE_CODEWORDS=2;class We{constructor(){}static decode(t,i,a,o,u,f,g){let y=new zi(t,i,a,o,u),b=null,v=null,N;for(let k=!0;;k=!1){if(i!=null&&(b=We.getRowIndicatorColumn(t,y,i,!0,f,g)),o!=null&&(v=We.getRowIndicatorColumn(t,y,o,!1,f,g)),N=We.merge(b,v),N==null)throw ie.getNotFoundInstance();let j=N.getBoundingBox();if(k&&j!=null&&(j.getMinY()<y.getMinY()||j.getMaxY()>y.getMaxY()))y=j;else break}N.setBoundingBox(y);let O=N.getBarcodeColumnCount()+1;N.setDetectionResultColumn(0,b),N.setDetectionResultColumn(O,v);let L=b!=null;for(let k=1;k<=O;k++){let j=L?k:O-k;if(N.getDetectionResultColumn(j)!==void 0)continue;let V;j===0||j===O?V=new al(y,j===0):V=new Ji(y),N.setDetectionResultColumn(j,V);let $=-1,xe=$;for(let pe=y.getMinY();pe<=y.getMaxY();pe++){if($=We.getStartColumn(N,j,pe,L),$<0||$>y.getMaxX()){if(xe===-1)continue;$=xe}let ge=We.detectCodeword(t,y.getMinX(),y.getMaxX(),L,$,pe,f,g);ge!=null&&(V.setCodeword(pe,ge),xe=$,f=Math.min(f,ge.getWidth()),g=Math.max(g,ge.getWidth()))}}return We.createDecoderResult(N)}static merge(t,i){if(t==null&&i==null)return null;let a=We.getBarcodeMetadata(t,i);if(a==null)return null;let o=zi.merge(We.adjustBoundingBox(t),We.adjustBoundingBox(i));return new fn(a,o)}static adjustBoundingBox(t){if(t==null)return null;let i=t.getRowHeights();if(i==null)return null;let a=We.getMax(i),o=0;for(let g of i)if(o+=a-g,g>0)break;let u=t.getCodewords();for(let g=0;o>0&&u[g]==null;g++)o--;let f=0;for(let g=i.length-1;g>=0&&(f+=a-i[g],!(i[g]>0));g--);for(let g=u.length-1;f>0&&u[g]==null;g--)f--;return t.getBoundingBox().addMissingRows(o,f,t.isLeft())}static getMax(t){let i=-1;for(let a of t)i=Math.max(i,a);return i}static getBarcodeMetadata(t,i){let a;if(t==null||(a=t.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let o;return i==null||(o=i.getBarcodeMetadata())==null?a:a.getColumnCount()!==o.getColumnCount()&&a.getErrorCorrectionLevel()!==o.getErrorCorrectionLevel()&&a.getRowCount()!==o.getRowCount()?null:a}static getRowIndicatorColumn(t,i,a,o,u,f){let g=new al(i,o);for(let y=0;y<2;y++){let b=y===0?1:-1,v=Math.trunc(Math.trunc(a.getX()));for(let N=Math.trunc(Math.trunc(a.getY()));N<=i.getMaxY()&&N>=i.getMinY();N+=b){let O=We.detectCodeword(t,0,t.getWidth(),o,v,N,u,f);O!=null&&(g.setCodeword(N,O),o?v=O.getStartX():v=O.getEndX())}}return g}static adjustCodewordCount(t,i){let a=i[0][1],o=a.getValue(),u=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-We.getNumberOfECCodeWords(t.getBarcodeECLevel());if(o.length===0){if(u<1||u>ke.MAX_CODEWORDS_IN_BARCODE)throw ie.getNotFoundInstance();a.setValue(u)}else o[0]!==u&&a.setValue(u)}static createDecoderResult(t){let i=We.createBarcodeMatrix(t);We.adjustCodewordCount(t,i);let a=new Array,o=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),u=[],f=new Array;for(let y=0;y<t.getBarcodeRowCount();y++)for(let b=0;b<t.getBarcodeColumnCount();b++){let v=i[y][b+1].getValue(),N=y*t.getBarcodeColumnCount()+b;v.length===0?a.push(N):v.length===1?o[N]=v[0]:(f.push(N),u.push(v))}let g=new Array(u.length);for(let y=0;y<g.length;y++)g[y]=u[y];return We.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),o,ke.toIntArray(a),ke.toIntArray(f),g)}static createDecoderResultFromAmbiguousValues(t,i,a,o,u){let f=new Int32Array(o.length),g=100;for(;g-- >0;){for(let y=0;y<f.length;y++)i[o[y]]=u[y][f[y]];try{return We.decodeCodewords(i,t,a)}catch(y){if(!(y instanceof P))throw y}if(f.length===0)throw P.getChecksumInstance();for(let y=0;y<f.length;y++)if(f[y]<u[y].length-1){f[y]++;break}else if(f[y]=0,y===f.length-1)throw P.getChecksumInstance()}throw P.getChecksumInstance()}static createBarcodeMatrix(t){let i=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let o=0;o<i.length;o++)for(let u=0;u<i[o].length;u++)i[o][u]=new $i;let a=0;for(let o of t.getDetectionResultColumns()){if(o!=null){for(let u of o.getCodewords())if(u!=null){let f=u.getRowNumber();if(f>=0){if(f>=i.length)continue;i[f][a].setValue(u.getValue())}}}a++}return i}static isValidBarcodeColumn(t,i){return i>=0&&i<=t.getBarcodeColumnCount()+1}static getStartColumn(t,i,a,o){let u=o?1:-1,f=null;if(We.isValidBarcodeColumn(t,i-u)&&(f=t.getDetectionResultColumn(i-u).getCodeword(a)),f!=null)return o?f.getEndX():f.getStartX();if(f=t.getDetectionResultColumn(i).getCodewordNearby(a),f!=null)return o?f.getStartX():f.getEndX();if(We.isValidBarcodeColumn(t,i-u)&&(f=t.getDetectionResultColumn(i-u).getCodewordNearby(a)),f!=null)return o?f.getEndX():f.getStartX();let g=0;for(;We.isValidBarcodeColumn(t,i-u);){i-=u;for(let y of t.getDetectionResultColumn(i).getCodewords())if(y!=null)return(o?y.getEndX():y.getStartX())+u*g*(y.getEndX()-y.getStartX());g++}return o?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,i,a,o,u,f,g,y){u=We.adjustCodewordStartColumn(t,i,a,o,u,f);let b=We.getModuleBitCount(t,i,a,o,u,f);if(b==null)return null;let v,N=$e.sum(b);if(o)v=u+N;else{for(let k=0;k<b.length/2;k++){let j=b[k];b[k]=b[b.length-1-k],b[b.length-1-k]=j}v=u,u=v-N}if(!We.checkCodewordSkew(N,g,y))return null;let O=An.getDecodedValue(b),L=ke.getCodeword(O);return L===-1?null:new li(u,v,We.getCodewordBucketNumber(O),L)}static getModuleBitCount(t,i,a,o,u,f){let g=u,y=new Int32Array(8),b=0,v=o?1:-1,N=o;for(;(o?g<a:g>=i)&&b<y.length;)t.get(g,f)===N?(y[b]++,g+=v):(b++,N=!N);return b===y.length||g===(o?a:i)&&b===y.length-1?y:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,i,a,o,u,f){let g=u,y=o?-1:1;for(let b=0;b<2;b++){for(;(o?g>=i:g<a)&&o===t.get(g,f);){if(Math.abs(u-g)>We.CODEWORD_SKEW_SIZE)return u;g+=y}y=-y,o=!o}return g}static checkCodewordSkew(t,i,a){return i-We.CODEWORD_SKEW_SIZE<=t&&t<=a+We.CODEWORD_SKEW_SIZE}static decodeCodewords(t,i,a){if(t.length===0)throw Q.getFormatInstance();let o=1<<i+1,u=We.correctErrors(t,a,o);We.verifyCodewordCount(t,o);let f=ee.decode(t,""+i);return f.setErrorsCorrected(u),f.setErasures(a.length),f}static correctErrors(t,i,a){if(i!=null&&i.length>a/2+We.MAX_ERRORS||a<0||a>We.MAX_EC_CODEWORDS)throw P.getChecksumInstance();return We.errorCorrection.decode(t,a,i)}static verifyCodewordCount(t,i){if(t.length<4)throw Q.getFormatInstance();let a=t[0];if(a>t.length)throw Q.getFormatInstance();if(a===0)if(i<t.length)t[0]=t.length-i;else throw Q.getFormatInstance()}static getBitCountForCodeword(t){let i=new Int32Array(8),a=0,o=i.length-1;for(;!((t&1)!==a&&(a=t&1,o--,o<0));)i[o]++,t>>=1;return i}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return We.getCodewordBucketNumber(We.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let i=new Gr;for(let a=0;a<t.length;a++){i.format("Row %2d: ",a);for(let o=0;o<t[a].length;o++){let u=t[a][o];u.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",u.getValue()[0],u.getConfidence(u.getValue()[0]))}i.format("%n")}return i.toString()}}We.CODEWORD_SKEW_SIZE=2,We.MAX_ERRORS=3,We.MAX_EC_CODEWORDS=512,We.errorCorrection=new Pi;class En{decode(t,i=null){let a=En.decode(t,i,!1);if(a==null||a.length===0||a[0]==null)throw ie.getNotFoundInstance();return a[0]}decodeMultiple(t,i=null){try{return En.decode(t,i,!0)}catch(a){throw a instanceof Q||a instanceof P?ie.getNotFoundInstance():a}}static decode(t,i,a){const o=new Array,u=He.detectMultiple(t,i,a);for(const f of u.getPoints()){const g=We.decode(u.getBits(),f[4],f[5],f[6],f[7],En.getMinCodewordWidth(f),En.getMaxCodewordWidth(f)),y=new Ee(g.getText(),g.getRawBytes(),void 0,f,be.PDF_417);y.putMetadata(ut.ERROR_CORRECTION_LEVEL,g.getECLevel());const b=g.getOther();b!=null&&y.putMetadata(ut.PDF417_EXTRA_METADATA,b),o.push(y)}return o.map(f=>f)}static getMaxWidth(t,i){return t==null||i==null?0:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMinWidth(t,i){return t==null||i==null?Y.MAX_VALUE:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(En.getMaxWidth(t[0],t[4]),En.getMaxWidth(t[6],t[2])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN),Math.max(En.getMaxWidth(t[1],t[5]),En.getMaxWidth(t[7],t[3])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(En.getMinWidth(t[0],t[4]),En.getMinWidth(t[6],t[2])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN),Math.min(En.getMinWidth(t[1],t[5]),En.getMinWidth(t[7],t[3])*ke.MODULES_IN_CODEWORD/ke.MODULES_IN_STOP_PATTERN)))}reset(){}}class os extends A{}os.kind="ReaderException";class go{constructor(t,i){this.verbose=t===!0,i&&this.setHints(i)}decode(t,i){return i&&this.setHints(i),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const i=!d(t)&&t.get(we.TRY_HARDER)===!0,a=d(t)?null:t.get(we.POSSIBLE_FORMATS),o=new Array;if(!d(a)){const u=a.some(f=>f===be.UPC_A||f===be.UPC_E||f===be.EAN_13||f===be.EAN_8||f===be.CODABAR||f===be.CODE_39||f===be.CODE_93||f===be.CODE_128||f===be.ITF||f===be.RSS_14||f===be.RSS_EXPANDED);u&&!i&&o.push(new ai(t,this.verbose)),a.includes(be.QR_CODE)&&o.push(new ji),a.includes(be.DATA_MATRIX)&&o.push(new Ui),a.includes(be.AZTEC)&&o.push(new es),a.includes(be.PDF_417)&&o.push(new En),u&&i&&o.push(new ai(t,this.verbose))}o.length===0&&(i||o.push(new ai(t,this.verbose)),o.push(new ji),o.push(new Ui),o.push(new es),o.push(new En),i&&o.push(new ai(t,this.verbose))),this.readers=o}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new os("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(t,this.hints)}catch(a){if(a instanceof os)continue}throw new ie("No MultiFormat Readers were able to detect the code.")}}class mo extends Ae{constructor(t=null,i=500){const a=new go;a.setHints(t),super(a,i)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class Yc extends Ae{constructor(t=500){super(new En,t)}}class qc extends Ae{constructor(t=500){super(new ji,t)}}var ol;(function(T){T[T.ERROR_CORRECTION=0]="ERROR_CORRECTION",T[T.CHARACTER_SET=1]="CHARACTER_SET",T[T.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",T[T.MIN_SIZE=3]="MIN_SIZE",T[T.MAX_SIZE=4]="MAX_SIZE",T[T.MARGIN=5]="MARGIN",T[T.PDF417_COMPACT=6]="PDF417_COMPACT",T[T.PDF417_COMPACTION=7]="PDF417_COMPACTION",T[T.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",T[T.AZTEC_LAYERS=9]="AZTEC_LAYERS",T[T.QR_VERSION=10]="QR_VERSION"})(ol||(ol={}));var on=ol;class Na{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new yn(t,Int32Array.from([1])))}buildGenerator(t){const i=this.cachedGenerators;if(t>=i.length){let a=i[i.length-1];const o=this.field;for(let u=i.length;u<=t;u++){const f=a.multiply(new yn(o,Int32Array.from([1,o.exp(u-1+o.getGeneratorBase())])));i.push(f),a=f}}return i[t]}encode(t,i){if(i===0)throw new D("No error correction bytes");const a=t.length-i;if(a<=0)throw new D("No data bytes provided");const o=this.buildGenerator(i),u=new Int32Array(a);W.arraycopy(t,0,u,0,a);let f=new yn(this.field,u);f=f.multiplyByMonomial(i,1);const y=f.divide(o)[1].getCoefficients(),b=i-y.length;for(let v=0;v<b;v++)t[a+v]=0;W.arraycopy(y,0,t,a+b,y.length)}}class Wt{constructor(){}static applyMaskPenaltyRule1(t){return Wt.applyMaskPenaltyRule1Internal(t,!0)+Wt.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let i=0;const a=t.getArray(),o=t.getWidth(),u=t.getHeight();for(let f=0;f<u-1;f++){const g=a[f];for(let y=0;y<o-1;y++){const b=g[y];b===g[y+1]&&b===a[f+1][y]&&b===a[f+1][y+1]&&i++}}return Wt.N2*i}static applyMaskPenaltyRule3(t){let i=0;const a=t.getArray(),o=t.getWidth(),u=t.getHeight();for(let f=0;f<u;f++)for(let g=0;g<o;g++){const y=a[f];g+6<o&&y[g]===1&&y[g+1]===0&&y[g+2]===1&&y[g+3]===1&&y[g+4]===1&&y[g+5]===0&&y[g+6]===1&&(Wt.isWhiteHorizontal(y,g-4,g)||Wt.isWhiteHorizontal(y,g+7,g+11))&&i++,f+6<u&&a[f][g]===1&&a[f+1][g]===0&&a[f+2][g]===1&&a[f+3][g]===1&&a[f+4][g]===1&&a[f+5][g]===0&&a[f+6][g]===1&&(Wt.isWhiteVertical(a,g,f-4,f)||Wt.isWhiteVertical(a,g,f+7,f+11))&&i++}return i*Wt.N3}static isWhiteHorizontal(t,i,a){i=Math.max(i,0),a=Math.min(a,t.length);for(let o=i;o<a;o++)if(t[o]===1)return!1;return!0}static isWhiteVertical(t,i,a,o){a=Math.max(a,0),o=Math.min(o,t.length);for(let u=a;u<o;u++)if(t[u][i]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let i=0;const a=t.getArray(),o=t.getWidth(),u=t.getHeight();for(let y=0;y<u;y++){const b=a[y];for(let v=0;v<o;v++)b[v]===1&&i++}const f=t.getHeight()*t.getWidth();return Math.floor(Math.abs(i*2-f)*10/f)*Wt.N4}static getDataMaskBit(t,i,a){let o,u;switch(t){case 0:o=a+i&1;break;case 1:o=a&1;break;case 2:o=i%3;break;case 3:o=(a+i)%3;break;case 4:o=Math.floor(a/2)+Math.floor(i/3)&1;break;case 5:u=a*i,o=(u&1)+u%3;break;case 6:u=a*i,o=(u&1)+u%3&1;break;case 7:u=a*i,o=u%3+(a+i&1)&1;break;default:throw new D("Invalid mask pattern: "+t)}return o===0}static applyMaskPenaltyRule1Internal(t,i){let a=0;const o=i?t.getHeight():t.getWidth(),u=i?t.getWidth():t.getHeight(),f=t.getArray();for(let g=0;g<o;g++){let y=0,b=-1;for(let v=0;v<u;v++){const N=i?f[g][v]:f[v][g];N===b?y++:(y>=5&&(a+=Wt.N1+(y-5)),y=1,b=N)}y>=5&&(a+=Wt.N1+(y-5))}return a}}Wt.N1=3,Wt.N2=3,Wt.N3=40,Wt.N4=10;class cs{constructor(t,i){this.width=t,this.height=i;const a=new Array(i);for(let o=0;o!==i;o++)a[o]=new Uint8Array(t);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(t,i){return this.bytes[i][t]}getArray(){return this.bytes}setNumber(t,i,a){this.bytes[i][t]=a}setBoolean(t,i,a){this.bytes[i][t]=a?1:0}clear(t){for(const i of this.bytes)ce.fill(i,t)}equals(t){if(!(t instanceof cs))return!1;const i=t;if(this.width!==i.width||this.height!==i.height)return!1;for(let a=0,o=this.height;a<o;++a){const u=this.bytes[a],f=i.bytes[a];for(let g=0,y=this.width;g<y;++g)if(u[g]!==f[g])return!1}return!0}toString(){const t=new Ye;for(let i=0,a=this.height;i<a;++i){const o=this.bytes[i];for(let u=0,f=this.width;u<f;++u)switch(o[u]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class cr{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new Ye;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<cr.NUM_MASK_PATTERNS}}cr.NUM_MASK_PATTERNS=8;class vt extends A{}vt.kind="WriterException";class Ue{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,i,a,o,u){Ue.clearMatrix(u),Ue.embedBasicPatterns(a,u),Ue.embedTypeInfo(i,o,u),Ue.maybeEmbedVersionInfo(a,u),Ue.embedDataBits(t,o,u)}static embedBasicPatterns(t,i){Ue.embedPositionDetectionPatternsAndSeparators(i),Ue.embedDarkDotAtLeftBottomCorner(i),Ue.maybeEmbedPositionAdjustmentPatterns(t,i),Ue.embedTimingPatterns(i)}static embedTypeInfo(t,i,a){const o=new fe;Ue.makeTypeInfoBits(t,i,o);for(let u=0,f=o.getSize();u<f;++u){const g=o.get(o.getSize()-1-u),y=Ue.TYPE_INFO_COORDINATES[u],b=y[0],v=y[1];if(a.setBoolean(b,v,g),u<8){const N=a.getWidth()-u-1;a.setBoolean(N,8,g)}else{const O=a.getHeight()-7+(u-8);a.setBoolean(8,O,g)}}}static maybeEmbedVersionInfo(t,i){if(t.getVersionNumber()<7)return;const a=new fe;Ue.makeVersionInfoBits(t,a);let o=17;for(let u=0;u<6;++u)for(let f=0;f<3;++f){const g=a.get(o);o--,i.setBoolean(u,i.getHeight()-11+f,g),i.setBoolean(i.getHeight()-11+f,u,g)}}static embedDataBits(t,i,a){let o=0,u=-1,f=a.getWidth()-1,g=a.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);g>=0&&g<a.getHeight();){for(let y=0;y<2;++y){const b=f-y;if(!Ue.isEmpty(a.get(b,g)))continue;let v;o<t.getSize()?(v=t.get(o),++o):v=!1,i!==255&&Wt.getDataMaskBit(i,b,g)&&(v=!v),a.setBoolean(b,g,v)}g+=u}u=-u,g+=u,f-=2}if(o!==t.getSize())throw new vt("Not all bits consumed: "+o+"/"+t.getSize())}static findMSBSet(t){return 32-Y.numberOfLeadingZeros(t)}static calculateBCHCode(t,i){if(i===0)throw new D("0 polynomial");const a=Ue.findMSBSet(i);for(t<<=a-1;Ue.findMSBSet(t)>=a;)t^=i<<Ue.findMSBSet(t)-a;return t}static makeTypeInfoBits(t,i,a){if(!cr.isValidMaskPattern(i))throw new vt("Invalid mask pattern");const o=t.getBits()<<3|i;a.appendBits(o,5);const u=Ue.calculateBCHCode(o,Ue.TYPE_INFO_POLY);a.appendBits(u,10);const f=new fe;if(f.appendBits(Ue.TYPE_INFO_MASK_PATTERN,15),a.xor(f),a.getSize()!==15)throw new vt("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(t,i){i.appendBits(t.getVersionNumber(),6);const a=Ue.calculateBCHCode(t.getVersionNumber(),Ue.VERSION_INFO_POLY);if(i.appendBits(a,12),i.getSize()!==18)throw new vt("should not happen but we got: "+i.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let i=8;i<t.getWidth()-8;++i){const a=(i+1)%2;Ue.isEmpty(t.get(i,6))&&t.setNumber(i,6,a),Ue.isEmpty(t.get(6,i))&&t.setNumber(6,i,a)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new vt;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,i,a){for(let o=0;o<8;++o){if(!Ue.isEmpty(a.get(t+o,i)))throw new vt;a.setNumber(t+o,i,0)}}static embedVerticalSeparationPattern(t,i,a){for(let o=0;o<7;++o){if(!Ue.isEmpty(a.get(t,i+o)))throw new vt;a.setNumber(t,i+o,0)}}static embedPositionAdjustmentPattern(t,i,a){for(let o=0;o<5;++o){const u=Ue.POSITION_ADJUSTMENT_PATTERN[o];for(let f=0;f<5;++f)a.setNumber(t+f,i+o,u[f])}}static embedPositionDetectionPattern(t,i,a){for(let o=0;o<7;++o){const u=Ue.POSITION_DETECTION_PATTERN[o];for(let f=0;f<7;++f)a.setNumber(t+f,i+o,u[f])}}static embedPositionDetectionPatternsAndSeparators(t){const i=Ue.POSITION_DETECTION_PATTERN[0].length;Ue.embedPositionDetectionPattern(0,0,t),Ue.embedPositionDetectionPattern(t.getWidth()-i,0,t),Ue.embedPositionDetectionPattern(0,t.getWidth()-i,t);const a=8;Ue.embedHorizontalSeparationPattern(0,a-1,t),Ue.embedHorizontalSeparationPattern(t.getWidth()-a,a-1,t),Ue.embedHorizontalSeparationPattern(0,t.getWidth()-a,t);const o=7;Ue.embedVerticalSeparationPattern(o,0,t),Ue.embedVerticalSeparationPattern(t.getHeight()-o-1,0,t),Ue.embedVerticalSeparationPattern(o,t.getHeight()-o,t)}static maybeEmbedPositionAdjustmentPatterns(t,i){if(t.getVersionNumber()<2)return;const a=t.getVersionNumber()-1,o=Ue.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let u=0,f=o.length;u!==f;u++){const g=o[u];if(g>=0)for(let y=0;y!==f;y++){const b=o[y];b>=0&&Ue.isEmpty(i.get(b,g))&&Ue.embedPositionAdjustmentPattern(b-2,g-2,i)}}}}Ue.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Ue.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Ue.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Ue.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Ue.VERSION_INFO_POLY=7973,Ue.TYPE_INFO_POLY=1335,Ue.TYPE_INFO_MASK_PATTERN=21522;class Xc{constructor(t,i){this.dataBytes=t,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class jt{constructor(){}static calculateMaskPenalty(t){return Wt.applyMaskPenaltyRule1(t)+Wt.applyMaskPenaltyRule2(t)+Wt.applyMaskPenaltyRule3(t)+Wt.applyMaskPenaltyRule4(t)}static encode(t,i,a=null){let o=jt.DEFAULT_BYTE_MODE_ENCODING;const u=a!==null&&a.get(on.CHARACTER_SET)!==void 0;u&&(o=a.get(on.CHARACTER_SET).toString());const f=this.chooseMode(t,o),g=new fe;if(f===Me.BYTE&&(u||jt.DEFAULT_BYTE_MODE_ENCODING!==o)){const pe=oe.getCharacterSetECIByName(o);pe!==void 0&&this.appendECI(pe,g)}this.appendModeInfo(f,g);const y=new fe;this.appendBytes(t,f,y,o);let b;if(a!==null&&a.get(on.QR_VERSION)!==void 0){const pe=Number.parseInt(a.get(on.QR_VERSION).toString(),10);b=Ie.getVersionForNumber(pe);const ge=this.calculateBitsNeeded(f,g,y,b);if(!this.willFit(ge,b,i))throw new vt("Data too big for requested version")}else b=this.recommendVersion(i,f,g,y);const v=new fe;v.appendBitArray(g);const N=f===Me.BYTE?y.getSizeInBytes():t.length;this.appendLengthInfo(N,b,f,v),v.appendBitArray(y);const O=b.getECBlocksForLevel(i),L=b.getTotalCodewords()-O.getTotalECCodewords();this.terminateBits(L,v);const k=this.interleaveWithECBytes(v,b.getTotalCodewords(),L,O.getNumBlocks()),j=new cr;j.setECLevel(i),j.setMode(f),j.setVersion(b);const V=b.getDimensionForVersion(),$=new cs(V,V),xe=this.chooseMaskPattern(k,i,b,$);return j.setMaskPattern(xe),Ue.buildMatrix(k,i,b,xe,$),j.setMatrix($),j}static recommendVersion(t,i,a,o){const u=this.calculateBitsNeeded(i,a,o,Ie.getVersionForNumber(1)),f=this.chooseVersion(u,t),g=this.calculateBitsNeeded(i,a,o,f);return this.chooseVersion(g,t)}static calculateBitsNeeded(t,i,a,o){return i.getSize()+t.getCharacterCountBits(o)+a.getSize()}static getAlphanumericCode(t){return t<jt.ALPHANUMERIC_TABLE.length?jt.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,i=null){if(oe.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(t))return Me.KANJI;let a=!1,o=!1;for(let u=0,f=t.length;u<f;++u){const g=t.charAt(u);if(jt.isDigit(g))a=!0;else if(this.getAlphanumericCode(g.charCodeAt(0))!==-1)o=!0;else return Me.BYTE}return o?Me.ALPHANUMERIC:a?Me.NUMERIC:Me.BYTE}static isOnlyDoubleByteKanji(t){let i;try{i=yt.encode(t,oe.SJIS)}catch{return!1}const a=i.length;if(a%2!==0)return!1;for(let o=0;o<a;o+=2){const u=i[o]&255;if((u<129||u>159)&&(u<224||u>235))return!1}return!0}static chooseMaskPattern(t,i,a,o){let u=Number.MAX_SAFE_INTEGER,f=-1;for(let g=0;g<cr.NUM_MASK_PATTERNS;g++){Ue.buildMatrix(t,i,a,g,o);let y=this.calculateMaskPenalty(o);y<u&&(u=y,f=g)}return f}static chooseVersion(t,i){for(let a=1;a<=40;a++){const o=Ie.getVersionForNumber(a);if(jt.willFit(t,o,i))return o}throw new vt("Data too big")}static willFit(t,i,a){const o=i.getTotalCodewords(),f=i.getECBlocksForLevel(a).getTotalECCodewords(),g=o-f,y=(t+7)/8;return g>=y}static terminateBits(t,i){const a=t*8;if(i.getSize()>a)throw new vt("data bits cannot fit in the QR Code"+i.getSize()+" > "+a);for(let f=0;f<4&&i.getSize()<a;++f)i.appendBit(!1);const o=i.getSize()&7;if(o>0)for(let f=o;f<8;f++)i.appendBit(!1);const u=t-i.getSizeInBytes();for(let f=0;f<u;++f)i.appendBits((f&1)===0?236:17,8);if(i.getSize()!==a)throw new vt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,i,a,o,u,f){if(o>=a)throw new vt("Block ID too large");const g=t%a,y=a-g,b=Math.floor(t/a),v=b+1,N=Math.floor(i/a),O=N+1,L=b-N,k=v-O;if(L!==k)throw new vt("EC bytes mismatch");if(a!==y+g)throw new vt("RS blocks mismatch");if(t!==(N+L)*y+(O+k)*g)throw new vt("Total bytes mismatch");o<y?(u[0]=N,f[0]=L):(u[0]=O,f[0]=k)}static interleaveWithECBytes(t,i,a,o){if(t.getSizeInBytes()!==a)throw new vt("Number of bits and data bytes does not match");let u=0,f=0,g=0;const y=new Array;for(let v=0;v<o;++v){const N=new Int32Array(1),O=new Int32Array(1);jt.getNumDataBytesAndNumECBytesForBlockID(i,a,o,v,N,O);const L=N[0],k=new Uint8Array(L);t.toBytes(8*u,k,0,L);const j=jt.generateECBytes(k,O[0]);y.push(new Xc(k,j)),f=Math.max(f,L),g=Math.max(g,j.length),u+=N[0]}if(a!==u)throw new vt("Data bytes does not match offset");const b=new fe;for(let v=0;v<f;++v)for(const N of y){const O=N.getDataBytes();v<O.length&&b.appendBits(O[v],8)}for(let v=0;v<g;++v)for(const N of y){const O=N.getErrorCorrectionBytes();v<O.length&&b.appendBits(O[v],8)}if(i!==b.getSizeInBytes())throw new vt("Interleaving error: "+i+" and "+b.getSizeInBytes()+" differ.");return b}static generateECBytes(t,i){const a=t.length,o=new Int32Array(a+i);for(let f=0;f<a;f++)o[f]=t[f]&255;new Na(ht.QR_CODE_FIELD_256).encode(o,i);const u=new Uint8Array(i);for(let f=0;f<i;f++)u[f]=o[a+f];return u}static appendModeInfo(t,i){i.appendBits(t.getBits(),4)}static appendLengthInfo(t,i,a,o){const u=a.getCharacterCountBits(i);if(t>=1<<u)throw new vt(t+" is bigger than "+((1<<u)-1));o.appendBits(t,u)}static appendBytes(t,i,a,o){switch(i){case Me.NUMERIC:jt.appendNumericBytes(t,a);break;case Me.ALPHANUMERIC:jt.appendAlphanumericBytes(t,a);break;case Me.BYTE:jt.append8BitBytes(t,a,o);break;case Me.KANJI:jt.appendKanjiBytes(t,a);break;default:throw new vt("Invalid mode: "+i)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const i=jt.getDigit(t);return i>=0&&i<=9}static appendNumericBytes(t,i){const a=t.length;let o=0;for(;o<a;){const u=jt.getDigit(t.charAt(o));if(o+2<a){const f=jt.getDigit(t.charAt(o+1)),g=jt.getDigit(t.charAt(o+2));i.appendBits(u*100+f*10+g,10),o+=3}else if(o+1<a){const f=jt.getDigit(t.charAt(o+1));i.appendBits(u*10+f,7),o+=2}else i.appendBits(u,4),o++}}static appendAlphanumericBytes(t,i){const a=t.length;let o=0;for(;o<a;){const u=jt.getAlphanumericCode(t.charCodeAt(o));if(u===-1)throw new vt;if(o+1<a){const f=jt.getAlphanumericCode(t.charCodeAt(o+1));if(f===-1)throw new vt;i.appendBits(u*45+f,11),o+=2}else i.appendBits(u,6),o++}}static append8BitBytes(t,i,a){let o;try{o=yt.encode(t,a)}catch(u){throw new vt(u)}for(let u=0,f=o.length;u!==f;u++){const g=o[u];i.appendBits(g,8)}}static appendKanjiBytes(t,i){let a;try{a=yt.encode(t,oe.SJIS)}catch(u){throw new vt(u)}const o=a.length;for(let u=0;u<o;u+=2){const f=a[u]&255,g=a[u+1]&255,y=f<<8&4294967295|g;let b=-1;if(y>=33088&&y<=40956?b=y-33088:y>=57408&&y<=60351&&(b=y-49472),b===-1)throw new vt("Invalid byte sequence");const v=(b>>8)*192+(b&255);i.appendBits(v,13)}}static appendECI(t,i){i.appendBits(Me.ECI.getBits(),4),i.appendBits(t.getValue(),8)}}jt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),jt.DEFAULT_BYTE_MODE_ENCODING=oe.UTF8.getName();class ur{write(t,i,a,o=null){if(t.length===0)throw new D("Found empty contents");if(i<0||a<0)throw new D("Requested dimensions are too small: "+i+"x"+a);let u=Qe.L,f=ur.QUIET_ZONE_SIZE;o!==null&&(o.get(on.ERROR_CORRECTION)!==void 0&&(u=Qe.fromString(o.get(on.ERROR_CORRECTION).toString())),o.get(on.MARGIN)!==void 0&&(f=Number.parseInt(o.get(on.MARGIN).toString(),10)));const g=jt.encode(t,u,o);return this.renderResult(g,i,a,f)}writeToDom(t,i,a,o,u=null){typeof t=="string"&&(t=document.querySelector(t));const f=this.write(i,a,o,u);t&&t.appendChild(f)}renderResult(t,i,a,o){const u=t.getMatrix();if(u===null)throw new qn;const f=u.getWidth(),g=u.getHeight(),y=f+o*2,b=g+o*2,v=Math.max(i,y),N=Math.max(a,b),O=Math.min(Math.floor(v/y),Math.floor(N/b)),L=Math.floor((v-f*O)/2),k=Math.floor((N-g*O)/2),j=this.createSVGElement(v,N);for(let V=0,$=k;V<g;V++,$+=O)for(let xe=0,pe=L;xe<f;xe++,pe+=O)if(u.get(xe,V)===1){const ge=this.createSvgRectElement(pe,$,O,O);j.appendChild(ge)}return j}createSVGElement(t,i){const a=document.createElementNS(ur.SVG_NS,"svg");return a.setAttributeNS(null,"height",t.toString()),a.setAttributeNS(null,"width",i.toString()),a}createSvgRectElement(t,i,a,o){const u=document.createElementNS(ur.SVG_NS,"rect");return u.setAttributeNS(null,"x",t.toString()),u.setAttributeNS(null,"y",i.toString()),u.setAttributeNS(null,"height",a.toString()),u.setAttributeNS(null,"width",o.toString()),u.setAttributeNS(null,"fill","#000000"),u}}ur.QUIET_ZONE_SIZE=4,ur.SVG_NS="http://www.w3.org/2000/svg";class Yr{encode(t,i,a,o,u){if(t.length===0)throw new D("Found empty contents");if(i!==be.QR_CODE)throw new D("Can only encode QR_CODE, but got "+i);if(a<0||o<0)throw new D(`Requested dimensions are too small: ${a}x${o}`);let f=Qe.L,g=Yr.QUIET_ZONE_SIZE;u!==null&&(u.get(on.ERROR_CORRECTION)!==void 0&&(f=Qe.fromString(u.get(on.ERROR_CORRECTION).toString())),u.get(on.MARGIN)!==void 0&&(g=Number.parseInt(u.get(on.MARGIN).toString(),10)));const y=jt.encode(t,f,u);return Yr.renderResult(y,a,o,g)}static renderResult(t,i,a,o){const u=t.getMatrix();if(u===null)throw new qn;const f=u.getWidth(),g=u.getHeight(),y=f+o*2,b=g+o*2,v=Math.max(i,y),N=Math.max(a,b),O=Math.min(Math.floor(v/y),Math.floor(N/b)),L=Math.floor((v-f*O)/2),k=Math.floor((N-g*O)/2),j=new gt(v,N);for(let V=0,$=k;V<g;V++,$+=O)for(let xe=0,pe=L;xe<f;xe++,pe+=O)u.get(xe,V)===1&&j.setRegion(pe,$,O,O);return j}}Yr.QUIET_ZONE_SIZE=4;class Wc{encode(t,i,a,o,u){let f;if(i===be.QR_CODE)f=new Yr;else throw new D("No encoder available for format "+i);return f.encode(t,i,a,o,u)}}class Si extends Be{constructor(t,i,a,o,u,f,g,y){if(super(f,g),this.yuvData=t,this.dataWidth=i,this.dataHeight=a,this.left=o,this.top=u,o+f>i||u+g>a)throw new D("Crop rectangle does not fit within image data.");y&&this.reverseHorizontal(f,g)}getRow(t,i){if(t<0||t>=this.getHeight())throw new D("Requested row is outside the image: "+t);const a=this.getWidth();(i==null||i.length<a)&&(i=new Uint8ClampedArray(a));const o=(t+this.top)*this.dataWidth+this.left;return W.arraycopy(this.yuvData,o,i,0,a),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.yuvData;const a=t*i,o=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return W.arraycopy(this.yuvData,u,o,0,a),o;for(let f=0;f<i;f++){const g=f*t;W.arraycopy(this.yuvData,u,o,g,t),u+=this.dataWidth}return o}isCropSupported(){return!0}crop(t,i,a,o){return new Si(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+i,a,o,!1)}renderThumbnail(){const t=this.getWidth()/Si.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/Si.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(t*i),o=this.yuvData;let u=this.top*this.dataWidth+this.left;for(let f=0;f<i;f++){const g=f*t;for(let y=0;y<t;y++){const b=o[u+y*Si.THUMBNAIL_SCALE_FACTOR]&255;a[g+y]=4278190080|b*65793}u+=this.dataWidth*Si.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/Si.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Si.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,i){const a=this.yuvData;for(let o=0,u=this.top*this.dataWidth+this.left;o<i;o++,u+=this.dataWidth){const f=u+t/2;for(let g=u,y=u+t-1;g<f;g++,y--){const b=a[g];a[g]=a[y],a[y]=b}}}invert(){return new Je(this)}}Si.THUMBNAIL_SCALE_FACTOR=2;class cl extends Be{constructor(t,i,a,o,u,f,g){if(super(i,a),this.dataWidth=o,this.dataHeight=u,this.left=f,this.top=g,t.BYTES_PER_ELEMENT===4){const y=i*a,b=new Uint8ClampedArray(y);for(let v=0;v<y;v++){const N=t[v],O=N>>16&255,L=N>>7&510,k=N&255;b[v]=(O+L+k)/4&255}this.luminances=b}else this.luminances=t;if(o===void 0&&(this.dataWidth=i),u===void 0&&(this.dataHeight=a),f===void 0&&(this.left=0),g===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+a>this.dataHeight)throw new D("Crop rectangle does not fit within image data.")}getRow(t,i){if(t<0||t>=this.getHeight())throw new D("Requested row is outside the image: "+t);const a=this.getWidth();(i==null||i.length<a)&&(i=new Uint8ClampedArray(a));const o=(t+this.top)*this.dataWidth+this.left;return W.arraycopy(this.luminances,o,i,0,a),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.luminances;const a=t*i,o=new Uint8ClampedArray(a);let u=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return W.arraycopy(this.luminances,u,o,0,a),o;for(let f=0;f<i;f++){const g=f*t;W.arraycopy(this.luminances,u,o,g,t),u+=this.dataWidth}return o}isCropSupported(){return!0}crop(t,i,a,o){return new cl(this.luminances,a,o,this.dataWidth,this.dataHeight,this.left+t,this.top+i)}invert(){return new Je(this)}}class po extends oe{static forName(t){return this.getCharacterSetECIByName(t)}}class Oa{}Oa.ISO_8859_1=oe.ISO8859_1;class qr{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class xo{static singletonList(t){return[t]}static min(t,i){return t.sort(i)[0]}}class yo{constructor(t){this.previous=t}getPrevious(){return this.previous}}class hr extends yo{constructor(t,i,a){super(t),this.value=i,this.bitCount=a}appendTo(t,i){t.appendBits(this.value,this.bitCount)}add(t,i){return new hr(this,t,i)}addBinaryShift(t,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new hr(this,t,i)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+Y.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class us extends hr{constructor(t,i,a){super(t,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=a}appendTo(t,i){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):a===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(i[this.binaryShiftStart+a],8)}addBinaryShift(t,i){return new us(this,t,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function wo(T,t,i){return new us(T,t,i)}function Xr(T,t,i){return new hr(T,t,i)}const Wr=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],tr=0,hs=1,Kn=2,ul=3,oi=4,Ia=new hr(null,0,0),fr=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Zc(T){for(let t of T)ce.fill(t,-1);return T[tr][oi]=0,T[hs][oi]=0,T[hs][tr]=28,T[ul][oi]=0,T[Kn][oi]=0,T[Kn][tr]=15,T}const Ra=Zc(ce.createInt32Array(6,6));class ci{constructor(t,i,a,o){this.token=t,this.mode=i,this.binaryShiftByteCount=a,this.bitCount=o}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,i){let a=this.bitCount,o=this.token;if(t!==this.mode){let f=fr[this.mode][t];o=Xr(o,f&65535,f>>16),a+=f>>16}let u=t===Kn?4:5;return o=Xr(o,i,u),new ci(o,t,0,a+u)}shiftAndAppend(t,i){let a=this.token,o=this.mode===Kn?4:5;return a=Xr(a,Ra[this.mode][t],o),a=Xr(a,i,5),new ci(a,this.mode,0,this.bitCount+o+5)}addBinaryShiftChar(t){let i=this.token,a=this.mode,o=this.bitCount;if(this.mode===oi||this.mode===Kn){let g=fr[a][tr];i=Xr(i,g&65535,g>>16),o+=g>>16,a=tr}let u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new ci(i,a,this.binaryShiftByteCount+1,o+u);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(t+1)),f}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=wo(i,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new ci(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let i=this.bitCount+(fr[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?i+=ci.calculateBinaryShiftCost(t)-ci.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(i+=10),i<=t.bitCount}toBitArray(t){let i=[];for(let o=this.endBinaryShift(t.length).token;o!==null;o=o.getPrevious())i.unshift(o);let a=new fe;for(const o of i)o.appendTo(a,t);return a}toString(){return ve.format("%s bits=%d bytes=%d",Wr[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}ci.INITIAL_STATE=new ci(Ia,tr,0,0);function bo(T){const t=ve.getCharCode(" "),i=ve.getCharCode("."),a=ve.getCharCode(",");T[tr][t]=1;const o=ve.getCharCode("Z"),u=ve.getCharCode("A");for(let O=u;O<=o;O++)T[tr][O]=O-u+2;T[hs][t]=1;const f=ve.getCharCode("z"),g=ve.getCharCode("a");for(let O=g;O<=f;O++)T[hs][O]=O-g+2;T[Kn][t]=1;const y=ve.getCharCode("9"),b=ve.getCharCode("0");for(let O=b;O<=y;O++)T[Kn][O]=O-b+2;T[Kn][a]=12,T[Kn][i]=13;const v=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let O=0;O<v.length;O++)T[ul][ve.getCharCode(v[O])]=O;const N=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let O=0;O<N.length;O++)ve.getCharCode(N[O])>0&&(T[oi][ve.getCharCode(N[O])]=O);return T}const Da=bo(ce.createInt32Array(5,256));class dr{constructor(t){this.text=t}encode(){const t=ve.getCharCode(" "),i=ve.getCharCode(`
`);let a=xo.singletonList(ci.INITIAL_STATE);for(let u=0;u<this.text.length;u++){let f,g=u+1<this.text.length?this.text[u+1]:0;switch(this.text[u]){case ve.getCharCode("\r"):f=g===i?2:0;break;case ve.getCharCode("."):f=g===t?3:0;break;case ve.getCharCode(","):f=g===t?4:0;break;case ve.getCharCode(":"):f=g===t?5:0;break;default:f=0}f>0?(a=dr.updateStateListForPair(a,u,f),u++):a=this.updateStateListForChar(a,u)}return xo.min(a,(u,f)=>u.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,i){const a=[];for(let o of t)this.updateStateForChar(o,i,a);return dr.simplifyStates(a)}updateStateForChar(t,i,a){let o=this.text[i]&255,u=Da[t.getMode()][o]>0,f=null;for(let g=0;g<=oi;g++){let y=Da[g][o];if(y>0){if(f==null&&(f=t.endBinaryShift(i)),!u||g===t.getMode()||g===Kn){const b=f.latchAndAppend(g,y);a.push(b)}if(!u&&Ra[t.getMode()][g]>=0){const b=f.shiftAndAppend(g,y);a.push(b)}}}if(t.getBinaryShiftByteCount()>0||Da[t.getMode()][o]===0){let g=t.addBinaryShiftChar(i);a.push(g)}}static updateStateListForPair(t,i,a){const o=[];for(let u of t)this.updateStateForPair(u,i,a,o);return this.simplifyStates(o)}static updateStateForPair(t,i,a,o){let u=t.endBinaryShift(i);if(o.push(u.latchAndAppend(oi,a)),t.getMode()!==oi&&o.push(u.shiftAndAppend(oi,a)),a===3||a===4){let f=u.latchAndAppend(Kn,16-a).latchAndAppend(Kn,1);o.push(f)}if(t.getBinaryShiftByteCount()>0){let f=t.addBinaryShiftChar(i).addBinaryShiftChar(i+1);o.push(f)}}static simplifyStates(t){let i=[];for(const a of t){let o=!0;for(const u of i){if(u.isBetterThanOrEqualTo(a)){o=!1;break}a.isBetterThanOrEqualTo(u)&&(i=i.filter(f=>f!==u))}o&&i.push(a)}return i}}class at{constructor(){}static encodeBytes(t){return at.encode(t,at.DEFAULT_EC_PERCENT,at.DEFAULT_AZTEC_LAYERS)}static encode(t,i,a){let o=new dr(t).encode(),u=Y.truncDivision(o.getSize()*i,100)+11,f=o.getSize()+u,g,y,b,v,N;if(a!==at.DEFAULT_AZTEC_LAYERS){if(g=a<0,y=Math.abs(a),y>(g?at.MAX_NB_BITS_COMPACT:at.MAX_NB_BITS))throw new D(ve.format("Illegal value %s for layers",a));b=at.totalBitsInLayer(y,g),v=at.WORD_SIZE[y];let ge=b-b%v;if(N=at.stuffBits(o,v),N.getSize()+u>ge)throw new D("Data to large for user specified layer");if(g&&N.getSize()>v*64)throw new D("Data to large for user specified layer")}else{v=0,N=null;for(let ge=0;;ge++){if(ge>at.MAX_NB_BITS)throw new D("Data too large for an Aztec code");if(g=ge<=3,y=g?ge+1:ge,b=at.totalBitsInLayer(y,g),f>b)continue;(N==null||v!==at.WORD_SIZE[y])&&(v=at.WORD_SIZE[y],N=at.stuffBits(o,v));let Ke=b-b%v;if(!(g&&N.getSize()>v*64)&&N.getSize()+u<=Ke)break}}let O=at.generateCheckWords(N,b,v),L=N.getSize()/v,k=at.generateModeMessage(g,y,L),j=(g?11:14)+y*4,V=new Int32Array(j),$;if(g){$=j;for(let ge=0;ge<V.length;ge++)V[ge]=ge}else{$=j+1+2*Y.truncDivision(Y.truncDivision(j,2)-1,15);let ge=Y.truncDivision(j,2),Ke=Y.truncDivision($,2);for(let Ge=0;Ge<ge;Ge++){let en=Ge+Y.truncDivision(Ge,15);V[ge-Ge-1]=Ke-en-1,V[ge+Ge]=Ke+en+1}}let xe=new gt($);for(let ge=0,Ke=0;ge<y;ge++){let Ge=(y-ge)*4+(g?9:12);for(let en=0;en<Ge;en++){let Qn=en*2;for(let In=0;In<2;In++)O.get(Ke+Qn+In)&&xe.set(V[ge*2+In],V[ge*2+en]),O.get(Ke+Ge*2+Qn+In)&&xe.set(V[ge*2+en],V[j-1-ge*2-In]),O.get(Ke+Ge*4+Qn+In)&&xe.set(V[j-1-ge*2-In],V[j-1-ge*2-en]),O.get(Ke+Ge*6+Qn+In)&&xe.set(V[j-1-ge*2-en],V[ge*2+In])}Ke+=Ge*8}if(at.drawModeMessage(xe,g,$,k),g)at.drawBullsEye(xe,Y.truncDivision($,2),5);else{at.drawBullsEye(xe,Y.truncDivision($,2),7);for(let ge=0,Ke=0;ge<Y.truncDivision(j,2)-1;ge+=15,Ke+=16)for(let Ge=Y.truncDivision($,2)&1;Ge<$;Ge+=2)xe.set(Y.truncDivision($,2)-Ke,Ge),xe.set(Y.truncDivision($,2)+Ke,Ge),xe.set(Ge,Y.truncDivision($,2)-Ke),xe.set(Ge,Y.truncDivision($,2)+Ke)}let pe=new qr;return pe.setCompact(g),pe.setSize($),pe.setLayers(y),pe.setCodeWords(L),pe.setMatrix(xe),pe}static drawBullsEye(t,i,a){for(let o=0;o<a;o+=2)for(let u=i-o;u<=i+o;u++)t.set(u,i-o),t.set(u,i+o),t.set(i-o,u),t.set(i+o,u);t.set(i-a,i-a),t.set(i-a+1,i-a),t.set(i-a,i-a+1),t.set(i+a,i-a),t.set(i+a,i-a+1),t.set(i+a,i+a-1)}static generateModeMessage(t,i,a){let o=new fe;return t?(o.appendBits(i-1,2),o.appendBits(a-1,6),o=at.generateCheckWords(o,28,4)):(o.appendBits(i-1,5),o.appendBits(a-1,11),o=at.generateCheckWords(o,40,4)),o}static drawModeMessage(t,i,a,o){let u=Y.truncDivision(a,2);if(i)for(let f=0;f<7;f++){let g=u-3+f;o.get(f)&&t.set(g,u-5),o.get(f+7)&&t.set(u+5,g),o.get(20-f)&&t.set(g,u+5),o.get(27-f)&&t.set(u-5,g)}else for(let f=0;f<10;f++){let g=u-5+f+Y.truncDivision(f,5);o.get(f)&&t.set(g,u-7),o.get(f+10)&&t.set(u+7,g),o.get(29-f)&&t.set(g,u+7),o.get(39-f)&&t.set(u-7,g)}}static generateCheckWords(t,i,a){let o=t.getSize()/a,u=new Na(at.getGF(a)),f=Y.truncDivision(i,a),g=at.bitsToWords(t,a,f);u.encode(g,f-o);let y=i%a,b=new fe;b.appendBits(0,y);for(const v of Array.from(g))b.appendBits(v,a);return b}static bitsToWords(t,i,a){let o=new Int32Array(a),u,f;for(u=0,f=t.getSize()/i;u<f;u++){let g=0;for(let y=0;y<i;y++)g|=t.get(u*i+y)?1<<i-y-1:0;o[u]=g}return o}static getGF(t){switch(t){case 4:return ht.AZTEC_PARAM;case 6:return ht.AZTEC_DATA_6;case 8:return ht.AZTEC_DATA_8;case 10:return ht.AZTEC_DATA_10;case 12:return ht.AZTEC_DATA_12;default:throw new D("Unsupported word size "+t)}}static stuffBits(t,i){let a=new fe,o=t.getSize(),u=(1<<i)-2;for(let f=0;f<o;f+=i){let g=0;for(let y=0;y<i;y++)(f+y>=o||t.get(f+y))&&(g|=1<<i-1-y);(g&u)===u?(a.appendBits(g&u,i),f--):(g&u)===0?(a.appendBits(g|1,i),f--):a.appendBits(g,i)}return a}static totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}at.DEFAULT_EC_PERCENT=33,at.DEFAULT_AZTEC_LAYERS=0,at.MAX_NB_BITS=32,at.MAX_NB_BITS_COMPACT=4,at.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Ma{encode(t,i,a,o){return this.encodeWithHints(t,i,a,o,null)}encodeWithHints(t,i,a,o,u){let f=Oa.ISO_8859_1,g=at.DEFAULT_EC_PERCENT,y=at.DEFAULT_AZTEC_LAYERS;return u!=null&&(u.has(on.CHARACTER_SET)&&(f=po.forName(u.get(on.CHARACTER_SET).toString())),u.has(on.ERROR_CORRECTION)&&(g=Y.parseInt(u.get(on.ERROR_CORRECTION).toString())),u.has(on.AZTEC_LAYERS)&&(y=Y.parseInt(u.get(on.AZTEC_LAYERS).toString()))),Ma.encodeLayers(t,i,a,o,f,g,y)}static encodeLayers(t,i,a,o,u,f,g){if(i!==be.AZTEC)throw new D("Can only encode AZTEC, but got "+i);let y=at.encode(ve.getBytes(t,u),f,g);return Ma.renderResult(y,a,o)}static renderResult(t,i,a){let o=t.getMatrix();if(o==null)throw new qn;let u=o.getWidth(),f=o.getHeight(),g=Math.max(i,u),y=Math.max(a,f),b=Math.min(g/u,y/f),v=(g-u*b)/2,N=(y-f*b)/2,O=new gt(g,y);for(let L=0,k=N;L<f;L++,k+=b)for(let j=0,V=v;j<u;j++,V+=b)o.get(j,L)&&O.setRegion(V,k,b,b);return O}}l.AbstractExpandedDecoder=sn,l.ArgumentException=I,l.ArithmeticException=Lr,l.AztecCode=qr,l.AztecCodeReader=es,l.AztecCodeWriter=Ma,l.AztecDecoder=St,l.AztecDetector=$s,l.AztecDetectorResult=ao,l.AztecEncoder=at,l.AztecHighLevelEncoder=dr,l.AztecPoint=Nn,l.BarcodeFormat=be,l.Binarizer=X,l.BinaryBitmap=U,l.BitArray=fe,l.BitMatrix=gt,l.BitSource=si,l.BrowserAztecCodeReader=Fc,l.BrowserBarcodeReader=Hc,l.BrowserCodeReader=Ae,l.BrowserDatamatrixCodeReader=is,l.BrowserMultiFormatReader=mo,l.BrowserPDF417Reader=Yc,l.BrowserQRCodeReader=qc,l.BrowserQRCodeSvgWriter=ur,l.CharacterSetECI=oe,l.ChecksumException=P,l.Code128Reader=ye,l.Code39Reader=Rt,l.DataMatrixDecodedBitStreamParser=ki,l.DataMatrixReader=Ui,l.DecodeHintType=we,l.DecoderResult=Bt,l.DefaultGridSampler=Js,l.DetectorResult=$a,l.EAN13Reader=Ai,l.EncodeHintType=on,l.Exception=A,l.FormatException=Q,l.GenericGF=ht,l.GenericGFPoly=yn,l.GlobalHistogramBinarizer=te,l.GridSampler=Qs,l.GridSamplerInstance=ii,l.HTMLCanvasElementLuminanceSource=it,l.HybridBinarizer=ue,l.ITFReader=Xe,l.IllegalArgumentException=D,l.IllegalStateException=qn,l.InvertedLuminanceSource=Je,l.LuminanceSource=Be,l.MathUtils=$e,l.MultiFormatOneDReader=ai,l.MultiFormatReader=go,l.MultiFormatWriter=Wc,l.NotFoundException=ie,l.OneDReader=Ft,l.PDF417DecodedBitStreamParser=ee,l.PDF417DecoderErrorCorrection=Pi,l.PDF417Reader=En,l.PDF417ResultMetadata=Vr,l.PerspectiveTransform=Xn,l.PlanarYUVLuminanceSource=Si,l.QRCodeByteMatrix=cs,l.QRCodeDataMask=Fn,l.QRCodeDecodedBitStreamParser=kt,l.QRCodeDecoderErrorCorrectionLevel=Qe,l.QRCodeDecoderFormatInformation=hn,l.QRCodeEncoder=jt,l.QRCodeEncoderQRCode=cr,l.QRCodeMaskUtil=Wt,l.QRCodeMatrixUtil=Ue,l.QRCodeMode=Me,l.QRCodeReader=ji,l.QRCodeVersion=Ie,l.QRCodeWriter=Yr,l.RGBLuminanceSource=cl,l.RSS14Reader=Et,l.RSSExpandedReader=de,l.ReaderException=os,l.ReedSolomonDecoder=lr,l.ReedSolomonEncoder=Na,l.ReedSolomonException=Yn,l.Result=Ee,l.ResultMetadataType=ut,l.ResultPoint=Ne,l.StringUtils=ve,l.UnsupportedOperationException=zt,l.VideoInputDevice=F,l.WhiteRectangleDetector=Kt,l.WriterException=vt,l.ZXingArrays=ce,l.ZXingCharset=po,l.ZXingInteger=Y,l.ZXingStandardCharsets=Oa,l.ZXingStringBuilder=Ye,l.ZXingStringEncoding=yt,l.ZXingSystem=W,l.createAbstractExpandedDecoder=Ur,Object.defineProperty(l,"__esModule",{value:!0})}))})(Xl,Xl.exports)),Xl.exports}var Qt=dm();const gm=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var I1=(function(){function c(r,l,d){if(this.formatMap=new Map([[Ce.QR_CODE,Qt.BarcodeFormat.QR_CODE],[Ce.AZTEC,Qt.BarcodeFormat.AZTEC],[Ce.CODABAR,Qt.BarcodeFormat.CODABAR],[Ce.CODE_39,Qt.BarcodeFormat.CODE_39],[Ce.CODE_93,Qt.BarcodeFormat.CODE_93],[Ce.CODE_128,Qt.BarcodeFormat.CODE_128],[Ce.DATA_MATRIX,Qt.BarcodeFormat.DATA_MATRIX],[Ce.MAXICODE,Qt.BarcodeFormat.MAXICODE],[Ce.ITF,Qt.BarcodeFormat.ITF],[Ce.EAN_13,Qt.BarcodeFormat.EAN_13],[Ce.EAN_8,Qt.BarcodeFormat.EAN_8],[Ce.PDF_417,Qt.BarcodeFormat.PDF_417],[Ce.RSS_14,Qt.BarcodeFormat.RSS_14],[Ce.RSS_EXPANDED,Qt.BarcodeFormat.RSS_EXPANDED],[Ce.UPC_A,Qt.BarcodeFormat.UPC_A],[Ce.UPC_E,Qt.BarcodeFormat.UPC_E],[Ce.UPC_EAN_EXTENSION,Qt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!gm)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=l,this.logger=d;var x=this.createZXingFormats(r),m=new Map;m.set(Qt.DecodeHintType.POSSIBLE_FORMATS,x),m.set(Qt.DecodeHintType.TRY_HARDER,!1),this.hints=m}return c.prototype.decodeAsync=function(r){var l=this;return new Promise(function(d,x){try{d(l.decode(r))}catch(m){x(m)}})},c.prototype.decode=function(r){var l=new Qt.MultiFormatReader(this.verbose,this.hints),d=new Qt.HTMLCanvasElementLuminanceSource(r),x=new Qt.BinaryBitmap(new Qt.HybridBinarizer(d)),m=l.decode(x);return{text:m.text,format:fg.create(this.toHtml5QrcodeSupportedFormats(m.format)),debugData:this.createDebugData()}},c.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(l,d,x){r.set(l,d)}),r},c.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},c.prototype.createZXingFormats=function(r){for(var l=[],d=0,x=r;d<x.length;d++){var m=x[d];this.formatMap.has(m)?l.push(this.formatMap.get(m)):this.logger.logError("".concat(m," is not supported by")+"ZXingHtml5QrcodeShim")}return l},c.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},c})(),mm=function(c,r,l,d){function x(m){return m instanceof l?m:new l(function(E){E(m)})}return new(l||(l=Promise))(function(m,E){function S(I){try{A(d.next(I))}catch(D){E(D)}}function C(I){try{A(d.throw(I))}catch(D){E(D)}}function A(I){I.done?m(I.value):x(I.value).then(S,C)}A((d=d.apply(c,r||[])).next())})},pm=function(c,r){var l={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},d,x,m,E;return E={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function S(A){return function(I){return C([A,I])}}function C(A){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(l=0)),l;)try{if(d=1,x&&(m=A[0]&2?x.return:A[0]?x.throw||((m=x.return)&&m.call(x),0):x.next)&&!(m=m.call(x,A[1])).done)return m;switch(x=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return l.label++,{value:A[1],done:!1};case 5:l.label++,x=A[1],A=[0];continue;case 7:A=l.ops.pop(),l.trys.pop();continue;default:if(m=l.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){l=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){l.label=A[1];break}if(A[0]===6&&l.label<m[1]){l.label=m[1],m=A;break}if(m&&l.label<m[2]){l.label=m[2],l.ops.push(A);break}m[2]&&l.ops.pop(),l.trys.pop();continue}A=r.call(c,l)}catch(I){A=[6,I],x=0}finally{d=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},R1=(function(){function c(r,l,d){if(this.formatMap=new Map([[Ce.QR_CODE,"qr_code"],[Ce.AZTEC,"aztec"],[Ce.CODABAR,"codabar"],[Ce.CODE_39,"code_39"],[Ce.CODE_93,"code_93"],[Ce.CODE_128,"code_128"],[Ce.DATA_MATRIX,"data_matrix"],[Ce.ITF,"itf"],[Ce.EAN_13,"ean_13"],[Ce.EAN_8,"ean_8"],[Ce.PDF_417,"pdf417"],[Ce.UPC_A,"upc_a"],[Ce.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!c.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=l,this.logger=d;var x=this.createBarcodeDetectorFormats(r);if(this.detector=new BarcodeDetector(x),!this.detector)throw"BarcodeDetector detector not supported"}return c.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var r=new BarcodeDetector({formats:["qr_code"]});return typeof r<"u"},c.prototype.decodeAsync=function(r){return mm(this,void 0,void 0,function(){var l,d;return pm(this,function(x){switch(x.label){case 0:return[4,this.detector.detect(r)];case 1:if(l=x.sent(),!l||l.length===0)throw"No barcode or QR code detected.";return d=this.selectLargestBarcode(l),[2,{text:d.rawValue,format:fg.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}]}})})},c.prototype.selectLargestBarcode=function(r){for(var l=null,d=0,x=0,m=r;x<m.length;x++){var E=m[x],S=E.boundingBox.width*E.boundingBox.height;S>d&&(d=S,l=E)}if(!l)throw"No largest barcode found";return l},c.prototype.createBarcodeDetectorFormats=function(r){for(var l=[],d=0,x=r;d<x.length;d++){var m=x[d];this.formatMap.has(m)?l.push(this.formatMap.get(m)):this.logger.warn("".concat(m," is not supported by")+"BarcodeDetectorDelegate")}return{formats:l}},c.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},c.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(l,d,x){r.set(l,d)}),r},c.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},c})(),D1=function(c,r,l,d){function x(m){return m instanceof l?m:new l(function(E){E(m)})}return new(l||(l=Promise))(function(m,E){function S(I){try{A(d.next(I))}catch(D){E(D)}}function C(I){try{A(d.throw(I))}catch(D){E(D)}}function A(I){I.done?m(I.value):x(I.value).then(S,C)}A((d=d.apply(c,r||[])).next())})},M1=function(c,r){var l={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},d,x,m,E;return E={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function S(A){return function(I){return C([A,I])}}function C(A){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(l=0)),l;)try{if(d=1,x&&(m=A[0]&2?x.return:A[0]?x.throw||((m=x.return)&&m.call(x),0):x.next)&&!(m=m.call(x,A[1])).done)return m;switch(x=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return l.label++,{value:A[1],done:!1};case 5:l.label++,x=A[1],A=[0];continue;case 7:A=l.ops.pop(),l.trys.pop();continue;default:if(m=l.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){l=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){l.label=A[1];break}if(A[0]===6&&l.label<m[1]){l.label=m[1],m=A;break}if(m&&l.label<m[2]){l.label=m[2],l.ops.push(A);break}m[2]&&l.ops.pop(),l.trys.pop();continue}A=r.call(c,l)}catch(I){A=[6,I],x=0}finally{d=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},xm=(function(){function c(r,l,d,x){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=d,l&&R1.isSupported()?(this.primaryDecoder=new R1(r,d,x),this.secondaryDecoder=new I1(r,d,x)):this.primaryDecoder=new I1(r,d,x)}return c.prototype.decodeAsync=function(r){return D1(this,void 0,void 0,function(){var l;return M1(this,function(d){switch(d.label){case 0:l=performance.now(),d.label=1;case 1:return d.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(r)];case 2:return[2,d.sent()];case 3:return this.possiblyLogPerformance(l),[7];case 4:return[2]}})})},c.prototype.decodeRobustlyAsync=function(r){return D1(this,void 0,void 0,function(){var l,d;return M1(this,function(x){switch(x.label){case 0:l=performance.now(),x.label=1;case 1:return x.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(r)];case 2:return[2,x.sent()];case 3:if(d=x.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(r)];throw d;case 4:return this.possiblyLogPerformance(l),[7];case 5:return[2]}})})},c.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},c.prototype.possiblyLogPerformance=function(r){if(this.verbose){var l=performance.now()-r;this.executionResults.push(l),this.executions++,this.possiblyFlushPerformanceReport()}},c.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var r=0,l=0,d=this.executionResults;l<d.length;l++){var x=d[l];r+=x}var m=r/this.executionResults.length;console.log("".concat(m," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},c})(),cf=(function(){var c=function(r,l){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,x){d.__proto__=x}||function(d,x){for(var m in x)Object.prototype.hasOwnProperty.call(x,m)&&(d[m]=x[m])},c(r,l)};return function(r,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");c(r,l);function d(){this.constructor=r}r.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}})(),Dc=function(c,r,l,d){function x(m){return m instanceof l?m:new l(function(E){E(m)})}return new(l||(l=Promise))(function(m,E){function S(I){try{A(d.next(I))}catch(D){E(D)}}function C(I){try{A(d.throw(I))}catch(D){E(D)}}function A(I){I.done?m(I.value):x(I.value).then(S,C)}A((d=d.apply(c,r||[])).next())})},Mc=function(c,r){var l={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},d,x,m,E;return E={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function S(A){return function(I){return C([A,I])}}function C(A){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(l=0)),l;)try{if(d=1,x&&(m=A[0]&2?x.return:A[0]?x.throw||((m=x.return)&&m.call(x),0):x.next)&&!(m=m.call(x,A[1])).done)return m;switch(x=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return l.label++,{value:A[1],done:!1};case 5:l.label++,x=A[1],A=[0];continue;case 7:A=l.ops.pop(),l.trys.pop();continue;default:if(m=l.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){l=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){l.label=A[1];break}if(A[0]===6&&l.label<m[1]){l.label=m[1],m=A;break}if(m&&l.label<m[2]){l.label=m[2],l.ops.push(A);break}m[2]&&l.ops.pop(),l.trys.pop();continue}A=r.call(c,l)}catch(I){A=[6,I],x=0}finally{d=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},pg=(function(){function c(r,l){this.name=r,this.track=l}return c.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},c.prototype.apply=function(r){var l={};l[this.name]=r;var d={advanced:[l]};return this.track.applyConstraints(d)},c.prototype.value=function(){var r=this.track.getSettings();if(this.name in r){var l=r[this.name];return l}return null},c})(),ym=(function(c){cf(r,c);function r(l,d){return c.call(this,l,d)||this}return r.prototype.min=function(){return this.getCapabilities().min},r.prototype.max=function(){return this.getCapabilities().max},r.prototype.step=function(){return this.getCapabilities().step},r.prototype.apply=function(l){var d={};d[this.name]=l;var x={advanced:[d]};return this.track.applyConstraints(x)},r.prototype.getCapabilities=function(){this.failIfNotSupported();var l=this.track.getCapabilities(),d=l[this.name];return{min:d.min,max:d.max,step:d.step}},r.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},r})(pg),wm=(function(c){cf(r,c);function r(l){return c.call(this,"zoom",l)||this}return r})(ym),bm=(function(c){cf(r,c);function r(l){return c.call(this,"torch",l)||this}return r})(pg),Am=(function(){function c(r){this.track=r}return c.prototype.zoomFeature=function(){return new wm(this.track)},c.prototype.torchFeature=function(){return new bm(this.track)},c})(),Em=(function(){function c(r,l,d){this.isClosed=!1,this.parentElement=r,this.mediaStream=l,this.callbacks=d,this.surface=this.createVideoElement(this.parentElement.clientWidth),r.append(this.surface)}return c.prototype.createVideoElement=function(r){var l=document.createElement("video");return l.style.width="".concat(r,"px"),l.style.display="block",l.muted=!0,l.setAttribute("muted","true"),l.playsInline=!0,l},c.prototype.setupSurface=function(){var r=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var l=function(){var d=r.surface.clientWidth,x=r.surface.clientHeight;r.callbacks.onRenderSurfaceReady(d,x),r.surface.removeEventListener("playing",l)};this.surface.addEventListener("playing",l),this.surface.srcObject=this.mediaStream,this.surface.play()},c.create=function(r,l,d,x){return Dc(this,void 0,void 0,function(){var m,E;return Mc(this,function(S){switch(S.label){case 0:return m=new c(r,l,x),d.aspectRatio?(E={aspectRatio:d.aspectRatio},[4,m.getFirstTrackOrFail().applyConstraints(E)]):[3,2];case 1:S.sent(),S.label=2;case 2:return m.setupSurface(),[2,m]}})})},c.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},c.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},c.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},c.prototype.resume=function(r){this.failIfClosed();var l=this,d=function(){setTimeout(r,200),l.surface.removeEventListener("playing",d)};this.surface.addEventListener("playing",d),this.surface.play()},c.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},c.prototype.getSurface=function(){return this.failIfClosed(),this.surface},c.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},c.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},c.prototype.applyVideoConstraints=function(r){return Dc(this,void 0,void 0,function(){return Mc(this,function(l){if("aspectRatio"in r)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(r)]})})},c.prototype.close=function(){if(this.isClosed)return Promise.resolve();var r=this;return new Promise(function(l,d){var x=r.mediaStream.getVideoTracks(),m=x.length,E=0;r.mediaStream.getVideoTracks().forEach(function(S){r.mediaStream.removeTrack(S),S.stop(),++E,E>=m&&(r.isClosed=!0,r.parentElement.removeChild(r.surface),l())})})},c.prototype.getCapabilities=function(){return new Am(this.getFirstTrackOrFail())},c})(),vm=(function(){function c(r){this.mediaStream=r}return c.prototype.render=function(r,l,d){return Dc(this,void 0,void 0,function(){return Mc(this,function(x){return[2,Em.create(r,this.mediaStream,l,d)]})})},c.create=function(r){return Dc(this,void 0,void 0,function(){var l,d;return Mc(this,function(x){switch(x.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return l={audio:!1,video:r},[4,navigator.mediaDevices.getUserMedia(l)];case 1:return d=x.sent(),[2,new c(d)]}})})},c})(),L1=function(c,r,l,d){function x(m){return m instanceof l?m:new l(function(E){E(m)})}return new(l||(l=Promise))(function(m,E){function S(I){try{A(d.next(I))}catch(D){E(D)}}function C(I){try{A(d.throw(I))}catch(D){E(D)}}function A(I){I.done?m(I.value):x(I.value).then(S,C)}A((d=d.apply(c,r||[])).next())})},B1=function(c,r){var l={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},d,x,m,E;return E={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function S(A){return function(I){return C([A,I])}}function C(A){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(l=0)),l;)try{if(d=1,x&&(m=A[0]&2?x.return:A[0]?x.throw||((m=x.return)&&m.call(x),0):x.next)&&!(m=m.call(x,A[1])).done)return m;switch(x=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return l.label++,{value:A[1],done:!1};case 5:l.label++,x=A[1],A=[0];continue;case 7:A=l.ops.pop(),l.trys.pop();continue;default:if(m=l.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){l=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){l.label=A[1];break}if(A[0]===6&&l.label<m[1]){l.label=m[1],m=A;break}if(m&&l.label<m[2]){l.label=m[2],l.ops.push(A);break}m[2]&&l.ops.pop(),l.trys.pop();continue}A=r.call(c,l)}catch(I){A=[6,I],x=0}finally{d=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},_m=(function(){function c(){}return c.failIfNotSupported=function(){return L1(this,void 0,void 0,function(){return B1(this,function(r){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new c]})})},c.prototype.create=function(r){return L1(this,void 0,void 0,function(){return B1(this,function(l){return[2,vm.create(r)]})})},c})(),Sm=function(c,r,l,d){function x(m){return m instanceof l?m:new l(function(E){E(m)})}return new(l||(l=Promise))(function(m,E){function S(I){try{A(d.next(I))}catch(D){E(D)}}function C(I){try{A(d.throw(I))}catch(D){E(D)}}function A(I){I.done?m(I.value):x(I.value).then(S,C)}A((d=d.apply(c,r||[])).next())})},Cm=function(c,r){var l={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},d,x,m,E;return E={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function S(A){return function(I){return C([A,I])}}function C(A){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(l=0)),l;)try{if(d=1,x&&(m=A[0]&2?x.return:A[0]?x.throw||((m=x.return)&&m.call(x),0):x.next)&&!(m=m.call(x,A[1])).done)return m;switch(x=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return l.label++,{value:A[1],done:!1};case 5:l.label++,x=A[1],A=[0];continue;case 7:A=l.ops.pop(),l.trys.pop();continue;default:if(m=l.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){l=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){l.label=A[1];break}if(A[0]===6&&l.label<m[1]){l.label=m[1],m=A;break}if(m&&l.label<m[2]){l.label=m[2],l.ops.push(A);break}m[2]&&l.ops.pop(),l.trys.pop();continue}A=r.call(c,l)}catch(I){A=[6,I],x=0}finally{d=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},Tm=(function(){function c(){}return c.retrieve=function(){if(navigator.mediaDevices)return c.getCamerasFromMediaDevices();var r=MediaStreamTrack;return MediaStreamTrack&&r.getSources?c.getCamerasFromMediaStreamTrack():c.rejectWithError()},c.rejectWithError=function(){var r=Xs.unableToQuerySupportedDevices();return c.isHttpsOrLocalhost()||(r=Xs.insecureContextCameraQueryError()),Promise.reject(r)},c.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var r=location.host.split(":")[0];return r==="127.0.0.1"||r==="localhost"},c.getCamerasFromMediaDevices=function(){return Sm(this,void 0,void 0,function(){var r,l,d,x,m,E,S;return Cm(this,function(C){switch(C.label){case 0:return r=function(A){for(var I=A.getVideoTracks(),D=0,U=I;D<U.length;D++){var P=U[D];P.enabled=!1,P.stop(),A.removeTrack(P)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return l=C.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(d=C.sent(),x=[],m=0,E=d;m<E.length;m++)S=E[m],S.kind==="videoinput"&&x.push({id:S.deviceId,label:S.label});return r(l),[2,x]}})})},c.getCamerasFromMediaStreamTrack=function(){return new Promise(function(r,l){var d=function(m){for(var E=[],S=0,C=m;S<C.length;S++){var A=C[S];A.kind==="video"&&E.push({id:A.id,label:A.label})}r(E)},x=MediaStreamTrack;x.getSources(d)})},c})(),rn;(function(c){c[c.UNKNOWN=0]="UNKNOWN",c[c.NOT_STARTED=1]="NOT_STARTED",c[c.SCANNING=2]="SCANNING",c[c.PAUSED=3]="PAUSED"})(rn||(rn={}));var Nm=(function(){function c(){this.state=rn.NOT_STARTED,this.onGoingTransactionNewState=rn.UNKNOWN}return c.prototype.directTransition=function(r){this.failIfTransitionOngoing(),this.validateTransition(r),this.state=r},c.prototype.startTransition=function(r){return this.failIfTransitionOngoing(),this.validateTransition(r),this.onGoingTransactionNewState=r,this},c.prototype.execute=function(){if(this.onGoingTransactionNewState===rn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var r=this.onGoingTransactionNewState;this.onGoingTransactionNewState=rn.UNKNOWN,this.directTransition(r)},c.prototype.cancel=function(){if(this.onGoingTransactionNewState===rn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=rn.UNKNOWN},c.prototype.getState=function(){return this.state},c.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==rn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},c.prototype.validateTransition=function(r){switch(this.state){case rn.UNKNOWN:throw"Transition from unknown is not allowed";case rn.NOT_STARTED:this.failIfNewStateIs(r,[rn.PAUSED]);break;case rn.SCANNING:break;case rn.PAUSED:break}},c.prototype.failIfNewStateIs=function(r,l){for(var d=0,x=l;d<x.length;d++){var m=x[d];if(r===m)throw"Cannot transition from ".concat(this.state," to ").concat(r)}},c})(),Om=(function(){function c(r){this.stateManager=r}return c.prototype.startTransition=function(r){return this.stateManager.startTransition(r)},c.prototype.directTransition=function(r){this.stateManager.directTransition(r)},c.prototype.getState=function(){return this.stateManager.getState()},c.prototype.canScanFile=function(){return this.stateManager.getState()===rn.NOT_STARTED},c.prototype.isScanning=function(){return this.stateManager.getState()!==rn.NOT_STARTED},c.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===rn.SCANNING},c.prototype.isPaused=function(){return this.stateManager.getState()===rn.PAUSED},c})(),Im=(function(){function c(){}return c.create=function(){return new Om(new Nm)},c})(),Rm=(function(){var c=function(r,l){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,x){d.__proto__=x}||function(d,x){for(var m in x)Object.prototype.hasOwnProperty.call(x,m)&&(d[m]=x[m])},c(r,l)};return function(r,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");c(r,l);function d(){this.constructor=r}r.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}})(),xi=(function(c){Rm(r,c);function r(){return c!==null&&c.apply(this,arguments)||this}return r.DEFAULT_WIDTH=300,r.DEFAULT_WIDTH_OFFSET=2,r.FILE_SCAN_MIN_HEIGHT=300,r.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,r.MIN_QR_BOX_SIZE=50,r.SHADED_LEFT=1,r.SHADED_RIGHT=2,r.SHADED_TOP=3,r.SHADED_BOTTOM=4,r.SHADED_REGION_ELEMENT_ID="qr-shaded-region",r.VERBOSE=!1,r.BORDER_SHADER_DEFAULT_COLOR="#ffffff",r.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",r})(qi),Dm=(function(){function c(r,l){this.logger=l,this.fps=xi.SCAN_DEFAULT_FPS,r?(r.fps&&(this.fps=r.fps),this.disableFlip=r.disableFlip===!0,this.qrbox=r.qrbox,this.aspectRatio=r.aspectRatio,this.videoConstraints=r.videoConstraints):this.disableFlip=xi.DEFAULT_DISABLE_FLIP}return c.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?mg.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},c.prototype.isShadedBoxEnabled=function(){return!sr(this.qrbox)},c.create=function(r,l){return new c(r,l)},c})(),Kh=(function(){function c(r,l){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(r))throw"HTML Element with id=".concat(r," not found");this.elementId=r,this.verbose=!1;var d;typeof l=="boolean"?this.verbose=l===!0:l&&(d=l,this.verbose=d.verbose===!0,d.experimentalFeatures),this.logger=new gg(this.verbose),this.qrcode=new xm(this.getSupportedFormats(l),this.getUseBarCodeDetectorIfSupported(d),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Im.create()}return c.prototype.start=function(r,l,d,x){var m=this;if(!r)throw"cameraIdOrConfig is required";if(!d||typeof d!="function")throw"qrCodeSuccessCallback is required and should be a function.";var E;x?E=x:E=this.verbose?this.logger.log:function(){};var S=Dm.create(l,this.logger);this.clearElement();var C=!1;S.videoConstraints&&(S.isMediaStreamConstraintsValid()?C=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var A=C,I=document.getElementById(this.elementId);I.clientWidth?I.clientWidth:xi.DEFAULT_WIDTH,I.style.position="relative",this.shouldScan=!0,this.element=I;var D=this,U=this.stateManagerProxy.startTransition(rn.SCANNING);return new Promise(function(P,X){var W=A?S.videoConstraints:D.createVideoConstraints(r);if(!W){U.cancel(),X("videoConstraints should be defined");return}var se={};(!A||S.aspectRatio)&&(se.aspectRatio=S.aspectRatio);var me={onRenderSurfaceReady:function(ce,Y){D.setupUi(ce,Y,S),D.isScanning=!0,D.foreverScan(S,d,E)}};_m.failIfNotSupported().then(function(ce){ce.create(W).then(function(Y){return Y.render(m.element,se,me).then(function(fe){D.renderedCamera=fe,U.execute(),P(null)}).catch(function(fe){U.cancel(),X(fe)})}).catch(function(Y){U.cancel(),X(Xs.errorGettingUserMedia(Y))})}).catch(function(ce){U.cancel(),X(Xs.cameraStreamingNotSupported())})})},c.prototype.pause=function(r){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(rn.PAUSED),this.showPausedState(),(sr(r)||r!==!0)&&(r=!1),r&&this.renderedCamera&&this.renderedCamera.pause()},c.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var r=this,l=function(){r.stateManagerProxy.directTransition(rn.SCANNING),r.hidePausedState()};if(!this.renderedCamera.isPaused()){l();return}this.renderedCamera.resume(function(){l()})},c.prototype.getState=function(){return this.stateManagerProxy.getState()},c.prototype.stop=function(){var r=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var l=this.stateManagerProxy.startTransition(rn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var d=function(){if(r.element){var m=document.getElementById(xi.SHADED_REGION_ELEMENT_ID);m&&r.element.removeChild(m)}},x=this;return this.renderedCamera.close().then(function(){return x.renderedCamera=null,x.element&&(x.element.removeChild(x.canvasElement),x.canvasElement=null),d(),x.qrRegion&&(x.qrRegion=null),x.context&&(x.context=null),l.execute(),x.hidePausedState(),x.isScanning=!1,Promise.resolve()})},c.prototype.scanFile=function(r,l){return this.scanFileV2(r,l).then(function(d){return d.decodedText})},c.prototype.scanFileV2=function(r,l){var d=this;if(!r||!(r instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(sr(l)&&(l=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(x,m){d.possiblyCloseLastScanImageFile(),d.clearElement(),d.lastScanImageFile=URL.createObjectURL(r);var E=new Image;E.onload=function(){var S=E.width,C=E.height,A=document.getElementById(d.elementId),I=A.clientWidth?A.clientWidth:xi.DEFAULT_WIDTH,D=Math.max(A.clientHeight?A.clientHeight:C,xi.FILE_SCAN_MIN_HEIGHT),U=d.computeCanvasDrawConfig(S,C,I,D);if(l){var P=d.createCanvasElement(I,D,"qr-canvas-visible");P.style.display="inline-block",A.appendChild(P);var X=P.getContext("2d");if(!X)throw"Unable to get 2d context from canvas";X.canvas.width=I,X.canvas.height=D,X.drawImage(E,0,0,S,C,U.x,U.y,U.width,U.height)}var W=xi.FILE_SCAN_HIDDEN_CANVAS_PADDING,se=Math.max(E.width,U.width),me=Math.max(E.height,U.height),ce=se+2*W,Y=me+2*W,fe=d.createCanvasElement(ce,Y);A.appendChild(fe);var Se=fe.getContext("2d");if(!Se)throw"Unable to get 2d context from canvas";Se.canvas.width=ce,Se.canvas.height=Y,Se.drawImage(E,0,0,S,C,W,W,se,me);try{d.qrcode.decodeRobustlyAsync(fe).then(function(we){x(T1.createFromQrcodeResult(we))}).catch(m)}catch(we){m("QR code parse error, error = ".concat(we))}},E.onerror=m,E.onabort=m,E.onstalled=m,E.onsuspend=m,E.src=URL.createObjectURL(r)})},c.prototype.clear=function(){this.clearElement()},c.getCameras=function(){return Tm.retrieve()},c.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},c.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},c.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},c.prototype.applyVideoConstraints=function(r){if(r){if(!mg.isMediaStreamConstraintsValid(r,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(r)},c.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},c.prototype.getSupportedFormats=function(r){var l=[Ce.QR_CODE,Ce.AZTEC,Ce.CODABAR,Ce.CODE_39,Ce.CODE_93,Ce.CODE_128,Ce.DATA_MATRIX,Ce.MAXICODE,Ce.ITF,Ce.EAN_13,Ce.EAN_8,Ce.PDF_417,Ce.RSS_14,Ce.RSS_EXPANDED,Ce.UPC_A,Ce.UPC_E,Ce.UPC_EAN_EXTENSION];if(!r||typeof r=="boolean"||!r.formatsToSupport)return l;if(!Array.isArray(r.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(r.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var d=[],x=0,m=r.formatsToSupport;x<m.length;x++){var E=m[x];um(E)?d.push(E):this.logger.warn("Invalid format: ".concat(E," passed in config, ignoring."))}if(d.length===0)throw"None of formatsToSupport match supported values.";return d},c.prototype.getUseBarCodeDetectorIfSupported=function(r){if(sr(r))return!0;if(!sr(r.useBarCodeDetectorIfSupported))return r.useBarCodeDetectorIfSupported!==!1;if(sr(r.experimentalFeatures))return!0;var l=r.experimentalFeatures;return sr(l.useBarCodeDetectorIfSupported)?!0:l.useBarCodeDetectorIfSupported!==!1},c.prototype.validateQrboxSize=function(r,l,d){var x=this,m=d.qrbox;this.validateQrboxConfig(m);var E=this.toQrdimensions(r,l,m),S=function(A){if(A<xi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(xi.MIN_QR_BOX_SIZE,"px.")},C=function(A){return A>r&&(x.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),A=r),A};S(E.width),S(E.height),E.width=C(E.width)},c.prototype.validateQrboxConfig=function(r){if(typeof r!="number"&&typeof r!="function"&&(r.width===void 0||r.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},c.prototype.toQrdimensions=function(r,l,d){if(typeof d=="number")return{width:d,height:d};if(typeof d=="function")try{return d(r,l)}catch(x){throw new Error("qrbox config was passed as a function but it failed with unknown error"+x)}return d},c.prototype.setupUi=function(r,l,d){d.isShadedBoxEnabled()&&this.validateQrboxSize(r,l,d);var x=sr(d.qrbox)?{width:r,height:l}:d.qrbox;this.validateQrboxConfig(x);var m=this.toQrdimensions(r,l,x);m.height>l&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var E=d.isShadedBoxEnabled()&&m.height<=l,S={x:0,y:0,width:r,height:l},C=E?this.getShadedRegionBounds(r,l,m):S,A=this.createCanvasElement(C.width,C.height),I={willReadFrequently:!0},D=A.getContext("2d",I);D.canvas.width=C.width,D.canvas.height=C.height,this.element.append(A),E&&this.possiblyInsertShadingElement(this.element,r,l,m),this.createScannerPausedUiElement(this.element),this.qrRegion=C,this.context=D,this.canvasElement=A},c.prototype.createScannerPausedUiElement=function(r){var l=document.createElement("div");l.innerText=Xs.scannerPaused(),l.style.display="none",l.style.position="absolute",l.style.top="0px",l.style.zIndex="1",l.style.background="rgba(9, 9, 9, 0.46)",l.style.color="#FFECEC",l.style.textAlign="center",l.style.width="100%",r.appendChild(l),this.scannerPausedUiElement=l},c.prototype.scanContext=function(r,l){var d=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(x){return r(x.text,T1.createFromQrcodeResult(x)),d.possiblyUpdateShaders(!0),!0}).catch(function(x){d.possiblyUpdateShaders(!1);var m=Xs.codeParseError(x);return l(m,dg.createFrom(m)),!1})},c.prototype.foreverScan=function(r,l,d){var x=this;if(this.shouldScan&&this.renderedCamera){var m=this.renderedCamera.getSurface(),E=m.videoWidth/m.clientWidth,S=m.videoHeight/m.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var C=this.qrRegion.width*E,A=this.qrRegion.height*S,I=this.qrRegion.x*E,D=this.qrRegion.y*S;this.context.drawImage(m,I,D,C,A,0,0,this.qrRegion.width,this.qrRegion.height);var U=function(){x.foreverScanTimeout=setTimeout(function(){x.foreverScan(r,l,d)},x.getTimeoutFps(r.fps))};this.scanContext(l,d).then(function(P){!P&&r.disableFlip!==!0?(x.context.translate(x.context.canvas.width,0),x.context.scale(-1,1),x.scanContext(l,d).finally(function(){U()})):U()}).catch(function(P){x.logger.logError("Error happend while scanning context",P),U()})}},c.prototype.createVideoConstraints=function(r){if(typeof r=="string")return{deviceId:{exact:r}};if(typeof r=="object"){var l="facingMode",d="deviceId",x={user:!0,environment:!0},m="exact",E=function(X){if(X in x)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(X,"'")},S=Object.keys(r);if(S.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(S.length," keys");var C=Object.keys(r)[0];if(C!==l&&C!==d)throw"Only '".concat(l,"' and '").concat(d,"' ")+" are supported for 'cameraIdOrConfig'";if(C===l){var A=r.facingMode;if(typeof A=="string"){if(E(A))return{facingMode:A}}else if(typeof A=="object")if(m in A){if(E(A["".concat(m)]))return{facingMode:{exact:A["".concat(m)]}}}else throw"'facingMode' should be string or object with"+" ".concat(m," as key.");else{var I=typeof A;throw"Invalid type of 'facingMode' = ".concat(I)}}else{var D=r.deviceId;if(typeof D=="string")return{deviceId:D};if(typeof D=="object"){if(m in D)return{deviceId:{exact:D["".concat(m)]}};throw"'deviceId' should be string or object with"+" ".concat(m," as key.")}else{var U=typeof D;throw"Invalid type of 'deviceId' = ".concat(U)}}}var P=typeof r;throw"Invalid type of 'cameraIdOrConfig' = ".concat(P)},c.prototype.computeCanvasDrawConfig=function(r,l,d,x){if(r<=d&&l<=x){var m=(d-r)/2,E=(x-l)/2;return{x:m,y:E,width:r,height:l}}else{var S=r,C=l;return r>d&&(l=d/r*l,r=d),l>x&&(r=x/l*r,l=x),this.logger.log("Image downsampled from "+"".concat(S,"X").concat(C)+" to ".concat(r,"X").concat(l,".")),this.computeCanvasDrawConfig(r,l,d,x)}},c.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var r=document.getElementById(this.elementId);r&&(r.innerHTML="")},c.prototype.possiblyUpdateShaders=function(r){this.qrMatch!==r&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(l){l.style.backgroundColor=r?xi.BORDER_SHADER_MATCH_COLOR:xi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=r)},c.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},c.prototype.createCanvasElement=function(r,l,d){var x=r,m=l,E=document.createElement("canvas");return E.style.width="".concat(x,"px"),E.style.height="".concat(m,"px"),E.style.display="none",E.id=sr(d)?"qr-canvas":d,E},c.prototype.getShadedRegionBounds=function(r,l,d){if(d.width>r||d.height>l)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(r-d.width)/2,y:(l-d.height)/2,width:d.width,height:d.height}},c.prototype.possiblyInsertShadingElement=function(r,l,d,x){if(!(l-x.width<1||d-x.height<1)){var m=document.createElement("div");m.style.position="absolute";var E=(l-x.width)/2,S=(d-x.height)/2;if(m.style.borderLeft="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderRight="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderTop="".concat(S,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderBottom="".concat(S,"px solid rgba(0, 0, 0, 0.48)"),m.style.boxSizing="border-box",m.style.top="0px",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.id="".concat(xi.SHADED_REGION_ELEMENT_ID),l-x.width<11||d-x.height<11)this.hasBorderShaders=!1;else{var C=5,A=40;this.insertShaderBorders(m,A,C,-C,null,0,!0),this.insertShaderBorders(m,A,C,-C,null,0,!1),this.insertShaderBorders(m,A,C,null,-C,0,!0),this.insertShaderBorders(m,A,C,null,-C,0,!1),this.insertShaderBorders(m,C,A+C,-C,null,-C,!0),this.insertShaderBorders(m,C,A+C,null,-C,-C,!0),this.insertShaderBorders(m,C,A+C,-C,null,-C,!1),this.insertShaderBorders(m,C,A+C,null,-C,-C,!1),this.hasBorderShaders=!0}r.append(m)}},c.prototype.insertShaderBorders=function(r,l,d,x,m,E,S){var C=document.createElement("div");C.style.position="absolute",C.style.backgroundColor=xi.BORDER_SHADER_DEFAULT_COLOR,C.style.width="".concat(l,"px"),C.style.height="".concat(d,"px"),x!==null&&(C.style.top="".concat(x,"px")),m!==null&&(C.style.bottom="".concat(m,"px")),S?C.style.left="".concat(E,"px"):C.style.right="".concat(E,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(C),r.appendChild(C)},c.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},c.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},c.prototype.getTimeoutFps=function(r){return 1e3/r},c})(),uf="data:image/svg+xml;base64,",Mm=uf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Lm=uf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",k1=uf+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",Bm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",U1=(function(){function c(){}return c.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},c})(),km=(function(){function c(){this.data=U1.createDefault();var r=localStorage.getItem(c.LOCAL_STORAGE_KEY);r?this.data=JSON.parse(r):this.reset()}return c.prototype.hasCameraPermissions=function(){return this.data.hasPermission},c.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},c.prototype.setHasPermission=function(r){this.data.hasPermission=r,this.flush()},c.prototype.setLastUsedCameraId=function(r){this.data.lastUsedCameraId=r,this.flush()},c.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},c.prototype.reset=function(){this.data=U1.createDefault(),this.flush()},c.prototype.flush=function(){localStorage.setItem(c.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},c.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",c})(),Um=(function(){function c(){this.infoDiv=document.createElement("div")}return c.prototype.renderInto=function(r){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=N1.poweredBy();var l=document.createElement("a");l.innerText="ScanApp",l.href="https://scanapp.org",l.target="new",l.style.color="white",this.infoDiv.appendChild(l);var d=document.createElement("br"),x=document.createElement("br");this.infoDiv.appendChild(d),this.infoDiv.appendChild(x);var m=document.createElement("a");m.innerText=N1.reportIssues(),m.href="https://github.com/mebjas/html5-qrcode/issues",m.target="new",m.style.color="white",this.infoDiv.appendChild(m),r.appendChild(this.infoDiv)},c.prototype.show=function(){this.infoDiv.style.display="block"},c.prototype.hide=function(){this.infoDiv.style.display="none"},c})(),jm=(function(){function c(r,l){this.isShowingInfoIcon=!0,this.onTapIn=r,this.onTapOut=l,this.infoIcon=document.createElement("img")}return c.prototype.renderInto=function(r){var l=this;this.infoIcon.alt="Info icon",this.infoIcon.src=k1,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(d){return l.onHoverIn()},this.infoIcon.onmouseout=function(d){return l.onHoverOut()},this.infoIcon.onclick=function(d){return l.onClick()},r.appendChild(this.infoIcon)},c.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},c.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},c.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=Bm,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=k1,this.infoIcon.style.opacity="0.6")},c})(),Pm=(function(){function c(){var r=this;this.infoDiv=new Um,this.infoIcon=new jm(function(){r.infoDiv.show()},function(){r.infoDiv.hide()})}return c.prototype.renderInto=function(r){this.infoDiv.renderInto(r),this.infoIcon.renderInto(r)},c})(),zm=function(c,r,l,d){function x(m){return m instanceof l?m:new l(function(E){E(m)})}return new(l||(l=Promise))(function(m,E){function S(I){try{A(d.next(I))}catch(D){E(D)}}function C(I){try{A(d.throw(I))}catch(D){E(D)}}function A(I){I.done?m(I.value):x(I.value).then(S,C)}A((d=d.apply(c,r||[])).next())})},Fm=function(c,r){var l={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},d,x,m,E;return E={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function S(A){return function(I){return C([A,I])}}function C(A){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(l=0)),l;)try{if(d=1,x&&(m=A[0]&2?x.return:A[0]?x.throw||((m=x.return)&&m.call(x),0):x.next)&&!(m=m.call(x,A[1])).done)return m;switch(x=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return l.label++,{value:A[1],done:!1};case 5:l.label++,x=A[1],A=[0];continue;case 7:A=l.ops.pop(),l.trys.pop();continue;default:if(m=l.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){l=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){l.label=A[1];break}if(A[0]===6&&l.label<m[1]){l.label=m[1],m=A;break}if(m&&l.label<m[2]){l.label=m[2],l.ops.push(A);break}m[2]&&l.ops.pop(),l.trys.pop();continue}A=r.call(c,l)}catch(I){A=[6,I],x=0}finally{d=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},j1=(function(){function c(){}return c.hasPermissions=function(){return zm(this,void 0,void 0,function(){var r,l,d,x;return Fm(this,function(m){switch(m.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(r=m.sent(),l=0,d=r;l<d.length;l++)if(x=d[l],x.kind==="videoinput"&&x.label)return[2,!0];return[2,!1]}})})},c})(),ya=(function(){function c(r){this.supportedScanTypes=this.validateAndReturnScanTypes(r)}return c.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},c.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},c.prototype.isCameraScanRequired=function(){for(var r=0,l=this.supportedScanTypes;r<l.length;r++){var d=l[r];if(c.isCameraScanType(d))return!0}return!1},c.isCameraScanType=function(r){return r===Dr.SCAN_TYPE_CAMERA},c.isFileScanType=function(r){return r===Dr.SCAN_TYPE_FILE},c.prototype.validateAndReturnScanTypes=function(r){if(!r||r.length===0)return qi.DEFAULT_SUPPORTED_SCAN_TYPE;var l=qi.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(r.length>l)throw"Max ".concat(l," values expected for ")+"supportedScanTypes";for(var d=0,x=r;d<x.length;d++){var m=x[d];if(!qi.DEFAULT_SUPPORTED_SCAN_TYPE.includes(m))throw"Unsupported scan type ".concat(m)}return r},c})(),wi=(function(){function c(){}return c.ALL_ELEMENT_CLASS="html5-qrcode-element",c.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",c.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",c.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",c.TORCH_BUTTON_ID="html5-qrcode-button-torch",c.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",c.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",c.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",c.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",c.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",c.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",c})(),Rr=(function(){function c(){}return c.createElement=function(r,l){var d=document.createElement(r);return d.id=l,d.classList.add(wi.ALL_ELEMENT_CLASS),r==="button"&&d.setAttribute("type","button"),d},c})(),xg=function(c,r,l,d){function x(m){return m instanceof l?m:new l(function(E){E(m)})}return new(l||(l=Promise))(function(m,E){function S(I){try{A(d.next(I))}catch(D){E(D)}}function C(I){try{A(d.throw(I))}catch(D){E(D)}}function A(I){I.done?m(I.value):x(I.value).then(S,C)}A((d=d.apply(c,r||[])).next())})},yg=function(c,r){var l={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},d,x,m,E;return E={next:S(0),throw:S(1),return:S(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function S(A){return function(I){return C([A,I])}}function C(A){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,A[0]&&(l=0)),l;)try{if(d=1,x&&(m=A[0]&2?x.return:A[0]?x.throw||((m=x.return)&&m.call(x),0):x.next)&&!(m=m.call(x,A[1])).done)return m;switch(x=0,m&&(A=[A[0]&2,m.value]),A[0]){case 0:case 1:m=A;break;case 4:return l.label++,{value:A[1],done:!1};case 5:l.label++,x=A[1],A=[0];continue;case 7:A=l.ops.pop(),l.trys.pop();continue;default:if(m=l.trys,!(m=m.length>0&&m[m.length-1])&&(A[0]===6||A[0]===2)){l=0;continue}if(A[0]===3&&(!m||A[1]>m[0]&&A[1]<m[3])){l.label=A[1];break}if(A[0]===6&&l.label<m[1]){l.label=m[1],m=A;break}if(m&&l.label<m[2]){l.label=m[2],l.ops.push(A);break}m[2]&&l.ops.pop(),l.trys.pop();continue}A=r.call(c,l)}catch(I){A=[6,I],x=0}finally{d=m=0}if(A[0]&5)throw A[1];return{value:A[0]?A[1]:void 0,done:!0}}},P1=(function(){function c(r,l,d){this.isTorchOn=!1,this.torchCapability=r,this.buttonController=l,this.onTorchActionFailureCallback=d}return c.prototype.isTorchEnabled=function(){return this.isTorchOn},c.prototype.flipState=function(){return xg(this,void 0,void 0,function(){var r,l;return yg(this,function(d){switch(d.label){case 0:this.buttonController.disable(),r=!this.isTorchOn,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this.torchCapability.apply(r)];case 2:return d.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),r),[3,4];case 3:return l=d.sent(),this.propagateFailure(r,l),this.buttonController.enable(),[3,4];case 4:return[2]}})})},c.prototype.updateUiBasedOnLatestSettings=function(r,l){r===l?(this.buttonController.setText(l?Ot.torchOffButton():Ot.torchOnButton()),this.isTorchOn=l):this.propagateFailure(l),this.buttonController.enable()},c.prototype.propagateFailure=function(r,l){var d=r?Ot.torchOnFailedMessage():Ot.torchOffFailedMessage();l&&(d+="; Error = "+l),this.onTorchActionFailureCallback(d)},c.prototype.reset=function(){this.isTorchOn=!1},c})(),Hm=(function(){function c(r,l){this.onTorchActionFailureCallback=l,this.torchButton=Rr.createElement("button",wi.TORCH_BUTTON_ID),this.torchController=new P1(r,this,l)}return c.prototype.render=function(r,l){var d=this;this.torchButton.innerText=Ot.torchOnButton(),this.torchButton.style.display=l.display,this.torchButton.style.marginLeft=l.marginLeft;var x=this;this.torchButton.addEventListener("click",function(m){return xg(d,void 0,void 0,function(){return yg(this,function(E){switch(E.label){case 0:return[4,x.torchController.flipState()];case 1:return E.sent(),x.torchController.isTorchEnabled()?(x.torchButton.classList.remove(wi.TORCH_BUTTON_CLASS_TORCH_OFF),x.torchButton.classList.add(wi.TORCH_BUTTON_CLASS_TORCH_ON)):(x.torchButton.classList.remove(wi.TORCH_BUTTON_CLASS_TORCH_ON),x.torchButton.classList.add(wi.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),r.appendChild(this.torchButton)},c.prototype.updateTorchCapability=function(r){this.torchController=new P1(r,this,this.onTorchActionFailureCallback)},c.prototype.getTorchButton=function(){return this.torchButton},c.prototype.hide=function(){this.torchButton.style.display="none"},c.prototype.show=function(){this.torchButton.style.display="inline-block"},c.prototype.disable=function(){this.torchButton.disabled=!0},c.prototype.enable=function(){this.torchButton.disabled=!1},c.prototype.setText=function(r){this.torchButton.innerText=r},c.prototype.reset=function(){this.torchButton.innerText=Ot.torchOnButton(),this.torchController.reset()},c.create=function(r,l,d,x){var m=new c(l,x);return m.render(r,d),m},c})(),Gm=(function(){function c(r,l,d){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=l?"block":"none",r.appendChild(this.fileBasedScanRegion);var x=document.createElement("label");x.setAttribute("for",this.getFileScanInputId()),x.style.display="inline-block",this.fileBasedScanRegion.appendChild(x),this.fileSelectionButton=Rr.createElement("button",wi.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(S){x.click()}),x.append(this.fileSelectionButton),this.fileScanInput=Rr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",x.appendChild(this.fileScanInput);var m=this;this.fileScanInput.addEventListener("change",function(S){if(!(S==null||S.target==null)){var C=S.target;if(!(C.files&&C.files.length===0)){var A=C.files,I=A[0],D=I.name;m.setImageNameToButton(D),d(I)}}});var E=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(E),this.fileBasedScanRegion.addEventListener("dragenter",function(S){m.fileBasedScanRegion.style.border=m.fileBasedScanRegionActiveBorder(),S.stopPropagation(),S.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(S){m.fileBasedScanRegion.style.border=m.fileBasedScanRegionDefaultBorder(),S.stopPropagation(),S.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(S){m.fileBasedScanRegion.style.border=m.fileBasedScanRegionActiveBorder(),S.stopPropagation(),S.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(S){S.stopPropagation(),S.preventDefault(),m.fileBasedScanRegion.style.border=m.fileBasedScanRegionDefaultBorder();var C=S.dataTransfer;if(C){var A=C.files;if(!A||A.length===0)return;for(var I=!1,D=0;D<A.length;++D){var U=A.item(D);if(U){var P=/image.*/;if(U.type.match(P)){I=!0;var X=U.name;m.setImageNameToButton(X),d(U),E.innerText=Ot.dragAndDropMessage();break}}}I||(E.innerText=Ot.dragAndDropMessageOnlyImages())}})}return c.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},c.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},c.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},c.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},c.prototype.createFileBasedScanRegion=function(){var r=document.createElement("div");return r.style.textAlign="center",r.style.margin="auto",r.style.width="80%",r.style.maxWidth="600px",r.style.border=this.fileBasedScanRegionDefaultBorder(),r.style.padding="10px",r.style.marginBottom="10px",r},c.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},c.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},c.prototype.createDragAndDropMessage=function(){var r=document.createElement("div");return r.innerText=Ot.dragAndDropMessage(),r.style.fontWeight="400",r},c.prototype.setImageNameToButton=function(r){var l=20;if(r.length>l){var d=r.substring(0,8),x=r.length,m=r.substring(x-8,x);r="".concat(d,"....").concat(m)}var E=Ot.fileSelectionChooseAnother()+" - "+r;this.fileSelectionButton.innerText=E},c.prototype.setInitialValueToButton=function(){var r=Ot.fileSelectionChooseImage()+" - "+Ot.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=r},c.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},c.create=function(r,l,d){var x=new c(r,l,d);return x},c})(),Vm=(function(){function c(r){this.selectElement=Rr.createElement("select",wi.CAMERA_SELECTION_SELECT_ID),this.cameras=r,this.options=[]}return c.prototype.render=function(r){var l=document.createElement("span");l.style.marginRight="10px";var d=this.cameras.length;if(d===0)throw new Error("No cameras found");if(d===1)l.style.display="none";else{var x=Ot.selectCamera();l.innerText="".concat(x," (").concat(this.cameras.length,")  ")}for(var m=1,E=0,S=this.cameras;E<S.length;E++){var C=S[E],A=C.id,I=C.label==null?A:C.label;(!I||I==="")&&(I=[Ot.anonymousCameraPrefix(),m++].join(" "));var D=document.createElement("option");D.value=A,D.innerText=I,this.options.push(D),this.selectElement.appendChild(D)}l.appendChild(this.selectElement),r.appendChild(l)},c.prototype.disable=function(){this.selectElement.disabled=!0},c.prototype.isDisabled=function(){return this.selectElement.disabled===!0},c.prototype.enable=function(){this.selectElement.disabled=!1},c.prototype.getValue=function(){return this.selectElement.value},c.prototype.hasValue=function(r){for(var l=0,d=this.options;l<d.length;l++){var x=d[l];if(x.value===r)return!0}return!1},c.prototype.setValue=function(r){if(!this.hasValue(r))throw new Error("".concat(r," is not present in the camera list."));this.selectElement.value=r},c.prototype.hasSingleItem=function(){return this.cameras.length===1},c.prototype.numCameras=function(){return this.cameras.length},c.create=function(r,l){var d=new c(l);return d.render(r),d},c})(),Ym=(function(){function c(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Rr.createElement("input",wi.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return c.prototype.render=function(r,l){this.zoomElementContainer.style.display=l?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",r.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var d=Ot.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(d),this.rangeText.style.marginRight="10px";var x=this;this.rangeInput.addEventListener("input",function(){return x.onValueChange()}),this.rangeInput.addEventListener("change",function(){return x.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},c.prototype.onValueChange=function(){var r=Ot.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},c.prototype.setValues=function(r,l,d,x){this.rangeInput.min=r.toString(),this.rangeInput.max=l.toString(),this.rangeInput.step=x.toString(),this.rangeInput.value=d.toString(),this.onValueChange()},c.prototype.show=function(){this.zoomElementContainer.style.display="block"},c.prototype.hide=function(){this.zoomElementContainer.style.display="none"},c.prototype.setOnCameraZoomValueChangeCallback=function(r){this.onChangeCallback=r},c.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},c.create=function(r,l){var d=new c;return d.render(r,l),d},c})(),yi;(function(c){c[c.STATUS_DEFAULT=0]="STATUS_DEFAULT",c[c.STATUS_SUCCESS=1]="STATUS_SUCCESS",c[c.STATUS_WARNING=2]="STATUS_WARNING",c[c.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(yi||(yi={}));function qm(c){return{fps:c.fps,qrbox:c.qrbox,aspectRatio:c.aspectRatio,disableFlip:c.disableFlip,videoConstraints:c.videoConstraints}}function Xm(c,r){return{formatsToSupport:c.formatsToSupport,useBarCodeDetectorIfSupported:c.useBarCodeDetectorIfSupported,experimentalFeatures:c.experimentalFeatures,verbose:r}}var Wm=(function(){function c(r,l,d){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=r,this.config=this.createConfig(l),this.verbose=d===!0,!document.getElementById(r))throw"HTML Element with id=".concat(r," not found");this.scanTypeSelector=new ya(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new gg(this.verbose),this.persistedDataManager=new km,l.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return c.prototype.render=function(r,l){var d=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(m,E){if(r)r(m,E);else{if(d.lastMatchFound===m)return;d.lastMatchFound=m,d.setHeaderMessage(Ot.lastMatch(m),yi.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(m,E){l&&l(m,E)};var x=document.getElementById(this.elementId);if(!x)throw"HTML Element with id=".concat(this.elementId," not found");x.innerHTML="",this.createBasicLayout(x),this.html5Qrcode=new Kh(this.getScanRegionId(),Xm(this.config,this.verbose))},c.prototype.pause=function(r){(sr(r)||r!==!0)&&(r=!1),this.getHtml5QrcodeOrFail().pause(r)},c.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},c.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},c.prototype.clear=function(){var r=this,l=function(){var d=document.getElementById(r.elementId);d&&(d.innerHTML="",r.resetBasicLayout(d))};return this.html5Qrcode?new Promise(function(d,x){if(!r.html5Qrcode){d();return}r.html5Qrcode.isScanning?r.html5Qrcode.stop().then(function(m){if(!r.html5Qrcode){d();return}r.html5Qrcode.clear(),l(),d()}).catch(function(m){r.verbose&&r.logger.logError("Unable to stop qrcode scanner",m),x(m)}):(r.html5Qrcode.clear(),l(),d())}):Promise.resolve()},c.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},c.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},c.prototype.applyVideoConstraints=function(r){return this.getHtml5QrcodeOrFail().applyVideoConstraints(r)},c.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},c.prototype.createConfig=function(r){return r?(r.fps||(r.fps=qi.SCAN_DEFAULT_FPS),r.rememberLastUsedCamera!==!qi.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(r.rememberLastUsedCamera=qi.DEFAULT_REMEMBER_LAST_CAMERA_USED),r.supportedScanTypes||(r.supportedScanTypes=qi.DEFAULT_SUPPORTED_SCAN_TYPE),r):{fps:qi.SCAN_DEFAULT_FPS,rememberLastUsedCamera:qi.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:qi.DEFAULT_SUPPORTED_SCAN_TYPE}},c.prototype.createBasicLayout=function(r){r.style.position="relative",r.style.padding="0px",r.style.border="1px solid silver",this.createHeader(r);var l=document.createElement("div"),d=this.getScanRegionId();l.id=d,l.style.width="100%",l.style.minHeight="100px",l.style.textAlign="center",r.appendChild(l),ya.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var x=document.createElement("div"),m=this.getDashboardId();x.id=m,x.style.width="100%",r.appendChild(x),this.setupInitialDashboard(x)},c.prototype.resetBasicLayout=function(r){r.style.border="none"},c.prototype.setupInitialDashboard=function(r){this.createSection(r),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},c.prototype.createHeader=function(r){var l=document.createElement("div");l.style.textAlign="left",l.style.margin="0px",r.appendChild(l);var d=new Pm;d.renderInto(l);var x=document.createElement("div");x.id=this.getHeaderMessageContainerId(),x.style.display="none",x.style.textAlign="center",x.style.fontSize="14px",x.style.padding="2px 10px",x.style.margin="4px",x.style.borderTop="1px solid #f6f6f6",l.appendChild(x)},c.prototype.createSection=function(r){var l=document.createElement("div");l.id=this.getDashboardSectionId(),l.style.width="100%",l.style.padding="10px 0px 10px 0px",l.style.textAlign="left",r.appendChild(l)},c.prototype.createCameraListUi=function(r,l,d){var x=this;x.showHideScanTypeSwapLink(!1),x.setHeaderMessage(Ot.cameraPermissionRequesting());var m=function(){d||x.createPermissionButton(r,l)};Kh.getCameras().then(function(E){x.persistedDataManager.setHasPermission(!0),x.showHideScanTypeSwapLink(!0),x.resetHeaderMessage(),E&&E.length>0?(r.removeChild(l),x.renderCameraSelection(E)):(x.setHeaderMessage(Ot.noCameraFound(),yi.STATUS_WARNING),m())}).catch(function(E){x.persistedDataManager.setHasPermission(!1),d?d.disabled=!1:m(),x.setHeaderMessage(E,yi.STATUS_WARNING),x.showHideScanTypeSwapLink(!0)})},c.prototype.createPermissionButton=function(r,l){var d=this,x=Rr.createElement("button",this.getCameraPermissionButtonId());x.innerText=Ot.cameraPermissionTitle(),x.addEventListener("click",function(){x.disabled=!0,d.createCameraListUi(r,l,x)}),l.appendChild(x)},c.prototype.createPermissionsUi=function(r,l){var d=this;if(ya.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){j1.hasPermissions().then(function(x){x?d.createCameraListUi(r,l):(d.persistedDataManager.setHasPermission(!1),d.createPermissionButton(r,l))}).catch(function(x){d.persistedDataManager.setHasPermission(!1),d.createPermissionButton(r,l)});return}this.createPermissionButton(r,l)},c.prototype.createSectionControlPanel=function(){var r=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");r.appendChild(l);var d=document.createElement("div");d.id=this.getDashboardSectionCameraScanRegionId(),d.style.display=ya.isCameraScanType(this.currentScanType)?"block":"none",l.appendChild(d);var x=document.createElement("div");x.style.textAlign="center",d.appendChild(x),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(d,x),this.renderFileScanUi(l)},c.prototype.renderFileScanUi=function(r){var l=ya.isFileScanType(this.currentScanType),d=this,x=function(m){if(!d.html5Qrcode)throw"html5Qrcode not defined";ya.isFileScanType(d.currentScanType)&&(d.setHeaderMessage(Ot.loadingImage()),d.html5Qrcode.scanFileV2(m,!0).then(function(E){d.resetHeaderMessage(),d.qrCodeSuccessCallback(E.decodedText,E)}).catch(function(E){d.setHeaderMessage(E,yi.STATUS_WARNING),d.qrCodeErrorCallback(E,dg.createFrom(E))}))};this.fileSelectionUi=Gm.create(r,l,x)},c.prototype.renderCameraSelection=function(r){var l=this,d=this,x=document.getElementById(this.getDashboardSectionCameraScanRegionId());x.style.textAlign="center";var m=Ym.create(x,!1),E=function(W){var se=W.zoomFeature();if(se.isSupported()){m.setOnCameraZoomValueChangeCallback(function(ce){se.apply(ce)});var me=1;l.config.defaultZoomValueIfSupported&&(me=l.config.defaultZoomValueIfSupported),me=hm(me,se.min(),se.max()),m.setValues(se.min(),se.max(),me,se.step()),m.show()}},S=Vm.create(x,r),C=document.createElement("span"),A=Rr.createElement("button",wi.CAMERA_START_BUTTON_ID);A.innerText=Ot.scanButtonStartScanningText(),C.appendChild(A);var I=Rr.createElement("button",wi.CAMERA_STOP_BUTTON_ID);I.innerText=Ot.scanButtonStopScanningText(),I.style.display="none",I.disabled=!0,C.appendChild(I);var D,U=function(W){if(!W.torchFeature().isSupported()){D&&D.hide();return}D?D.updateTorchCapability(W.torchFeature()):D=Hm.create(C,W.torchFeature(),{display:"none",marginLeft:"5px"},function(se){d.setHeaderMessage(se,yi.STATUS_WARNING)}),D.show()};x.appendChild(C);var P=function(W){W||(A.style.display="none"),A.innerText=Ot.scanButtonStartScanningText(),A.style.opacity="1",A.disabled=!1,W&&(A.style.display="inline-block")};if(A.addEventListener("click",function(W){A.innerText=Ot.scanButtonScanningStarting(),S.disable(),A.disabled=!0,A.style.opacity="0.5",l.scanTypeSelector.hasMoreThanOneScanType()&&d.showHideScanTypeSwapLink(!1),d.resetHeaderMessage();var se=S.getValue();d.persistedDataManager.setLastUsedCameraId(se),d.html5Qrcode.start(se,qm(d.config),d.qrCodeSuccessCallback,d.qrCodeErrorCallback).then(function(me){I.disabled=!1,I.style.display="inline-block",P(!1);var ce=d.html5Qrcode.getRunningTrackCameraCapabilities();l.config.showTorchButtonIfSupported===!0&&U(ce),l.config.showZoomSliderIfSupported===!0&&E(ce)}).catch(function(me){d.showHideScanTypeSwapLink(!0),S.enable(),P(!0),d.setHeaderMessage(me,yi.STATUS_WARNING)})}),S.hasSingleItem()&&A.click(),I.addEventListener("click",function(W){if(!d.html5Qrcode)throw"html5Qrcode not defined";I.disabled=!0,d.html5Qrcode.stop().then(function(se){l.scanTypeSelector.hasMoreThanOneScanType()&&d.showHideScanTypeSwapLink(!0),S.enable(),A.disabled=!1,I.style.display="none",A.style.display="inline-block",D&&(D.reset(),D.hide()),m.removeOnCameraZoomValueChangeCallback(),m.hide(),d.insertCameraScanImageToScanRegion()}).catch(function(se){I.disabled=!1,d.setHeaderMessage(se,yi.STATUS_WARNING)})}),d.persistedDataManager.getLastUsedCameraId()){var X=d.persistedDataManager.getLastUsedCameraId();S.hasValue(X)?(S.setValue(X),A.click()):d.persistedDataManager.resetLastUsedCameraId()}},c.prototype.createSectionSwap=function(){var r=this,l=Ot.textIfCameraScanSelected(),d=Ot.textIfFileScanSelected(),x=document.getElementById(this.getDashboardSectionId()),m=document.createElement("div");m.style.textAlign="center";var E=Rr.createElement("span",this.getDashboardSectionSwapLinkId());E.style.textDecoration="underline",E.style.cursor="pointer",E.innerText=ya.isCameraScanType(this.currentScanType)?l:d,E.addEventListener("click",function(){if(!r.sectionSwapAllowed){r.verbose&&r.logger.logError("Section swap called when not allowed");return}r.resetHeaderMessage(),r.fileSelectionUi.resetValue(),r.sectionSwapAllowed=!1,ya.isCameraScanType(r.currentScanType)?(r.clearScanRegion(),r.getCameraScanRegion().style.display="none",r.fileSelectionUi.show(),E.innerText=d,r.currentScanType=Dr.SCAN_TYPE_FILE,r.insertFileScanImageToScanRegion()):(r.clearScanRegion(),r.getCameraScanRegion().style.display="block",r.fileSelectionUi.hide(),E.innerText=l,r.currentScanType=Dr.SCAN_TYPE_CAMERA,r.insertCameraScanImageToScanRegion(),r.startCameraScanIfPermissionExistsOnSwap()),r.sectionSwapAllowed=!0}),m.appendChild(E),x.appendChild(m)},c.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var r=this,l=this;if(this.persistedDataManager.hasCameraPermissions()){j1.hasPermissions().then(function(d){if(d){var x=document.getElementById(l.getCameraPermissionButtonId());if(!x)throw r.logger.logError("Permission button not found, fail;"),"Permission button not found";x.click()}else l.persistedDataManager.setHasPermission(!1)}).catch(function(d){l.persistedDataManager.setHasPermission(!1)});return}},c.prototype.resetHeaderMessage=function(){var r=document.getElementById(this.getHeaderMessageContainerId());r.style.display="none"},c.prototype.setHeaderMessage=function(r,l){l||(l=yi.STATUS_DEFAULT);var d=this.getHeaderMessageDiv();switch(d.innerText=r,d.style.display="block",l){case yi.STATUS_SUCCESS:d.style.background="rgba(106, 175, 80, 0.26)",d.style.color="#477735";break;case yi.STATUS_WARNING:d.style.background="rgba(203, 36, 49, 0.14)",d.style.color="#cb2431";break;case yi.STATUS_DEFAULT:default:d.style.background="rgba(0, 0, 0, 0)",d.style.color="rgb(17, 17, 17)";break}},c.prototype.showHideScanTypeSwapLink=function(r){this.scanTypeSelector.hasMoreThanOneScanType()&&(r!==!0&&(r=!1),this.sectionSwapAllowed=r,this.getDashboardSectionSwapLink().style.display=r?"inline-block":"none")},c.prototype.insertCameraScanImageToScanRegion=function(){var r=this,l=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){l.innerHTML="<br>",l.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(d){l.innerHTML="<br>",l.appendChild(r.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Mm,this.cameraScanImage.alt=Ot.cameraScanAltText()},c.prototype.insertFileScanImageToScanRegion=function(){var r=this,l=document.getElementById(this.getScanRegionId());if(this.fileScanImage){l.innerHTML="<br>",l.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(d){l.innerHTML="<br>",l.appendChild(r.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Lm,this.fileScanImage.alt=Ot.fileScanAltText()},c.prototype.clearScanRegion=function(){var r=document.getElementById(this.getScanRegionId());r.innerHTML=""},c.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},c.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},c.prototype.getDashboardSectionSwapLinkId=function(){return wi.SCAN_TYPE_CHANGE_ANCHOR_ID},c.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},c.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},c.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},c.prototype.getCameraPermissionButtonId=function(){return wi.CAMERA_PERMISSION_BUTTON_ID},c.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},c.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},c.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},c})();function Uc(c,r){var l={};for(var d in c)Object.prototype.hasOwnProperty.call(c,d)&&r.indexOf(d)<0&&(l[d]=c[d]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var x=0,d=Object.getOwnPropertySymbols(c);x<d.length;x++)r.indexOf(d[x])<0&&Object.prototype.propertyIsEnumerable.call(c,d[x])&&(l[d[x]]=c[d[x]]);return l}function Zm(c,r,l,d){function x(m){return m instanceof l?m:new l(function(E){E(m)})}return new(l||(l=Promise))(function(m,E){function S(I){try{A(d.next(I))}catch(D){E(D)}}function C(I){try{A(d.throw(I))}catch(D){E(D)}}function A(I){I.done?m(I.value):x(I.value).then(S,C)}A((d=d.apply(c,r||[])).next())})}const Km=c=>c?(...r)=>c(...r):(...r)=>fetch(...r);class hf extends Error{constructor(r,l="FunctionsError",d){super(r),this.name=l,this.context=d}}class Qm extends hf{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class z1 extends hf{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class F1 extends hf{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var Qh;(function(c){c.Any="any",c.ApNortheast1="ap-northeast-1",c.ApNortheast2="ap-northeast-2",c.ApSouth1="ap-south-1",c.ApSoutheast1="ap-southeast-1",c.ApSoutheast2="ap-southeast-2",c.CaCentral1="ca-central-1",c.EuCentral1="eu-central-1",c.EuWest1="eu-west-1",c.EuWest2="eu-west-2",c.EuWest3="eu-west-3",c.SaEast1="sa-east-1",c.UsEast1="us-east-1",c.UsWest1="us-west-1",c.UsWest2="us-west-2"})(Qh||(Qh={}));class Jm{constructor(r,{headers:l={},customFetch:d,region:x=Qh.Any}={}){this.url=r,this.headers=l,this.region=x,this.fetch=Km(d)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return Zm(this,arguments,void 0,function*(l,d={}){var x;let m,E;try{const{headers:S,method:C,body:A,signal:I,timeout:D}=d;let U={},{region:P}=d;P||(P=this.region);const X=new URL(`${this.url}/${l}`);P&&P!=="any"&&(U["x-region"]=P,X.searchParams.set("forceFunctionRegion",P));let W;A&&(S&&!Object.prototype.hasOwnProperty.call(S,"Content-Type")||!S)?typeof Blob<"u"&&A instanceof Blob||A instanceof ArrayBuffer?(U["Content-Type"]="application/octet-stream",W=A):typeof A=="string"?(U["Content-Type"]="text/plain",W=A):typeof FormData<"u"&&A instanceof FormData?W=A:(U["Content-Type"]="application/json",W=JSON.stringify(A)):A&&typeof A!="string"&&!(typeof Blob<"u"&&A instanceof Blob)&&!(A instanceof ArrayBuffer)&&!(typeof FormData<"u"&&A instanceof FormData)?W=JSON.stringify(A):W=A;let se=I;D&&(E=new AbortController,m=setTimeout(()=>E.abort(),D),I?(se=E.signal,I.addEventListener("abort",()=>E.abort())):se=E.signal);const me=yield this.fetch(X.toString(),{method:C||"POST",headers:Object.assign(Object.assign(Object.assign({},U),this.headers),S),body:W,signal:se}).catch(Se=>{throw new Qm(Se)}),ce=me.headers.get("x-relay-error");if(ce&&ce==="true")throw new z1(me);if(!me.ok)throw new F1(me);let Y=((x=me.headers.get("Content-Type"))!==null&&x!==void 0?x:"text/plain").split(";")[0].trim(),fe;return Y==="application/json"?fe=yield me.json():Y==="application/octet-stream"||Y==="application/pdf"?fe=yield me.blob():Y==="text/event-stream"?fe=me:Y==="multipart/form-data"?fe=yield me.formData():fe=yield me.text(),{data:fe,error:null,response:me}}catch(S){return{data:null,error:S,response:S instanceof F1||S instanceof z1?S.context:void 0}}finally{m&&clearTimeout(m)}})}}var $m=class extends Error{constructor(c){super(c.message),this.name="PostgrestError",this.details=c.details,this.hint=c.hint,this.code=c.code}},ep=class{constructor(c){var r,l,d;this.shouldThrowOnError=!1,this.method=c.method,this.url=c.url,this.headers=new Headers(c.headers),this.schema=c.schema,this.body=c.body,this.shouldThrowOnError=(r=c.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=c.signal,this.isMaybeSingle=(l=c.isMaybeSingle)!==null&&l!==void 0?l:!1,this.urlLengthLimit=(d=c.urlLengthLimit)!==null&&d!==void 0?d:8e3,c.fetch?this.fetch=c.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,r){return this.headers=new Headers(this.headers),this.headers.set(c,r),this}then(c,r){var l=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let x=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{let E=null,S=null,C=null,A=m.status,I=m.statusText;if(m.ok){var D,U;if(l.method!=="HEAD"){var P;const me=await m.text();me===""||(l.headers.get("Accept")==="text/csv"||l.headers.get("Accept")&&(!((P=l.headers.get("Accept"))===null||P===void 0)&&P.includes("application/vnd.pgrst.plan+text"))?S=me:S=JSON.parse(me))}const W=(D=l.headers.get("Prefer"))===null||D===void 0?void 0:D.match(/count=(exact|planned|estimated)/),se=(U=m.headers.get("content-range"))===null||U===void 0?void 0:U.split("/");W&&se&&se.length>1&&(C=parseInt(se[1])),l.isMaybeSingle&&l.method==="GET"&&Array.isArray(S)&&(S.length>1?(E={code:"PGRST116",details:`Results contain ${S.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},S=null,C=null,A=406,I="Not Acceptable"):S.length===1?S=S[0]:S=null)}else{var X;const W=await m.text();try{E=JSON.parse(W),Array.isArray(E)&&m.status===404&&(S=[],E=null,A=200,I="OK")}catch{m.status===404&&W===""?(A=204,I="No Content"):E={message:W}}if(E&&l.isMaybeSingle&&(!(E==null||(X=E.details)===null||X===void 0)&&X.includes("0 rows"))&&(E=null,A=200,I="OK"),E&&l.shouldThrowOnError)throw new $m(E)}return{error:E,data:S,count:C,status:A,statusText:I}});return this.shouldThrowOnError||(x=x.catch(m=>{var E;let S="",C="",A="";const I=m?.cause;if(I){var D,U,P,X;const me=(D=I?.message)!==null&&D!==void 0?D:"",ce=(U=I?.code)!==null&&U!==void 0?U:"";S=`${(P=m?.name)!==null&&P!==void 0?P:"FetchError"}: ${m?.message}`,S+=`

Caused by: ${(X=I?.name)!==null&&X!==void 0?X:"Error"}: ${me}`,ce&&(S+=` (${ce})`),I?.stack&&(S+=`
${I.stack}`)}else{var W;S=(W=m?.stack)!==null&&W!==void 0?W:""}const se=this.url.toString().length;return m?.name==="AbortError"||m?.code==="ABORT_ERR"?(A="",C="Request was aborted (timeout or manual cancellation)",se>this.urlLengthLimit&&(C+=`. Note: Your request URL is ${se} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(I?.name==="HeadersOverflowError"||I?.code==="UND_ERR_HEADERS_OVERFLOW")&&(A="",C="HTTP headers exceeded server limits (typically 16KB)",se>this.urlLengthLimit&&(C+=`. Your request URL is ${se} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(E=m?.name)!==null&&E!==void 0?E:"FetchError"}: ${m?.message}`,details:S,hint:C,code:A},data:null,count:null,status:0,statusText:""}})),x.then(c,r)}returns(){return this}overrideTypes(){return this}},tp=class extends ep{select(c){let r=!1;const l=(c??"*").split("").map(d=>/\s/.test(d)&&!r?"":(d==='"'&&(r=!r),d)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(c,{ascending:r=!0,nullsFirst:l,foreignTable:d,referencedTable:x=d}={}){const m=x?`${x}.order`:"order",E=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${E?`${E},`:""}${c}.${r?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(c,{foreignTable:r,referencedTable:l=r}={}){const d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${c}`),this}range(c,r,{foreignTable:l,referencedTable:d=l}={}){const x=typeof d>"u"?"offset":`${d}.offset`,m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(x,`${c}`),this.url.searchParams.set(m,`${r-c+1}`),this}abortSignal(c){return this.signal=c,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:c=!1,verbose:r=!1,settings:l=!1,buffers:d=!1,wal:x=!1,format:m="text"}={}){var E;const S=[c?"analyze":null,r?"verbose":null,l?"settings":null,d?"buffers":null,x?"wal":null].filter(Boolean).join("|"),C=(E=this.headers.get("Accept"))!==null&&E!==void 0?E:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${C}"; options=${S};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(c){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${c}`),this}};const H1=new RegExp("[,()]");var Vs=class extends tp{eq(c,r){return this.url.searchParams.append(c,`eq.${r}`),this}neq(c,r){return this.url.searchParams.append(c,`neq.${r}`),this}gt(c,r){return this.url.searchParams.append(c,`gt.${r}`),this}gte(c,r){return this.url.searchParams.append(c,`gte.${r}`),this}lt(c,r){return this.url.searchParams.append(c,`lt.${r}`),this}lte(c,r){return this.url.searchParams.append(c,`lte.${r}`),this}like(c,r){return this.url.searchParams.append(c,`like.${r}`),this}likeAllOf(c,r){return this.url.searchParams.append(c,`like(all).{${r.join(",")}}`),this}likeAnyOf(c,r){return this.url.searchParams.append(c,`like(any).{${r.join(",")}}`),this}ilike(c,r){return this.url.searchParams.append(c,`ilike.${r}`),this}ilikeAllOf(c,r){return this.url.searchParams.append(c,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(c,r){return this.url.searchParams.append(c,`ilike(any).{${r.join(",")}}`),this}regexMatch(c,r){return this.url.searchParams.append(c,`match.${r}`),this}regexIMatch(c,r){return this.url.searchParams.append(c,`imatch.${r}`),this}is(c,r){return this.url.searchParams.append(c,`is.${r}`),this}isDistinct(c,r){return this.url.searchParams.append(c,`isdistinct.${r}`),this}in(c,r){const l=Array.from(new Set(r)).map(d=>typeof d=="string"&&H1.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(c,`in.(${l})`),this}notIn(c,r){const l=Array.from(new Set(r)).map(d=>typeof d=="string"&&H1.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(c,`not.in.(${l})`),this}contains(c,r){return typeof r=="string"?this.url.searchParams.append(c,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(c,`cs.{${r.join(",")}}`):this.url.searchParams.append(c,`cs.${JSON.stringify(r)}`),this}containedBy(c,r){return typeof r=="string"?this.url.searchParams.append(c,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(c,`cd.{${r.join(",")}}`):this.url.searchParams.append(c,`cd.${JSON.stringify(r)}`),this}rangeGt(c,r){return this.url.searchParams.append(c,`sr.${r}`),this}rangeGte(c,r){return this.url.searchParams.append(c,`nxl.${r}`),this}rangeLt(c,r){return this.url.searchParams.append(c,`sl.${r}`),this}rangeLte(c,r){return this.url.searchParams.append(c,`nxr.${r}`),this}rangeAdjacent(c,r){return this.url.searchParams.append(c,`adj.${r}`),this}overlaps(c,r){return typeof r=="string"?this.url.searchParams.append(c,`ov.${r}`):this.url.searchParams.append(c,`ov.{${r.join(",")}}`),this}textSearch(c,r,{config:l,type:d}={}){let x="";d==="plain"?x="pl":d==="phrase"?x="ph":d==="websearch"&&(x="w");const m=l===void 0?"":`(${l})`;return this.url.searchParams.append(c,`${x}fts${m}.${r}`),this}match(c){return Object.entries(c).forEach(([r,l])=>{this.url.searchParams.append(r,`eq.${l}`)}),this}not(c,r,l){return this.url.searchParams.append(c,`not.${r}.${l}`),this}or(c,{foreignTable:r,referencedTable:l=r}={}){const d=l?`${l}.or`:"or";return this.url.searchParams.append(d,`(${c})`),this}filter(c,r,l){return this.url.searchParams.append(c,`${r}.${l}`),this}},np=class{constructor(c,{headers:r={},schema:l,fetch:d,urlLengthLimit:x=8e3}){this.url=c,this.headers=new Headers(r),this.schema=l,this.fetch=d,this.urlLengthLimit=x}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(c,r){const{head:l=!1,count:d}=r??{},x=l?"HEAD":"GET";let m=!1;const E=(c??"*").split("").map(A=>/\s/.test(A)&&!m?"":(A==='"'&&(m=!m),A)).join(""),{url:S,headers:C}=this.cloneRequestState();return S.searchParams.set("select",E),d&&C.append("Prefer",`count=${d}`),new Vs({method:x,url:S,headers:C,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(c,{count:r,defaultToNull:l=!0}={}){var d;const x="POST",{url:m,headers:E}=this.cloneRequestState();if(r&&E.append("Prefer",`count=${r}`),l||E.append("Prefer","missing=default"),Array.isArray(c)){const S=c.reduce((C,A)=>C.concat(Object.keys(A)),[]);if(S.length>0){const C=[...new Set(S)].map(A=>`"${A}"`);m.searchParams.set("columns",C.join(","))}}return new Vs({method:x,url:m,headers:E,schema:this.schema,body:c,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(c,{onConflict:r,ignoreDuplicates:l=!1,count:d,defaultToNull:x=!0}={}){var m;const E="POST",{url:S,headers:C}=this.cloneRequestState();if(C.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),r!==void 0&&S.searchParams.set("on_conflict",r),d&&C.append("Prefer",`count=${d}`),x||C.append("Prefer","missing=default"),Array.isArray(c)){const A=c.reduce((I,D)=>I.concat(Object.keys(D)),[]);if(A.length>0){const I=[...new Set(A)].map(D=>`"${D}"`);S.searchParams.set("columns",I.join(","))}}return new Vs({method:E,url:S,headers:C,schema:this.schema,body:c,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch,urlLengthLimit:this.urlLengthLimit})}update(c,{count:r}={}){var l;const d="PATCH",{url:x,headers:m}=this.cloneRequestState();return r&&m.append("Prefer",`count=${r}`),new Vs({method:d,url:x,headers:m,schema:this.schema,body:c,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:c}={}){var r;const l="DELETE",{url:d,headers:x}=this.cloneRequestState();return c&&x.append("Prefer",`count=${c}`),new Vs({method:l,url:d,headers:x,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}};function Ql(c){"@babel/helpers - typeof";return Ql=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Ql(c)}function ip(c,r){if(Ql(c)!="object"||!c)return c;var l=c[Symbol.toPrimitive];if(l!==void 0){var d=l.call(c,r);if(Ql(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(c)}function rp(c){var r=ip(c,"string");return Ql(r)=="symbol"?r:r+""}function ap(c,r,l){return(r=rp(r))in c?Object.defineProperty(c,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):c[r]=l,c}function G1(c,r){var l=Object.keys(c);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(c);r&&(d=d.filter(function(x){return Object.getOwnPropertyDescriptor(c,x).enumerable})),l.push.apply(l,d)}return l}function Sc(c){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?G1(Object(l),!0).forEach(function(d){ap(c,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(l)):G1(Object(l)).forEach(function(d){Object.defineProperty(c,d,Object.getOwnPropertyDescriptor(l,d))})}return c}var sp=class wg{constructor(r,{headers:l={},schema:d,fetch:x,timeout:m,urlLengthLimit:E=8e3}={}){this.url=r,this.headers=new Headers(l),this.schemaName=d,this.urlLengthLimit=E;const S=x??globalThis.fetch;m!==void 0&&m>0?this.fetch=(C,A)=>{const I=new AbortController,D=setTimeout(()=>I.abort(),m),U=A?.signal;if(U){if(U.aborted)return clearTimeout(D),S(C,A);const P=()=>{clearTimeout(D),I.abort()};return U.addEventListener("abort",P,{once:!0}),S(C,Sc(Sc({},A),{},{signal:I.signal})).finally(()=>{clearTimeout(D),U.removeEventListener("abort",P)})}return S(C,Sc(Sc({},A),{},{signal:I.signal})).finally(()=>clearTimeout(D))}:this.fetch=S}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new np(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(r){return new wg(this.url,{headers:this.headers,schema:r,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(r,l={},{head:d=!1,get:x=!1,count:m}={}){var E;let S;const C=new URL(`${this.url}/rpc/${r}`);let A;const I=P=>P!==null&&typeof P=="object"&&(!Array.isArray(P)||P.some(I)),D=d&&Object.values(l).some(I);D?(S="POST",A=l):d||x?(S=d?"HEAD":"GET",Object.entries(l).filter(([P,X])=>X!==void 0).map(([P,X])=>[P,Array.isArray(X)?`{${X.join(",")}}`:`${X}`]).forEach(([P,X])=>{C.searchParams.append(P,X)})):(S="POST",A=l);const U=new Headers(this.headers);return D?U.set("Prefer",m?`count=${m},return=minimal`:"return=minimal"):m&&U.set("Prefer",`count=${m}`),new Vs({method:S,url:C,headers:U,schema:this.schemaName,body:A,fetch:(E=this.fetch)!==null&&E!==void 0?E:fetch,urlLengthLimit:this.urlLengthLimit})}};class lp{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const l=globalThis.process;if(l){const d=l.versions;if(d&&d.node){const x=d.node,m=parseInt(x.replace(/^v/,"").split(".")[0]);return m>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${m} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${m} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let l=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(l+=`

Suggested solution: ${r.workaround}`),new Error(l)}static createWebSocket(r,l){const d=this.getWebSocketConstructor();return new d(r,l)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const op="2.97.0",cp=`realtime-js/${op}`,up="1.0.0",bg="2.0.0",V1=bg,Jh=1e4,hp=1e3,fp=100;var wa;(function(c){c[c.connecting=0]="connecting",c[c.open=1]="open",c[c.closing=2]="closing",c[c.closed=3]="closed"})(wa||(wa={}));var Sn;(function(c){c.closed="closed",c.errored="errored",c.joined="joined",c.joining="joining",c.leaving="leaving"})(Sn||(Sn={}));var Xi;(function(c){c.close="phx_close",c.error="phx_error",c.join="phx_join",c.reply="phx_reply",c.leave="phx_leave",c.access_token="access_token"})(Xi||(Xi={}));var $h;(function(c){c.websocket="websocket"})($h||($h={}));var Ka;(function(c){c.Connecting="connecting",c.Open="open",c.Closing="closing",c.Closed="closed"})(Ka||(Ka={}));class dp{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,l){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return l(this._binaryEncodeUserBroadcastPush(r));let d=[r.join_ref,r.ref,r.topic,r.event,r.payload];return l(JSON.stringify(d))}_binaryEncodeUserBroadcastPush(r){var l;return this._isArrayBuffer((l=r.payload)===null||l===void 0?void 0:l.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var l,d;const x=(d=(l=r.payload)===null||l===void 0?void 0:l.payload)!==null&&d!==void 0?d:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,x)}_encodeJsonUserBroadcastPush(r){var l,d;const x=(d=(l=r.payload)===null||l===void 0?void 0:l.payload)!==null&&d!==void 0?d:{},E=new TextEncoder().encode(JSON.stringify(x)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,E)}_encodeUserBroadcastPush(r,l,d){var x,m;const E=r.topic,S=(x=r.ref)!==null&&x!==void 0?x:"",C=(m=r.join_ref)!==null&&m!==void 0?m:"",A=r.payload.event,I=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},D=Object.keys(I).length===0?"":JSON.stringify(I);if(C.length>255)throw new Error(`joinRef length ${C.length} exceeds maximum of 255`);if(S.length>255)throw new Error(`ref length ${S.length} exceeds maximum of 255`);if(E.length>255)throw new Error(`topic length ${E.length} exceeds maximum of 255`);if(A.length>255)throw new Error(`userEvent length ${A.length} exceeds maximum of 255`);if(D.length>255)throw new Error(`metadata length ${D.length} exceeds maximum of 255`);const U=this.USER_BROADCAST_PUSH_META_LENGTH+C.length+S.length+E.length+A.length+D.length,P=new ArrayBuffer(this.HEADER_LENGTH+U);let X=new DataView(P),W=0;X.setUint8(W++,this.KINDS.userBroadcastPush),X.setUint8(W++,C.length),X.setUint8(W++,S.length),X.setUint8(W++,E.length),X.setUint8(W++,A.length),X.setUint8(W++,D.length),X.setUint8(W++,l),Array.from(C,me=>X.setUint8(W++,me.charCodeAt(0))),Array.from(S,me=>X.setUint8(W++,me.charCodeAt(0))),Array.from(E,me=>X.setUint8(W++,me.charCodeAt(0))),Array.from(A,me=>X.setUint8(W++,me.charCodeAt(0))),Array.from(D,me=>X.setUint8(W++,me.charCodeAt(0)));var se=new Uint8Array(P.byteLength+d.byteLength);return se.set(new Uint8Array(P),0),se.set(new Uint8Array(d),P.byteLength),se.buffer}decode(r,l){if(this._isArrayBuffer(r)){let d=this._binaryDecode(r);return l(d)}if(typeof r=="string"){const d=JSON.parse(r),[x,m,E,S,C]=d;return l({join_ref:x,ref:m,topic:E,event:S,payload:C})}return l({})}_binaryDecode(r){const l=new DataView(r),d=l.getUint8(0),x=new TextDecoder;if(d===this.KINDS.userBroadcast)return this._decodeUserBroadcast(r,l,x)}_decodeUserBroadcast(r,l,d){const x=l.getUint8(1),m=l.getUint8(2),E=l.getUint8(3),S=l.getUint8(4);let C=this.HEADER_LENGTH+4;const A=d.decode(r.slice(C,C+x));C=C+x;const I=d.decode(r.slice(C,C+m));C=C+m;const D=d.decode(r.slice(C,C+E));C=C+E;const U=r.slice(C,r.byteLength),P=S===this.JSON_ENCODING?JSON.parse(d.decode(U)):U,X={type:this.BROADCAST_EVENT,event:I,payload:P};return E>0&&(X.meta=JSON.parse(D)),{join_ref:null,ref:null,topic:A,event:this.BROADCAST_EVENT,payload:X}}_isArrayBuffer(r){var l;return r instanceof ArrayBuffer||((l=r?.constructor)===null||l===void 0?void 0:l.name)==="ArrayBuffer"}_pick(r,l){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([d])=>l.includes(d)))}}class Ag{constructor(r,l){this.callback=r,this.timerCalc=l,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=l}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ht;(function(c){c.abstime="abstime",c.bool="bool",c.date="date",c.daterange="daterange",c.float4="float4",c.float8="float8",c.int2="int2",c.int4="int4",c.int4range="int4range",c.int8="int8",c.int8range="int8range",c.json="json",c.jsonb="jsonb",c.money="money",c.numeric="numeric",c.oid="oid",c.reltime="reltime",c.text="text",c.time="time",c.timestamp="timestamp",c.timestamptz="timestamptz",c.timetz="timetz",c.tsrange="tsrange",c.tstzrange="tstzrange"})(Ht||(Ht={}));const Y1=(c,r,l={})=>{var d;const x=(d=l.skipTypes)!==null&&d!==void 0?d:[];return r?Object.keys(r).reduce((m,E)=>(m[E]=gp(E,c,r,x),m),{}):{}},gp=(c,r,l,d)=>{const x=r.find(S=>S.name===c),m=x?.type,E=l[c];return m&&!d.includes(m)?Eg(m,E):ef(E)},Eg=(c,r)=>{if(c.charAt(0)==="_"){const l=c.slice(1,c.length);return yp(r,l)}switch(c){case Ht.bool:return mp(r);case Ht.float4:case Ht.float8:case Ht.int2:case Ht.int4:case Ht.int8:case Ht.numeric:case Ht.oid:return pp(r);case Ht.json:case Ht.jsonb:return xp(r);case Ht.timestamp:return wp(r);case Ht.abstime:case Ht.date:case Ht.daterange:case Ht.int4range:case Ht.int8range:case Ht.money:case Ht.reltime:case Ht.text:case Ht.time:case Ht.timestamptz:case Ht.timetz:case Ht.tsrange:case Ht.tstzrange:return ef(r);default:return ef(r)}},ef=c=>c,mp=c=>{switch(c){case"t":return!0;case"f":return!1;default:return c}},pp=c=>{if(typeof c=="string"){const r=parseFloat(c);if(!Number.isNaN(r))return r}return c},xp=c=>{if(typeof c=="string")try{return JSON.parse(c)}catch{return c}return c},yp=(c,r)=>{if(typeof c!="string")return c;const l=c.length-1,d=c[l];if(c[0]==="{"&&d==="}"){let m;const E=c.slice(1,l);try{m=JSON.parse("["+E+"]")}catch{m=E?E.split(","):[]}return m.map(S=>Eg(r,S))}return c},wp=c=>typeof c=="string"?c.replace(" ","T"):c,vg=c=>{const r=new URL(c);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class Hh{constructor(r,l,d={},x=Jh){this.channel=r,this.event=l,this.payload=d,this.timeout=x,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,l){var d;return this._hasReceived(r)&&l((d=this.receivedResp)===null||d===void 0?void 0:d.response),this.recHooks.push({status:r,callback:l}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=l=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=l,this._matchReceive(l)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,l){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:l})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:l}){this.recHooks.filter(d=>d.status===r).forEach(d=>d.callback(l))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var q1;(function(c){c.SYNC="sync",c.JOIN="join",c.LEAVE="leave"})(q1||(q1={}));class Zl{constructor(r,l){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const d=l?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(d.state,{},x=>{const{onJoin:m,onLeave:E,onSync:S}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zl.syncState(this.state,x,m,E),this.pendingDiffs.forEach(C=>{this.state=Zl.syncDiff(this.state,C,m,E)}),this.pendingDiffs=[],S()}),this.channel._on(d.diff,{},x=>{const{onJoin:m,onLeave:E,onSync:S}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(x):(this.state=Zl.syncDiff(this.state,x,m,E),S())}),this.onJoin((x,m,E)=>{this.channel._trigger("presence",{event:"join",key:x,currentPresences:m,newPresences:E})}),this.onLeave((x,m,E)=>{this.channel._trigger("presence",{event:"leave",key:x,currentPresences:m,leftPresences:E})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,l,d,x){const m=this.cloneDeep(r),E=this.transformState(l),S={},C={};return this.map(m,(A,I)=>{E[A]||(C[A]=I)}),this.map(E,(A,I)=>{const D=m[A];if(D){const U=I.map(se=>se.presence_ref),P=D.map(se=>se.presence_ref),X=I.filter(se=>P.indexOf(se.presence_ref)<0),W=D.filter(se=>U.indexOf(se.presence_ref)<0);X.length>0&&(S[A]=X),W.length>0&&(C[A]=W)}else S[A]=I}),this.syncDiff(m,{joins:S,leaves:C},d,x)}static syncDiff(r,l,d,x){const{joins:m,leaves:E}={joins:this.transformState(l.joins),leaves:this.transformState(l.leaves)};return d||(d=()=>{}),x||(x=()=>{}),this.map(m,(S,C)=>{var A;const I=(A=r[S])!==null&&A!==void 0?A:[];if(r[S]=this.cloneDeep(C),I.length>0){const D=r[S].map(P=>P.presence_ref),U=I.filter(P=>D.indexOf(P.presence_ref)<0);r[S].unshift(...U)}d(S,I,C)}),this.map(E,(S,C)=>{let A=r[S];if(!A)return;const I=C.map(D=>D.presence_ref);A=A.filter(D=>I.indexOf(D.presence_ref)<0),r[S]=A,x(S,A,C),A.length===0&&delete r[S]}),r}static map(r,l){return Object.getOwnPropertyNames(r).map(d=>l(d,r[d]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((l,d)=>{const x=r[d];return"metas"in x?l[d]=x.metas.map(m=>(m.presence_ref=m.phx_ref,delete m.phx_ref,delete m.phx_ref_prev,m)):l[d]=x,l},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var X1;(function(c){c.ALL="*",c.INSERT="INSERT",c.UPDATE="UPDATE",c.DELETE="DELETE"})(X1||(X1={}));var Kl;(function(c){c.BROADCAST="broadcast",c.PRESENCE="presence",c.POSTGRES_CHANGES="postgres_changes",c.SYSTEM="system"})(Kl||(Kl={}));var Ir;(function(c){c.SUBSCRIBED="SUBSCRIBED",c.TIMED_OUT="TIMED_OUT",c.CLOSED="CLOSED",c.CHANNEL_ERROR="CHANNEL_ERROR"})(Ir||(Ir={}));class Ws{constructor(r,l={config:{}},d){var x,m;if(this.topic=r,this.params=l,this.socket=d,this.bindings={},this.state=Sn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},l.config),this.timeout=this.socket.timeout,this.joinPush=new Hh(this,Xi.join,this.params,this.timeout),this.rejoinTimer=new Ag(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Sn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(E=>E.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Sn.closed,this.socket._remove(this)}),this._onError(E=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,E),this.state=Sn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Sn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",E=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,E),this.state=Sn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Xi.reply,{},(E,S)=>{this._trigger(this._replyEventName(S),E)}),this.presence=new Zl(this),this.broadcastEndpointURL=vg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((m=(x=this.params.config)===null||x===void 0?void 0:x.broadcast)===null||m===void 0)&&m.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,l=this.timeout){var d,x,m;if(this.socket.isConnected()||this.socket.connect(),this.state==Sn.closed){const{config:{broadcast:E,presence:S,private:C}}=this.params,A=(x=(d=this.bindings.postgres_changes)===null||d===void 0?void 0:d.map(P=>P.filter))!==null&&x!==void 0?x:[],I=!!this.bindings[Kl.PRESENCE]&&this.bindings[Kl.PRESENCE].length>0||((m=this.params.config.presence)===null||m===void 0?void 0:m.enabled)===!0,D={},U={broadcast:E,presence:Object.assign(Object.assign({},S),{enabled:I}),postgres_changes:A,private:C};this.socket.accessTokenValue&&(D.access_token=this.socket.accessTokenValue),this._onError(P=>r?.(Ir.CHANNEL_ERROR,P)),this._onClose(()=>r?.(Ir.CLOSED)),this.updateJoinPayload(Object.assign({config:U},D)),this.joinedOnce=!0,this._rejoin(l),this.joinPush.receive("ok",async({postgres_changes:P})=>{var X;if(this.socket._isManualToken()||this.socket.setAuth(),P===void 0){r?.(Ir.SUBSCRIBED);return}else{const W=this.bindings.postgres_changes,se=(X=W?.length)!==null&&X!==void 0?X:0,me=[];for(let ce=0;ce<se;ce++){const Y=W[ce],{filter:{event:fe,schema:Se,table:we,filter:Q}}=Y,Te=P&&P[ce];if(Te&&Te.event===fe&&Ws.isFilterValueEqual(Te.schema,Se)&&Ws.isFilterValueEqual(Te.table,we)&&Ws.isFilterValueEqual(Te.filter,Q))me.push(Object.assign(Object.assign({},Y),{id:Te.id}));else{this.unsubscribe(),this.state=Sn.errored,r?.(Ir.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=me,r&&r(Ir.SUBSCRIBED);return}}).receive("error",P=>{this.state=Sn.errored,r?.(Ir.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(P).join(", ")||"error")))}).receive("timeout",()=>{r?.(Ir.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,l={}){return await this.send({type:"presence",event:"track",payload:r},l.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,l,d){return this.state===Sn.joined&&r===Kl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,l,d)}async httpSend(r,l,d={}){var x;if(l==null)return Promise.reject("Payload is required for httpSend()");const m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const E={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:l,private:this.private}]})},S=await this._fetchWithTimeout(this.broadcastEndpointURL,E,(x=d.timeout)!==null&&x!==void 0?x:this.timeout);if(S.status===202)return{success:!0};let C=S.statusText;try{const A=await S.json();C=A.error||A.message||C}catch{}return Promise.reject(new Error(C))}async send(r,l={}){var d,x;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:m,payload:E}=r,S={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(S.Authorization=`Bearer ${this.socket.accessTokenValue}`);const C={method:"POST",headers:S,body:JSON.stringify({messages:[{topic:this.subTopic,event:m,payload:E,private:this.private}]})};try{const A=await this._fetchWithTimeout(this.broadcastEndpointURL,C,(d=l.timeout)!==null&&d!==void 0?d:this.timeout);return await((x=A.body)===null||x===void 0?void 0:x.cancel()),A.ok?"ok":"error"}catch(A){return A.name==="AbortError"?"timed out":"error"}}else return new Promise(m=>{var E,S,C;const A=this._push(r.type,r,l.timeout||this.timeout);r.type==="broadcast"&&!(!((C=(S=(E=this.params)===null||E===void 0?void 0:E.config)===null||S===void 0?void 0:S.broadcast)===null||C===void 0)&&C.ack)&&m("ok"),A.receive("ok",()=>m("ok")),A.receive("error",()=>m("error")),A.receive("timeout",()=>m("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=Sn.leaving;const l=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Xi.close,"leave",this._joinRef())};this.joinPush.destroy();let d=null;return new Promise(x=>{d=new Hh(this,Xi.leave,{},r),d.receive("ok",()=>{l(),x("ok")}).receive("timeout",()=>{l(),x("timed out")}).receive("error",()=>{x("error")}),d.send(),this._canPush()||d.trigger("ok",{})}).finally(()=>{d?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Sn.closed,this.bindings={}}async _fetchWithTimeout(r,l,d){const x=new AbortController,m=setTimeout(()=>x.abort(),d),E=await this.socket.fetch(r,Object.assign(Object.assign({},l),{signal:x.signal}));return clearTimeout(m),E}_push(r,l,d=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let x=new Hh(this,r,l,d);return this._canPush()?x.send():this._addToPushBuffer(x),x}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>fp){const l=this.pushBuffer.shift();l&&(l.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${l.event}`,l.payload))}}_onMessage(r,l,d){return l}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,l,d){var x,m;const E=r.toLocaleLowerCase(),{close:S,error:C,leave:A,join:I}=Xi;if(d&&[S,C,A,I].indexOf(E)>=0&&d!==this._joinRef())return;let U=this._onMessage(E,l,d);if(l&&!U)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(E)?(x=this.bindings.postgres_changes)===null||x===void 0||x.filter(P=>{var X,W,se;return((X=P.filter)===null||X===void 0?void 0:X.event)==="*"||((se=(W=P.filter)===null||W===void 0?void 0:W.event)===null||se===void 0?void 0:se.toLocaleLowerCase())===E}).map(P=>P.callback(U,d)):(m=this.bindings[E])===null||m===void 0||m.filter(P=>{var X,W,se,me,ce,Y;if(["broadcast","presence","postgres_changes"].includes(E))if("id"in P){const fe=P.id,Se=(X=P.filter)===null||X===void 0?void 0:X.event;return fe&&((W=l.ids)===null||W===void 0?void 0:W.includes(fe))&&(Se==="*"||Se?.toLocaleLowerCase()===((se=l.data)===null||se===void 0?void 0:se.type.toLocaleLowerCase()))}else{const fe=(ce=(me=P?.filter)===null||me===void 0?void 0:me.event)===null||ce===void 0?void 0:ce.toLocaleLowerCase();return fe==="*"||fe===((Y=l?.event)===null||Y===void 0?void 0:Y.toLocaleLowerCase())}else return P.type.toLocaleLowerCase()===E}).map(P=>{if(typeof U=="object"&&"ids"in U){const X=U.data,{schema:W,table:se,commit_timestamp:me,type:ce,errors:Y}=X;U=Object.assign(Object.assign({},{schema:W,table:se,commit_timestamp:me,eventType:ce,new:{},old:{},errors:Y}),this._getPayloadRecords(X))}P.callback(U,d)})}_isClosed(){return this.state===Sn.closed}_isJoined(){return this.state===Sn.joined}_isJoining(){return this.state===Sn.joining}_isLeaving(){return this.state===Sn.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,l,d){const x=r.toLocaleLowerCase(),m={type:x,filter:l,callback:d};return this.bindings[x]?this.bindings[x].push(m):this.bindings[x]=[m],this}_off(r,l){const d=r.toLocaleLowerCase();return this.bindings[d]&&(this.bindings[d]=this.bindings[d].filter(x=>{var m;return!(((m=x.type)===null||m===void 0?void 0:m.toLocaleLowerCase())===d&&Ws.isEqual(x.filter,l))})),this}static isEqual(r,l){if(Object.keys(r).length!==Object.keys(l).length)return!1;for(const d in r)if(r[d]!==l[d])return!1;return!0}static isFilterValueEqual(r,l){return(r??void 0)===(l??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(Xi.close,{},r)}_onError(r){this._on(Xi.error,{},l=>r(l))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Sn.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const l={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(l.new=Y1(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(l.old=Y1(r.columns,r.old_record)),l}}const Gh=()=>{},Cc={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},bp=[1e3,2e3,5e3,1e4],Ap=1e4,Ep=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vp{constructor(r,l){var d;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Jh,this.transport=null,this.heartbeatIntervalMs=Cc.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Gh,this.ref=0,this.reconnectTimer=null,this.vsn=V1,this.logger=Gh,this.conn=null,this.sendBuffer=[],this.serializer=new dp,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=x=>x?(...m)=>x(...m):(...m)=>fetch(...m),!(!((d=l?.params)===null||d===void 0)&&d.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=l.params.apikey,this.endPoint=`${r}/${$h.websocket}`,this.httpEndpoint=vg(r),this._initializeOptions(l),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(l?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=lp.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const l=r.message;throw l.includes("Node.js")?new Error(`${l}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${l}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,l){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const d=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(d),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,l??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const l=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),l}async removeAllChannels(){const r=await Promise.all(this.channels.map(l=>l.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,l,d){this.logger(r,l,d)}connectionState(){switch(this.conn&&this.conn.readyState){case wa.connecting:return Ka.Connecting;case wa.open:return Ka.Open;case wa.closing:return Ka.Closing;default:return Ka.Closed}}isConnected(){return this.connectionState()===Ka.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,l={config:{}}){const d=`realtime:${r}`,x=this.getChannels().find(m=>m.topic===d);if(x)return x;{const m=new Ws(`realtime:${r}`,l,this);return this.channels.push(m),m}}push(r){const{topic:l,event:d,payload:x,ref:m}=r,E=()=>{this.encode(r,S=>{var C;(C=this.conn)===null||C===void 0||C.send(S)})};this.log("push",`${l} ${d} (${m})`,x),this.isConnected()?E():this.sendBuffer.push(E)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(l){this.log("error","error in heartbeat callback",l)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(l){this.log("error","error in heartbeat callback",l)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(hp,"heartbeat timeout"),setTimeout(()=>{var l;this.isConnected()||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout()},Cc.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(l){this.log("error","error in heartbeat callback",l)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let l=this.channels.find(d=>d.topic===r&&(d._isJoined()||d._isJoining()));l&&(this.log("transport",`leaving duplicate topic "${r}"`),l.unsubscribe())}_remove(r){this.channels=this.channels.filter(l=>l.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,l=>{if(l.topic==="phoenix"&&l.event==="phx_reply"&&l.ref&&l.ref===this.pendingHeartbeatRef){const A=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(l.payload.status==="ok"?"ok":"error",A)}catch(I){this.log("error","error in heartbeat callback",I)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:d,event:x,payload:m,ref:E}=l,S=E?`(${E})`:"",C=m.status||"";this.log("receive",`${C} ${d} ${x} ${S}`.trim(),m),this.channels.filter(A=>A._isMember(d)).forEach(A=>A._trigger(x,m,E)),this._triggerStateCallbacks("message",l)})}_clearTimer(r){var l;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((l=this.reconnectTimer)===null||l===void 0||l.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===wa.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===wa.open||this.conn.readyState===wa.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(l=>{this.log("error","error waiting for auth on connect",l),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=l=>{this.log("worker","worker error",l.message),this._terminateWorker()},this.workerRef.onmessage=l=>{l.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var l;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r);try{this.heartbeatCallback("error")}catch(l){this.log("error","error in heartbeat callback",l)}}_triggerChanError(){this.channels.forEach(r=>r._trigger(Xi.error))}_appendParams(r,l){if(Object.keys(l).length===0)return r;const d=r.match(/\?/)?"&":"?",x=new URLSearchParams(l);return`${r}${d}${x}`}_workerObjectUrl(r){let l;if(r)l=r;else{const d=new Blob([Ep],{type:"application/javascript"});l=URL.createObjectURL(d)}return l}_setConnectionState(r,l=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=l)}async _performAuth(r=null){let l,d=!1;if(r)l=r,d=!0;else if(this.accessToken)try{l=await this.accessToken()}catch(x){this.log("error","Error fetching access token from callback",x),l=this.accessTokenValue}else l=this.accessTokenValue;d?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=l&&(this.accessTokenValue=l,this.channels.forEach(x=>{const m={access_token:l,version:cp};l&&x.updateJoinPayload(m),x.joinedOnce&&x._isJoined()&&x._push(Xi.access_token,{access_token:l})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(l=>{this.log("error",`Error setting auth in ${r}`,l)})}_triggerStateCallbacks(r,l){try{this.stateChangeCallbacks[r].forEach(d=>{try{d(l)}catch(x){this.log("error",`error in ${r} callback`,x)}})}catch(d){this.log("error",`error triggering ${r} callbacks`,d)}}_setupReconnectionTimer(){this.reconnectTimer=new Ag(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},Cc.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var l,d,x,m,E,S,C,A,I,D,U,P;switch(this.transport=(l=r?.transport)!==null&&l!==void 0?l:null,this.timeout=(d=r?.timeout)!==null&&d!==void 0?d:Jh,this.heartbeatIntervalMs=(x=r?.heartbeatIntervalMs)!==null&&x!==void 0?x:Cc.HEARTBEAT_INTERVAL,this.worker=(m=r?.worker)!==null&&m!==void 0?m:!1,this.accessToken=(E=r?.accessToken)!==null&&E!==void 0?E:null,this.heartbeatCallback=(S=r?.heartbeatCallback)!==null&&S!==void 0?S:Gh,this.vsn=(C=r?.vsn)!==null&&C!==void 0?C:V1,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(A=r?.reconnectAfterMs)!==null&&A!==void 0?A:(X=>bp[X-1]||Ap),this.vsn){case up:this.encode=(I=r?.encode)!==null&&I!==void 0?I:((X,W)=>W(JSON.stringify(X))),this.decode=(D=r?.decode)!==null&&D!==void 0?D:((X,W)=>W(JSON.parse(X)));break;case bg:this.encode=(U=r?.encode)!==null&&U!==void 0?U:this.serializer.encode.bind(this.serializer),this.decode=(P=r?.decode)!==null&&P!==void 0?P:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}var Jl=class extends Error{constructor(c,r){super(c),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function _p(c,r,l){const d=new URL(r,c);if(l)for(const[x,m]of Object.entries(l))m!==void 0&&d.searchParams.set(x,m);return d.toString()}async function Sp(c){return!c||c.type==="none"?{}:c.type==="bearer"?{Authorization:`Bearer ${c.token}`}:c.type==="header"?{[c.name]:c.value}:c.type==="custom"?await c.getHeaders():{}}function Cp(c){const r=c.fetchImpl??globalThis.fetch;return{async request({method:l,path:d,query:x,body:m,headers:E}){const S=_p(c.baseUrl,d,x),C=await Sp(c.auth),A=await r(S,{method:l,headers:{...m?{"Content-Type":"application/json"}:{},...C,...E},body:m?JSON.stringify(m):void 0}),I=await A.text(),D=(A.headers.get("content-type")||"").includes("application/json"),U=D&&I?JSON.parse(I):I;if(!A.ok){const P=D?U:void 0,X=P?.error;throw new Jl(X?.message??`Request failed with status ${A.status}`,{status:A.status,icebergType:X?.type,icebergCode:X?.code,details:P})}return{status:A.status,headers:A.headers,data:U}}}}function Tc(c){return c.join("")}var Tp=class{constructor(c,r=""){this.client=c,this.prefix=r}async listNamespaces(c){const r=c?{parent:Tc(c.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(d=>({namespace:d}))}async createNamespace(c,r){const l={namespace:c.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:l})).data}async dropNamespace(c){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Tc(c.namespace)}`})}async loadNamespaceMetadata(c){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Tc(c.namespace)}`})).data.properties}}async namespaceExists(c){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Tc(c.namespace)}`}),!0}catch(r){if(r instanceof Jl&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(c,r){try{return await this.createNamespace(c,r)}catch(l){if(l instanceof Jl&&l.status===409)return;throw l}}};function js(c){return c.join("")}var Np=class{constructor(c,r="",l){this.client=c,this.prefix=r,this.accessDelegation=l}async listTables(c){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${js(c.namespace)}/tables`})).data.identifiers}async createTable(c,r){const l={};return this.accessDelegation&&(l["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${js(c.namespace)}/tables`,body:r,headers:l})).data.metadata}async updateTable(c,r){const l=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${js(c.namespace)}/tables/${c.name}`,body:r});return{"metadata-location":l.data["metadata-location"],metadata:l.data.metadata}}async dropTable(c,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${js(c.namespace)}/tables/${c.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(c){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${js(c.namespace)}/tables/${c.name}`,headers:r})).data.metadata}async tableExists(c){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${js(c.namespace)}/tables/${c.name}`,headers:r}),!0}catch(l){if(l instanceof Jl&&l.status===404)return!1;throw l}}async createTableIfNotExists(c,r){try{return await this.createTable(c,r)}catch(l){if(l instanceof Jl&&l.status===409)return await this.loadTable({namespace:c.namespace,name:r.name});throw l}}},Op=class{constructor(c){let r="v1";c.catalogName&&(r+=`/${c.catalogName}`);const l=c.baseUrl.endsWith("/")?c.baseUrl:`${c.baseUrl}/`;this.client=Cp({baseUrl:l,auth:c.auth,fetchImpl:c.fetch}),this.accessDelegation=c.accessDelegation?.join(","),this.namespaceOps=new Tp(this.client,r),this.tableOps=new Np(this.client,r,this.accessDelegation)}async listNamespaces(c){return this.namespaceOps.listNamespaces(c)}async createNamespace(c,r){return this.namespaceOps.createNamespace(c,r)}async dropNamespace(c){await this.namespaceOps.dropNamespace(c)}async loadNamespaceMetadata(c){return this.namespaceOps.loadNamespaceMetadata(c)}async listTables(c){return this.tableOps.listTables(c)}async createTable(c,r){return this.tableOps.createTable(c,r)}async updateTable(c,r){return this.tableOps.updateTable(c,r)}async dropTable(c,r){await this.tableOps.dropTable(c,r)}async loadTable(c){return this.tableOps.loadTable(c)}async namespaceExists(c){return this.namespaceOps.namespaceExists(c)}async tableExists(c){return this.tableOps.tableExists(c)}async createNamespaceIfNotExists(c,r){return this.namespaceOps.createNamespaceIfNotExists(c,r)}async createTableIfNotExists(c,r){return this.tableOps.createTableIfNotExists(c,r)}},jc=class extends Error{constructor(c,r="storage",l,d){super(c),this.__isStorageError=!0,this.namespace=r,this.name=r==="vectors"?"StorageVectorsError":"StorageError",this.status=l,this.statusCode=d}};function Pc(c){return typeof c=="object"&&c!==null&&"__isStorageError"in c}var Nc=class extends jc{constructor(c,r,l,d="storage"){super(c,d,r,l),this.name=d==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=r,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},_g=class extends jc{constructor(c,r,l="storage"){super(c,l),this.name=l==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=r}};const Ip=c=>c?(...r)=>c(...r):(...r)=>fetch(...r),Rp=c=>{if(typeof c!="object"||c===null)return!1;const r=Object.getPrototypeOf(c);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in c)&&!(Symbol.iterator in c)},tf=c=>{if(Array.isArray(c))return c.map(l=>tf(l));if(typeof c=="function"||c!==Object(c))return c;const r={};return Object.entries(c).forEach(([l,d])=>{const x=l.replace(/([-_][a-z])/gi,m=>m.toUpperCase().replace(/[-_]/g,""));r[x]=tf(d)}),r},Dp=c=>!c||typeof c!="string"||c.length===0||c.length>100||c.trim()!==c||c.includes("/")||c.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(c);function $l(c){"@babel/helpers - typeof";return $l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},$l(c)}function Mp(c,r){if($l(c)!="object"||!c)return c;var l=c[Symbol.toPrimitive];if(l!==void 0){var d=l.call(c,r);if($l(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(c)}function Lp(c){var r=Mp(c,"string");return $l(r)=="symbol"?r:r+""}function Bp(c,r,l){return(r=Lp(r))in c?Object.defineProperty(c,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):c[r]=l,c}function W1(c,r){var l=Object.keys(c);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(c);r&&(d=d.filter(function(x){return Object.getOwnPropertyDescriptor(c,x).enumerable})),l.push.apply(l,d)}return l}function Pe(c){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?W1(Object(l),!0).forEach(function(d){Bp(c,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(l)):W1(Object(l)).forEach(function(d){Object.defineProperty(c,d,Object.getOwnPropertyDescriptor(l,d))})}return c}const Z1=c=>{var r;return c.msg||c.message||c.error_description||(typeof c.error=="string"?c.error:(r=c.error)===null||r===void 0?void 0:r.message)||JSON.stringify(c)},kp=async(c,r,l,d)=>{if(c&&typeof c=="object"&&"status"in c&&"ok"in c&&typeof c.status=="number"&&!l?.noResolveJson){const x=c,m=x.status||500;if(typeof x.json=="function")x.json().then(E=>{const S=E?.statusCode||E?.code||m+"";r(new Nc(Z1(E),m,S,d))}).catch(()=>{if(d==="vectors"){const E=m+"";r(new Nc(x.statusText||`HTTP ${m} error`,m,E,d))}else{const E=m+"";r(new Nc(x.statusText||`HTTP ${m} error`,m,E,d))}});else{const E=m+"";r(new Nc(x.statusText||`HTTP ${m} error`,m,E,d))}}else r(new _g(Z1(c),c,d))},Up=(c,r,l,d)=>{const x={method:c,headers:r?.headers||{}};return c==="GET"||c==="HEAD"||!d?Pe(Pe({},x),l):(Rp(d)?(x.headers=Pe({"Content-Type":"application/json"},r?.headers),x.body=JSON.stringify(d)):x.body=d,r?.duplex&&(x.duplex=r.duplex),Pe(Pe({},x),l))};async function ql(c,r,l,d,x,m,E){return new Promise((S,C)=>{c(l,Up(r,d,x,m)).then(A=>{if(!A.ok)throw A;if(d?.noResolveJson)return A;if(E==="vectors"){const I=A.headers.get("content-type");if(A.headers.get("content-length")==="0"||A.status===204)return{};if(!I||!I.includes("application/json"))return{}}return A.json()}).then(A=>S(A)).catch(A=>kp(A,C,d,E))})}function Sg(c="storage"){return{get:async(r,l,d,x)=>ql(r,"GET",l,d,x,void 0,c),post:async(r,l,d,x,m)=>ql(r,"POST",l,x,m,d,c),put:async(r,l,d,x,m)=>ql(r,"PUT",l,x,m,d,c),head:async(r,l,d,x)=>ql(r,"HEAD",l,Pe(Pe({},d),{},{noResolveJson:!0}),x,void 0,c),remove:async(r,l,d,x,m)=>ql(r,"DELETE",l,x,m,d,c)}}const jp=Sg("storage"),{get:eo,post:Yi,put:nf,head:Pp,remove:ff}=jp,bi=Sg("vectors");var Ks=class{constructor(c,r={},l,d="storage"){this.shouldThrowOnError=!1,this.url=c,this.headers=r,this.fetch=Ip(l),this.namespace=d}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(c,r){return this.headers=Pe(Pe({},this.headers),{},{[c]:r}),this}async handleOperation(c){var r=this;try{return{data:await c(),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(Pc(l))return{data:null,error:l};throw l}}},zp=class{constructor(c,r){this.downloadFn=c,this.shouldThrowOnError=r}then(c,r){return this.execute().then(c,r)}async execute(){var c=this;try{return{data:(await c.downloadFn()).body,error:null}}catch(r){if(c.shouldThrowOnError)throw r;if(Pc(r))return{data:null,error:r};throw r}}};let Cg;Cg=Symbol.toStringTag;var Fp=class{constructor(c,r){this.downloadFn=c,this.shouldThrowOnError=r,this[Cg]="BlobDownloadBuilder",this.promise=null}asStream(){return new zp(this.downloadFn,this.shouldThrowOnError)}then(c,r){return this.getPromise().then(c,r)}catch(c){return this.getPromise().catch(c)}finally(c){return this.getPromise().finally(c)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var c=this;try{return{data:await(await c.downloadFn()).blob(),error:null}}catch(r){if(c.shouldThrowOnError)throw r;if(Pc(r))return{data:null,error:r};throw r}}};const Hp={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},K1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var Gp=class extends Ks{constructor(c,r={},l,d){super(c,r,d,"storage"),this.bucketId=l}async uploadOrUpdate(c,r,l,d){var x=this;return x.handleOperation(async()=>{let m;const E=Pe(Pe({},K1),d);let S=Pe(Pe({},x.headers),c==="POST"&&{"x-upsert":String(E.upsert)});const C=E.metadata;typeof Blob<"u"&&l instanceof Blob?(m=new FormData,m.append("cacheControl",E.cacheControl),C&&m.append("metadata",x.encodeMetadata(C)),m.append("",l)):typeof FormData<"u"&&l instanceof FormData?(m=l,m.has("cacheControl")||m.append("cacheControl",E.cacheControl),C&&!m.has("metadata")&&m.append("metadata",x.encodeMetadata(C))):(m=l,S["cache-control"]=`max-age=${E.cacheControl}`,S["content-type"]=E.contentType,C&&(S["x-metadata"]=x.toBase64(x.encodeMetadata(C))),(typeof ReadableStream<"u"&&m instanceof ReadableStream||m&&typeof m=="object"&&"pipe"in m&&typeof m.pipe=="function")&&!E.duplex&&(E.duplex="half")),d?.headers&&(S=Pe(Pe({},S),d.headers));const A=x._removeEmptyFolders(r),I=x._getFinalPath(A),D=await(c=="PUT"?nf:Yi)(x.fetch,`${x.url}/object/${I}`,m,Pe({headers:S},E?.duplex?{duplex:E.duplex}:{}));return{path:A,id:D.Id,fullPath:D.Key}})}async upload(c,r,l){return this.uploadOrUpdate("POST",c,r,l)}async uploadToSignedUrl(c,r,l,d){var x=this;const m=x._removeEmptyFolders(c),E=x._getFinalPath(m),S=new URL(x.url+`/object/upload/sign/${E}`);return S.searchParams.set("token",r),x.handleOperation(async()=>{let C;const A=Pe({upsert:K1.upsert},d),I=Pe(Pe({},x.headers),{"x-upsert":String(A.upsert)});return typeof Blob<"u"&&l instanceof Blob?(C=new FormData,C.append("cacheControl",A.cacheControl),C.append("",l)):typeof FormData<"u"&&l instanceof FormData?(C=l,C.append("cacheControl",A.cacheControl)):(C=l,I["cache-control"]=`max-age=${A.cacheControl}`,I["content-type"]=A.contentType),{path:m,fullPath:(await nf(x.fetch,S.toString(),C,{headers:I})).Key}})}async createSignedUploadUrl(c,r){var l=this;return l.handleOperation(async()=>{let d=l._getFinalPath(c);const x=Pe({},l.headers);r?.upsert&&(x["x-upsert"]="true");const m=await Yi(l.fetch,`${l.url}/object/upload/sign/${d}`,{},{headers:x}),E=new URL(l.url+m.url),S=E.searchParams.get("token");if(!S)throw new jc("No token returned by API");return{signedUrl:E.toString(),path:c,token:S}})}async update(c,r,l){return this.uploadOrUpdate("PUT",c,r,l)}async move(c,r,l){var d=this;return d.handleOperation(async()=>await Yi(d.fetch,`${d.url}/object/move`,{bucketId:d.bucketId,sourceKey:c,destinationKey:r,destinationBucket:l?.destinationBucket},{headers:d.headers}))}async copy(c,r,l){var d=this;return d.handleOperation(async()=>({path:(await Yi(d.fetch,`${d.url}/object/copy`,{bucketId:d.bucketId,sourceKey:c,destinationKey:r,destinationBucket:l?.destinationBucket},{headers:d.headers})).Key}))}async createSignedUrl(c,r,l){var d=this;return d.handleOperation(async()=>{let x=d._getFinalPath(c),m=await Yi(d.fetch,`${d.url}/object/sign/${x}`,Pe({expiresIn:r},l?.transform?{transform:l.transform}:{}),{headers:d.headers});const E=l?.download?`&download=${l.download===!0?"":l.download}`:"";return{signedUrl:encodeURI(`${d.url}${m.signedURL}${E}`)}})}async createSignedUrls(c,r,l){var d=this;return d.handleOperation(async()=>{const x=await Yi(d.fetch,`${d.url}/object/sign/${d.bucketId}`,{expiresIn:r,paths:c},{headers:d.headers}),m=l?.download?`&download=${l.download===!0?"":l.download}`:"";return x.map(E=>Pe(Pe({},E),{},{signedUrl:E.signedURL?encodeURI(`${d.url}${E.signedURL}${m}`):null}))})}download(c,r,l){const d=typeof r?.transform<"u"?"render/image/authenticated":"object",x=this.transformOptsToQueryString(r?.transform||{}),m=x?`?${x}`:"",E=this._getFinalPath(c),S=()=>eo(this.fetch,`${this.url}/${d}/${E}${m}`,{headers:this.headers,noResolveJson:!0},l);return new Fp(S,this.shouldThrowOnError)}async info(c){var r=this;const l=r._getFinalPath(c);return r.handleOperation(async()=>tf(await eo(r.fetch,`${r.url}/object/info/${l}`,{headers:r.headers})))}async exists(c){var r=this;const l=r._getFinalPath(c);try{return await Pp(r.fetch,`${r.url}/object/${l}`,{headers:r.headers}),{data:!0,error:null}}catch(d){if(r.shouldThrowOnError)throw d;if(Pc(d)&&d instanceof _g){const x=d.originalError;if([400,404].includes(x?.status))return{data:!1,error:d}}throw d}}getPublicUrl(c,r){const l=this._getFinalPath(c),d=[],x=r?.download?`download=${r.download===!0?"":r.download}`:"";x!==""&&d.push(x);const m=typeof r?.transform<"u"?"render/image":"object",E=this.transformOptsToQueryString(r?.transform||{});E!==""&&d.push(E);let S=d.join("&");return S!==""&&(S=`?${S}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${l}${S}`)}}}async remove(c){var r=this;return r.handleOperation(async()=>await ff(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:c},{headers:r.headers}))}async list(c,r,l){var d=this;return d.handleOperation(async()=>{const x=Pe(Pe(Pe({},Hp),r),{},{prefix:c||""});return await Yi(d.fetch,`${d.url}/object/list/${d.bucketId}`,x,{headers:d.headers},l)})}async listV2(c,r){var l=this;return l.handleOperation(async()=>{const d=Pe({},c);return await Yi(l.fetch,`${l.url}/object/list-v2/${l.bucketId}`,d,{headers:l.headers},r)})}encodeMetadata(c){return JSON.stringify(c)}toBase64(c){return typeof Buffer<"u"?Buffer.from(c).toString("base64"):btoa(c)}_getFinalPath(c){return`${this.bucketId}/${c.replace(/^\/+/,"")}`}_removeEmptyFolders(c){return c.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(c){const r=[];return c.width&&r.push(`width=${c.width}`),c.height&&r.push(`height=${c.height}`),c.resize&&r.push(`resize=${c.resize}`),c.format&&r.push(`format=${c.format}`),c.quality&&r.push(`quality=${c.quality}`),r.join("&")}};const Vp="2.97.0",ro={"X-Client-Info":`storage-js/${Vp}`};var Yp=class extends Ks{constructor(c,r={},l,d){const x=new URL(c);d?.useNewHostname&&/supabase\.(co|in|red)$/.test(x.hostname)&&!x.hostname.includes("storage.supabase.")&&(x.hostname=x.hostname.replace("supabase.","storage.supabase."));const m=x.href.replace(/\/$/,""),E=Pe(Pe({},ro),r);super(m,E,l,"storage")}async listBuckets(c){var r=this;return r.handleOperation(async()=>{const l=r.listBucketOptionsToQueryString(c);return await eo(r.fetch,`${r.url}/bucket${l}`,{headers:r.headers})})}async getBucket(c){var r=this;return r.handleOperation(async()=>await eo(r.fetch,`${r.url}/bucket/${c}`,{headers:r.headers}))}async createBucket(c,r={public:!1}){var l=this;return l.handleOperation(async()=>await Yi(l.fetch,`${l.url}/bucket`,{id:c,name:c,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:l.headers}))}async updateBucket(c,r){var l=this;return l.handleOperation(async()=>await nf(l.fetch,`${l.url}/bucket/${c}`,{id:c,name:c,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:l.headers}))}async emptyBucket(c){var r=this;return r.handleOperation(async()=>await Yi(r.fetch,`${r.url}/bucket/${c}/empty`,{},{headers:r.headers}))}async deleteBucket(c){var r=this;return r.handleOperation(async()=>await ff(r.fetch,`${r.url}/bucket/${c}`,{},{headers:r.headers}))}listBucketOptionsToQueryString(c){const r={};return c&&("limit"in c&&(r.limit=String(c.limit)),"offset"in c&&(r.offset=String(c.offset)),c.search&&(r.search=c.search),c.sortColumn&&(r.sortColumn=c.sortColumn),c.sortOrder&&(r.sortOrder=c.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},qp=class extends Ks{constructor(c,r={},l){const d=c.replace(/\/$/,""),x=Pe(Pe({},ro),r);super(d,x,l,"storage")}async createBucket(c){var r=this;return r.handleOperation(async()=>await Yi(r.fetch,`${r.url}/bucket`,{name:c},{headers:r.headers}))}async listBuckets(c){var r=this;return r.handleOperation(async()=>{const l=new URLSearchParams;c?.limit!==void 0&&l.set("limit",c.limit.toString()),c?.offset!==void 0&&l.set("offset",c.offset.toString()),c?.sortColumn&&l.set("sortColumn",c.sortColumn),c?.sortOrder&&l.set("sortOrder",c.sortOrder),c?.search&&l.set("search",c.search);const d=l.toString(),x=d?`${r.url}/bucket?${d}`:`${r.url}/bucket`;return await eo(r.fetch,x,{headers:r.headers})})}async deleteBucket(c){var r=this;return r.handleOperation(async()=>await ff(r.fetch,`${r.url}/bucket/${c}`,{},{headers:r.headers}))}from(c){var r=this;if(!Dp(c))throw new jc("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const l=new Op({baseUrl:this.url,catalogName:c,auth:{type:"custom",getHeaders:async()=>r.headers},fetch:this.fetch}),d=this.shouldThrowOnError;return new Proxy(l,{get(x,m){const E=x[m];return typeof E!="function"?E:async(...S)=>{try{return{data:await E.apply(x,S),error:null}}catch(C){if(d)throw C;return{data:null,error:C}}}}})}},Xp=class extends Ks{constructor(c,r={},l){const d=c.replace(/\/$/,""),x=Pe(Pe({},ro),{},{"Content-Type":"application/json"},r);super(d,x,l,"vectors")}async createIndex(c){var r=this;return r.handleOperation(async()=>await bi.post(r.fetch,`${r.url}/CreateIndex`,c,{headers:r.headers})||{})}async getIndex(c,r){var l=this;return l.handleOperation(async()=>await bi.post(l.fetch,`${l.url}/GetIndex`,{vectorBucketName:c,indexName:r},{headers:l.headers}))}async listIndexes(c){var r=this;return r.handleOperation(async()=>await bi.post(r.fetch,`${r.url}/ListIndexes`,c,{headers:r.headers}))}async deleteIndex(c,r){var l=this;return l.handleOperation(async()=>await bi.post(l.fetch,`${l.url}/DeleteIndex`,{vectorBucketName:c,indexName:r},{headers:l.headers})||{})}},Wp=class extends Ks{constructor(c,r={},l){const d=c.replace(/\/$/,""),x=Pe(Pe({},ro),{},{"Content-Type":"application/json"},r);super(d,x,l,"vectors")}async putVectors(c){var r=this;if(c.vectors.length<1||c.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return r.handleOperation(async()=>await bi.post(r.fetch,`${r.url}/PutVectors`,c,{headers:r.headers})||{})}async getVectors(c){var r=this;return r.handleOperation(async()=>await bi.post(r.fetch,`${r.url}/GetVectors`,c,{headers:r.headers}))}async listVectors(c){var r=this;if(c.segmentCount!==void 0){if(c.segmentCount<1||c.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(c.segmentIndex!==void 0&&(c.segmentIndex<0||c.segmentIndex>=c.segmentCount))throw new Error(`segmentIndex must be between 0 and ${c.segmentCount-1}`)}return r.handleOperation(async()=>await bi.post(r.fetch,`${r.url}/ListVectors`,c,{headers:r.headers}))}async queryVectors(c){var r=this;return r.handleOperation(async()=>await bi.post(r.fetch,`${r.url}/QueryVectors`,c,{headers:r.headers}))}async deleteVectors(c){var r=this;if(c.keys.length<1||c.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return r.handleOperation(async()=>await bi.post(r.fetch,`${r.url}/DeleteVectors`,c,{headers:r.headers})||{})}},Zp=class extends Ks{constructor(c,r={},l){const d=c.replace(/\/$/,""),x=Pe(Pe({},ro),{},{"Content-Type":"application/json"},r);super(d,x,l,"vectors")}async createBucket(c){var r=this;return r.handleOperation(async()=>await bi.post(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:c},{headers:r.headers})||{})}async getBucket(c){var r=this;return r.handleOperation(async()=>await bi.post(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:c},{headers:r.headers}))}async listBuckets(c={}){var r=this;return r.handleOperation(async()=>await bi.post(r.fetch,`${r.url}/ListVectorBuckets`,c,{headers:r.headers}))}async deleteBucket(c){var r=this;return r.handleOperation(async()=>await bi.post(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:c},{headers:r.headers})||{})}},Kp=class extends Zp{constructor(c,r={}){super(c,r.headers||{},r.fetch)}from(c){return new Qp(this.url,this.headers,c,this.fetch)}async createBucket(c){var r=()=>super.createBucket,l=this;return r().call(l,c)}async getBucket(c){var r=()=>super.getBucket,l=this;return r().call(l,c)}async listBuckets(c={}){var r=()=>super.listBuckets,l=this;return r().call(l,c)}async deleteBucket(c){var r=()=>super.deleteBucket,l=this;return r().call(l,c)}},Qp=class extends Xp{constructor(c,r,l,d){super(c,r,d),this.vectorBucketName=l}async createIndex(c){var r=()=>super.createIndex,l=this;return r().call(l,Pe(Pe({},c),{},{vectorBucketName:l.vectorBucketName}))}async listIndexes(c={}){var r=()=>super.listIndexes,l=this;return r().call(l,Pe(Pe({},c),{},{vectorBucketName:l.vectorBucketName}))}async getIndex(c){var r=()=>super.getIndex,l=this;return r().call(l,l.vectorBucketName,c)}async deleteIndex(c){var r=()=>super.deleteIndex,l=this;return r().call(l,l.vectorBucketName,c)}index(c){return new Jp(this.url,this.headers,this.vectorBucketName,c,this.fetch)}},Jp=class extends Wp{constructor(c,r,l,d,x){super(c,r,x),this.vectorBucketName=l,this.indexName=d}async putVectors(c){var r=()=>super.putVectors,l=this;return r().call(l,Pe(Pe({},c),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async getVectors(c){var r=()=>super.getVectors,l=this;return r().call(l,Pe(Pe({},c),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async listVectors(c={}){var r=()=>super.listVectors,l=this;return r().call(l,Pe(Pe({},c),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async queryVectors(c){var r=()=>super.queryVectors,l=this;return r().call(l,Pe(Pe({},c),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async deleteVectors(c){var r=()=>super.deleteVectors,l=this;return r().call(l,Pe(Pe({},c),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}},$p=class extends Yp{constructor(c,r={},l,d){super(c,r,l,d)}from(c){return new Gp(this.url,this.headers,c,this.fetch)}get vectors(){return new Kp(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new qp(this.url+"/iceberg",this.headers,this.fetch)}};const Tg="2.97.0",Ys=30*1e3,rf=3,Vh=rf*Ys,ex="http://localhost:9999",tx="supabase.auth.token",nx={"X-Client-Info":`gotrue-js/${Tg}`},af="X-Supabase-Api-Version",Ng={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},ix=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,rx=600*1e3;class to extends Error{constructor(r,l,d){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=l,this.code=d}}function De(c){return typeof c=="object"&&c!==null&&"__isAuthError"in c}class ax extends to{constructor(r,l,d){super(r,l,d),this.name="AuthApiError",this.status=l,this.code=d}}function sx(c){return De(c)&&c.name==="AuthApiError"}class Qa extends to{constructor(r,l){super(r),this.name="AuthUnknownError",this.originalError=l}}class Mr extends to{constructor(r,l,d,x){super(r,d,x),this.name=l,this.status=d}}class pi extends Mr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Yh(c){return De(c)&&c.name==="AuthSessionMissingError"}class Ps extends Mr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Oc extends Mr{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class Ic extends Mr{constructor(r,l=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function lx(c){return De(c)&&c.name==="AuthImplicitGrantRedirectError"}class Q1 extends Mr{constructor(r,l=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class ox extends Mr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class sf extends Mr{constructor(r,l){super(r,"AuthRetryableFetchError",l,void 0)}}function qh(c){return De(c)&&c.name==="AuthRetryableFetchError"}class J1 extends Mr{constructor(r,l,d){super(r,"AuthWeakPasswordError",l,"weak_password"),this.reasons=d}}class lf extends Mr{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const Lc="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),$1=` 	
\r=`.split(""),cx=(()=>{const c=new Array(128);for(let r=0;r<c.length;r+=1)c[r]=-1;for(let r=0;r<$1.length;r+=1)c[$1[r].charCodeAt(0)]=-2;for(let r=0;r<Lc.length;r+=1)c[Lc[r].charCodeAt(0)]=r;return c})();function eg(c,r,l){if(c!==null)for(r.queue=r.queue<<8|c,r.queuedBits+=8;r.queuedBits>=6;){const d=r.queue>>r.queuedBits-6&63;l(Lc[d]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const d=r.queue>>r.queuedBits-6&63;l(Lc[d]),r.queuedBits-=6}}function Og(c,r,l){const d=cx[c];if(d>-1)for(r.queue=r.queue<<6|d,r.queuedBits+=6;r.queuedBits>=8;)l(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(d===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(c)}"`)}}function tg(c){const r=[],l=E=>{r.push(String.fromCodePoint(E))},d={utf8seq:0,codepoint:0},x={queue:0,queuedBits:0},m=E=>{fx(E,d,l)};for(let E=0;E<c.length;E+=1)Og(c.charCodeAt(E),x,m);return r.join("")}function ux(c,r){if(c<=127){r(c);return}else if(c<=2047){r(192|c>>6),r(128|c&63);return}else if(c<=65535){r(224|c>>12),r(128|c>>6&63),r(128|c&63);return}else if(c<=1114111){r(240|c>>18),r(128|c>>12&63),r(128|c>>6&63),r(128|c&63);return}throw new Error(`Unrecognized Unicode codepoint: ${c.toString(16)}`)}function hx(c,r){for(let l=0;l<c.length;l+=1){let d=c.charCodeAt(l);if(d>55295&&d<=56319){const x=(d-55296)*1024&65535;d=(c.charCodeAt(l+1)-56320&65535|x)+65536,l+=1}ux(d,r)}}function fx(c,r,l){if(r.utf8seq===0){if(c<=127){l(c);return}for(let d=1;d<6;d+=1)if((c>>7-d&1)===0){r.utf8seq=d;break}if(r.utf8seq===2)r.codepoint=c&31;else if(r.utf8seq===3)r.codepoint=c&15;else if(r.utf8seq===4)r.codepoint=c&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(c<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|c&63,r.utf8seq-=1,r.utf8seq===0&&l(r.codepoint)}}function Zs(c){const r=[],l={queue:0,queuedBits:0},d=x=>{r.push(x)};for(let x=0;x<c.length;x+=1)Og(c.charCodeAt(x),l,d);return new Uint8Array(r)}function dx(c){const r=[];return hx(c,l=>r.push(l)),new Uint8Array(r)}function Ja(c){const r=[],l={queue:0,queuedBits:0},d=x=>{r.push(x)};return c.forEach(x=>eg(x,l,d)),eg(null,l,d),r.join("")}function gx(c){return Math.round(Date.now()/1e3)+c}function mx(){return Symbol("auth-callback")}const kn=()=>typeof window<"u"&&typeof document<"u",Xa={tested:!1,writable:!1},Ig=()=>{if(!kn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Xa.tested)return Xa.writable;const c=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(c,c),globalThis.localStorage.removeItem(c),Xa.tested=!0,Xa.writable=!0}catch{Xa.tested=!0,Xa.writable=!1}return Xa.writable};function px(c){const r={},l=new URL(c);if(l.hash&&l.hash[0]==="#")try{new URLSearchParams(l.hash.substring(1)).forEach((x,m)=>{r[m]=x})}catch{}return l.searchParams.forEach((d,x)=>{r[x]=d}),r}const Rg=c=>c?(...r)=>c(...r):(...r)=>fetch(...r),xx=c=>typeof c=="object"&&c!==null&&"status"in c&&"ok"in c&&"json"in c&&typeof c.json=="function",qs=async(c,r,l)=>{await c.setItem(r,JSON.stringify(l))},Wa=async(c,r)=>{const l=await c.getItem(r);if(!l)return null;try{return JSON.parse(l)}catch{return l}},Bn=async(c,r)=>{await c.removeItem(r)};class zc{constructor(){this.promise=new zc.promiseConstructor((r,l)=>{this.resolve=r,this.reject=l})}}zc.promiseConstructor=Promise;function Rc(c){const r=c.split(".");if(r.length!==3)throw new lf("Invalid JWT structure");for(let d=0;d<r.length;d++)if(!ix.test(r[d]))throw new lf("JWT not in base64url format");return{header:JSON.parse(tg(r[0])),payload:JSON.parse(tg(r[1])),signature:Zs(r[2]),raw:{header:r[0],payload:r[1]}}}async function yx(c){return await new Promise(r=>{setTimeout(()=>r(null),c)})}function wx(c,r){return new Promise((d,x)=>{(async()=>{for(let m=0;m<1/0;m++)try{const E=await c(m);if(!r(m,null,E)){d(E);return}}catch(E){if(!r(m,E)){x(E);return}}})()})}function bx(c){return("0"+c.toString(16)).substr(-2)}function Ax(){const r=new Uint32Array(56);if(typeof crypto>"u"){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",d=l.length;let x="";for(let m=0;m<56;m++)x+=l.charAt(Math.floor(Math.random()*d));return x}return crypto.getRandomValues(r),Array.from(r,bx).join("")}async function Ex(c){const l=new TextEncoder().encode(c),d=await crypto.subtle.digest("SHA-256",l),x=new Uint8Array(d);return Array.from(x).map(m=>String.fromCharCode(m)).join("")}async function vx(c){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),c;const l=await Ex(c);return btoa(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zs(c,r,l=!1){const d=Ax();let x=d;l&&(x+="/PASSWORD_RECOVERY"),await qs(c,`${r}-code-verifier`,x);const m=await vx(d);return[m,d===m?"plain":"s256"]}const _x=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Sx(c){const r=c.headers.get(af);if(!r||!r.match(_x))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function Cx(c){if(!c)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(c<=r)throw new Error("JWT has expired")}function Tx(c){switch(c){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Nx=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Fs(c){if(!Nx.test(c))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Xh(){const c={};return new Proxy(c,{get:(r,l)=>{if(l==="__isUserNotAvailableProxy")return!0;if(typeof l=="symbol"){const d=l.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${l}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function Ox(c,r){return new Proxy(c,{get:(l,d,x)=>{if(d==="__isInsecureUserWarningProxy")return!0;if(typeof d=="symbol"){const m=d.toString();if(m==="Symbol(Symbol.toPrimitive)"||m==="Symbol(Symbol.toStringTag)"||m==="Symbol(util.inspect.custom)"||m==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(l,d,x)}return!r.value&&typeof d=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(l,d,x)}})}function ng(c){return JSON.parse(JSON.stringify(c))}const Za=c=>c.msg||c.message||c.error_description||c.error||JSON.stringify(c),Ix=[502,503,504];async function ig(c){var r;if(!xx(c))throw new sf(Za(c),0);if(Ix.includes(c.status))throw new sf(Za(c),c.status);let l;try{l=await c.json()}catch(m){throw new Qa(Za(m),m)}let d;const x=Sx(c);if(x&&x.getTime()>=Ng["2024-01-01"].timestamp&&typeof l=="object"&&l&&typeof l.code=="string"?d=l.code:typeof l=="object"&&l&&typeof l.error_code=="string"&&(d=l.error_code),d){if(d==="weak_password")throw new J1(Za(l),c.status,((r=l.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(d==="session_not_found")throw new pi}else if(typeof l=="object"&&l&&typeof l.weak_password=="object"&&l.weak_password&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.reasons.reduce((m,E)=>m&&typeof E=="string",!0))throw new J1(Za(l),c.status,l.weak_password.reasons);throw new ax(Za(l),c.status||500,d)}const Rx=(c,r,l,d)=>{const x={method:c,headers:r?.headers||{}};return c==="GET"?x:(x.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),x.body=JSON.stringify(d),Object.assign(Object.assign({},x),l))};async function ze(c,r,l,d){var x;const m=Object.assign({},d?.headers);m[af]||(m[af]=Ng["2024-01-01"].name),d?.jwt&&(m.Authorization=`Bearer ${d.jwt}`);const E=(x=d?.query)!==null&&x!==void 0?x:{};d?.redirectTo&&(E.redirect_to=d.redirectTo);const S=Object.keys(E).length?"?"+new URLSearchParams(E).toString():"",C=await Dx(c,r,l+S,{headers:m,noResolveJson:d?.noResolveJson},{},d?.body);return d?.xform?d?.xform(C):{data:Object.assign({},C),error:null}}async function Dx(c,r,l,d,x,m){const E=Rx(r,d,x,m);let S;try{S=await c(l,Object.assign({},E))}catch(C){throw console.error(C),new sf(Za(C),0)}if(S.ok||await ig(S),d?.noResolveJson)return S;try{return await S.json()}catch(C){await ig(C)}}function Vi(c){var r;let l=null;Bx(c)&&(l=Object.assign({},c),c.expires_at||(l.expires_at=gx(c.expires_in)));const d=(r=c.user)!==null&&r!==void 0?r:c;return{data:{session:l,user:d},error:null}}function rg(c){const r=Vi(c);return!r.error&&c.weak_password&&typeof c.weak_password=="object"&&Array.isArray(c.weak_password.reasons)&&c.weak_password.reasons.length&&c.weak_password.message&&typeof c.weak_password.message=="string"&&c.weak_password.reasons.reduce((l,d)=>l&&typeof d=="string",!0)&&(r.data.weak_password=c.weak_password),r}function ba(c){var r;return{data:{user:(r=c.user)!==null&&r!==void 0?r:c},error:null}}function Mx(c){return{data:c,error:null}}function Lx(c){const{action_link:r,email_otp:l,hashed_token:d,redirect_to:x,verification_type:m}=c,E=Uc(c,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),S={action_link:r,email_otp:l,hashed_token:d,redirect_to:x,verification_type:m},C=Object.assign({},E);return{data:{properties:S,user:C},error:null}}function ag(c){return c}function Bx(c){return c.access_token&&c.refresh_token&&c.expires_in}const Wh=["global","local","others"];class kx{constructor({url:r="",headers:l={},fetch:d}){this.url=r,this.headers=l,this.fetch=Rg(d),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,l=Wh[0]){if(Wh.indexOf(l)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wh.join(", ")}`);try{return await ze(this.fetch,"POST",`${this.url}/logout?scope=${l}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(d){if(De(d))return{data:null,error:d};throw d}}async inviteUserByEmail(r,l={}){try{return await ze(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:l.data},headers:this.headers,redirectTo:l.redirectTo,xform:ba})}catch(d){if(De(d))return{data:{user:null},error:d};throw d}}async generateLink(r){try{const{options:l}=r,d=Uc(r,["options"]),x=Object.assign(Object.assign({},d),l);return"newEmail"in d&&(x.new_email=d?.newEmail,delete x.newEmail),await ze(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:x,headers:this.headers,xform:Lx,redirectTo:l?.redirectTo})}catch(l){if(De(l))return{data:{properties:null,user:null},error:l};throw l}}async createUser(r){try{return await ze(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:ba})}catch(l){if(De(l))return{data:{user:null},error:l};throw l}}async listUsers(r){var l,d,x,m,E,S,C;try{const A={nextPage:null,lastPage:0,total:0},I=await ze(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(d=(l=r?.page)===null||l===void 0?void 0:l.toString())!==null&&d!==void 0?d:"",per_page:(m=(x=r?.perPage)===null||x===void 0?void 0:x.toString())!==null&&m!==void 0?m:""},xform:ag});if(I.error)throw I.error;const D=await I.json(),U=(E=I.headers.get("x-total-count"))!==null&&E!==void 0?E:0,P=(C=(S=I.headers.get("link"))===null||S===void 0?void 0:S.split(","))!==null&&C!==void 0?C:[];return P.length>0&&(P.forEach(X=>{const W=parseInt(X.split(";")[0].split("=")[1].substring(0,1)),se=JSON.parse(X.split(";")[1].split("=")[1]);A[`${se}Page`]=W}),A.total=parseInt(U)),{data:Object.assign(Object.assign({},D),A),error:null}}catch(A){if(De(A))return{data:{users:[]},error:A};throw A}}async getUserById(r){Fs(r);try{return await ze(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:ba})}catch(l){if(De(l))return{data:{user:null},error:l};throw l}}async updateUserById(r,l){Fs(r);try{return await ze(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:l,headers:this.headers,xform:ba})}catch(d){if(De(d))return{data:{user:null},error:d};throw d}}async deleteUser(r,l=!1){Fs(r);try{return await ze(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:l},xform:ba})}catch(d){if(De(d))return{data:{user:null},error:d};throw d}}async _listFactors(r){Fs(r.userId);try{const{data:l,error:d}=await ze(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:x=>({data:{factors:x},error:null})});return{data:l,error:d}}catch(l){if(De(l))return{data:null,error:l};throw l}}async _deleteFactor(r){Fs(r.userId),Fs(r.id);try{return{data:await ze(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(l){if(De(l))return{data:null,error:l};throw l}}async _listOAuthClients(r){var l,d,x,m,E,S,C;try{const A={nextPage:null,lastPage:0,total:0},I=await ze(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(d=(l=r?.page)===null||l===void 0?void 0:l.toString())!==null&&d!==void 0?d:"",per_page:(m=(x=r?.perPage)===null||x===void 0?void 0:x.toString())!==null&&m!==void 0?m:""},xform:ag});if(I.error)throw I.error;const D=await I.json(),U=(E=I.headers.get("x-total-count"))!==null&&E!==void 0?E:0,P=(C=(S=I.headers.get("link"))===null||S===void 0?void 0:S.split(","))!==null&&C!==void 0?C:[];return P.length>0&&(P.forEach(X=>{const W=parseInt(X.split(";")[0].split("=")[1].substring(0,1)),se=JSON.parse(X.split(";")[1].split("=")[1]);A[`${se}Page`]=W}),A.total=parseInt(U)),{data:Object.assign(Object.assign({},D),A),error:null}}catch(A){if(De(A))return{data:{clients:[]},error:A};throw A}}async _createOAuthClient(r){try{return await ze(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(De(l))return{data:null,error:l};throw l}}async _getOAuthClient(r){try{return await ze(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(De(l))return{data:null,error:l};throw l}}async _updateOAuthClient(r,l){try{return await ze(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:l,headers:this.headers,xform:d=>({data:d,error:null})})}catch(d){if(De(d))return{data:null,error:d};throw d}}async _deleteOAuthClient(r){try{return await ze(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(l){if(De(l))return{data:null,error:l};throw l}}async _regenerateOAuthClientSecret(r){try{return await ze(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(De(l))return{data:null,error:l};throw l}}}function sg(c={}){return{getItem:r=>c[r]||null,setItem:(r,l)=>{c[r]=l},removeItem:r=>{delete c[r]}}}const Hs={debug:!!(globalThis&&Ig()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Dg extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class lg extends Dg{}async function Ux(c,r,l){Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",c,r);const d=new globalThis.AbortController;r>0&&setTimeout(()=>{d.abort(),Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",c)},r),await Promise.resolve();try{return await globalThis.navigator.locks.request(c,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:d.signal},async x=>{if(x){Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",c,x.name);try{return await l()}finally{Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",c,x.name)}}else{if(r===0)throw Hs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",c),new lg(`Acquiring an exclusive Navigator LockManager lock "${c}" immediately failed`);if(Hs.debug)try{const m=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(m,null,"  "))}catch(m){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",m)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await l()}})}catch(x){throw x?.name==="AbortError"?new lg(`Acquiring an exclusive Navigator LockManager lock "${c}" timed out waiting ${r}ms`):x}}function jx(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Mg(c){if(!/^0x[a-fA-F0-9]{40}$/.test(c))throw new Error(`@supabase/auth-js: Address "${c}" is invalid.`);return c.toLowerCase()}function Px(c){return parseInt(c,16)}function zx(c){const r=new TextEncoder().encode(c);return"0x"+Array.from(r,d=>d.toString(16).padStart(2,"0")).join("")}function Fx(c){var r;const{chainId:l,domain:d,expirationTime:x,issuedAt:m=new Date,nonce:E,notBefore:S,requestId:C,resources:A,scheme:I,uri:D,version:U}=c;{if(!Number.isInteger(l))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${l}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(E&&E.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${E}`);if(!D)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(U!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${U}`);if(!((r=c.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${c.statement}`)}const P=Mg(c.address),X=I?`${I}://${d}`:d,W=c.statement?`${c.statement}
`:"",se=`${X} wants you to sign in with your Ethereum account:
${P}

${W}`;let me=`URI: ${D}
Version: ${U}
Chain ID: ${l}${E?`
Nonce: ${E}`:""}
Issued At: ${m.toISOString()}`;if(x&&(me+=`
Expiration Time: ${x.toISOString()}`),S&&(me+=`
Not Before: ${S.toISOString()}`),C&&(me+=`
Request ID: ${C}`),A){let ce=`
Resources:`;for(const Y of A){if(!Y||typeof Y!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${Y}`);ce+=`
- ${Y}`}me+=ce}return`${se}
${me}`}class xn extends Error{constructor({message:r,code:l,cause:d,name:x}){var m;super(r,{cause:d}),this.__isWebAuthnError=!0,this.name=(m=x??(d instanceof Error?d.name:void 0))!==null&&m!==void 0?m:"Unknown Error",this.code=l}}class Bc extends xn{constructor(r,l){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l,message:r}),this.name="WebAuthnUnknownError",this.originalError=l}}function Hx({error:c,options:r}){var l,d,x;const{publicKey:m}=r;if(!m)throw Error("options was missing required publicKey property");if(c.name==="AbortError"){if(r.signal instanceof AbortSignal)return new xn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:c})}else if(c.name==="ConstraintError"){if(((l=m.authenticatorSelection)===null||l===void 0?void 0:l.requireResidentKey)===!0)return new xn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:c});if(r.mediation==="conditional"&&((d=m.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new xn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:c});if(((x=m.authenticatorSelection)===null||x===void 0?void 0:x.userVerification)==="required")return new xn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:c})}else{if(c.name==="InvalidStateError")return new xn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:c});if(c.name==="NotAllowedError")return new xn({message:c.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:c});if(c.name==="NotSupportedError")return m.pubKeyCredParams.filter(S=>S.type==="public-key").length===0?new xn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:c}):new xn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:c});if(c.name==="SecurityError"){const E=window.location.hostname;if(Lg(E)){if(m.rp.id!==E)return new xn({message:`The RP ID "${m.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:c})}else return new xn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:c})}else if(c.name==="TypeError"){if(m.user.id.byteLength<1||m.user.id.byteLength>64)return new xn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:c})}else if(c.name==="UnknownError")return new xn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:c})}return new xn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:c})}function Gx({error:c,options:r}){const{publicKey:l}=r;if(!l)throw Error("options was missing required publicKey property");if(c.name==="AbortError"){if(r.signal instanceof AbortSignal)return new xn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:c})}else{if(c.name==="NotAllowedError")return new xn({message:c.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:c});if(c.name==="SecurityError"){const d=window.location.hostname;if(Lg(d)){if(l.rpId!==d)return new xn({message:`The RP ID "${l.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:c})}else return new xn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:c})}else if(c.name==="UnknownError")return new xn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:c})}return new xn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:c})}class Vx{createNewAbortSignal(){if(this.controller){const l=new Error("Cancelling existing WebAuthn API call for new one");l.name="AbortError",this.controller.abort(l)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const Yx=new Vx;function qx(c){if(!c)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(c);const{challenge:r,user:l,excludeCredentials:d}=c,x=Uc(c,["challenge","user","excludeCredentials"]),m=Zs(r).buffer,E=Object.assign(Object.assign({},l),{id:Zs(l.id).buffer}),S=Object.assign(Object.assign({},x),{challenge:m,user:E});if(d&&d.length>0){S.excludeCredentials=new Array(d.length);for(let C=0;C<d.length;C++){const A=d[C];S.excludeCredentials[C]=Object.assign(Object.assign({},A),{id:Zs(A.id).buffer,type:A.type||"public-key",transports:A.transports})}}return S}function Xx(c){if(!c)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(c);const{challenge:r,allowCredentials:l}=c,d=Uc(c,["challenge","allowCredentials"]),x=Zs(r).buffer,m=Object.assign(Object.assign({},d),{challenge:x});if(l&&l.length>0){m.allowCredentials=new Array(l.length);for(let E=0;E<l.length;E++){const S=l[E];m.allowCredentials[E]=Object.assign(Object.assign({},S),{id:Zs(S.id).buffer,type:S.type||"public-key",transports:S.transports})}}return m}function Wx(c){var r;if("toJSON"in c&&typeof c.toJSON=="function")return c.toJSON();const l=c;return{id:c.id,rawId:c.id,response:{attestationObject:Ja(new Uint8Array(c.response.attestationObject)),clientDataJSON:Ja(new Uint8Array(c.response.clientDataJSON))},type:"public-key",clientExtensionResults:c.getClientExtensionResults(),authenticatorAttachment:(r=l.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Zx(c){var r;if("toJSON"in c&&typeof c.toJSON=="function")return c.toJSON();const l=c,d=c.getClientExtensionResults(),x=c.response;return{id:c.id,rawId:c.id,response:{authenticatorData:Ja(new Uint8Array(x.authenticatorData)),clientDataJSON:Ja(new Uint8Array(x.clientDataJSON)),signature:Ja(new Uint8Array(x.signature)),userHandle:x.userHandle?Ja(new Uint8Array(x.userHandle)):void 0},type:"public-key",clientExtensionResults:d,authenticatorAttachment:(r=l.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Lg(c){return c==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(c)}function og(){var c,r;return!!(kn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((c=navigator?.credentials)===null||c===void 0?void 0:c.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function Kx(c){try{const r=await navigator.credentials.create(c);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Bc("Browser returned unexpected credential type",r)}:{data:null,error:new Bc("Empty credential response",r)}}catch(r){return{data:null,error:Hx({error:r,options:c})}}}async function Qx(c){try{const r=await navigator.credentials.get(c);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Bc("Browser returned unexpected credential type",r)}:{data:null,error:new Bc("Empty credential response",r)}}catch(r){return{data:null,error:Gx({error:r,options:c})}}}const Jx={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},$x={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function kc(...c){const r=x=>x!==null&&typeof x=="object"&&!Array.isArray(x),l=x=>x instanceof ArrayBuffer||ArrayBuffer.isView(x),d={};for(const x of c)if(x)for(const m in x){const E=x[m];if(E!==void 0)if(Array.isArray(E))d[m]=E;else if(l(E))d[m]=E;else if(r(E)){const S=d[m];r(S)?d[m]=kc(S,E):d[m]=kc(E)}else d[m]=E}return d}function ey(c,r){return kc(Jx,c,r||{})}function ty(c,r){return kc($x,c,r||{})}class ny{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:l,friendlyName:d,signal:x},m){var E;try{const{data:S,error:C}=await this.client.mfa.challenge({factorId:r,webauthn:l});if(!S)return{data:null,error:C};const A=x??Yx.createNewAbortSignal();if(S.webauthn.type==="create"){const{user:I}=S.webauthn.credential_options.publicKey;if(!I.name){const D=d;if(D)I.name=`${I.id}:${D}`;else{const P=(await this.client.getUser()).data.user,X=((E=P?.user_metadata)===null||E===void 0?void 0:E.name)||P?.email||P?.id||"User";I.name=`${I.id}:${X}`}}I.displayName||(I.displayName=I.name)}switch(S.webauthn.type){case"create":{const I=ey(S.webauthn.credential_options.publicKey,m?.create),{data:D,error:U}=await Kx({publicKey:I,signal:A});return D?{data:{factorId:r,challengeId:S.id,webauthn:{type:S.webauthn.type,credential_response:D}},error:null}:{data:null,error:U}}case"request":{const I=ty(S.webauthn.credential_options.publicKey,m?.request),{data:D,error:U}=await Qx(Object.assign(Object.assign({},S.webauthn.credential_options),{publicKey:I,signal:A}));return D?{data:{factorId:r,challengeId:S.id,webauthn:{type:S.webauthn.type,credential_response:D}},error:null}:{data:null,error:U}}}}catch(S){return De(S)?{data:null,error:S}:{data:null,error:new Qa("Unexpected error in challenge",S)}}}async _verify({challengeId:r,factorId:l,webauthn:d}){return this.client.mfa.verify({factorId:l,challengeId:r,webauthn:d})}async _authenticate({factorId:r,webauthn:{rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:d=typeof window<"u"?[window.location.origin]:void 0,signal:x}={}},m){if(!l)return{data:null,error:new to("rpId is required for WebAuthn authentication")};try{if(!og())return{data:null,error:new Qa("Browser does not support WebAuthn",null)};const{data:E,error:S}=await this.challenge({factorId:r,webauthn:{rpId:l,rpOrigins:d},signal:x},{request:m});if(!E)return{data:null,error:S};const{webauthn:C}=E;return this._verify({factorId:r,challengeId:E.challengeId,webauthn:{type:C.type,rpId:l,rpOrigins:d,credential_response:C.credential_response}})}catch(E){return De(E)?{data:null,error:E}:{data:null,error:new Qa("Unexpected error in authenticate",E)}}}async _register({friendlyName:r,webauthn:{rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:d=typeof window<"u"?[window.location.origin]:void 0,signal:x}={}},m){if(!l)return{data:null,error:new to("rpId is required for WebAuthn registration")};try{if(!og())return{data:null,error:new Qa("Browser does not support WebAuthn",null)};const{data:E,error:S}=await this._enroll({friendlyName:r});if(!E)return await this.client.mfa.listFactors().then(I=>{var D;return(D=I.data)===null||D===void 0?void 0:D.all.find(U=>U.factor_type==="webauthn"&&U.friendly_name===r&&U.status!=="unverified")}).then(I=>I?this.client.mfa.unenroll({factorId:I?.id}):void 0),{data:null,error:S};const{data:C,error:A}=await this._challenge({factorId:E.id,friendlyName:E.friendly_name,webauthn:{rpId:l,rpOrigins:d},signal:x},{create:m});return C?this._verify({factorId:E.id,challengeId:C.challengeId,webauthn:{rpId:l,rpOrigins:d,type:C.webauthn.type,credential_response:C.webauthn.credential_response}}):{data:null,error:A}}catch(E){return De(E)?{data:null,error:E}:{data:null,error:new Qa("Unexpected error in register",E)}}}}jx();const iy={url:ex,storageKey:tx,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:nx,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function cg(c,r,l){return await l()}const Gs={};class no{get jwks(){var r,l;return(l=(r=Gs[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&l!==void 0?l:{keys:[]}}set jwks(r){Gs[this.storageKey]=Object.assign(Object.assign({},Gs[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,l;return(l=(r=Gs[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&l!==void 0?l:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){Gs[this.storageKey]=Object.assign(Object.assign({},Gs[this.storageKey]),{cachedAt:r})}constructor(r){var l,d,x;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const m=Object.assign(Object.assign({},iy),r);if(this.storageKey=m.storageKey,this.instanceID=(l=no.nextInstanceID[this.storageKey])!==null&&l!==void 0?l:0,no.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!m.debug,typeof m.debug=="function"&&(this.logger=m.debug),this.instanceID>0&&kn()){const E=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(E),this.logDebugMessages&&console.trace(E)}if(this.persistSession=m.persistSession,this.autoRefreshToken=m.autoRefreshToken,this.admin=new kx({url:m.url,headers:m.headers,fetch:m.fetch}),this.url=m.url,this.headers=m.headers,this.fetch=Rg(m.fetch),this.lock=m.lock||cg,this.detectSessionInUrl=m.detectSessionInUrl,this.flowType=m.flowType,this.hasCustomAuthorizationHeader=m.hasCustomAuthorizationHeader,this.throwOnError=m.throwOnError,this.lockAcquireTimeout=m.lockAcquireTimeout,m.lock?this.lock=m.lock:this.persistSession&&kn()&&(!((d=globalThis?.navigator)===null||d===void 0)&&d.locks)?this.lock=Ux:this.lock=cg,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new ny(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(m.storage?this.storage=m.storage:Ig()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=sg(this.memoryStorage)),m.userStorage&&(this.userStorage=m.userStorage)):(this.memoryStorage={},this.storage=sg(this.memoryStorage)),kn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(E){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",E)}(x=this.broadcastChannel)===null||x===void 0||x.addEventListener("message",async E=>{this._debug("received broadcast notification from other tab or client",E);try{await this._notifyAllSubscribers(E.data.event,E.data.session,!1)}catch(S){this._debug("#broadcastChannel","error",S)}})}m.skipAutoInitialize||this.initialize().catch(E=>{this._debug("#initialize()","error",E)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${Tg}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let l={},d="none";if(kn()&&(l=px(window.location.href),this._isImplicitGrantCallback(l)?d="implicit":await this._isPKCECallback(l)&&(d="pkce")),kn()&&this.detectSessionInUrl&&d!=="none"){const{data:x,error:m}=await this._getSessionFromURL(l,d);if(m){if(this._debug("#_initialize()","error detecting session from URL",m),lx(m)){const C=(r=m.details)===null||r===void 0?void 0:r.code;if(C==="identity_already_exists"||C==="identity_not_found"||C==="single_identity_not_deletable")return{error:m}}return{error:m}}const{session:E,redirectType:S}=x;return this._debug("#_initialize()","detected session in URL",E,"redirect type",S),await this._saveSession(E),setTimeout(async()=>{S==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",E):await this._notifyAllSubscribers("SIGNED_IN",E)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(l){return De(l)?this._returnResult({error:l}):this._returnResult({error:new Qa("Unexpected error during initialization",l)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var l,d,x;try{const m=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(d=(l=r?.options)===null||l===void 0?void 0:l.data)!==null&&d!==void 0?d:{},gotrue_meta_security:{captcha_token:(x=r?.options)===null||x===void 0?void 0:x.captchaToken}},xform:Vi}),{data:E,error:S}=m;if(S||!E)return this._returnResult({data:{user:null,session:null},error:S});const C=E.session,A=E.user;return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",C)),this._returnResult({data:{user:A,session:C},error:null})}catch(m){if(De(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signUp(r){var l,d,x;try{let m;if("email"in r){const{email:I,password:D,options:U}=r;let P=null,X=null;this.flowType==="pkce"&&([P,X]=await zs(this.storage,this.storageKey)),m=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:U?.emailRedirectTo,body:{email:I,password:D,data:(l=U?.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:U?.captchaToken},code_challenge:P,code_challenge_method:X},xform:Vi})}else if("phone"in r){const{phone:I,password:D,options:U}=r;m=await ze(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:I,password:D,data:(d=U?.data)!==null&&d!==void 0?d:{},channel:(x=U?.channel)!==null&&x!==void 0?x:"sms",gotrue_meta_security:{captcha_token:U?.captchaToken}},xform:Vi})}else throw new Oc("You must provide either an email or phone number and a password");const{data:E,error:S}=m;if(S||!E)return await Bn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:S});const C=E.session,A=E.user;return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",C)),this._returnResult({data:{user:A,session:C},error:null})}catch(m){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),De(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithPassword(r){try{let l;if("email"in r){const{email:m,password:E,options:S}=r;l=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:m,password:E,gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:rg})}else if("phone"in r){const{phone:m,password:E,options:S}=r;l=await ze(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:m,password:E,gotrue_meta_security:{captcha_token:S?.captchaToken}},xform:rg})}else throw new Oc("You must provide either an email or phone number and a password");const{data:d,error:x}=l;if(x)return this._returnResult({data:{user:null,session:null},error:x});if(!d||!d.session||!d.user){const m=new Ps;return this._returnResult({data:{user:null,session:null},error:m})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign({user:d.user,session:d.session},d.weak_password?{weakPassword:d.weak_password}:null),error:x})}catch(l){if(De(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithOAuth(r){var l,d,x,m;return await this._handleProviderSignIn(r.provider,{redirectTo:(l=r.options)===null||l===void 0?void 0:l.redirectTo,scopes:(d=r.options)===null||d===void 0?void 0:d.scopes,queryParams:(x=r.options)===null||x===void 0?void 0:x.queryParams,skipBrowserRedirect:(m=r.options)===null||m===void 0?void 0:m.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:l}=r;switch(l){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${l}"`)}}async signInWithEthereum(r){var l,d,x,m,E,S,C,A,I,D,U;let P,X;if("message"in r)P=r.message,X=r.signature;else{const{chain:W,wallet:se,statement:me,options:ce}=r;let Y;if(kn())if(typeof se=="object")Y=se;else{const oe=window;if("ethereum"in oe&&typeof oe.ethereum=="object"&&"request"in oe.ethereum&&typeof oe.ethereum.request=="function")Y=oe.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof se!="object"||!ce?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");Y=se}const fe=new URL((l=ce?.url)!==null&&l!==void 0?l:window.location.href),Se=await Y.request({method:"eth_requestAccounts"}).then(oe=>oe).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Se||Se.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const we=Mg(Se[0]);let Q=(d=ce?.signInWithEthereum)===null||d===void 0?void 0:d.chainId;if(!Q){const oe=await Y.request({method:"eth_chainId"});Q=Px(oe)}const Te={domain:fe.host,address:we,statement:me,uri:fe.href,version:"1",chainId:Q,nonce:(x=ce?.signInWithEthereum)===null||x===void 0?void 0:x.nonce,issuedAt:(E=(m=ce?.signInWithEthereum)===null||m===void 0?void 0:m.issuedAt)!==null&&E!==void 0?E:new Date,expirationTime:(S=ce?.signInWithEthereum)===null||S===void 0?void 0:S.expirationTime,notBefore:(C=ce?.signInWithEthereum)===null||C===void 0?void 0:C.notBefore,requestId:(A=ce?.signInWithEthereum)===null||A===void 0?void 0:A.requestId,resources:(I=ce?.signInWithEthereum)===null||I===void 0?void 0:I.resources};P=Fx(Te),X=await Y.request({method:"personal_sign",params:[zx(P),we]})}try{const{data:W,error:se}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:P,signature:X},!((D=r.options)===null||D===void 0)&&D.captchaToken?{gotrue_meta_security:{captcha_token:(U=r.options)===null||U===void 0?void 0:U.captchaToken}}:null),xform:Vi});if(se)throw se;if(!W||!W.session||!W.user){const me=new Ps;return this._returnResult({data:{user:null,session:null},error:me})}return W.session&&(await this._saveSession(W.session),await this._notifyAllSubscribers("SIGNED_IN",W.session)),this._returnResult({data:Object.assign({},W),error:se})}catch(W){if(De(W))return this._returnResult({data:{user:null,session:null},error:W});throw W}}async signInWithSolana(r){var l,d,x,m,E,S,C,A,I,D,U,P;let X,W;if("message"in r)X=r.message,W=r.signature;else{const{chain:se,wallet:me,statement:ce,options:Y}=r;let fe;if(kn())if(typeof me=="object")fe=me;else{const we=window;if("solana"in we&&typeof we.solana=="object"&&("signIn"in we.solana&&typeof we.solana.signIn=="function"||"signMessage"in we.solana&&typeof we.solana.signMessage=="function"))fe=we.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof me!="object"||!Y?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");fe=me}const Se=new URL((l=Y?.url)!==null&&l!==void 0?l:window.location.href);if("signIn"in fe&&fe.signIn){const we=await fe.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},Y?.signInWithSolana),{version:"1",domain:Se.host,uri:Se.href}),ce?{statement:ce}:null));let Q;if(Array.isArray(we)&&we[0]&&typeof we[0]=="object")Q=we[0];else if(we&&typeof we=="object"&&"signedMessage"in we&&"signature"in we)Q=we;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in Q&&"signature"in Q&&(typeof Q.signedMessage=="string"||Q.signedMessage instanceof Uint8Array)&&Q.signature instanceof Uint8Array)X=typeof Q.signedMessage=="string"?Q.signedMessage:new TextDecoder().decode(Q.signedMessage),W=Q.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in fe)||typeof fe.signMessage!="function"||!("publicKey"in fe)||typeof fe!="object"||!fe.publicKey||!("toBase58"in fe.publicKey)||typeof fe.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");X=[`${Se.host} wants you to sign in with your Solana account:`,fe.publicKey.toBase58(),...ce?["",ce,""]:[""],"Version: 1",`URI: ${Se.href}`,`Issued At: ${(x=(d=Y?.signInWithSolana)===null||d===void 0?void 0:d.issuedAt)!==null&&x!==void 0?x:new Date().toISOString()}`,...!((m=Y?.signInWithSolana)===null||m===void 0)&&m.notBefore?[`Not Before: ${Y.signInWithSolana.notBefore}`]:[],...!((E=Y?.signInWithSolana)===null||E===void 0)&&E.expirationTime?[`Expiration Time: ${Y.signInWithSolana.expirationTime}`]:[],...!((S=Y?.signInWithSolana)===null||S===void 0)&&S.chainId?[`Chain ID: ${Y.signInWithSolana.chainId}`]:[],...!((C=Y?.signInWithSolana)===null||C===void 0)&&C.nonce?[`Nonce: ${Y.signInWithSolana.nonce}`]:[],...!((A=Y?.signInWithSolana)===null||A===void 0)&&A.requestId?[`Request ID: ${Y.signInWithSolana.requestId}`]:[],...!((D=(I=Y?.signInWithSolana)===null||I===void 0?void 0:I.resources)===null||D===void 0)&&D.length?["Resources",...Y.signInWithSolana.resources.map(Q=>`- ${Q}`)]:[]].join(`
`);const we=await fe.signMessage(new TextEncoder().encode(X),"utf8");if(!we||!(we instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");W=we}}try{const{data:se,error:me}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:X,signature:Ja(W)},!((U=r.options)===null||U===void 0)&&U.captchaToken?{gotrue_meta_security:{captcha_token:(P=r.options)===null||P===void 0?void 0:P.captchaToken}}:null),xform:Vi});if(me)throw me;if(!se||!se.session||!se.user){const ce=new Ps;return this._returnResult({data:{user:null,session:null},error:ce})}return se.session&&(await this._saveSession(se.session),await this._notifyAllSubscribers("SIGNED_IN",se.session)),this._returnResult({data:Object.assign({},se),error:me})}catch(se){if(De(se))return this._returnResult({data:{user:null,session:null},error:se});throw se}}async _exchangeCodeForSession(r){const l=await Wa(this.storage,`${this.storageKey}-code-verifier`),[d,x]=(l??"").split("/");try{if(!d&&this.flowType==="pkce")throw new ox;const{data:m,error:E}=await ze(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:d},xform:Vi});if(await Bn(this.storage,`${this.storageKey}-code-verifier`),E)throw E;if(!m||!m.session||!m.user){const S=new Ps;return this._returnResult({data:{user:null,session:null,redirectType:null},error:S})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign(Object.assign({},m),{redirectType:x??null}),error:E})}catch(m){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),De(m))return this._returnResult({data:{user:null,session:null,redirectType:null},error:m});throw m}}async signInWithIdToken(r){try{const{options:l,provider:d,token:x,access_token:m,nonce:E}=r,S=await ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:d,id_token:x,access_token:m,nonce:E,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Vi}),{data:C,error:A}=S;if(A)return this._returnResult({data:{user:null,session:null},error:A});if(!C||!C.session||!C.user){const I=new Ps;return this._returnResult({data:{user:null,session:null},error:I})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:C,error:A})}catch(l){if(De(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithOtp(r){var l,d,x,m,E;try{if("email"in r){const{email:S,options:C}=r;let A=null,I=null;this.flowType==="pkce"&&([A,I]=await zs(this.storage,this.storageKey));const{error:D}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:S,data:(l=C?.data)!==null&&l!==void 0?l:{},create_user:(d=C?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:C?.captchaToken},code_challenge:A,code_challenge_method:I},redirectTo:C?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:D})}if("phone"in r){const{phone:S,options:C}=r,{data:A,error:I}=await ze(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:S,data:(x=C?.data)!==null&&x!==void 0?x:{},create_user:(m=C?.shouldCreateUser)!==null&&m!==void 0?m:!0,gotrue_meta_security:{captcha_token:C?.captchaToken},channel:(E=C?.channel)!==null&&E!==void 0?E:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:A?.message_id},error:I})}throw new Oc("You must provide either an email or phone number.")}catch(S){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),De(S))return this._returnResult({data:{user:null,session:null},error:S});throw S}}async verifyOtp(r){var l,d;try{let x,m;"options"in r&&(x=(l=r.options)===null||l===void 0?void 0:l.redirectTo,m=(d=r.options)===null||d===void 0?void 0:d.captchaToken);const{data:E,error:S}=await ze(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:m}}),redirectTo:x,xform:Vi});if(S)throw S;if(!E)throw new Error("An error occurred on token verification.");const C=E.session,A=E.user;return C?.access_token&&(await this._saveSession(C),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",C)),this._returnResult({data:{user:A,session:C},error:null})}catch(x){if(De(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}}async signInWithSSO(r){var l,d,x,m,E;try{let S=null,C=null;this.flowType==="pkce"&&([S,C]=await zs(this.storage,this.storageKey));const A=await ze(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(d=(l=r.options)===null||l===void 0?void 0:l.redirectTo)!==null&&d!==void 0?d:void 0}),!((x=r?.options)===null||x===void 0)&&x.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:S,code_challenge_method:C}),headers:this.headers,xform:Mx});return!((m=A.data)===null||m===void 0)&&m.url&&kn()&&!(!((E=r.options)===null||E===void 0)&&E.skipBrowserRedirect)&&window.location.assign(A.data.url),this._returnResult(A)}catch(S){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),De(S))return this._returnResult({data:null,error:S});throw S}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:l},error:d}=r;if(d)throw d;if(!l)throw new pi;const{error:x}=await ze(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:l.access_token});return this._returnResult({data:{user:null,session:null},error:x})})}catch(r){if(De(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const l=`${this.url}/resend`;if("email"in r){const{email:d,type:x,options:m}=r,{error:E}=await ze(this.fetch,"POST",l,{headers:this.headers,body:{email:d,type:x,gotrue_meta_security:{captcha_token:m?.captchaToken}},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}else if("phone"in r){const{phone:d,type:x,options:m}=r,{data:E,error:S}=await ze(this.fetch,"POST",l,{headers:this.headers,body:{phone:d,type:x,gotrue_meta_security:{captcha_token:m?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:E?.message_id},error:S})}throw new Oc("You must provide either an email or phone number and a type")}catch(l){if(De(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async l=>l))}async _acquireLock(r,l){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const d=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),x=(async()=>(await d,await l()))();return this.pendingInLock.push((async()=>{try{await x}catch{}})()),x}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const d=l();for(this.pendingInLock.push((async()=>{try{await d}catch{}})()),await d;this.pendingInLock.length;){const x=[...this.pendingInLock];await Promise.all(x),this.pendingInLock.splice(0,x.length)}return await d}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const l=await this.__loadSession();return await r(l)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const l=await Wa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",l),l!==null&&(this._isValidSession(l)?r=l:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const d=r.expires_at?r.expires_at*1e3-Date.now()<Vh:!1;if(this._debug("#__loadSession()",`session has${d?"":" not"} expired`,"expires_at",r.expires_at),!d){if(this.userStorage){const E=await Wa(this.userStorage,this.storageKey+"-user");E?.user?r.user=E.user:r.user=Xh()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const E={value:this.suppressGetSessionWarning};r.user=Ox(r.user,E),E.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:x,error:m}=await this._callRefreshToken(r.refresh_token);return m?this._returnResult({data:{session:null},error:m}):this._returnResult({data:{session:x},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const l=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return l.data.user&&(this.suppressGetSessionWarning=!0),l}async _getUser(r){try{return r?await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:ba}):await this._useSession(async l=>{var d,x,m;const{data:E,error:S}=l;if(S)throw S;return!(!((d=E.session)===null||d===void 0)&&d.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pi}:await ze(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(m=(x=E.session)===null||x===void 0?void 0:x.access_token)!==null&&m!==void 0?m:void 0,xform:ba})})}catch(l){if(De(l))return Yh(l)&&(await this._removeSession(),await Bn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:l});throw l}}async updateUser(r,l={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(r,l))}async _updateUser(r,l={}){try{return await this._useSession(async d=>{const{data:x,error:m}=d;if(m)throw m;if(!x.session)throw new pi;const E=x.session;let S=null,C=null;this.flowType==="pkce"&&r.email!=null&&([S,C]=await zs(this.storage,this.storageKey));const{data:A,error:I}=await ze(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:l?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:S,code_challenge_method:C}),jwt:E.access_token,xform:ba});if(I)throw I;return E.user=A.user,await this._saveSession(E),await this._notifyAllSubscribers("USER_UPDATED",E),this._returnResult({data:{user:E.user},error:null})})}catch(d){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),De(d))return this._returnResult({data:{user:null},error:d});throw d}}async setSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new pi;const l=Date.now()/1e3;let d=l,x=!0,m=null;const{payload:E}=Rc(r.access_token);if(E.exp&&(d=E.exp,x=d<=l),x){const{data:S,error:C}=await this._callRefreshToken(r.refresh_token);if(C)return this._returnResult({data:{user:null,session:null},error:C});if(!S)return{data:{user:null,session:null},error:null};m=S}else{const{data:S,error:C}=await this._getUser(r.access_token);if(C)return this._returnResult({data:{user:null,session:null},error:C});m={access_token:r.access_token,refresh_token:r.refresh_token,user:S.user,token_type:"bearer",expires_in:d-l,expires_at:d},await this._saveSession(m),await this._notifyAllSubscribers("SIGNED_IN",m)}return this._returnResult({data:{user:m.user,session:m},error:null})}catch(l){if(De(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async l=>{var d;if(!r){const{data:E,error:S}=l;if(S)throw S;r=(d=E.session)!==null&&d!==void 0?d:void 0}if(!r?.refresh_token)throw new pi;const{data:x,error:m}=await this._callRefreshToken(r.refresh_token);return m?this._returnResult({data:{user:null,session:null},error:m}):x?this._returnResult({data:{user:x.user,session:x},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(l){if(De(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async _getSessionFromURL(r,l){try{if(!kn())throw new Ic("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Ic(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(l){case"implicit":if(this.flowType==="pkce")throw new Q1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Ic("Not a valid implicit grant flow url.");break;default:}if(l==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new Q1("No code detected.");const{data:ce,error:Y}=await this._exchangeCodeForSession(r.code);if(Y)throw Y;const fe=new URL(window.location.href);return fe.searchParams.delete("code"),window.history.replaceState(window.history.state,"",fe.toString()),{data:{session:ce.session,redirectType:null},error:null}}const{provider_token:d,provider_refresh_token:x,access_token:m,refresh_token:E,expires_in:S,expires_at:C,token_type:A}=r;if(!m||!S||!E||!A)throw new Ic("No session defined in URL");const I=Math.round(Date.now()/1e3),D=parseInt(S);let U=I+D;C&&(U=parseInt(C));const P=U-I;P*1e3<=Ys&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${P}s, should have been closer to ${D}s`);const X=U-D;I-X>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",X,U,I):I-X<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",X,U,I);const{data:W,error:se}=await this._getUser(m);if(se)throw se;const me={provider_token:d,provider_refresh_token:x,access_token:m,expires_in:D,expires_at:U,refresh_token:E,token_type:A,user:W.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:me,redirectType:r.type},error:null})}catch(d){if(De(d))return this._returnResult({data:{session:null,redirectType:null},error:d});throw d}}_isImplicitGrantCallback(r){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),r):!!(r.access_token||r.error_description)}async _isPKCECallback(r){const l=await Wa(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&l)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async l=>{var d;const{data:x,error:m}=l;if(m&&!Yh(m))return this._returnResult({error:m});const E=(d=x.session)===null||d===void 0?void 0:d.access_token;if(E){const{error:S}=await this.admin.signOut(E,r);if(S&&!(sx(S)&&(S.status===404||S.status===401||S.status===403)||Yh(S)))return this._returnResult({error:S})}return r!=="others"&&(await this._removeSession(),await Bn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const l=mx(),d={id:l,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",l),this.stateChangeEmitters.delete(l)}};return this._debug("#onAuthStateChange()","registered callback with id",l),this.stateChangeEmitters.set(l,d),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(l)})))(),{data:{subscription:d}}}async _emitInitialSession(r){return await this._useSession(async l=>{var d,x;try{const{data:{session:m},error:E}=l;if(E)throw E;await((d=this.stateChangeEmitters.get(r))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",m)),this._debug("INITIAL_SESSION","callback id",r,"session",m)}catch(m){await((x=this.stateChangeEmitters.get(r))===null||x===void 0?void 0:x.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",m),console.error(m)}})}async resetPasswordForEmail(r,l={}){let d=null,x=null;this.flowType==="pkce"&&([d,x]=await zs(this.storage,this.storageKey,!0));try{return await ze(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:d,code_challenge_method:x,gotrue_meta_security:{captcha_token:l.captchaToken}},headers:this.headers,redirectTo:l.redirectTo})}catch(m){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),De(m))return this._returnResult({data:null,error:m});throw m}}async getUserIdentities(){var r;try{const{data:l,error:d}=await this.getUser();if(d)throw d;return this._returnResult({data:{identities:(r=l.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(l){if(De(l))return this._returnResult({data:null,error:l});throw l}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var l;try{const{data:d,error:x}=await this._useSession(async m=>{var E,S,C,A,I;const{data:D,error:U}=m;if(U)throw U;const P=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(E=r.options)===null||E===void 0?void 0:E.redirectTo,scopes:(S=r.options)===null||S===void 0?void 0:S.scopes,queryParams:(C=r.options)===null||C===void 0?void 0:C.queryParams,skipBrowserRedirect:!0});return await ze(this.fetch,"GET",P,{headers:this.headers,jwt:(I=(A=D.session)===null||A===void 0?void 0:A.access_token)!==null&&I!==void 0?I:void 0})});if(x)throw x;return kn()&&!(!((l=r.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(d?.url),this._returnResult({data:{provider:r.provider,url:d?.url},error:null})}catch(d){if(De(d))return this._returnResult({data:{provider:r.provider,url:null},error:d});throw d}}async linkIdentityIdToken(r){return await this._useSession(async l=>{var d;try{const{error:x,data:{session:m}}=l;if(x)throw x;const{options:E,provider:S,token:C,access_token:A,nonce:I}=r,D=await ze(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(d=m?.access_token)!==null&&d!==void 0?d:void 0,body:{provider:S,id_token:C,access_token:A,nonce:I,link_identity:!0,gotrue_meta_security:{captcha_token:E?.captchaToken}},xform:Vi}),{data:U,error:P}=D;return P?this._returnResult({data:{user:null,session:null},error:P}):!U||!U.session||!U.user?this._returnResult({data:{user:null,session:null},error:new Ps}):(U.session&&(await this._saveSession(U.session),await this._notifyAllSubscribers("USER_UPDATED",U.session)),this._returnResult({data:U,error:P}))}catch(x){if(await Bn(this.storage,`${this.storageKey}-code-verifier`),De(x))return this._returnResult({data:{user:null,session:null},error:x});throw x}})}async unlinkIdentity(r){try{return await this._useSession(async l=>{var d,x;const{data:m,error:E}=l;if(E)throw E;return await ze(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(x=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&x!==void 0?x:void 0})})}catch(l){if(De(l))return this._returnResult({data:null,error:l});throw l}}async _refreshAccessToken(r){const l=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(l,"begin");try{const d=Date.now();return await wx(async x=>(x>0&&await yx(200*Math.pow(2,x-1)),this._debug(l,"refreshing attempt",x),await ze(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Vi})),(x,m)=>{const E=200*Math.pow(2,x);return m&&qh(m)&&Date.now()+E-d<Ys})}catch(d){if(this._debug(l,"error",d),De(d))return this._returnResult({data:{session:null,user:null},error:d});throw d}finally{this._debug(l,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,l){const d=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:l.redirectTo,scopes:l.scopes,queryParams:l.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",l,"url",d),kn()&&!l.skipBrowserRedirect&&window.location.assign(d),{data:{provider:r,url:d},error:null}}async _recoverAndRefresh(){var r,l;const d="#_recoverAndRefresh()";this._debug(d,"begin");try{const x=await Wa(this.storage,this.storageKey);if(x&&this.userStorage){let E=await Wa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!E&&(E={user:x.user},await qs(this.userStorage,this.storageKey+"-user",E)),x.user=(r=E?.user)!==null&&r!==void 0?r:Xh()}else if(x&&!x.user&&!x.user){const E=await Wa(this.storage,this.storageKey+"-user");E&&E?.user?(x.user=E.user,await Bn(this.storage,this.storageKey+"-user"),await qs(this.storage,this.storageKey,x)):x.user=Xh()}if(this._debug(d,"session from storage",x),!this._isValidSession(x)){this._debug(d,"session is not valid"),x!==null&&await this._removeSession();return}const m=((l=x.expires_at)!==null&&l!==void 0?l:1/0)*1e3-Date.now()<Vh;if(this._debug(d,`session has${m?"":" not"} expired with margin of ${Vh}s`),m){if(this.autoRefreshToken&&x.refresh_token){const{error:E}=await this._callRefreshToken(x.refresh_token);E&&(console.error(E),qh(E)||(this._debug(d,"refresh failed with a non-retryable error, removing the session",E),await this._removeSession()))}}else if(x.user&&x.user.__isUserNotAvailableProxy===!0)try{const{data:E,error:S}=await this._getUser(x.access_token);!S&&E?.user?(x.user=E.user,await this._saveSession(x),await this._notifyAllSubscribers("SIGNED_IN",x)):this._debug(d,"could not get user data, skipping SIGNED_IN notification")}catch(E){console.error("Error getting user data:",E),this._debug(d,"error getting user data, skipping SIGNED_IN notification",E)}else await this._notifyAllSubscribers("SIGNED_IN",x)}catch(x){this._debug(d,"error",x),console.error(x);return}finally{this._debug(d,"end")}}async _callRefreshToken(r){var l,d;if(!r)throw new pi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const x=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(x,"begin");try{this.refreshingDeferred=new zc;const{data:m,error:E}=await this._refreshAccessToken(r);if(E)throw E;if(!m.session)throw new pi;await this._saveSession(m.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",m.session);const S={data:m.session,error:null};return this.refreshingDeferred.resolve(S),S}catch(m){if(this._debug(x,"error",m),De(m)){const E={data:null,error:m};return qh(m)||await this._removeSession(),(l=this.refreshingDeferred)===null||l===void 0||l.resolve(E),E}throw(d=this.refreshingDeferred)===null||d===void 0||d.reject(m),m}finally{this.refreshingDeferred=null,this._debug(x,"end")}}async _notifyAllSubscribers(r,l,d=!0){const x=`#_notifyAllSubscribers(${r})`;this._debug(x,"begin",l,`broadcast = ${d}`);try{this.broadcastChannel&&d&&this.broadcastChannel.postMessage({event:r,session:l});const m=[],E=Array.from(this.stateChangeEmitters.values()).map(async S=>{try{await S.callback(r,l)}catch(C){m.push(C)}});if(await Promise.all(E),m.length>0){for(let S=0;S<m.length;S+=1)console.error(m[S]);throw m[0]}}finally{this._debug(x,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await Bn(this.storage,`${this.storageKey}-code-verifier`);const l=Object.assign({},r),d=l.user&&l.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!d&&l.user&&await qs(this.userStorage,this.storageKey+"-user",{user:l.user});const x=Object.assign({},l);delete x.user;const m=ng(x);await qs(this.storage,this.storageKey,m)}else{const x=ng(l);await qs(this.storage,this.storageKey,x)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Bn(this.storage,this.storageKey),await Bn(this.storage,this.storageKey+"-code-verifier"),await Bn(this.storage,this.storageKey+"-user"),this.userStorage&&await Bn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&kn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(l){console.error("removing visibilitychange callback failed",l)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),Ys);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r);const l=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=l,l&&typeof l=="object"&&typeof l.unref=="function"?l.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(l)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r);const l=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,l&&clearTimeout(l)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async l=>{const{data:{session:d}}=l;if(!d||!d.refresh_token||!d.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const x=Math.floor((d.expires_at*1e3-r)/Ys);this._debug("#_autoRefreshTokenTick()",`access token expires in ${x} ticks, a tick lasts ${Ys}ms, refresh threshold is ${rf} ticks`),x<=rf&&await this._callRefreshToken(d.refresh_token)})}catch(l){console.error("Auto refresh tick failed with error. This is likely a transient error.",l)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Dg)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!kn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(r){this._debug("#visibilityChangedCallback","error",r)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const l=`#_onVisibilityChanged(${r})`;this._debug(l,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(l,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,l,d){const x=[`provider=${encodeURIComponent(l)}`];if(d?.redirectTo&&x.push(`redirect_to=${encodeURIComponent(d.redirectTo)}`),d?.scopes&&x.push(`scopes=${encodeURIComponent(d.scopes)}`),this.flowType==="pkce"){const[m,E]=await zs(this.storage,this.storageKey),S=new URLSearchParams({code_challenge:`${encodeURIComponent(m)}`,code_challenge_method:`${encodeURIComponent(E)}`});x.push(S.toString())}if(d?.queryParams){const m=new URLSearchParams(d.queryParams);x.push(m.toString())}return d?.skipBrowserRedirect&&x.push(`skip_http_redirect=${d.skipBrowserRedirect}`),`${r}?${x.join("&")}`}async _unenroll(r){try{return await this._useSession(async l=>{var d;const{data:x,error:m}=l;return m?this._returnResult({data:null,error:m}):await ze(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(d=x?.session)===null||d===void 0?void 0:d.access_token})})}catch(l){if(De(l))return this._returnResult({data:null,error:l});throw l}}async _enroll(r){try{return await this._useSession(async l=>{var d,x;const{data:m,error:E}=l;if(E)return this._returnResult({data:null,error:E});const S=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:C,error:A}=await ze(this.fetch,"POST",`${this.url}/factors`,{body:S,headers:this.headers,jwt:(d=m?.session)===null||d===void 0?void 0:d.access_token});return A?this._returnResult({data:null,error:A}):(r.factorType==="totp"&&C.type==="totp"&&(!((x=C?.totp)===null||x===void 0)&&x.qr_code)&&(C.totp.qr_code=`data:image/svg+xml;utf-8,${C.totp.qr_code}`),this._returnResult({data:C,error:null}))})}catch(l){if(De(l))return this._returnResult({data:null,error:l});throw l}}async _verify(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async l=>{var d;const{data:x,error:m}=l;if(m)return this._returnResult({data:null,error:m});const E=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?Wx(r.webauthn.credential_response):Zx(r.webauthn.credential_response)})}:{code:r.code}),{data:S,error:C}=await ze(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:E,headers:this.headers,jwt:(d=x?.session)===null||d===void 0?void 0:d.access_token});return C?this._returnResult({data:null,error:C}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+S.expires_in},S)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",S),this._returnResult({data:S,error:C}))})}catch(l){if(De(l))return this._returnResult({data:null,error:l});throw l}})}async _challenge(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async l=>{var d;const{data:x,error:m}=l;if(m)return this._returnResult({data:null,error:m});const E=await ze(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(d=x?.session)===null||d===void 0?void 0:d.access_token});if(E.error)return E;const{data:S}=E;if(S.type!=="webauthn")return{data:S,error:null};switch(S.webauthn.type){case"create":return{data:Object.assign(Object.assign({},S),{webauthn:Object.assign(Object.assign({},S.webauthn),{credential_options:Object.assign(Object.assign({},S.webauthn.credential_options),{publicKey:qx(S.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},S),{webauthn:Object.assign(Object.assign({},S.webauthn),{credential_options:Object.assign(Object.assign({},S.webauthn.credential_options),{publicKey:Xx(S.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(l){if(De(l))return this._returnResult({data:null,error:l});throw l}})}async _challengeAndVerify(r){const{data:l,error:d}=await this._challenge({factorId:r.factorId});return d?this._returnResult({data:null,error:d}):await this._verify({factorId:r.factorId,challengeId:l.id,code:r.code})}async _listFactors(){var r;const{data:{user:l},error:d}=await this.getUser();if(d)return{data:null,error:d};const x={all:[],phone:[],totp:[],webauthn:[]};for(const m of(r=l?.factors)!==null&&r!==void 0?r:[])x.all.push(m),m.status==="verified"&&x[m.factor_type].push(m);return{data:x,error:null}}async _getAuthenticatorAssuranceLevel(r){var l,d,x,m;if(r)try{const{payload:P}=Rc(r);let X=null;P.aal&&(X=P.aal);let W=X;const{data:{user:se},error:me}=await this.getUser(r);if(me)return this._returnResult({data:null,error:me});((d=(l=se?.factors)===null||l===void 0?void 0:l.filter(fe=>fe.status==="verified"))!==null&&d!==void 0?d:[]).length>0&&(W="aal2");const Y=P.amr||[];return{data:{currentLevel:X,nextLevel:W,currentAuthenticationMethods:Y},error:null}}catch(P){if(De(P))return this._returnResult({data:null,error:P});throw P}const{data:{session:E},error:S}=await this.getSession();if(S)return this._returnResult({data:null,error:S});if(!E)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:C}=Rc(E.access_token);let A=null;C.aal&&(A=C.aal);let I=A;((m=(x=E.user.factors)===null||x===void 0?void 0:x.filter(P=>P.status==="verified"))!==null&&m!==void 0?m:[]).length>0&&(I="aal2");const U=C.amr||[];return{data:{currentLevel:A,nextLevel:I,currentAuthenticationMethods:U},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async l=>{const{data:{session:d},error:x}=l;return x?this._returnResult({data:null,error:x}):d?await ze(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:d.access_token,xform:m=>({data:m,error:null})}):this._returnResult({data:null,error:new pi})})}catch(l){if(De(l))return this._returnResult({data:null,error:l});throw l}}async _approveAuthorization(r,l){try{return await this._useSession(async d=>{const{data:{session:x},error:m}=d;if(m)return this._returnResult({data:null,error:m});if(!x)return this._returnResult({data:null,error:new pi});const E=await ze(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:x.access_token,body:{action:"approve"},xform:S=>({data:S,error:null})});return E.data&&E.data.redirect_url&&kn()&&!l?.skipBrowserRedirect&&window.location.assign(E.data.redirect_url),E})}catch(d){if(De(d))return this._returnResult({data:null,error:d});throw d}}async _denyAuthorization(r,l){try{return await this._useSession(async d=>{const{data:{session:x},error:m}=d;if(m)return this._returnResult({data:null,error:m});if(!x)return this._returnResult({data:null,error:new pi});const E=await ze(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:x.access_token,body:{action:"deny"},xform:S=>({data:S,error:null})});return E.data&&E.data.redirect_url&&kn()&&!l?.skipBrowserRedirect&&window.location.assign(E.data.redirect_url),E})}catch(d){if(De(d))return this._returnResult({data:null,error:d});throw d}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:l},error:d}=r;return d?this._returnResult({data:null,error:d}):l?await ze(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,xform:x=>({data:x,error:null})}):this._returnResult({data:null,error:new pi})})}catch(r){if(De(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async l=>{const{data:{session:d},error:x}=l;return x?this._returnResult({data:null,error:x}):d?(await ze(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:d.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new pi})})}catch(l){if(De(l))return this._returnResult({data:null,error:l});throw l}}async fetchJwk(r,l={keys:[]}){let d=l.keys.find(S=>S.kid===r);if(d)return d;const x=Date.now();if(d=this.jwks.keys.find(S=>S.kid===r),d&&this.jwks_cached_at+rx>x)return d;const{data:m,error:E}=await ze(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(E)throw E;return!m.keys||m.keys.length===0||(this.jwks=m,this.jwks_cached_at=x,d=m.keys.find(S=>S.kid===r),!d)?null:d}async getClaims(r,l={}){try{let d=r;if(!d){const{data:P,error:X}=await this.getSession();if(X||!P.session)return this._returnResult({data:null,error:X});d=P.session.access_token}const{header:x,payload:m,signature:E,raw:{header:S,payload:C}}=Rc(d);l?.allowExpired||Cx(m.exp);const A=!x.alg||x.alg.startsWith("HS")||!x.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(x.kid,l?.keys?{keys:l.keys}:l?.jwks);if(!A){const{error:P}=await this.getUser(d);if(P)throw P;return{data:{claims:m,header:x,signature:E},error:null}}const I=Tx(x.alg),D=await crypto.subtle.importKey("jwk",A,I,!0,["verify"]);if(!await crypto.subtle.verify(I,D,E,dx(`${S}.${C}`)))throw new lf("Invalid JWT signature");return{data:{claims:m,header:x,signature:E},error:null}}catch(d){if(De(d))return this._returnResult({data:null,error:d});throw d}}}no.nextInstanceID={};const ry=no,ay="2.97.0";let Wl="";typeof Deno<"u"?Wl="deno":typeof document<"u"?Wl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Wl="react-native":Wl="node";const sy={"X-Client-Info":`supabase-js-${Wl}/${ay}`},ly={headers:sy},oy={schema:"public"},cy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},uy={};function io(c){"@babel/helpers - typeof";return io=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},io(c)}function hy(c,r){if(io(c)!="object"||!c)return c;var l=c[Symbol.toPrimitive];if(l!==void 0){var d=l.call(c,r);if(io(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(c)}function fy(c){var r=hy(c,"string");return io(r)=="symbol"?r:r+""}function dy(c,r,l){return(r=fy(r))in c?Object.defineProperty(c,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):c[r]=l,c}function ug(c,r){var l=Object.keys(c);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(c);r&&(d=d.filter(function(x){return Object.getOwnPropertyDescriptor(c,x).enumerable})),l.push.apply(l,d)}return l}function an(c){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?ug(Object(l),!0).forEach(function(d){dy(c,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(l)):ug(Object(l)).forEach(function(d){Object.defineProperty(c,d,Object.getOwnPropertyDescriptor(l,d))})}return c}const gy=c=>c?(...r)=>c(...r):(...r)=>fetch(...r),my=()=>Headers,py=(c,r,l)=>{const d=gy(l),x=my();return async(m,E)=>{var S;const C=(S=await r())!==null&&S!==void 0?S:c;let A=new x(E?.headers);return A.has("apikey")||A.set("apikey",c),A.has("Authorization")||A.set("Authorization",`Bearer ${C}`),d(m,an(an({},E),{},{headers:A}))}};function xy(c){return c.endsWith("/")?c:c+"/"}function yy(c,r){var l,d;const{db:x,auth:m,realtime:E,global:S}=c,{db:C,auth:A,realtime:I,global:D}=r,U={db:an(an({},C),x),auth:an(an({},A),m),realtime:an(an({},I),E),storage:{},global:an(an(an({},D),S),{},{headers:an(an({},(l=D?.headers)!==null&&l!==void 0?l:{}),(d=S?.headers)!==null&&d!==void 0?d:{})}),accessToken:async()=>""};return c.accessToken?U.accessToken=c.accessToken:delete U.accessToken,U}function wy(c){const r=c?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(xy(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var by=class extends ry{constructor(c){super(c)}},Ay=class{constructor(c,r,l){var d,x;this.supabaseUrl=c,this.supabaseKey=r;const m=wy(c);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const E=`sb-${m.hostname.split(".")[0]}-auth-token`,S={db:oy,realtime:uy,auth:an(an({},cy),{},{storageKey:E}),global:ly},C=yy(l??{},S);if(this.storageKey=(d=C.auth.storageKey)!==null&&d!==void 0?d:"",this.headers=(x=C.global.headers)!==null&&x!==void 0?x:{},C.accessToken)this.accessToken=C.accessToken,this.auth=new Proxy({},{get:(I,D)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(D)} is not possible`)}});else{var A;this.auth=this._initSupabaseAuthClient((A=C.auth)!==null&&A!==void 0?A:{},this.headers,C.global.fetch)}this.fetch=py(r,this._getAccessToken.bind(this),C.global.fetch),this.realtime=this._initRealtimeClient(an({headers:this.headers,accessToken:this._getAccessToken.bind(this)},C.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(I=>this.realtime.setAuth(I)).catch(I=>console.warn("Failed to set initial Realtime auth token:",I)),this.rest=new sp(new URL("rest/v1",m).href,{headers:this.headers,schema:C.db.schema,fetch:this.fetch,timeout:C.db.timeout,urlLengthLimit:C.db.urlLengthLimit}),this.storage=new $p(this.storageUrl.href,this.headers,this.fetch,l?.storage),C.accessToken||this._listenForAuthEvents()}get functions(){return new Jm(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(c){return this.rest.from(c)}schema(c){return this.rest.schema(c)}rpc(c,r={},l={head:!1,get:!1,count:void 0}){return this.rest.rpc(c,r,l)}channel(c,r={config:{}}){return this.realtime.channel(c,r)}getChannels(){return this.realtime.getChannels()}removeChannel(c){return this.realtime.removeChannel(c)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var c=this,r,l;if(c.accessToken)return await c.accessToken();const{data:d}=await c.auth.getSession();return(r=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&r!==void 0?r:c.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:c,persistSession:r,detectSessionInUrl:l,storage:d,userStorage:x,storageKey:m,flowType:E,lock:S,debug:C,throwOnError:A},I,D){const U={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new by({url:this.authUrl.href,headers:an(an({},U),I),storageKey:m,autoRefreshToken:c,persistSession:r,detectSessionInUrl:l,storage:d,userStorage:x,flowType:E,lock:S,debug:C,throwOnError:A,fetch:D,hasCustomAuthorizationHeader:Object.keys(this.headers).some(P=>P.toLowerCase()==="authorization")})}_initRealtimeClient(c){return new vp(this.realtimeUrl.href,an(an({},c),{},{params:an(an({},{apikey:this.supabaseKey}),c?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((c,r)=>{this._handleTokenChanged(c,"CLIENT",r?.access_token)})}_handleTokenChanged(c,r,l){(c==="TOKEN_REFRESHED"||c==="SIGNED_IN")&&this.changedAccessToken!==l?(this.changedAccessToken=l,this.realtime.setAuth(l)):c==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const Ey=(c,r,l)=>new Ay(c,r,l);function vy(){if(typeof window<"u")return!1;const c=globalThis.process;if(!c)return!1;const r=c.version;if(r==null)return!1;const l=r.match(/^v(\d+)\./);return l?parseInt(l[1],10)<=18:!1}vy()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const _y="https://sblytncqvxnqsjbaniww.supabase.co",Sy="sb_publishable_uzPU1dorBnIhoxIjNVCY-Q_2fpmSsam",Aa=Ey(_y,Sy);const Bg=(...c)=>c.filter((r,l,d)=>!!r&&r.trim()!==""&&d.indexOf(r)===l).join(" ").trim();const Cy=c=>c.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase();const Ty=c=>c.replace(/^([A-Z])|[\s-_]+(\w)/g,(r,l,d)=>d?d.toUpperCase():l.toLowerCase());const hg=c=>{const r=Ty(c);return r.charAt(0).toUpperCase()+r.slice(1)};var Ny={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Oy=c=>{for(const r in c)if(r.startsWith("aria-")||r==="role"||r==="title")return!0;return!1};const Iy=It.forwardRef(({color:c="currentColor",size:r=24,strokeWidth:l=2,absoluteStrokeWidth:d,className:x="",children:m,iconNode:E,...S},C)=>It.createElement("svg",{ref:C,...Ny,width:r,height:r,stroke:c,strokeWidth:d?Number(l)*24/Number(r):l,className:Bg("lucide",x),...!m&&!Oy(S)&&{"aria-hidden":"true"},...S},[...E.map(([A,I])=>It.createElement(A,I)),...Array.isArray(m)?m:[m]]));const Ry=(c,r)=>{const l=It.forwardRef(({className:d,...x},m)=>It.createElement(Iy,{ref:m,iconNode:r,className:Bg(`lucide-${Cy(hg(c))}`,`lucide-${c}`,d),...x}));return l.displayName=hg(c),l};const Dy=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],My=Ry("shield-alert",Dy),kg=({data:c,onNext:r,isComplaint:l=!1})=>{if(!c)return null;const d=c.status==="success",x=c.isVip,m=c.blockName;return d&&l?H.jsxs("div",{className:"bg-red-900 rounded-lg shadow-xl shadow-red-900/50 p-6 w-full max-w-sm mx-auto text-center border-2 border-red-500 transform transition-all animate-pulse",children:[H.jsx(My,{className:"w-16 h-16 text-white mx-auto mb-4"}),H.jsx("h2",{className:"text-xl font-bold text-white mb-2 uppercase break-words",children:c.message||"PASS SUSPENDED"}),H.jsxs("div",{className:"bg-black/50 rounded p-4 mb-4 text-left border border-red-700",children:[H.jsxs("p",{className:"text-gray-300 text-sm",children:[H.jsx("strong",{children:"Name:"})," ",c.full_name]}),H.jsxs("p",{className:"text-gray-300 text-sm",children:[H.jsx("strong",{children:"PIN:"})," ",c.pin_number||c.vip_code||c.fac_code||"N/A"]}),H.jsxs("p",{className:"text-gray-300 text-sm",children:[H.jsx("strong",{children:"Phone:"})," ",c.mobile_number||c.phone||"N/A"]}),H.jsxs("p",{className:"text-gray-300 text-sm",children:[H.jsx("strong",{children:"Block:"})," ",c.blockName]})]}),H.jsx("button",{onClick:r,className:"w-full bg-red-700 hover:bg-red-600 text-white font-bold py-3 rounded uppercase border border-red-500 shadow-inner",children:"Acknowledge & Next"})]}):H.jsxs("div",{className:`relative p-8 rounded-[2rem] w-full h-full md:h-auto max-w-sm flex flex-col items-center justify-center text-center shadow-2xl transition-all duration-500 animate-in fade-in zoom-in-95 overflow-hidden border ${d?x?"bg-gradient-to-b from-amber-950/90 via-yellow-900/40 to-slate-950 border-yellow-500/50 shadow-[0_0_50px_rgba(234,179,8,0.25)]":"bg-gradient-to-b from-green-950/90 to-slate-950 border-green-500/30 shadow-[0_0_50px_rgba(34,197,94,0.15)]":"bg-red-950/90 border-red-500 shadow-red-900/50"} backdrop-blur-2xl`,children:[H.jsx("div",{className:`absolute top-0 left-1/2 -translate-x-1/2 w-[150%] h-48 blur-[80px] rounded-[100%] pointer-events-none opacity-50 ${d?x?"bg-yellow-500":"bg-green-600":"bg-red-600"}`}),x&&d&&H.jsx("div",{className:"absolute top-4 right-4 bg-gradient-to-r from-yellow-300 to-yellow-600 px-3 py-1 rounded-full shadow-[0_0_15px_rgba(234,179,8,0.5)] border border-yellow-200",children:H.jsx("span",{className:"text-[10px] font-black text-yellow-950 tracking-widest uppercase",children:"VIP PASS"})}),H.jsx("div",{className:`relative z-10 w-24 h-24 rounded-full flex items-center justify-center mb-6 shadow-2xl border-4 ${d?x?"bg-yellow-500/20 border-yellow-500 shadow-yellow-500/50":"bg-green-500/20 border-green-500 shadow-green-500/50":"bg-red-500/20 border-red-500 shadow-red-500/50"}`,children:d?H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-12 w-12 ${x?"text-yellow-400 drop-shadow-[0_0_8px_rgba(234,179,8,0.8)]":"text-green-400"}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}):H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})}),H.jsx("h2",{className:`relative z-10 text-3xl font-black mb-2 uppercase tracking-tight ${d?x?"text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 via-amber-400 to-yellow-200 drop-shadow-sm":"text-green-400":"text-red-400"}`,children:d?"ENTRY GRANTED":"ACCESS DENIED"}),d&&studentData.full_name&&H.jsxs("div",{className:`relative z-10 mt-6 bg-slate-900/50 border ${x?"border-yellow-500/30 shadow-[inset_0_0_20px_rgba(234,179,8,0.1)]":"border-slate-700/50 shadow-inner"} w-full rounded-2xl py-5 px-4 backdrop-blur-md`,children:[H.jsx("p",{className:"text-slate-400 text-[10px] font-bold uppercase tracking-[0.2em] mb-1",children:"Passholder"}),H.jsx("p",{className:`text-2xl font-bold ${x?"text-yellow-100":"bg-gradient-to-r from-white to-slate-300 bg-clip-text text-transparent"}`,children:studentData.full_name}),m&&H.jsxs("div",{className:`mt-3 py-2 border-y ${x?"border-yellow-500/20 bg-yellow-950/20":"border-slate-700/50 bg-slate-800/20"}`,children:[H.jsx("p",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-[0.2em] mb-1",children:"Assigned Block"}),H.jsx("p",{className:`text-sm font-black tracking-wider ${x?"text-yellow-400":"text-indigo-400"}`,children:m})]}),studentData.entered_at&&H.jsxs("div",{className:"mt-3 pt-2 flex flex-col items-center",children:[H.jsx("p",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-[0.2em] mb-1",children:"Entry Logged At"}),H.jsx("p",{className:"text-lg font-mono font-medium text-emerald-400 tracking-widest",children:new Date(studentData.entered_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]}),!d&&studentData.message&&H.jsx("div",{className:"relative z-10 mt-4 mb-2 bg-red-950/30 border border-red-500/20 w-full rounded-xl py-3 px-4",children:H.jsx("p",{className:"text-sm font-medium text-red-200",children:studentData.message})}),H.jsxs("div",{className:"relative z-10 mt-8 w-full border-t border-slate-800 pt-6",children:[H.jsx("p",{className:"text-slate-500 text-[10px] font-bold uppercase tracking-[0.2em] mb-2",children:"Scanned Ticket ID"}),H.jsx("p",{className:"font-mono font-medium text-slate-300 bg-slate-950/80 border border-slate-800 py-3 rounded-xl break-all px-4 text-sm tracking-widest",children:scanResult})]}),H.jsx("button",{onClick:onReset,className:`relative z-10 mt-10 text-white font-bold py-5 rounded-2xl text-sm w-full transition-all shadow-xl active:scale-[0.98] uppercase tracking-[0.2em] border ${d?x?"bg-gradient-to-r from-yellow-600 to-amber-500 hover:from-yellow-500 hover:to-amber-400 border-yellow-500/50 shadow-[0_0_20px_rgba(234,179,8,0.3)] text-yellow-950":"bg-gradient-to-r from-green-600 to-emerald-600 hover:from-green-500 hover:to-emerald-500 border-green-500/50 shadow-[0_0_20px_rgba(34,197,94,0.2)]":"bg-gradient-to-r from-red-600 to-rose-600 hover:from-red-500 hover:to-rose-500 border-red-500/50 shadow-[0_0_20px_rgba(239,68,68,0.2)]"}`,children:"Scan Next"})]})},Ly=()=>{const[c,r]=It.useState(null),[l,d]=It.useState(null),[x,m]=It.useState(!0),[E,S]=It.useState(!1),[C,A]=It.useState(""),[I,D]=It.useState(0),U=["ggu_students","giet_degree","giet_engineering","giet_pharmacy","giet_polytechnic","maitri_vip_registrations","maitri_faculty_registrations"],P="https://script.google.com/macros/s/AKfycbwahai0JdMEhS-5otFqDWawl-caWyfIugBu5tQZgKqkb6x4ubnqoVhQYbbvd8iT3Ecx/exec",X=async Y=>{try{const Se=new Date(Y.entered_at).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),we={id:Y.id||Y.pin_number||Y.vip_code||"N/A",full_name:Y.full_name,pin_number:Y.pin_number||Y.vip_code||"N/A",mobile_number:Y.mobile_number||Y.phone||"N/A",block:Y.blockName,entered_at_ist:Se};await fetch(P,{method:"POST",mode:"no-cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(we)}),console.log("[SYNC] Data sent to Google Sheets for:",Y.full_name)}catch(fe){console.error("[SYNC_ERROR] Google Sheets sync failed:",fe)}};It.useEffect(()=>{(async()=>{try{let fe=0;const Se=U.map(Q=>Aa.from(Q).select("*",{count:"exact",head:!0}).eq("attended_fest",!0));(await Promise.all(Se)).forEach(({count:Q,error:Te})=>{!Te&&Q!==null&&(fe+=Q)}),D(fe)}catch(fe){console.error("Error fetching count:",fe)}})()},[]),It.useEffect(()=>{let Y=null,fe=!0;const Se=setTimeout(()=>{const we=document.getElementById("reader");if(x&&!c&&we&&fe)try{Y=new Kh("reader");const Q={fps:10,qrbox:{width:250,height:250}};Y.start({facingMode:"environment"},Q,W,se).catch(Te=>{fe&&(console.warn("Camera start failed or permission denied:",Te),S(!0))})}catch(Q){console.error("html5qrcode INIT error:",Q)}},100);return()=>{fe=!1,clearTimeout(Se),Y&&Y.isScanning&&Y.stop().then(()=>{}).catch(we=>{console.warn("Failed to stop html5Qrcode (may already be stopped). ",we)})}},[x,c]);const W=async Y=>{const fe=Y.trim();r(fe),m(!1);try{let Se=null,we=null,Q="pin_number",Te=!1;for(const oe of U){let zt="pin_number";oe==="maitri_vip_registrations"?zt="vip_code":oe==="maitri_faculty_registrations"&&(zt="fac_code"),console.log(`[SCANNER START] Verifying PIN: "${fe}" against ${oe}.${zt}`);const{data:yt,error:ve}=await Aa.from(oe).select(`id, full_name, ${zt}, is_vip, is_suspended, entered_at, attended_fest, mobile_number`).ilike(zt,fe).maybeSingle();if(ve&&ve.message?.includes("mobile_number")){const{data:Ye,error:gt}=await Aa.from(oe).select(`id, full_name, ${zt}, is_vip, is_suspended, entered_at, attended_fest, phone`).ilike(zt,fe).maybeSingle();if(Ye){Se={...Ye,mobile_number:Ye.phone},we=oe,Q=zt;break}}if(ve&&ve.code!=="PGRST116"&&ve.code!=="400"&&(Te=!0,console.warn(`Error on table ${oe}:`,ve)),yt){Se=yt,we=oe,Q=zt;break}}if(Se){if(Se.is_suspended){d({status:"error",message:" PASS SUSPENDED - ENTRY DENIED ",full_name:Se.full_name,blockName:we.replace(/_/g," ").toUpperCase()});return}const zt={ggu_students:"GGU COLLEGE",giet_degree:"GIET DEGREE",giet_engineering:"GIET ENGINEERING",giet_pharmacy:"GIET PHARMACY",giet_polytechnic:"GIET POLY",maitri_vip_registrations:"VIP GUESTS",maitri_faculty_registrations:"FACULTY & STAFF"}[we]||we.replace(/_/g," ").toUpperCase(),yt=we==="maitri_vip_registrations"||Se.is_vip,ve=new Date().toISOString();let Ye=Q;const{error:gt}=await Aa.from(we).update({attended_fest:!0,entered_at:ve}).ilike(Ye,fe);if(gt)console.warn("Failed to mark attendance:",gt),d({status:"success",...Se,entered_at:ve,message:"Warning: Failed to log attendance in DB",blockName:zt,isVip:yt});else{D(te=>te+1);const ie={status:"success",...Se,entered_at:ve,blockName:zt,isVip:yt};d(ie),X(ie)}}else d(Te?{status:"error",message:"DB Connection Error. Check console."}:{status:"error",message:"Invalid Pass or Not Registered"})}catch(Se){console.error("Database connection error:",Se),d({status:"error",message:`Connection Error: ${Se.message}`})}},se=Y=>{},me=()=>{d(null),r(null),m(!0),A("")},ce=Y=>{Y.preventDefault(),C.trim()&&W(C)};return H.jsxs("div",{className:"flex flex-col p-4 md:p-6 bg-slate-950 h-[100dvh] w-full text-slate-50 relative overflow-hidden md:justify-center",children:[H.jsx("div",{className:"absolute top-[-20%] left-[-10%] w-[120%] h-[40%] bg-purple-900/20 rounded-[100%] blur-[120px] pointer-events-none"}),H.jsxs("div",{className:"w-full max-w-md md:max-w-5xl flex items-center justify-between mb-4 md:mb-12 mt-2 relative z-10 bg-slate-900/40 backdrop-blur-md p-3 md:p-6 rounded-2xl md:rounded-3xl border border-slate-800/50 mx-auto shrink-0",children:[H.jsxs("div",{children:[H.jsx("h1",{className:"text-xl md:text-3xl font-black bg-gradient-to-r from-purple-400 to-indigo-400 bg-clip-text text-transparent tracking-tight",children:"MAITRI GATE"}),H.jsx("p",{className:"text-[10px] md:text-xs text-slate-400 font-bold tracking-[0.2em] uppercase mt-0.5 md:mt-1",children:"Verification System"})]}),H.jsxs("div",{className:"flex items-center gap-2 md:gap-4",children:[H.jsxs("div",{className:"flex items-center gap-2 bg-purple-900/30 py-1.5 px-3 md:py-2 md:px-4 rounded-full border border-purple-500/30 backdrop-blur-md",children:[H.jsx("span",{className:"text-[10px] md:text-sm font-bold text-slate-300 tracking-wider",children:"ENTRIES: "}),H.jsx("span",{className:"text-[10px] md:text-sm font-black text-white",children:I})]}),H.jsxs("div",{className:"flex items-center gap-2 bg-slate-950/50 py-1.5 px-3 md:py-2 md:px-4 rounded-full border border-slate-800",children:[H.jsx("div",{className:"h-2 w-2 md:h-3 md:w-3 rounded-full bg-green-500 shadow-[0_0_8px_rgba(34,197,94,0.8)] animate-pulse"}),H.jsx("span",{className:"text-[10px] md:text-sm font-bold text-slate-300 tracking-wider uppercase hidden sm:inline-block",children:"Online"})]})]})]}),H.jsx("div",{className:"w-full max-w-md md:max-w-5xl flex-1 flex flex-col relative z-10 mx-auto overflow-y-auto overflow-x-hidden md:overflow-visible pb-4 md:pb-0 hide-scrollbar",children:H.jsxs("div",{className:"flex flex-col flex-1 md:grid md:grid-cols-2 md:gap-10 md:items-center",children:[H.jsxs("div",{className:`flex flex-col flex-1 bg-slate-900/60 backdrop-blur-xl rounded-[2rem] p-4 md:p-10 border border-slate-800/60 shadow-2xl transition-all duration-500 ${l?"md:col-span-1 opacity-50 grayscale pointer-events-none scale-[0.98] hidden md:flex":"md:col-span-1"}`,children:[H.jsxs("div",{className:"flex items-center justify-center gap-2 mb-4 shrink-0 mt-2",children:[H.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 md:h-6 md:w-6 text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]}),H.jsx("p",{className:"text-slate-300 text-xs md:text-sm font-bold uppercase tracking-[0.15em]",children:"Scan Ticket"})]}),H.jsx("div",{className:"rounded-2xl overflow-hidden border-2 border-slate-700/50 bg-black relative shadow-inner w-full flex-1 md:aspect-square md:flex-none flex items-center justify-center",children:E?H.jsxs("div",{className:"text-center p-6 flex flex-col items-center justify-center h-full space-y-4",children:[H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-rose-500 mb-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),H.jsx("p",{className:"text-rose-400 font-bold uppercase tracking-widest text-sm",children:"Camera Blocked"}),H.jsx("p",{className:"text-slate-400 text-xs px-4",children:"Please allow camera permissions in your browser to scan passes, or use the manual entry."})]}):H.jsxs(H.Fragment,{children:[H.jsx("div",{id:"reader",className:"w-full h-full absolute inset-0 [&>video]:object-cover [&>video]:w-full [&>video]:h-full opacity-90 mix-blend-screen"}),H.jsx("div",{className:"absolute inset-0 border-2 border-purple-500/30 rounded-2xl pointer-events-none md:border-4"})]})})]}),H.jsx("div",{className:"mt-4 md:mt-0 md:col-span-1 flex flex-col shrink-0 md:h-full justify-center",children:l?H.jsx("div",{className:"w-full h-full flex items-center justify-center animate-in zoom-in-95 md:slide-in-from-right-8 duration-300",children:H.jsx(kg,{studentData:l,scanResult:c,onReset:me})}):H.jsxs("div",{className:"bg-slate-900/60 backdrop-blur-xl rounded-3xl p-5 md:p-10 border border-slate-800/60 shadow-2xl",children:[H.jsxs("div",{className:"flex items-center gap-3 py-1 mb-3",children:[H.jsx("div",{className:"flex-1 h-[1px] bg-gradient-to-r from-transparent to-slate-700"}),H.jsx("span",{className:"text-slate-500 text-[10px] md:text-xs font-bold uppercase tracking-[0.2em] whitespace-nowrap",children:"Manual Entry"}),H.jsx("div",{className:"flex-1 h-[1px] bg-gradient-to-l from-transparent to-slate-700"})]}),H.jsxs("form",{onSubmit:ce,className:"flex flex-col gap-3",children:[H.jsx("input",{type:"text",placeholder:"e.g. 12345-AI-01",value:C,onChange:Y=>A(Y.target.value),className:"w-full bg-slate-950/80 border border-slate-700/50 rounded-xl py-3 md:py-5 px-4 text-center text-white placeholder:text-slate-600 focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/50 transition-all font-mono tracking-wider text-sm md:text-lg"}),H.jsx("button",{type:"submit",className:"bg-slate-800 hover:bg-slate-700 text-white font-bold py-3 md:py-5 px-6 rounded-xl transition-all border border-slate-700 hover:border-slate-600 active:scale-[0.98] text-sm uppercase tracking-widest shadow-lg",children:"Verify PIN"})]})]})})]})})]})},By=["ggu_students","giet_degree","giet_engineering","giet_pharmacy","giet_polytechnic","maitri_vip_registrations","maitri_faculty_registrations"],ky=({onExit:c,onGoToComplaints:r})=>{const[l,d]=It.useState(!1),[x,m]=It.useState(""),[E,S]=It.useState({total:0,vip:0,student:0,today:0}),[C,A]=It.useState([]),[I,D]=It.useState(!1),U=X=>{X.preventDefault(),x==="observer123"?(d(!0),P()):alert("Invalid Observer Password")},P=async()=>{D(!0);let X=0,W=0,se=0,me=0,ce=[];const Y=new Date;Y.setHours(0,0,0,0);try{const fe=By.map(async Se=>{const{data:we,error:Q}=await Aa.from(Se).select("full_name, is_vip, entered_at").eq("attended_fest",!0);!Q&&we&&(X+=we.length,we.forEach(Te=>{if(Te.is_vip||Se==="maitri_vip_registrations"?W++:se++,Te.entered_at&&new Date(Te.entered_at)>=Y&&me++,Te.entered_at){const oe={ggu_students:"GGU COLLEGE",giet_degree:"GIET DEGREE",giet_engineering:"GIET ENGINEERING",giet_pharmacy:"GIET PHARMACY",giet_polytechnic:"GIET POLY",maitri_vip_registrations:"VIP GUESTS",maitri_faculty_registrations:"FACULTY & STAFF"};ce.push({...Te,table:Se,blockName:oe[Se]||Se.replace(/_/g," ").toUpperCase()})}}))});await Promise.all(fe),ce.sort((Se,we)=>new Date(we.entered_at)-new Date(Se.entered_at)),A(ce.slice(0,50)),S({total:X,vip:W,student:se,today:me})}catch(fe){console.error("Failed to fetch observer data:",fe)}finally{D(!1)}};return It.useEffect(()=>{if(l){const X=setInterval(P,1e4);return()=>clearInterval(X)}},[l]),l?H.jsxs("div",{className:"flex flex-col min-h-[100dvh] bg-slate-950 text-white p-4 md:p-8 relative",children:[H.jsxs("div",{className:"absolute top-4 md:top-8 left-4 md:left-8 flex gap-4 z-20",children:[H.jsx("button",{onClick:r,className:"bg-red-900/80 hover:bg-red-700 py-2 px-4 rounded-lg font-bold text-xs md:text-sm uppercase tracking-wider transition-colors border border-red-500 shadow-[0_0_15px_rgba(239,68,68,0.3)] text-red-100",children:" Report & Suspend"}),H.jsx("button",{onClick:c,className:"bg-slate-800 hover:bg-slate-700 py-2 px-4 rounded-lg font-bold text-xs md:text-sm uppercase tracking-wider transition-colors border border-slate-700",children:" Exit Dashboard"})]}),H.jsxs("div",{className:"max-w-6xl mx-auto w-full pt-20 md:pt-16 z-10 relative",children:[H.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between mb-8 md:mb-12 gap-4",children:[H.jsxs("div",{children:[H.jsx("h1",{className:"text-2xl md:text-4xl font-black bg-gradient-to-r from-blue-400 to-cyan-400 bg-clip-text text-transparent tracking-tight",children:"LIVE DASHBOARD"}),H.jsx("p",{className:"text-[10px] md:text-xs text-slate-400 font-bold tracking-[0.2em] uppercase mt-1",children:"Real-time Check-in Analytics"})]}),H.jsxs("button",{onClick:P,disabled:I,className:"flex items-center gap-2 bg-slate-900 py-2 px-4 rounded-lg border border-slate-700 hover:bg-slate-800 transition-colors disabled:opacity-50",children:[H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:`h-4 w-4 text-blue-400 ${I?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),H.jsx("span",{className:"text-xs font-bold uppercase tracking-widest text-slate-300",children:"Refresh"})]})]}),H.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6 mb-8 md:mb-10",children:[H.jsxs("div",{className:"bg-slate-900/60 p-6 rounded-2xl border border-blue-500/20 shadow-[0_4px_20px_rgba(59,130,246,0.1)] backdrop-blur-sm flex flex-col items-center justify-center text-center",children:[H.jsx("span",{className:"text-4xl md:text-5xl font-black text-white bg-gradient-to-br from-white to-blue-200 bg-clip-text text-transparent drop-shadow-md",children:E.total}),H.jsx("span",{className:"text-[10px] md:text-xs font-bold uppercase tracking-widest text-blue-400 mt-2",children:"Total Passes"})]}),H.jsxs("div",{className:"bg-slate-900/60 p-6 rounded-2xl border border-yellow-500/20 shadow-[0_4px_20px_rgba(234,179,8,0.1)] backdrop-blur-sm flex flex-col items-center justify-center text-center",children:[H.jsx("span",{className:"text-4xl md:text-5xl font-black text-white bg-gradient-to-br from-white to-yellow-200 bg-clip-text text-transparent drop-shadow-md",children:E.vip}),H.jsx("span",{className:"text-[10px] md:text-xs font-bold uppercase tracking-widest text-yellow-400 mt-2",children:"VIP Passes"})]}),H.jsxs("div",{className:"bg-slate-900/60 p-6 rounded-2xl border border-indigo-500/20 shadow-[0_4px_20px_rgba(99,102,241,0.1)] backdrop-blur-sm flex flex-col items-center justify-center text-center",children:[H.jsx("span",{className:"text-4xl md:text-5xl font-black text-white bg-gradient-to-br from-white to-indigo-200 bg-clip-text text-transparent drop-shadow-md",children:E.student}),H.jsx("span",{className:"text-[10px] md:text-xs font-bold uppercase tracking-widest text-indigo-400 mt-2",children:"Student Passes"})]}),H.jsxs("div",{className:"bg-slate-900/60 p-6 rounded-2xl border border-green-500/20 shadow-[0_4px_20px_rgba(34,197,94,0.1)] backdrop-blur-sm flex flex-col items-center justify-center text-center",children:[H.jsx("span",{className:"text-4xl md:text-5xl font-black text-white bg-gradient-to-br from-white to-green-200 bg-clip-text text-transparent drop-shadow-md",children:E.today}),H.jsx("span",{className:"text-[10px] md:text-xs font-bold uppercase tracking-widest text-green-400 mt-2",children:"Entries Today"})]})]}),H.jsxs("div",{className:"bg-slate-900/40 rounded-3xl border border-slate-800/60 backdrop-blur-xl overflow-hidden flex flex-col h-[60dvh] md:h-auto md:max-h-[600px] shadow-2xl",children:[H.jsx("div",{className:"bg-slate-900 py-4 px-6 border-b border-slate-800 flex items-center justify-between shrink-0",children:H.jsxs("div",{className:"flex items-center gap-3",children:[H.jsxs("div",{className:"relative flex h-3 w-3",children:[H.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),H.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-green-500"})]}),H.jsx("h3",{className:"font-bold uppercase tracking-widest text-sm text-slate-200",children:"Live Entry Log"})]})}),H.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:C.length===0?H.jsx("div",{className:"h-full flex flex-col items-center justify-center text-slate-500 pb-10",children:H.jsx("p",{className:"font-mono text-sm tracking-widest uppercase",children:"NO PASSES YET"})}):C.map((X,W)=>H.jsxs("div",{className:"bg-slate-950/50 p-4 rounded-xl border border-slate-800 flex flex-col md:flex-row md:items-center justify-between gap-4 animate-in fade-in slide-in-from-bottom-4 duration-300",children:[H.jsxs("div",{className:"flex items-start md:items-center gap-4",children:[H.jsx("div",{className:`shrink-0 w-10 h-10 rounded-full flex items-center justify-center bg-slate-900 border ${X.is_vip?"border-yellow-500/50 text-yellow-400":"border-indigo-500/50 text-indigo-400"}`,children:H.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:H.jsx("path",{fillRule:"evenodd",d:"M10 9a3 3 0 100-6 3 3 0 000 6zm-7 9a7 7 0 1114 0H3z",clipRule:"evenodd"})})}),H.jsxs("div",{children:[H.jsx("p",{className:"font-bold text-white text-base leading-tight",children:X.full_name}),H.jsxs("div",{className:"flex items-center gap-2 mt-1 flex-wrap",children:[H.jsx("span",{className:`text-[9px] font-black uppercase tracking-widest px-2 py-0.5 rounded-full border ${X.is_vip?"bg-yellow-900/30 text-yellow-400 border-yellow-500/30":"bg-slate-800 text-slate-400 border-slate-700"}`,children:X.blockName}),X.is_vip&&H.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest px-2 py-0.5 rounded-full bg-gradient-to-r from-yellow-600 to-amber-600 text-white shadow-sm",children:"VIP"})]})]})]}),H.jsxs("div",{className:"flex flex-row md:flex-col items-center md:items-end justify-between md:justify-center border-t border-slate-800 md:border-t-0 pt-3 md:pt-0",children:[H.jsx("p",{className:"text-slate-500 text-[10px] uppercase tracking-wider font-bold",children:"Entered At"}),H.jsx("p",{className:"font-mono text-emerald-400 text-sm",children:new Date(X.entered_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit",second:"2-digit"})})]})]},W))})]})]})]}):H.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] bg-slate-950 p-6",children:[H.jsx("div",{className:"absolute top-[-20%] right-[-10%] w-[120%] h-[40%] bg-blue-900/20 rounded-[100%] blur-[120px] pointer-events-none"}),H.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl p-8 md:p-12 rounded-3xl shadow-2xl w-full max-w-sm border border-blue-500/30 relative z-10 transition-transform hover:scale-[1.01] duration-300",children:[H.jsxs("div",{className:"flex items-center gap-3 mb-6 border-b border-slate-800 pb-4",children:[H.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-blue-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),H.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),H.jsx("h2",{className:"text-xl md:text-2xl font-black text-white tracking-widest uppercase",children:"Observer Panel"})]}),H.jsx("p",{className:"text-slate-400 text-sm font-medium mb-8",children:"Enter observer password to view live registration data"}),H.jsxs("form",{onSubmit:U,className:"flex flex-col gap-6",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-[10px] font-bold text-slate-500 mb-2 uppercase tracking-wide",children:"Observer Password"}),H.jsx("input",{type:"password",className:"w-full bg-slate-950/80 border border-slate-700/50 rounded-xl py-3 px-4 text-white text-base focus:outline-none focus:border-blue-500 focus:ring-2 focus:ring-blue-500/20 transition-all font-mono tracking-widest placeholder:tracking-normal",value:x,onChange:X=>m(X.target.value),placeholder:"Enter password"}),H.jsx("p",{className:"text-slate-600 text-[10px] mt-2 font-mono"})]}),H.jsx("button",{type:"submit",className:"mt-2 w-full bg-blue-600 hover:bg-blue-500 text-white font-bold py-4 rounded-xl transition-all shadow-lg shadow-blue-900/30 active:scale-[0.98] uppercase tracking-widest text-sm border border-blue-500 hover:border-blue-400",children:"View Dashboard"})]}),H.jsx("button",{onClick:c,className:"mt-6 w-full text-slate-500 font-bold text-xs uppercase hover:text-white transition-colors",children:" Back to Scanner Login"})]})]})},Uy=["ggu_students","giet_degree","giet_engineering","giet_pharmacy","giet_polytechnic","maitri_vip_registrations","maitri_faculty_registrations"],jy="https://script.google.com/macros/s/AKfycby8j51iAALq_3pW0o6t0aIKtT6M-x4g0eP2dZ9lZqcw6G64tLQv97qU_P1i91Z5Kx8q/exec",Py=({onExit:c})=>{const[r,l]=It.useState(null),[d,x]=It.useState(!1),[m,E]=It.useState(""),[S,C]=It.useState(!1),A=async(U,P)=>{try{const W=new Date().toLocaleString("en-IN",{timeZone:"Asia/Kolkata",day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!0}),se={type:"suspension",id:U.id||U.pin_number||U.vip_code||"N/A",full_name:U.full_name,pin_number:U.pin_number||U.vip_code||"N/A",mobile_number:U.mobile_number||U.phone||"N/A",block:U.blockName||"UNKNOWN",entered_at_ist:W,reason:P};await fetch(jy,{method:"POST",mode:"no-cors",cache:"no-cache",headers:{"Content-Type":"application/json"},body:JSON.stringify(se)}),console.log("[SYNC] Suspension sent to Google Sheets for:",U.full_name)}catch(X){console.error("[SYNC_ERROR] Suspension sync failed:",X)}},I=async U=>{if(U){if(window.html5QrcodeScanner)try{await window.html5QrcodeScanner.clear()}catch(P){console.warn("Scanner clear error",P)}x(!1),l({status:"loading"});try{const P=U.trim();let X=null,W=null,se="pin_number";for(const me of Uy){let ce="pin_number";me==="maitri_vip_registrations"?ce="vip_code":me==="maitri_faculty_registrations"&&(ce="fac_code");const{data:Y,error:fe}=await Aa.from(me).select(`id, full_name, ${ce}, is_vip, is_suspended, mobile_number`).ilike(ce,P).maybeSingle();if(fe&&fe.message?.includes("mobile_number")){const{data:Se}=await Aa.from(me).select(`id, full_name, ${ce}, is_vip, is_suspended, phone`).ilike(ce,P).maybeSingle();if(Se){X={...Se,mobile_number:Se.phone},W=me,se=ce;break}}if(Y){X=Y,W=me,se=ce;break}}if(X){if(X.is_suspended){l({status:"error",message:"ERROR: PASS IS ALREADY SUSPENDED"});return}const ce={ggu_students:"GGU COLLEGE",giet_degree:"GIET DEGREE",giet_engineering:"GIET ENGINEERING",giet_pharmacy:"GIET PHARMACY",giet_polytechnic:"GIET POLY",maitri_vip_registrations:"VIP GUESTS",maitri_faculty_registrations:"FACULTY & STAFF"}[W]||W.replace(/_/g," ").toUpperCase(),{error:Y}=await Aa.from(W).update({is_suspended:!0}).ilike(se,P);if(Y)console.warn("Failed to suspend:",Y),l({status:"error",message:"Failed to update database"});else{const fe={status:"success",...X,blockName:ce,message:"PASS HAS BEEN SUSPENDED",isVip:X.is_vip||W==="maitri_vip_registrations"};l(fe),A(fe,"Observer Report")}}else l({status:"error",message:"Pass Not Found"})}catch(P){console.error("Database connection error:",P),l({status:"error",message:`DB Error: ${P.message}`})}}},D=()=>{l(null),C(!1),x(!0),setTimeout(()=>{try{const U=new Wm("reader",{qrbox:{width:250,height:250},fps:10,supportedScanTypes:[Dr.SCAN_TYPE_CAMERA]});window.html5QrcodeScanner=U,U.render(P=>I(P),P=>{})}catch(U){console.error("Camera start failed:",U),C(!0)}},100)};return It.useEffect(()=>()=>{window.html5QrcodeScanner&&window.html5QrcodeScanner.clear().catch(U=>console.error(U))},[]),H.jsxs("div",{className:"min-h-screen bg-red-900 flex flex-col items-center py-8",children:[H.jsxs("div",{className:"w-full max-w-4xl px-4 flex justify-between items-center mb-6",children:[H.jsx("h1",{className:"text-3xl font-bold text-white tracking-widest text-shadow",children:" REPORT & SUSPEND PORTAL "}),H.jsx("button",{onClick:c,className:"bg-gray-800 text-white px-6 py-2 rounded font-bold border border-gray-600 hover:bg-gray-700 transition",children:"BACK TO DASHBOARD"})]}),H.jsxs("div",{className:"w-full max-w-4xl bg-black rounded-lg shadow-2xl overflow-hidden border border-red-500",children:[H.jsxs("div",{className:"bg-gradient-to-r from-red-600 to-red-800 p-4 text-center border-b border-red-500",children:[H.jsx("h2",{className:"text-xl font-bold text-white tracking-widest",children:"SCAN PASS TO SUSPEND"}),H.jsx("p",{className:"text-red-200 text-sm mt-1",children:"WARNING: THIS ACTION IS PERMANENT FOR THE DAY"})]}),H.jsxs("div",{className:"p-6 flex flex-col md:flex-row gap-8",children:[H.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center border-r border-gray-800 pr-0 md:pr-8",children:[!d&&!r&&H.jsx("button",{onClick:D,className:"w-full max-w-xs bg-red-600 hover:bg-red-500 text-white font-bold py-4 rounded-lg shadow-lg shadow-red-500/30 border border-red-400 text-lg transition-transform active:scale-95",children:"START CAMERA"}),d&&H.jsxs("div",{className:"w-full w-[300px]",children:[H.jsx("div",{id:"reader",className:"w-full rounded overflow-hidden shadow-inner bg-gray-900 border-2 border-red-500"}),H.jsx("button",{onClick:()=>{I(m)},className:"mt-4 w-full text-gray-400 hover:text-white underline text-sm",children:"Stop Camera"})]}),S&&H.jsx("div",{className:"text-red-400 text-sm mt-4 text-center border border-red-500/30 p-3 rounded bg-red-950/20",children:"Camera access denied or blocked. Type PIN manually."})]}),H.jsx("div",{className:"flex-1 flex flex-col justify-center",children:H.jsxs("div",{className:"bg-gray-900 p-6 rounded-lg border border-gray-700 shadow-inner",children:[H.jsx("h3",{className:"text-gray-400 text-sm mb-2 font-semibold",children:"MANUAL ENTER PIN"}),H.jsx("input",{type:"text",value:m,onChange:U=>E(U.target.value.toUpperCase()),placeholder:"e.g. 24295-AI-01",className:"w-full bg-black text-white px-4 py-3 rounded border border-gray-600 focus:border-red-500 focus:outline-none placeholder-gray-600 font-mono text-lg uppercase mb-4"}),H.jsx("button",{onClick:()=>I(m),disabled:!m.trim(),className:"w-full bg-red-700 hover:bg-red-600 disabled:bg-gray-800 disabled:text-gray-500 text-white font-bold py-3 rounded shadow-lg transition-transform active:scale-95",children:"SUSPEND PIN INSTANTLY"})]})})]})]}),r&&H.jsx("div",{className:"w-full max-w-md mt-8 animate-fade-in-up",children:H.jsx(kg,{data:r,onNext:D,isComplaint:!0})})]})};function zy(){const[c,r]=It.useState(!1),[l,d]=It.useState(""),[x,m]=It.useState(""),[E,S]=It.useState("login"),C=A=>{A.preventDefault(),l==="maitri2026"?(r(!0),S("scanner"),m("")):m("Incorrect Password")};return E==="observer"?H.jsx(ky,{onExit:()=>S("login"),onGoToComplaints:()=>S("complaints")}):E==="complaints"?H.jsx(Py,{onExit:()=>S("observer")}):E==="login"||!c?H.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[100dvh] bg-slate-950 text-white p-6 relative overflow-hidden",children:[H.jsx("div",{className:"absolute top-[-10%] left-[-10%] w-96 h-96 bg-purple-900/30 rounded-full blur-[100px] pointer-events-none md:w-[600px] md:h-[600px]"}),H.jsx("div",{className:"absolute bottom-[-10%] right-[-10%] w-96 h-96 bg-blue-900/20 rounded-full blur-[100px] pointer-events-none md:w-[600px] md:h-[600px]"}),H.jsxs("div",{className:"bg-slate-900/80 backdrop-blur-xl p-10 md:p-14 rounded-3xl shadow-2xl w-full max-w-sm md:max-w-md border border-slate-700/50 relative z-10 transition-transform hover:scale-[1.01] duration-300",children:[H.jsxs("div",{className:"text-center mb-10 md:mb-12 flex flex-col items-center",children:[H.jsx("div",{className:"w-24 h-24 md:w-32 md:h-32 mb-4 rounded-3xl overflow-hidden shadow-[0_0_30px_rgba(168,85,247,0.3)] border border-purple-500/20 bg-slate-950 p-1",children:H.jsx("img",{src:"/logo.png",alt:"Maitri Gate",className:"w-full h-full object-cover rounded-2xl mix-blend-screen"})}),H.jsx("h1",{className:"text-4xl md:text-5xl font-black bg-gradient-to-r from-purple-400 to-indigo-400 bg-clip-text text-transparent mb-2 tracking-tight",children:"MAITRI '26"}),H.jsx("p",{className:"text-slate-400 text-xs md:text-sm font-bold tracking-[0.2em] uppercase",children:"Security Portal"})]}),H.jsxs("form",{onSubmit:C,className:"flex flex-col gap-6 md:gap-8",children:[H.jsxs("div",{children:[H.jsx("label",{className:"block text-xs md:text-sm font-bold text-slate-400 mb-2 uppercase tracking-wide",children:"Admin Access Code"}),H.jsx("input",{type:"password",className:"w-full bg-slate-950/50 border border-slate-700/50 rounded-xl py-4 flex-1 px-5 text-white text-lg focus:outline-none focus:border-purple-500 focus:ring-2 focus:ring-purple-500/20 transition-all font-mono tracking-widest placeholder:tracking-normal md:text-xl md:py-5",value:l,onChange:A=>d(A.target.value),placeholder:""})]}),x&&H.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-3 animate-in fade-in slide-in-from-top-2",children:H.jsx("p",{className:"text-red-400 text-sm text-center font-medium",children:x})}),H.jsx("button",{type:"submit",className:"mt-2 bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-500 hover:to-indigo-500 text-white font-bold py-4 px-6 rounded-xl transition-all shadow-[0_0_20px_rgba(147,51,234,0.3)] hover:shadow-[0_0_25px_rgba(147,51,234,0.5)] active:scale-[0.98] w-full uppercase tracking-widest text-sm",children:"Initialize Scanner"})]}),H.jsx("div",{className:"mt-8 text-center pt-6 border-t border-slate-800",children:H.jsx("button",{onClick:()=>S("observer"),className:"text-slate-500 text-xs font-bold uppercase tracking-wider hover:text-slate-300 transition-colors",children:"Go to Observer Dashboard "})})]})]}):H.jsxs("div",{className:"w-full h-[100dvh] relative",children:[H.jsx(Ly,{}),H.jsx("button",{onClick:()=>S("observer"),className:"absolute bottom-6 right-6 z-50 bg-slate-800/80 backdrop-blur-md hover:bg-slate-700 py-2.5 px-5 rounded-full font-bold text-xs uppercase tracking-wider text-slate-300 transition-all border border-slate-700 shadow-xl",children:"Observer Dash"})]})}cm.createRoot(document.getElementById("root")).render(H.jsx(It.StrictMode,{children:H.jsx(zy,{})}));
