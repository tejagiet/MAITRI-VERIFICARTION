(function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))d(p);new MutationObserver(p=>{for(const m of p)if(m.type==="childList")for(const E of m.addedNodes)E.tagName==="LINK"&&E.rel==="modulepreload"&&d(E)}).observe(document,{childList:!0,subtree:!0});function l(p){const m={};return p.integrity&&(m.integrity=p.integrity),p.referrerPolicy&&(m.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?m.credentials="include":p.crossOrigin==="anonymous"?m.credentials="omit":m.credentials="same-origin",m}function d(p){if(p.ep)return;p.ep=!0;const m=l(p);fetch(p.href,m)}})();var vu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Lh={exports:{}},Vl={};var d1;function K2(){if(d1)return Vl;d1=1;var u=Symbol.for("react.transitional.element"),r=Symbol.for("react.fragment");function l(d,p,m){var E=null;if(m!==void 0&&(E=""+m),p.key!==void 0&&(E=""+p.key),"key"in p){m={};for(var _ in p)_!=="key"&&(m[_]=p[_])}else m=p;return p=m.ref,{$$typeof:u,type:d,key:E,ref:p!==void 0?p:null,props:m}}return Vl.Fragment=r,Vl.jsx=l,Vl.jsxs=l,Vl}var g1;function Q2(){return g1||(g1=1,Lh.exports=K2()),Lh.exports}var We=Q2(),kh={exports:{}},He={};var m1;function J2(){if(m1)return He;m1=1;var u=Symbol.for("react.transitional.element"),r=Symbol.for("react.portal"),l=Symbol.for("react.fragment"),d=Symbol.for("react.strict_mode"),p=Symbol.for("react.profiler"),m=Symbol.for("react.consumer"),E=Symbol.for("react.context"),_=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),b=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),D=Symbol.for("react.activity"),F=Symbol.iterator;function P(z){return z===null||typeof z!="object"?null:(z=F&&z[F]||z["@@iterator"],typeof z=="function"?z:null)}var ne={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},K=Object.assign,oe={};function ye(z,ie,we){this.props=z,this.context=ie,this.refs=oe,this.updater=we||ne}ye.prototype.isReactComponent={},ye.prototype.setState=function(z,ie){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,ie,"setState")},ye.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function fe(){}fe.prototype=ye.prototype;function te(z,ie,we){this.props=z,this.context=ie,this.refs=oe,this.updater=we||ne}var xe=te.prototype=new fe;xe.constructor=te,K(xe,ye.prototype),xe.isPureReactComponent=!0;var Ke=Array.isArray;function be(){}var $={H:null,A:null,T:null,S:null},Me=Object.prototype.hasOwnProperty;function ce(z,ie,we){var Ae=we.ref;return{$$typeof:u,type:z,key:ie,ref:Ae!==void 0?Ae:null,props:we}}function ti(z,ie){return ce(z.type,ie,z.props)}function Pt(z){return typeof z=="object"&&z!==null&&z.$$typeof===u}function Te(z){var ie={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(we){return ie[we]})}var nt=/\/+/g;function Ot(z,ie){return typeof z=="object"&&z!==null&&z.key!=null?Te(""+z.key):ie.toString(36)}function ee(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(be,be):(z.status="pending",z.then(function(ie){z.status==="pending"&&(z.status="fulfilled",z.value=ie)},function(ie){z.status==="pending"&&(z.status="rejected",z.reason=ie)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function Q(z,ie,we,Ae,ze){var pe=typeof z;(pe==="undefined"||pe==="boolean")&&(z=null);var ut=!1;if(z===null)ut=!0;else switch(pe){case"bigint":case"string":case"number":ut=!0;break;case"object":switch(z.$$typeof){case u:case r:ut=!0;break;case N:return ut=z._init,Q(ut(z._payload),ie,we,Ae,ze)}}if(ut)return ze=ze(z),ut=Ae===""?"."+Ot(z,0):Ae,Ke(ze)?(we="",ut!=null&&(we=ut.replace(nt,"$&/")+"/"),Q(ze,ie,we,"",function(Mi){return Mi})):ze!=null&&(Pt(ze)&&(ze=ti(ze,we+(ze.key==null||z&&z.key===ze.key?"":(""+ze.key).replace(nt,"$&/")+"/")+ut)),ie.push(ze)),1;ut=0;var ct=Ae===""?".":Ae+":";if(Ke(z))for(var Mt=0;Mt<z.length;Mt++)Ae=z[Mt],pe=ct+Ot(Ae,Mt),ut+=Q(Ae,ie,we,pe,ze);else if(Mt=P(z),typeof Mt=="function")for(z=Mt.call(z),Mt=0;!(Ae=z.next()).done;)Ae=Ae.value,pe=ct+Ot(Ae,Mt++),ut+=Q(Ae,ie,we,pe,ze);else if(pe==="object"){if(typeof z.then=="function")return Q(ee(z),ie,we,Ae,ze);throw ie=String(z),Error("Objects are not valid as a React child (found: "+(ie==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":ie)+"). If you meant to render a collection of children, use an array instead.")}return ut}function se(z,ie,we){if(z==null)return z;var Ae=[],ze=0;return Q(z,Ae,"","",function(pe){return ie.call(we,pe,ze++)}),Ae}function De(z){if(z._status===-1){var ie=z._result;ie=ie(),ie.then(function(we){(z._status===0||z._status===-1)&&(z._status=1,z._result=we)},function(we){(z._status===0||z._status===-1)&&(z._status=2,z._result=we)}),z._status===-1&&(z._status=0,z._result=ie)}if(z._status===1)return z._result.default;throw z._result}var Qe=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var ie=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(ie))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)},it={map:se,forEach:function(z,ie,we){se(z,function(){ie.apply(this,arguments)},we)},count:function(z){var ie=0;return se(z,function(){ie++}),ie},toArray:function(z){return se(z,function(ie){return ie})||[]},only:function(z){if(!Pt(z))throw Error("React.Children.only expected to receive a single React element child.");return z}};return He.Activity=D,He.Children=it,He.Component=ye,He.Fragment=l,He.Profiler=p,He.PureComponent=te,He.StrictMode=d,He.Suspense=C,He.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=$,He.__COMPILER_RUNTIME={__proto__:null,c:function(z){return $.H.useMemoCache(z)}},He.cache=function(z){return function(){return z.apply(null,arguments)}},He.cacheSignal=function(){return null},He.cloneElement=function(z,ie,we){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var Ae=K({},z.props),ze=z.key;if(ie!=null)for(pe in ie.key!==void 0&&(ze=""+ie.key),ie)!Me.call(ie,pe)||pe==="key"||pe==="__self"||pe==="__source"||pe==="ref"&&ie.ref===void 0||(Ae[pe]=ie[pe]);var pe=arguments.length-2;if(pe===1)Ae.children=we;else if(1<pe){for(var ut=Array(pe),ct=0;ct<pe;ct++)ut[ct]=arguments[ct+2];Ae.children=ut}return ce(z.type,ze,Ae)},He.createContext=function(z){return z={$$typeof:E,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:m,_context:z},z},He.createElement=function(z,ie,we){var Ae,ze={},pe=null;if(ie!=null)for(Ae in ie.key!==void 0&&(pe=""+ie.key),ie)Me.call(ie,Ae)&&Ae!=="key"&&Ae!=="__self"&&Ae!=="__source"&&(ze[Ae]=ie[Ae]);var ut=arguments.length-2;if(ut===1)ze.children=we;else if(1<ut){for(var ct=Array(ut),Mt=0;Mt<ut;Mt++)ct[Mt]=arguments[Mt+2];ze.children=ct}if(z&&z.defaultProps)for(Ae in ut=z.defaultProps,ut)ze[Ae]===void 0&&(ze[Ae]=ut[Ae]);return ce(z,pe,ze)},He.createRef=function(){return{current:null}},He.forwardRef=function(z){return{$$typeof:_,render:z}},He.isValidElement=Pt,He.lazy=function(z){return{$$typeof:N,_payload:{_status:-1,_result:z},_init:De}},He.memo=function(z,ie){return{$$typeof:b,type:z,compare:ie===void 0?null:ie}},He.startTransition=function(z){var ie=$.T,we={};$.T=we;try{var Ae=z(),ze=$.S;ze!==null&&ze(we,Ae),typeof Ae=="object"&&Ae!==null&&typeof Ae.then=="function"&&Ae.then(be,Qe)}catch(pe){Qe(pe)}finally{ie!==null&&we.types!==null&&(ie.types=we.types),$.T=ie}},He.unstable_useCacheRefresh=function(){return $.H.useCacheRefresh()},He.use=function(z){return $.H.use(z)},He.useActionState=function(z,ie,we){return $.H.useActionState(z,ie,we)},He.useCallback=function(z,ie){return $.H.useCallback(z,ie)},He.useContext=function(z){return $.H.useContext(z)},He.useDebugValue=function(){},He.useDeferredValue=function(z,ie){return $.H.useDeferredValue(z,ie)},He.useEffect=function(z,ie){return $.H.useEffect(z,ie)},He.useEffectEvent=function(z){return $.H.useEffectEvent(z)},He.useId=function(){return $.H.useId()},He.useImperativeHandle=function(z,ie,we){return $.H.useImperativeHandle(z,ie,we)},He.useInsertionEffect=function(z,ie){return $.H.useInsertionEffect(z,ie)},He.useLayoutEffect=function(z,ie){return $.H.useLayoutEffect(z,ie)},He.useMemo=function(z,ie){return $.H.useMemo(z,ie)},He.useOptimistic=function(z,ie){return $.H.useOptimistic(z,ie)},He.useReducer=function(z,ie,we){return $.H.useReducer(z,ie,we)},He.useRef=function(z){return $.H.useRef(z)},He.useState=function(z){return $.H.useState(z)},He.useSyncExternalStore=function(z,ie,we){return $.H.useSyncExternalStore(z,ie,we)},He.useTransition=function(){return $.H.useTransition()},He.version="19.2.4",He}var y1;function sf(){return y1||(y1=1,kh.exports=J2()),kh.exports}var wa=sf(),Uh={exports:{}},Gl={},jh={exports:{}},zh={};var p1;function $2(){return p1||(p1=1,(function(u){function r(Q,se){var De=Q.length;Q.push(se);e:for(;0<De;){var Qe=De-1>>>1,it=Q[Qe];if(0<p(it,se))Q[Qe]=se,Q[De]=it,De=Qe;else break e}}function l(Q){return Q.length===0?null:Q[0]}function d(Q){if(Q.length===0)return null;var se=Q[0],De=Q.pop();if(De!==se){Q[0]=De;e:for(var Qe=0,it=Q.length,z=it>>>1;Qe<z;){var ie=2*(Qe+1)-1,we=Q[ie],Ae=ie+1,ze=Q[Ae];if(0>p(we,De))Ae<it&&0>p(ze,we)?(Q[Qe]=ze,Q[Ae]=De,Qe=Ae):(Q[Qe]=we,Q[ie]=De,Qe=ie);else if(Ae<it&&0>p(ze,De))Q[Qe]=ze,Q[Ae]=De,Qe=Ae;else break e}}return se}function p(Q,se){var De=Q.sortIndex-se.sortIndex;return De!==0?De:Q.id-se.id}if(u.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var m=performance;u.unstable_now=function(){return m.now()}}else{var E=Date,_=E.now();u.unstable_now=function(){return E.now()-_}}var C=[],b=[],N=1,D=null,F=3,P=!1,ne=!1,K=!1,oe=!1,ye=typeof setTimeout=="function"?setTimeout:null,fe=typeof clearTimeout=="function"?clearTimeout:null,te=typeof setImmediate<"u"?setImmediate:null;function xe(Q){for(var se=l(b);se!==null;){if(se.callback===null)d(b);else if(se.startTime<=Q)d(b),se.sortIndex=se.expirationTime,r(C,se);else break;se=l(b)}}function Ke(Q){if(K=!1,xe(Q),!ne)if(l(C)!==null)ne=!0,be||(be=!0,Te());else{var se=l(b);se!==null&&ee(Ke,se.startTime-Q)}}var be=!1,$=-1,Me=5,ce=-1;function ti(){return oe?!0:!(u.unstable_now()-ce<Me)}function Pt(){if(oe=!1,be){var Q=u.unstable_now();ce=Q;var se=!0;try{e:{ne=!1,K&&(K=!1,fe($),$=-1),P=!0;var De=F;try{t:{for(xe(Q),D=l(C);D!==null&&!(D.expirationTime>Q&&ti());){var Qe=D.callback;if(typeof Qe=="function"){D.callback=null,F=D.priorityLevel;var it=Qe(D.expirationTime<=Q);if(Q=u.unstable_now(),typeof it=="function"){D.callback=it,xe(Q),se=!0;break t}D===l(C)&&d(C),xe(Q)}else d(C);D=l(C)}if(D!==null)se=!0;else{var z=l(b);z!==null&&ee(Ke,z.startTime-Q),se=!1}}break e}finally{D=null,F=De,P=!1}se=void 0}}finally{se?Te():be=!1}}}var Te;if(typeof te=="function")Te=function(){te(Pt)};else if(typeof MessageChannel<"u"){var nt=new MessageChannel,Ot=nt.port2;nt.port1.onmessage=Pt,Te=function(){Ot.postMessage(null)}}else Te=function(){ye(Pt,0)};function ee(Q,se){$=ye(function(){Q(u.unstable_now())},se)}u.unstable_IdlePriority=5,u.unstable_ImmediatePriority=1,u.unstable_LowPriority=4,u.unstable_NormalPriority=3,u.unstable_Profiling=null,u.unstable_UserBlockingPriority=2,u.unstable_cancelCallback=function(Q){Q.callback=null},u.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Me=0<Q?Math.floor(1e3/Q):5},u.unstable_getCurrentPriorityLevel=function(){return F},u.unstable_next=function(Q){switch(F){case 1:case 2:case 3:var se=3;break;default:se=F}var De=F;F=se;try{return Q()}finally{F=De}},u.unstable_requestPaint=function(){oe=!0},u.unstable_runWithPriority=function(Q,se){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var De=F;F=Q;try{return se()}finally{F=De}},u.unstable_scheduleCallback=function(Q,se,De){var Qe=u.unstable_now();switch(typeof De=="object"&&De!==null?(De=De.delay,De=typeof De=="number"&&0<De?Qe+De:Qe):De=Qe,Q){case 1:var it=-1;break;case 2:it=250;break;case 5:it=1073741823;break;case 4:it=1e4;break;default:it=5e3}return it=De+it,Q={id:N++,callback:se,priorityLevel:Q,startTime:De,expirationTime:it,sortIndex:-1},De>Qe?(Q.sortIndex=De,r(b,Q),l(C)===null&&Q===l(b)&&(K?(fe($),$=-1):K=!0,ee(Ke,De-Qe))):(Q.sortIndex=it,r(C,Q),ne||P||(ne=!0,be||(be=!0,Te()))),Q},u.unstable_shouldYield=ti,u.unstable_wrapCallback=function(Q){var se=F;return function(){var De=F;F=se;try{return Q.apply(this,arguments)}finally{F=De}}}})(zh)),zh}var x1;function em(){return x1||(x1=1,jh.exports=$2()),jh.exports}var Ph={exports:{}},Ln={};var w1;function tm(){if(w1)return Ln;w1=1;var u=sf();function r(C){var b="https://react.dev/errors/"+C;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var N=2;N<arguments.length;N++)b+="&args[]="+encodeURIComponent(arguments[N])}return"Minified React error #"+C+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function l(){}var d={d:{f:l,r:function(){throw Error(r(522))},D:l,C:l,L:l,m:l,X:l,S:l,M:l},p:0,findDOMNode:null},p=Symbol.for("react.portal");function m(C,b,N){var D=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:D==null?null:""+D,children:C,containerInfo:b,implementation:N}}var E=u.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function _(C,b){if(C==="font")return"";if(typeof b=="string")return b==="use-credentials"?b:""}return Ln.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=d,Ln.createPortal=function(C,b){var N=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!b||b.nodeType!==1&&b.nodeType!==9&&b.nodeType!==11)throw Error(r(299));return m(C,b,null,N)},Ln.flushSync=function(C){var b=E.T,N=d.p;try{if(E.T=null,d.p=2,C)return C()}finally{E.T=b,d.p=N,d.d.f()}},Ln.preconnect=function(C,b){typeof C=="string"&&(b?(b=b.crossOrigin,b=typeof b=="string"?b==="use-credentials"?b:"":void 0):b=null,d.d.C(C,b))},Ln.prefetchDNS=function(C){typeof C=="string"&&d.d.D(C)},Ln.preinit=function(C,b){if(typeof C=="string"&&b&&typeof b.as=="string"){var N=b.as,D=_(N,b.crossOrigin),F=typeof b.integrity=="string"?b.integrity:void 0,P=typeof b.fetchPriority=="string"?b.fetchPriority:void 0;N==="style"?d.d.S(C,typeof b.precedence=="string"?b.precedence:void 0,{crossOrigin:D,integrity:F,fetchPriority:P}):N==="script"&&d.d.X(C,{crossOrigin:D,integrity:F,fetchPriority:P,nonce:typeof b.nonce=="string"?b.nonce:void 0})}},Ln.preinitModule=function(C,b){if(typeof C=="string")if(typeof b=="object"&&b!==null){if(b.as==null||b.as==="script"){var N=_(b.as,b.crossOrigin);d.d.M(C,{crossOrigin:N,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0})}}else b==null&&d.d.M(C)},Ln.preload=function(C,b){if(typeof C=="string"&&typeof b=="object"&&b!==null&&typeof b.as=="string"){var N=b.as,D=_(N,b.crossOrigin);d.d.L(C,N,{crossOrigin:D,integrity:typeof b.integrity=="string"?b.integrity:void 0,nonce:typeof b.nonce=="string"?b.nonce:void 0,type:typeof b.type=="string"?b.type:void 0,fetchPriority:typeof b.fetchPriority=="string"?b.fetchPriority:void 0,referrerPolicy:typeof b.referrerPolicy=="string"?b.referrerPolicy:void 0,imageSrcSet:typeof b.imageSrcSet=="string"?b.imageSrcSet:void 0,imageSizes:typeof b.imageSizes=="string"?b.imageSizes:void 0,media:typeof b.media=="string"?b.media:void 0})}},Ln.preloadModule=function(C,b){if(typeof C=="string")if(b){var N=_(b.as,b.crossOrigin);d.d.m(C,{as:typeof b.as=="string"&&b.as!=="script"?b.as:void 0,crossOrigin:N,integrity:typeof b.integrity=="string"?b.integrity:void 0})}else d.d.m(C)},Ln.requestFormReset=function(C){d.d.r(C)},Ln.unstable_batchedUpdates=function(C,b){return C(b)},Ln.useFormState=function(C,b,N){return E.H.useFormState(C,b,N)},Ln.useFormStatus=function(){return E.H.useHostTransitionStatus()},Ln.version="19.2.4",Ln}var A1;function nm(){if(A1)return Ph.exports;A1=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(r){console.error(r)}}return u(),Ph.exports=tm(),Ph.exports}var b1;function im(){if(b1)return Gl;b1=1;var u=em(),r=sf(),l=nm();function d(e){var n="https://react.dev/errors/"+e;if(1<arguments.length){n+="?args[]="+encodeURIComponent(arguments[1]);for(var s=2;s<arguments.length;s++)n+="&args[]="+encodeURIComponent(arguments[s])}return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function p(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function m(e){var n=e,s=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,(n.flags&4098)!==0&&(s=n.return),e=n.return;while(e)}return n.tag===3?s:null}function E(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function _(e){if(e.tag===31){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function C(e){if(m(e)!==e)throw Error(d(188))}function b(e){var n=e.alternate;if(!n){if(n=m(e),n===null)throw Error(d(188));return n!==e?null:e}for(var s=e,h=n;;){var y=s.return;if(y===null)break;var w=y.alternate;if(w===null){if(h=y.return,h!==null){s=h;continue}break}if(y.child===w.child){for(w=y.child;w;){if(w===s)return C(y),e;if(w===h)return C(y),n;w=w.sibling}throw Error(d(188))}if(s.return!==h.return)s=y,h=w;else{for(var S=!1,R=y.child;R;){if(R===s){S=!0,s=y,h=w;break}if(R===h){S=!0,h=y,s=w;break}R=R.sibling}if(!S){for(R=w.child;R;){if(R===s){S=!0,s=w,h=y;break}if(R===h){S=!0,h=w,s=y;break}R=R.sibling}if(!S)throw Error(d(189))}}if(s.alternate!==h)throw Error(d(190))}if(s.tag!==3)throw Error(d(188));return s.stateNode.current===s?e:n}function N(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e;for(e=e.child;e!==null;){if(n=N(e),n!==null)return n;e=e.sibling}return null}var D=Object.assign,F=Symbol.for("react.element"),P=Symbol.for("react.transitional.element"),ne=Symbol.for("react.portal"),K=Symbol.for("react.fragment"),oe=Symbol.for("react.strict_mode"),ye=Symbol.for("react.profiler"),fe=Symbol.for("react.consumer"),te=Symbol.for("react.context"),xe=Symbol.for("react.forward_ref"),Ke=Symbol.for("react.suspense"),be=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),Me=Symbol.for("react.lazy"),ce=Symbol.for("react.activity"),ti=Symbol.for("react.memo_cache_sentinel"),Pt=Symbol.iterator;function Te(e){return e===null||typeof e!="object"?null:(e=Pt&&e[Pt]||e["@@iterator"],typeof e=="function"?e:null)}var nt=Symbol.for("react.client.reference");function Ot(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===nt?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case K:return"Fragment";case ye:return"Profiler";case oe:return"StrictMode";case Ke:return"Suspense";case be:return"SuspenseList";case ce:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case ne:return"Portal";case te:return e.displayName||"Context";case fe:return(e._context.displayName||"Context")+".Consumer";case xe:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case $:return n=e.displayName||null,n!==null?n:Ot(e.type)||"Memo";case Me:n=e._payload,e=e._init;try{return Ot(e(n))}catch{}}return null}var ee=Array.isArray,Q=r.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,se=l.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,De={pending:!1,data:null,method:null,action:null},Qe=[],it=-1;function z(e){return{current:e}}function ie(e){0>it||(e.current=Qe[it],Qe[it]=null,it--)}function we(e,n){it++,Qe[it]=e.current,e.current=n}var Ae=z(null),ze=z(null),pe=z(null),ut=z(null);function ct(e,n){switch(we(pe,n),we(ze,e),we(Ae,null),n.nodeType){case 9:case 11:e=(e=n.documentElement)&&(e=e.namespaceURI)?kd(e):0;break;default:if(e=n.tagName,n=n.namespaceURI)n=kd(n),e=Ud(n,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}ie(Ae),we(Ae,e)}function Mt(){ie(Ae),ie(ze),ie(pe)}function Mi(e){e.memoizedState!==null&&we(ut,e);var n=Ae.current,s=Ud(n,e.type);n!==s&&(we(ze,e),we(Ae,s))}function yn(e){ze.current===e&&(ie(Ae),ie(ze)),ut.current===e&&(ie(ut),zl._currentValue=De)}var Dr,ht;function Vn(e){if(Dr===void 0)try{throw Error()}catch(s){var n=s.stack.trim().match(/\n( *(at )?)/);Dr=n&&n[1]||"",ht=-1<s.stack.indexOf(`
    at`)?" (<anonymous>)":-1<s.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Dr+e+ht}var Gn=!1;function sr(e,n){if(!e||Gn)return"";Gn=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var h={DetermineComponentFrameRoot:function(){try{if(n){var le=function(){throw Error()};if(Object.defineProperty(le.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(le,[])}catch(J){var X=J}Reflect.construct(e,[],le)}else{try{le.call()}catch(J){X=J}e.call(le.prototype)}}else{try{throw Error()}catch(J){X=J}(le=e())&&typeof le.catch=="function"&&le.catch(function(){})}}catch(J){if(J&&X&&typeof J.stack=="string")return[J.stack,X.stack]}return[null,null]}};h.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(h.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(h.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var w=h.DetermineComponentFrameRoot(),S=w[0],R=w[1];if(S&&R){var L=S.split(`
`),q=R.split(`
`);for(y=h=0;h<L.length&&!L[h].includes("DetermineComponentFrameRoot");)h++;for(;y<q.length&&!q[y].includes("DetermineComponentFrameRoot");)y++;if(h===L.length||y===q.length)for(h=L.length-1,y=q.length-1;1<=h&&0<=y&&L[h]!==q[y];)y--;for(;1<=h&&0<=y;h--,y--)if(L[h]!==q[y]){if(h!==1||y!==1)do if(h--,y--,0>y||L[h]!==q[y]){var re=`
`+L[h].replace(" at new "," at ");return e.displayName&&re.includes("<anonymous>")&&(re=re.replace("<anonymous>",e.displayName)),re}while(1<=h&&0<=y);break}}}finally{Gn=!1,Error.prepareStackTrace=s}return(s=e?e.displayName||e.name:"")?Vn(s):""}function pn(e,n){switch(e.tag){case 26:case 27:case 5:return Vn(e.type);case 16:return Vn("Lazy");case 13:return e.child!==n&&n!==null?Vn("Suspense Fallback"):Vn("Suspense");case 19:return Vn("SuspenseList");case 0:case 15:return sr(e.type,!1);case 11:return sr(e.type.render,!1);case 1:return sr(e.type,!0);case 31:return Vn("Activity");default:return""}}function vt(e){try{var n="",s=null;do n+=pn(e,s),s=e,e=e.return;while(e);return n}catch(h){return`
Error generating stack: `+h.message+`
`+h.stack}}var Je=Object.prototype.hasOwnProperty,Mr=u.unstable_scheduleCallback,Se=u.unstable_cancelCallback,Ja=u.unstable_shouldYield,ro=u.unstable_requestPaint,Zt=u.unstable_now,Ks=u.unstable_getCurrentPriorityLevel,Yn=u.unstable_ImmediatePriority,Qs=u.unstable_UserBlockingPriority,ni=u.unstable_NormalPriority,Cn=u.unstable_LowPriority,Js=u.unstable_IdlePriority,$a=u.log,Pu=u.unstable_setDisableYieldValue,jt=null,me=null;function It(e){if(typeof $a=="function"&&Pu(e),me&&typeof me.setStrictMode=="function")try{me.setStrictMode(jt,e)}catch{}}var Ge=Math.clz32?Math.clz32:$s,Yt=Math.log,ba=Math.LN2;function $s(e){return e>>>=0,e===0?32:31-(Yt(e)/ba|0)|0}var Ea=256,rt=262144,Ai=4194304;function Xi(e){var n=e&42;if(n!==0)return n;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function va(e,n,s){var h=e.pendingLanes;if(h===0)return 0;var y=0,w=e.suspendedLanes,S=e.pingedLanes;e=e.warmLanes;var R=h&134217727;return R!==0?(h=R&~w,h!==0?y=Xi(h):(S&=R,S!==0?y=Xi(S):s||(s=R&~e,s!==0&&(y=Xi(s))))):(R=h&~w,R!==0?y=Xi(R):S!==0?y=Xi(S):s||(s=h&~e,s!==0&&(y=Xi(s)))),y===0?0:n!==0&&n!==y&&(n&w)===0&&(w=y&-y,s=n&-n,w>=s||w===32&&(s&4194048)!==0)?n:y}function Tn(e,n){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&n)===0}function el(e,n){switch(e){case 1:case 2:case 4:case 8:case 64:return n+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xn(){var e=Ai;return Ai<<=1,(Ai&62914560)===0&&(Ai=4194304),e}function Zi(e){for(var n=[],s=0;31>s;s++)n.push(e);return n}function Wi(e,n){e.pendingLanes|=n,n!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function bi(e,n,s,h,y,w){var S=e.pendingLanes;e.pendingLanes=s,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=s,e.entangledLanes&=s,e.errorRecoveryDisabledLanes&=s,e.shellSuspendCounter=0;var R=e.entanglements,L=e.expirationTimes,q=e.hiddenUpdates;for(s=S&~s;0<s;){var re=31-Ge(s),le=1<<re;R[re]=0,L[re]=-1;var X=q[re];if(X!==null)for(q[re]=null,re=0;re<X.length;re++){var J=X[re];J!==null&&(J.lane&=-536870913)}s&=~le}h!==0&&ao(e,h,0),w!==0&&y===0&&e.tag!==0&&(e.suspendedLanes|=w&~(S&~n))}function ao(e,n,s){e.pendingLanes|=n,e.suspendedLanes&=~n;var h=31-Ge(n);e.entangledLanes|=n,e.entanglements[h]=e.entanglements[h]|1073741824|s&261930}function Ki(e,n){var s=e.entangledLanes|=n;for(e=e.entanglements;s;){var h=31-Ge(s),y=1<<h;y&n|e[h]&n&&(e[h]|=n),s&=~y}}function es(e,n){var s=n&-n;return s=(s&42)!==0?1:Sn(s),(s&(e.suspendedLanes|n))!==0?0:s}function Sn(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Bi(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function kn(){var e=se.p;return e!==0?e:(e=window.event,e===void 0?32:s1(e.type))}function Ee(e,n){var s=se.p;try{return se.p=e,n()}finally{se.p=s}}var Un=Math.random().toString(36).slice(2),rn="__reactFiber$"+Un,St="__reactProps$"+Un,ii="__reactContainer$"+Un,Br="__reactEvents$"+Un,ts="__reactListeners$"+Un,Ei="__reactHandles$"+Un,so="__reactResources$"+Un,Sa="__reactMarker$"+Un;function qn(e){delete e[rn],delete e[St],delete e[Br],delete e[ts],delete e[Ei]}function Kt(e){var n=e[rn];if(n)return n;for(var s=e.parentNode;s;){if(n=s[ii]||s[rn]){if(s=n.alternate,n.child!==null||s!==null&&s.child!==null)for(e=Gd(e);e!==null;){if(s=e[rn])return s;e=Gd(e)}return n}e=s,s=e.parentNode}return null}function pt(e){if(e=e[rn]||e[ii]){var n=e.tag;if(n===5||n===6||n===13||n===31||n===26||n===27||n===3)return e}return null}function Lr(e){var n=e.tag;if(n===5||n===26||n===27||n===6)return e.stateNode;throw Error(d(33))}function jn(e){var n=e[so];return n||(n=e[so]={hoistableStyles:new Map,hoistableScripts:new Map}),n}function Qt(e){e[Sa]=!0}var ue=new Set,lo={};function At(e,n){ri(e,n),ri(e+"Capture",n)}function ri(e,n){for(lo[e]=n,e=0;e<n.length;e++)ue.add(n[e])}var Fu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),dt={},ft={};function $e(e){return Je.call(ft,e)?!0:Je.call(dt,e)?!1:Fu.test(e)?ft[e]=!0:(dt[e]=!0,!1)}function kr(e,n,s){if($e(n))if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":e.removeAttribute(n);return;case"boolean":var h=n.toLowerCase().slice(0,5);if(h!=="data-"&&h!=="aria-"){e.removeAttribute(n);return}}e.setAttribute(n,""+s)}}function Ur(e,n,s){if(s===null)e.removeAttribute(n);else{switch(typeof s){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(n);return}e.setAttribute(n,""+s)}}function ai(e,n,s,h){if(h===null)e.removeAttribute(s);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(s);return}e.setAttributeNS(n,s,""+h)}}function gt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Li(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function Hu(e,n,s){var h=Object.getOwnPropertyDescriptor(e.constructor.prototype,n);if(!e.hasOwnProperty(n)&&typeof h<"u"&&typeof h.get=="function"&&typeof h.set=="function"){var y=h.get,w=h.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return y.call(this)},set:function(S){s=""+S,w.call(this,S)}}),Object.defineProperty(e,n,{enumerable:h.enumerable}),{getValue:function(){return s},setValue:function(S){s=""+S},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function Ft(e){if(!e._valueTracker){var n=Li(e)?"checked":"value";e._valueTracker=Hu(e,n,""+e[n])}}function ki(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var s=n.getValue(),h="";return e&&(h=Li(e)?e.checked?"true":"false":e.value),e=h,e!==s?(n.setValue(e),!0):!1}function ns(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var jr=/[\n"\\]/g;function Ze(e){return e.replace(jr,function(n){return"\\"+n.charCodeAt(0).toString(16)+" "})}function un(e,n,s,h,y,w,S,R){e.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?e.type=S:e.removeAttribute("type"),n!=null?S==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+gt(n)):e.value!==""+gt(n)&&(e.value=""+gt(n)):S!=="submit"&&S!=="reset"||e.removeAttribute("value"),n!=null?M(e,S,gt(n)):s!=null?M(e,S,gt(s)):h!=null&&e.removeAttribute("value"),y==null&&w!=null&&(e.defaultChecked=!!w),y!=null&&(e.checked=y&&typeof y!="function"&&typeof y!="symbol"),R!=null&&typeof R!="function"&&typeof R!="symbol"&&typeof R!="boolean"?e.name=""+gt(R):e.removeAttribute("name")}function G(e,n,s,h,y,w,S,R){if(w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"&&(e.type=w),n!=null||s!=null){if(!(w!=="submit"&&w!=="reset"||n!=null)){Ft(e);return}s=s!=null?""+gt(s):"",n=n!=null?""+gt(n):s,R||n===e.value||(e.value=n),e.defaultValue=n}h=h??y,h=typeof h!="function"&&typeof h!="symbol"&&!!h,e.checked=R?e.checked:!!h,e.defaultChecked=!!h,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(e.name=S),Ft(e)}function M(e,n,s){n==="number"&&ns(e.ownerDocument)===e||e.defaultValue===""+s||(e.defaultValue=""+s)}function Ce(e,n,s,h){if(e=e.options,n){n={};for(var y=0;y<s.length;y++)n["$"+s[y]]=!0;for(s=0;s<e.length;s++)y=n.hasOwnProperty("$"+e[s].value),e[s].selected!==y&&(e[s].selected=y),y&&h&&(e[s].defaultSelected=!0)}else{for(s=""+gt(s),n=null,y=0;y<e.length;y++){if(e[y].value===s){e[y].selected=!0,h&&(e[y].defaultSelected=!0);return}n!==null||e[y].disabled||(n=e[y])}n!==null&&(n.selected=!0)}}function an(e,n,s){if(n!=null&&(n=""+gt(n),n!==e.value&&(e.value=n),s==null)){e.defaultValue!==n&&(e.defaultValue=n);return}e.defaultValue=s!=null?""+gt(s):""}function zn(e,n,s,h){if(n==null){if(h!=null){if(s!=null)throw Error(d(92));if(ee(h)){if(1<h.length)throw Error(d(93));h=h[0]}s=h}s==null&&(s=""),n=s}s=gt(n),e.defaultValue=s,h=e.textContent,h===s&&h!==""&&h!==null&&(e.value=h),Ft(e)}function zr(e,n){if(n){var s=e.firstChild;if(s&&s===e.lastChild&&s.nodeType===3){s.nodeValue=n;return}}e.textContent=n}var tl=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Pn(e,n,s){var h=n.indexOf("--")===0;s==null||typeof s=="boolean"||s===""?h?e.setProperty(n,""):n==="float"?e.cssFloat="":e[n]="":h?e.setProperty(n,s):typeof s!="number"||s===0||tl.has(n)?n==="float"?e.cssFloat=s:e[n]=(""+s).trim():e[n]=s+"px"}function Ne(e,n,s){if(n!=null&&typeof n!="object")throw Error(d(62));if(e=e.style,s!=null){for(var h in s)!s.hasOwnProperty(h)||n!=null&&n.hasOwnProperty(h)||(h.indexOf("--")===0?e.setProperty(h,""):h==="float"?e.cssFloat="":e[h]="");for(var y in n)h=n[y],n.hasOwnProperty(y)&&s[y]!==h&&Pn(e,y,h)}else for(var w in n)n.hasOwnProperty(w)&&Pn(e,w,n[w])}function Bt(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var oo=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Vu=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Pr(e){return Vu.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function Xn(){}var _a=null;function nl(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Ht=null,vi=null;function Ui(e){var n=pt(e);if(n&&(e=n.stateNode)){var s=e[St]||null;e:switch(e=n.stateNode,n.type){case"input":if(un(e,s.value,s.defaultValue,s.defaultValue,s.checked,s.defaultChecked,s.type,s.name),n=s.name,s.type==="radio"&&n!=null){for(s=e;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll('input[name="'+Ze(""+n)+'"][type="radio"]'),n=0;n<s.length;n++){var h=s[n];if(h!==e&&h.form===e.form){var y=h[St]||null;if(!y)throw Error(d(90));un(h,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(n=0;n<s.length;n++)h=s[n],h.form===e.form&&ki(h)}break e;case"textarea":an(e,s.value,s.defaultValue);break e;case"select":n=s.value,n!=null&&Ce(e,!!s.multiple,n,!1)}}}var Be=!1;function uo(e,n,s){if(Be)return e(n,s);Be=!0;try{var h=e(n);return h}finally{if(Be=!1,(Ht!==null||vi!==null)&&(tu(),Ht&&(n=Ht,e=vi,vi=Ht=null,Ui(n),e)))for(n=0;n<e.length;n++)Ui(e[n])}}function Pe(e,n){var s=e.stateNode;if(s===null)return null;var h=s[St]||null;if(h===null)return null;s=h[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(h=!h.disabled)||(e=e.type,h=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!h;break e;default:e=!1}if(e)return null;if(s&&typeof s!="function")throw Error(d(231,n,typeof s));return s}var Lt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),il=!1;if(Lt)try{var lr={};Object.defineProperty(lr,"passive",{get:function(){il=!0}}),window.addEventListener("test",lr,lr),window.removeEventListener("test",lr,lr)}catch{il=!1}var ji=null,zi=null,is=null;function Fr(){if(is)return is;var e,n=zi,s=n.length,h,y="value"in ji?ji.value:ji.textContent,w=y.length;for(e=0;e<s&&n[e]===y[e];e++);var S=s-e;for(h=1;h<=S&&n[s-h]===y[w-h];h++);return is=y.slice(e,1<h?1-h:void 0)}function Qi(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function Ji(){return!0}function rl(){return!1}function cn(e){function n(s,h,y,w,S){this._reactName=s,this._targetInst=y,this.type=h,this.nativeEvent=w,this.target=S,this.currentTarget=null;for(var R in e)e.hasOwnProperty(R)&&(s=e[R],this[R]=s?s(w):w[R]);return this.isDefaultPrevented=(w.defaultPrevented!=null?w.defaultPrevented:w.returnValue===!1)?Ji:rl,this.isPropagationStopped=rl,this}return D(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=Ji)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=Ji)},persist:function(){},isPersistent:Ji}),n}var si={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},wn=cn(si),Hr=D({},si,{view:0,detail:0}),co=cn(Hr),rs,al,Ca,as=D({},Hr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ta,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ca&&(Ca&&e.type==="mousemove"?(rs=e.screenX-Ca.screenX,al=e.screenY-Ca.screenY):al=rs=0,Ca=e),rs)},movementY:function(e){return"movementY"in e?e.movementY:al}}),xt=cn(as),ho=D({},as,{dataTransfer:0}),ss=cn(ho),$i=D({},Hr,{relatedTarget:0}),sl=cn($i),W=D({},si,{animationName:0,elapsedTime:0,pseudoElement:0}),Ye=cn(W),An=D({},si,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),ls=cn(An),fo=D({},si,{data:0}),go=cn(fo),Gu={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Yu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ll={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function sn(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=ll[e])?!!n[e]:!1}function Ta(){return sn}var qt=D({},Hr,{key:function(e){if(e.key){var n=Gu[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=Qi(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Yu[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ta,charCode:function(e){return e.type==="keypress"?Qi(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Qi(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),os=cn(qt),or=D({},as,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),bt=cn(or),Le=D({},Hr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ta}),qu=cn(Le),kt=D({},si,{propertyName:0,elapsedTime:0,pseudoElement:0}),ur=cn(kt),Vr=D({},as,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Xu=cn(Vr),Si=D({},si,{newState:0,oldState:0}),ol=cn(Si),mo=[9,13,27,32],Oa=Lt&&"CompositionEvent"in window,Gr=null;Lt&&"documentMode"in document&&(Gr=document.documentMode);var yo=Lt&&"TextEvent"in window&&!Gr,po=Lt&&(!Oa||Gr&&8<Gr&&11>=Gr),cr=" ",us=!1;function xo(e,n){switch(e){case"keyup":return mo.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Yr(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var qr=!1;function er(e,n){switch(e){case"compositionend":return Yr(n);case"keypress":return n.which!==32?null:(us=!0,cr);case"textInput":return e=n.data,e===cr&&us?null:e;default:return null}}function cs(e,n){if(qr)return e==="compositionend"||!Oa&&xo(e,n)?(e=Fr(),is=zi=ji=null,qr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return po&&n.locale!=="ko"?null:n.data;default:return null}}var Zn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ul(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!Zn[e.type]:n==="textarea"}function li(e,n,s,h){Ht?vi?vi.push(h):vi=[h]:Ht=h,n=ou(n,"onChange"),0<n.length&&(s=new wn("onChange","change",null,s,h),e.push({event:s,listeners:n}))}var Ia=null,hr=null;function Zu(e){Nd(e,0)}function Na(e){var n=Lr(e);if(ki(n))return e}function oi(e,n){if(e==="change")return n}var wo=!1;if(Lt){var Ra;if(Lt){var fr="oninput"in document;if(!fr){var at=document.createElement("div");at.setAttribute("oninput","return;"),fr=typeof at.oninput=="function"}Ra=fr}else Ra=!1;wo=Ra&&(!document.documentMode||9<document.documentMode)}function Da(){Ia&&(Ia.detachEvent("onpropertychange",T),hr=Ia=null)}function T(e){if(e.propertyName==="value"&&Na(hr)){var n=[];li(n,hr,e,nl(e)),uo(Zu,n)}}function t(e,n,s){e==="focusin"?(Da(),Ia=n,hr=s,Ia.attachEvent("onpropertychange",T)):e==="focusout"&&Da()}function i(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Na(hr)}function a(e,n){if(e==="click")return Na(n)}function o(e,n){if(e==="input"||e==="change")return Na(n)}function c(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var f=typeof Object.is=="function"?Object.is:c;function g(e,n){if(f(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var s=Object.keys(e),h=Object.keys(n);if(s.length!==h.length)return!1;for(h=0;h<s.length;h++){var y=s[h];if(!Je.call(n,y)||!f(e[y],n[y]))return!1}return!0}function x(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function A(e,n){var s=x(e);e=0;for(var h;s;){if(s.nodeType===3){if(h=e+s.textContent.length,e<=n&&h>=n)return{node:s,offset:n-e};e=h}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=x(s)}}function v(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?v(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function O(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var n=ns(e.document);n instanceof e.HTMLIFrameElement;){try{var s=typeof n.contentWindow.location.href=="string"}catch{s=!1}if(s)e=n.contentWindow;else break;n=ns(e.document)}return n}function I(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}var B=Lt&&"documentMode"in document&&11>=document.documentMode,k=null,U=null,V=null,Z=!1;function ge(e,n,s){var h=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Z||k==null||k!==ns(h)||(h=k,"selectionStart"in h&&I(h)?h={start:h.selectionStart,end:h.selectionEnd}:(h=(h.ownerDocument&&h.ownerDocument.defaultView||window).getSelection(),h={anchorNode:h.anchorNode,anchorOffset:h.anchorOffset,focusNode:h.focusNode,focusOffset:h.focusOffset}),V&&g(V,h)||(V=h,h=ou(U,"onSelect"),0<h.length&&(n=new wn("onSelect","select",null,n,s),e.push({event:n,listeners:h}),n.target=k)))}function de(e,n){var s={};return s[e.toLowerCase()]=n.toLowerCase(),s["Webkit"+e]="webkit"+n,s["Moz"+e]="moz"+n,s}var he={animationend:de("Animation","AnimationEnd"),animationiteration:de("Animation","AnimationIteration"),animationstart:de("Animation","AnimationStart"),transitionrun:de("Transition","TransitionRun"),transitionstart:de("Transition","TransitionStart"),transitioncancel:de("Transition","TransitionCancel"),transitionend:de("Transition","TransitionEnd")},Xe={},Fe={};Lt&&(Fe=document.createElement("div").style,"AnimationEvent"in window||(delete he.animationend.animation,delete he.animationiteration.animation,delete he.animationstart.animation),"TransitionEvent"in window||delete he.transitionend.transition);function Jt(e){if(Xe[e])return Xe[e];if(!he[e])return e;var n=he[e],s;for(s in n)if(n.hasOwnProperty(s)&&s in Fe)return Xe[e]=n[s];return e}var Wn=Jt("animationend"),On=Jt("animationiteration"),Et=Jt("animationstart"),bn=Jt("transitionrun"),Fn=Jt("transitionstart"),Xr=Jt("transitioncancel"),dr=Jt("transitionend"),Ao=new Map,cl="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cl.push("scrollEnd");function Pi(e,n){Ao.set(e,n),At(n,[e])}var bo=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var n=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(n))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},_i=[],hs=0,Wu=0;function Eo(){for(var e=hs,n=Wu=hs=0;n<e;){var s=_i[n];_i[n++]=null;var h=_i[n];_i[n++]=null;var y=_i[n];_i[n++]=null;var w=_i[n];if(_i[n++]=null,h!==null&&y!==null){var S=h.pending;S===null?y.next=y:(y.next=S.next,S.next=y),h.pending=y}w!==0&&hf(s,y,w)}}function vo(e,n,s,h){_i[hs++]=e,_i[hs++]=n,_i[hs++]=s,_i[hs++]=h,Wu|=h,e.lanes|=h,e=e.alternate,e!==null&&(e.lanes|=h)}function Ku(e,n,s,h){return vo(e,n,s,h),So(e)}function Ma(e,n){return vo(e,null,null,n),So(e)}function hf(e,n,s){e.lanes|=s;var h=e.alternate;h!==null&&(h.lanes|=s);for(var y=!1,w=e.return;w!==null;)w.childLanes|=s,h=w.alternate,h!==null&&(h.childLanes|=s),w.tag===22&&(e=w.stateNode,e===null||e._visibility&1||(y=!0)),e=w,w=w.return;return e.tag===3?(w=e.stateNode,y&&n!==null&&(y=31-Ge(s),e=w.hiddenUpdates,h=e[y],h===null?e[y]=[n]:h.push(n),n.lane=s|536870912),w):null}function So(e){if(50<Dl)throw Dl=0,ah=null,Error(d(185));for(var n=e.return;n!==null;)e=n,n=e.return;return e.tag===3?e.stateNode:null}var fs={};function Mg(e,n,s,h){this.tag=e,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=h,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ui(e,n,s,h){return new Mg(e,n,s,h)}function Qu(e){return e=e.prototype,!(!e||!e.isReactComponent)}function gr(e,n){var s=e.alternate;return s===null?(s=ui(e.tag,n,e.key,e.mode),s.elementType=e.elementType,s.type=e.type,s.stateNode=e.stateNode,s.alternate=e,e.alternate=s):(s.pendingProps=n,s.type=e.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=e.flags&65011712,s.childLanes=e.childLanes,s.lanes=e.lanes,s.child=e.child,s.memoizedProps=e.memoizedProps,s.memoizedState=e.memoizedState,s.updateQueue=e.updateQueue,n=e.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},s.sibling=e.sibling,s.index=e.index,s.ref=e.ref,s.refCleanup=e.refCleanup,s}function ff(e,n){e.flags&=65011714;var s=e.alternate;return s===null?(e.childLanes=0,e.lanes=n,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=s.childLanes,e.lanes=s.lanes,e.child=s.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=s.memoizedProps,e.memoizedState=s.memoizedState,e.updateQueue=s.updateQueue,e.type=s.type,n=s.dependencies,e.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),e}function _o(e,n,s,h,y,w){var S=0;if(h=e,typeof e=="function")Qu(e)&&(S=1);else if(typeof e=="string")S=j2(e,s,Ae.current)?26:e==="html"||e==="head"||e==="body"?27:5;else e:switch(e){case ce:return e=ui(31,s,n,y),e.elementType=ce,e.lanes=w,e;case K:return Ba(s.children,y,w,n);case oe:S=8,y|=24;break;case ye:return e=ui(12,s,n,y|2),e.elementType=ye,e.lanes=w,e;case Ke:return e=ui(13,s,n,y),e.elementType=Ke,e.lanes=w,e;case be:return e=ui(19,s,n,y),e.elementType=be,e.lanes=w,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case te:S=10;break e;case fe:S=9;break e;case xe:S=11;break e;case $:S=14;break e;case Me:S=16,h=null;break e}S=29,s=Error(d(130,e===null?"null":typeof e,"")),h=null}return n=ui(S,s,n,y),n.elementType=e,n.type=h,n.lanes=w,n}function Ba(e,n,s,h){return e=ui(7,e,h,n),e.lanes=s,e}function Ju(e,n,s){return e=ui(6,e,null,n),e.lanes=s,e}function df(e){var n=ui(18,null,null,0);return n.stateNode=e,n}function $u(e,n,s){return n=ui(4,e.children!==null?e.children:[],e.key,n),n.lanes=s,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}var gf=new WeakMap;function Ci(e,n){if(typeof e=="object"&&e!==null){var s=gf.get(e);return s!==void 0?s:(n={value:e,source:n,stack:vt(n)},gf.set(e,n),n)}return{value:e,source:n,stack:vt(n)}}var ds=[],gs=0,Co=null,hl=0,Ti=[],Oi=0,Zr=null,tr=1,nr="";function mr(e,n){ds[gs++]=hl,ds[gs++]=Co,Co=e,hl=n}function mf(e,n,s){Ti[Oi++]=tr,Ti[Oi++]=nr,Ti[Oi++]=Zr,Zr=e;var h=tr;e=nr;var y=32-Ge(h)-1;h&=~(1<<y),s+=1;var w=32-Ge(n)+y;if(30<w){var S=y-y%5;w=(h&(1<<S)-1).toString(32),h>>=S,y-=S,tr=1<<32-Ge(n)+y|s<<y|h,nr=w+e}else tr=1<<w|s<<y|h,nr=e}function ec(e){e.return!==null&&(mr(e,1),mf(e,1,0))}function tc(e){for(;e===Co;)Co=ds[--gs],ds[gs]=null,hl=ds[--gs],ds[gs]=null;for(;e===Zr;)Zr=Ti[--Oi],Ti[Oi]=null,nr=Ti[--Oi],Ti[Oi]=null,tr=Ti[--Oi],Ti[Oi]=null}function yf(e,n){Ti[Oi++]=tr,Ti[Oi++]=nr,Ti[Oi++]=Zr,tr=n.id,nr=n.overflow,Zr=e}var In=null,Vt=null,ot=!1,Wr=null,Ii=!1,nc=Error(d(519));function Kr(e){var n=Error(d(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fl(Ci(n,e)),nc}function pf(e){var n=e.stateNode,s=e.type,h=e.memoizedProps;switch(n[rn]=e,n[St]=h,s){case"dialog":tt("cancel",n),tt("close",n);break;case"iframe":case"object":case"embed":tt("load",n);break;case"video":case"audio":for(s=0;s<Bl.length;s++)tt(Bl[s],n);break;case"source":tt("error",n);break;case"img":case"image":case"link":tt("error",n),tt("load",n);break;case"details":tt("toggle",n);break;case"input":tt("invalid",n),G(n,h.value,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name,!0);break;case"select":tt("invalid",n);break;case"textarea":tt("invalid",n),zn(n,h.value,h.defaultValue,h.children)}s=h.children,typeof s!="string"&&typeof s!="number"&&typeof s!="bigint"||n.textContent===""+s||h.suppressHydrationWarning===!0||Bd(n.textContent,s)?(h.popover!=null&&(tt("beforetoggle",n),tt("toggle",n)),h.onScroll!=null&&tt("scroll",n),h.onScrollEnd!=null&&tt("scrollend",n),h.onClick!=null&&(n.onclick=Xn),n=!0):n=!1,n||Kr(e,!0)}function xf(e){for(In=e.return;In;)switch(In.tag){case 5:case 31:case 13:Ii=!1;return;case 27:case 3:Ii=!0;return;default:In=In.return}}function ms(e){if(e!==In)return!1;if(!ot)return xf(e),ot=!0,!1;var n=e.tag,s;if((s=n!==3&&n!==27)&&((s=n===5)&&(s=e.type,s=!(s!=="form"&&s!=="button")||Ah(e.type,e.memoizedProps)),s=!s),s&&Vt&&Kr(e),xf(e),n===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));Vt=Vd(e)}else if(n===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(317));Vt=Vd(e)}else n===27?(n=Vt,ca(e.type)?(e=_h,_h=null,Vt=e):Vt=n):Vt=In?Ri(e.stateNode.nextSibling):null;return!0}function La(){Vt=In=null,ot=!1}function ic(){var e=Wr;return e!==null&&($n===null?$n=e:$n.push.apply($n,e),Wr=null),e}function fl(e){Wr===null?Wr=[e]:Wr.push(e)}var rc=z(null),ka=null,yr=null;function Qr(e,n,s){we(rc,n._currentValue),n._currentValue=s}function pr(e){e._currentValue=rc.current,ie(rc)}function ac(e,n,s){for(;e!==null;){var h=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,h!==null&&(h.childLanes|=n)):h!==null&&(h.childLanes&n)!==n&&(h.childLanes|=n),e===s)break;e=e.return}}function sc(e,n,s,h){var y=e.child;for(y!==null&&(y.return=e);y!==null;){var w=y.dependencies;if(w!==null){var S=y.child;w=w.firstContext;e:for(;w!==null;){var R=w;w=y;for(var L=0;L<n.length;L++)if(R.context===n[L]){w.lanes|=s,R=w.alternate,R!==null&&(R.lanes|=s),ac(w.return,s,e),h||(S=null);break e}w=R.next}}else if(y.tag===18){if(S=y.return,S===null)throw Error(d(341));S.lanes|=s,w=S.alternate,w!==null&&(w.lanes|=s),ac(S,s,e),S=null}else S=y.child;if(S!==null)S.return=y;else for(S=y;S!==null;){if(S===e){S=null;break}if(y=S.sibling,y!==null){y.return=S.return,S=y;break}S=S.return}y=S}}function ys(e,n,s,h){e=null;for(var y=n,w=!1;y!==null;){if(!w){if((y.flags&524288)!==0)w=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var S=y.alternate;if(S===null)throw Error(d(387));if(S=S.memoizedProps,S!==null){var R=y.type;f(y.pendingProps.value,S.value)||(e!==null?e.push(R):e=[R])}}else if(y===ut.current){if(S=y.alternate,S===null)throw Error(d(387));S.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(e!==null?e.push(zl):e=[zl])}y=y.return}e!==null&&sc(n,e,s,h),n.flags|=262144}function To(e){for(e=e.firstContext;e!==null;){if(!f(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Ua(e){ka=e,yr=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function Nn(e){return wf(ka,e)}function Oo(e,n){return ka===null&&Ua(e),wf(e,n)}function wf(e,n){var s=n._currentValue;if(n={context:n,memoizedValue:s,next:null},yr===null){if(e===null)throw Error(d(308));yr=n,e.dependencies={lanes:0,firstContext:n},e.flags|=524288}else yr=yr.next=n;return s}var Bg=typeof AbortController<"u"?AbortController:function(){var e=[],n=this.signal={aborted:!1,addEventListener:function(s,h){e.push(h)}};this.abort=function(){n.aborted=!0,e.forEach(function(s){return s()})}},Lg=u.unstable_scheduleCallback,kg=u.unstable_NormalPriority,hn={$$typeof:te,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function lc(){return{controller:new Bg,data:new Map,refCount:0}}function dl(e){e.refCount--,e.refCount===0&&Lg(kg,function(){e.controller.abort()})}var gl=null,oc=0,ps=0,xs=null;function Ug(e,n){if(gl===null){var s=gl=[];oc=0,ps=hh(),xs={status:"pending",value:void 0,then:function(h){s.push(h)}}}return oc++,n.then(Af,Af),n}function Af(){if(--oc===0&&gl!==null){xs!==null&&(xs.status="fulfilled");var e=gl;gl=null,ps=0,xs=null;for(var n=0;n<e.length;n++)(0,e[n])()}}function jg(e,n){var s=[],h={status:"pending",value:null,reason:null,then:function(y){s.push(y)}};return e.then(function(){h.status="fulfilled",h.value=n;for(var y=0;y<s.length;y++)(0,s[y])(n)},function(y){for(h.status="rejected",h.reason=y,y=0;y<s.length;y++)(0,s[y])(void 0)}),h}var bf=Q.S;Q.S=function(e,n){rd=Zt(),typeof n=="object"&&n!==null&&typeof n.then=="function"&&Ug(e,n),bf!==null&&bf(e,n)};var ja=z(null);function uc(){var e=ja.current;return e!==null?e:Ut.pooledCache}function Io(e,n){n===null?we(ja,ja.current):we(ja,n.pool)}function Ef(){var e=uc();return e===null?null:{parent:hn._currentValue,pool:e}}var ws=Error(d(460)),cc=Error(d(474)),No=Error(d(542)),Ro={then:function(){}};function vf(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Sf(e,n,s){switch(s=e[s],s===void 0?e.push(n):s!==n&&(n.then(Xn,Xn),n=s),n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Cf(e),e;default:if(typeof n.status=="string")n.then(Xn,Xn);else{if(e=Ut,e!==null&&100<e.shellSuspendCounter)throw Error(d(482));e=n,e.status="pending",e.then(function(h){if(n.status==="pending"){var y=n;y.status="fulfilled",y.value=h}},function(h){if(n.status==="pending"){var y=n;y.status="rejected",y.reason=h}})}switch(n.status){case"fulfilled":return n.value;case"rejected":throw e=n.reason,Cf(e),e}throw Pa=n,ws}}function za(e){try{var n=e._init;return n(e._payload)}catch(s){throw s!==null&&typeof s=="object"&&typeof s.then=="function"?(Pa=s,ws):s}}var Pa=null;function _f(){if(Pa===null)throw Error(d(459));var e=Pa;return Pa=null,e}function Cf(e){if(e===ws||e===No)throw Error(d(483))}var As=null,ml=0;function Do(e){var n=ml;return ml+=1,As===null&&(As=[]),Sf(As,e,n)}function yl(e,n){n=n.props.ref,e.ref=n!==void 0?n:null}function Mo(e,n){throw n.$$typeof===F?Error(d(525)):(e=Object.prototype.toString.call(n),Error(d(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)))}function Tf(e){function n(H,j){if(e){var Y=H.deletions;Y===null?(H.deletions=[j],H.flags|=16):Y.push(j)}}function s(H,j){if(!e)return null;for(;j!==null;)n(H,j),j=j.sibling;return null}function h(H){for(var j=new Map;H!==null;)H.key!==null?j.set(H.key,H):j.set(H.index,H),H=H.sibling;return j}function y(H,j){return H=gr(H,j),H.index=0,H.sibling=null,H}function w(H,j,Y){return H.index=Y,e?(Y=H.alternate,Y!==null?(Y=Y.index,Y<j?(H.flags|=67108866,j):Y):(H.flags|=67108866,j)):(H.flags|=1048576,j)}function S(H){return e&&H.alternate===null&&(H.flags|=67108866),H}function R(H,j,Y,ae){return j===null||j.tag!==6?(j=Ju(Y,H.mode,ae),j.return=H,j):(j=y(j,Y),j.return=H,j)}function L(H,j,Y,ae){var Re=Y.type;return Re===K?re(H,j,Y.props.children,ae,Y.key):j!==null&&(j.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Me&&za(Re)===j.type)?(j=y(j,Y.props),yl(j,Y),j.return=H,j):(j=_o(Y.type,Y.key,Y.props,null,H.mode,ae),yl(j,Y),j.return=H,j)}function q(H,j,Y,ae){return j===null||j.tag!==4||j.stateNode.containerInfo!==Y.containerInfo||j.stateNode.implementation!==Y.implementation?(j=$u(Y,H.mode,ae),j.return=H,j):(j=y(j,Y.children||[]),j.return=H,j)}function re(H,j,Y,ae,Re){return j===null||j.tag!==7?(j=Ba(Y,H.mode,ae,Re),j.return=H,j):(j=y(j,Y),j.return=H,j)}function le(H,j,Y){if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return j=Ju(""+j,H.mode,Y),j.return=H,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case P:return Y=_o(j.type,j.key,j.props,null,H.mode,Y),yl(Y,j),Y.return=H,Y;case ne:return j=$u(j,H.mode,Y),j.return=H,j;case Me:return j=za(j),le(H,j,Y)}if(ee(j)||Te(j))return j=Ba(j,H.mode,Y,null),j.return=H,j;if(typeof j.then=="function")return le(H,Do(j),Y);if(j.$$typeof===te)return le(H,Oo(H,j),Y);Mo(H,j)}return null}function X(H,j,Y,ae){var Re=j!==null?j.key:null;if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Re!==null?null:R(H,j,""+Y,ae);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case P:return Y.key===Re?L(H,j,Y,ae):null;case ne:return Y.key===Re?q(H,j,Y,ae):null;case Me:return Y=za(Y),X(H,j,Y,ae)}if(ee(Y)||Te(Y))return Re!==null?null:re(H,j,Y,ae,null);if(typeof Y.then=="function")return X(H,j,Do(Y),ae);if(Y.$$typeof===te)return X(H,j,Oo(H,Y),ae);Mo(H,Y)}return null}function J(H,j,Y,ae,Re){if(typeof ae=="string"&&ae!==""||typeof ae=="number"||typeof ae=="bigint")return H=H.get(Y)||null,R(j,H,""+ae,Re);if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case P:return H=H.get(ae.key===null?Y:ae.key)||null,L(j,H,ae,Re);case ne:return H=H.get(ae.key===null?Y:ae.key)||null,q(j,H,ae,Re);case Me:return ae=za(ae),J(H,j,Y,ae,Re)}if(ee(ae)||Te(ae))return H=H.get(Y)||null,re(j,H,ae,Re,null);if(typeof ae.then=="function")return J(H,j,Y,Do(ae),Re);if(ae.$$typeof===te)return J(H,j,Y,Oo(j,ae),Re);Mo(j,ae)}return null}function _e(H,j,Y,ae){for(var Re=null,mt=null,Oe=j,qe=j=0,lt=null;Oe!==null&&qe<Y.length;qe++){Oe.index>qe?(lt=Oe,Oe=null):lt=Oe.sibling;var yt=X(H,Oe,Y[qe],ae);if(yt===null){Oe===null&&(Oe=lt);break}e&&Oe&&yt.alternate===null&&n(H,Oe),j=w(yt,j,qe),mt===null?Re=yt:mt.sibling=yt,mt=yt,Oe=lt}if(qe===Y.length)return s(H,Oe),ot&&mr(H,qe),Re;if(Oe===null){for(;qe<Y.length;qe++)Oe=le(H,Y[qe],ae),Oe!==null&&(j=w(Oe,j,qe),mt===null?Re=Oe:mt.sibling=Oe,mt=Oe);return ot&&mr(H,qe),Re}for(Oe=h(Oe);qe<Y.length;qe++)lt=J(Oe,H,qe,Y[qe],ae),lt!==null&&(e&&lt.alternate!==null&&Oe.delete(lt.key===null?qe:lt.key),j=w(lt,j,qe),mt===null?Re=lt:mt.sibling=lt,mt=lt);return e&&Oe.forEach(function(ma){return n(H,ma)}),ot&&mr(H,qe),Re}function ke(H,j,Y,ae){if(Y==null)throw Error(d(151));for(var Re=null,mt=null,Oe=j,qe=j=0,lt=null,yt=Y.next();Oe!==null&&!yt.done;qe++,yt=Y.next()){Oe.index>qe?(lt=Oe,Oe=null):lt=Oe.sibling;var ma=X(H,Oe,yt.value,ae);if(ma===null){Oe===null&&(Oe=lt);break}e&&Oe&&ma.alternate===null&&n(H,Oe),j=w(ma,j,qe),mt===null?Re=ma:mt.sibling=ma,mt=ma,Oe=lt}if(yt.done)return s(H,Oe),ot&&mr(H,qe),Re;if(Oe===null){for(;!yt.done;qe++,yt=Y.next())yt=le(H,yt.value,ae),yt!==null&&(j=w(yt,j,qe),mt===null?Re=yt:mt.sibling=yt,mt=yt);return ot&&mr(H,qe),Re}for(Oe=h(Oe);!yt.done;qe++,yt=Y.next())yt=J(Oe,H,qe,yt.value,ae),yt!==null&&(e&&yt.alternate!==null&&Oe.delete(yt.key===null?qe:yt.key),j=w(yt,j,qe),mt===null?Re=yt:mt.sibling=yt,mt=yt);return e&&Oe.forEach(function(W2){return n(H,W2)}),ot&&mr(H,qe),Re}function Dt(H,j,Y,ae){if(typeof Y=="object"&&Y!==null&&Y.type===K&&Y.key===null&&(Y=Y.props.children),typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case P:e:{for(var Re=Y.key;j!==null;){if(j.key===Re){if(Re=Y.type,Re===K){if(j.tag===7){s(H,j.sibling),ae=y(j,Y.props.children),ae.return=H,H=ae;break e}}else if(j.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===Me&&za(Re)===j.type){s(H,j.sibling),ae=y(j,Y.props),yl(ae,Y),ae.return=H,H=ae;break e}s(H,j);break}else n(H,j);j=j.sibling}Y.type===K?(ae=Ba(Y.props.children,H.mode,ae,Y.key),ae.return=H,H=ae):(ae=_o(Y.type,Y.key,Y.props,null,H.mode,ae),yl(ae,Y),ae.return=H,H=ae)}return S(H);case ne:e:{for(Re=Y.key;j!==null;){if(j.key===Re)if(j.tag===4&&j.stateNode.containerInfo===Y.containerInfo&&j.stateNode.implementation===Y.implementation){s(H,j.sibling),ae=y(j,Y.children||[]),ae.return=H,H=ae;break e}else{s(H,j);break}else n(H,j);j=j.sibling}ae=$u(Y,H.mode,ae),ae.return=H,H=ae}return S(H);case Me:return Y=za(Y),Dt(H,j,Y,ae)}if(ee(Y))return _e(H,j,Y,ae);if(Te(Y)){if(Re=Te(Y),typeof Re!="function")throw Error(d(150));return Y=Re.call(Y),ke(H,j,Y,ae)}if(typeof Y.then=="function")return Dt(H,j,Do(Y),ae);if(Y.$$typeof===te)return Dt(H,j,Oo(H,Y),ae);Mo(H,Y)}return typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint"?(Y=""+Y,j!==null&&j.tag===6?(s(H,j.sibling),ae=y(j,Y),ae.return=H,H=ae):(s(H,j),ae=Ju(Y,H.mode,ae),ae.return=H,H=ae),S(H)):s(H,j)}return function(H,j,Y,ae){try{ml=0;var Re=Dt(H,j,Y,ae);return As=null,Re}catch(Oe){if(Oe===ws||Oe===No)throw Oe;var mt=ui(29,Oe,null,H.mode);return mt.lanes=ae,mt.return=H,mt}}}var Fa=Tf(!0),Of=Tf(!1),Jr=!1;function hc(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function fc(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function $r(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function ea(e,n,s){var h=e.updateQueue;if(h===null)return null;if(h=h.shared,(wt&2)!==0){var y=h.pending;return y===null?n.next=n:(n.next=y.next,y.next=n),h.pending=n,n=So(e),hf(e,null,s),n}return vo(e,h,n,s),So(e)}function pl(e,n,s){if(n=n.updateQueue,n!==null&&(n=n.shared,(s&4194048)!==0)){var h=n.lanes;h&=e.pendingLanes,s|=h,n.lanes=s,Ki(e,s)}}function dc(e,n){var s=e.updateQueue,h=e.alternate;if(h!==null&&(h=h.updateQueue,s===h)){var y=null,w=null;if(s=s.firstBaseUpdate,s!==null){do{var S={lane:s.lane,tag:s.tag,payload:s.payload,callback:null,next:null};w===null?y=w=S:w=w.next=S,s=s.next}while(s!==null);w===null?y=w=n:w=w.next=n}else y=w=n;s={baseState:h.baseState,firstBaseUpdate:y,lastBaseUpdate:w,shared:h.shared,callbacks:h.callbacks},e.updateQueue=s;return}e=s.lastBaseUpdate,e===null?s.firstBaseUpdate=n:e.next=n,s.lastBaseUpdate=n}var gc=!1;function xl(){if(gc){var e=xs;if(e!==null)throw e}}function wl(e,n,s,h){gc=!1;var y=e.updateQueue;Jr=!1;var w=y.firstBaseUpdate,S=y.lastBaseUpdate,R=y.shared.pending;if(R!==null){y.shared.pending=null;var L=R,q=L.next;L.next=null,S===null?w=q:S.next=q,S=L;var re=e.alternate;re!==null&&(re=re.updateQueue,R=re.lastBaseUpdate,R!==S&&(R===null?re.firstBaseUpdate=q:R.next=q,re.lastBaseUpdate=L))}if(w!==null){var le=y.baseState;S=0,re=q=L=null,R=w;do{var X=R.lane&-536870913,J=X!==R.lane;if(J?(st&X)===X:(h&X)===X){X!==0&&X===ps&&(gc=!0),re!==null&&(re=re.next={lane:0,tag:R.tag,payload:R.payload,callback:null,next:null});e:{var _e=e,ke=R;X=n;var Dt=s;switch(ke.tag){case 1:if(_e=ke.payload,typeof _e=="function"){le=_e.call(Dt,le,X);break e}le=_e;break e;case 3:_e.flags=_e.flags&-65537|128;case 0:if(_e=ke.payload,X=typeof _e=="function"?_e.call(Dt,le,X):_e,X==null)break e;le=D({},le,X);break e;case 2:Jr=!0}}X=R.callback,X!==null&&(e.flags|=64,J&&(e.flags|=8192),J=y.callbacks,J===null?y.callbacks=[X]:J.push(X))}else J={lane:X,tag:R.tag,payload:R.payload,callback:R.callback,next:null},re===null?(q=re=J,L=le):re=re.next=J,S|=X;if(R=R.next,R===null){if(R=y.shared.pending,R===null)break;J=R,R=J.next,J.next=null,y.lastBaseUpdate=J,y.shared.pending=null}}while(!0);re===null&&(L=le),y.baseState=L,y.firstBaseUpdate=q,y.lastBaseUpdate=re,w===null&&(y.shared.lanes=0),aa|=S,e.lanes=S,e.memoizedState=le}}function If(e,n){if(typeof e!="function")throw Error(d(191,e));e.call(n)}function Nf(e,n){var s=e.callbacks;if(s!==null)for(e.callbacks=null,e=0;e<s.length;e++)If(s[e],n)}var bs=z(null),Bo=z(0);function Rf(e,n){e=Cr,we(Bo,e),we(bs,n),Cr=e|n.baseLanes}function mc(){we(Bo,Cr),we(bs,bs.current)}function yc(){Cr=Bo.current,ie(bs),ie(Bo)}var ci=z(null),Ni=null;function ta(e){var n=e.alternate;we(ln,ln.current&1),we(ci,e),Ni===null&&(n===null||bs.current!==null||n.memoizedState!==null)&&(Ni=e)}function pc(e){we(ln,ln.current),we(ci,e),Ni===null&&(Ni=e)}function Df(e){e.tag===22?(we(ln,ln.current),we(ci,e),Ni===null&&(Ni=e)):na()}function na(){we(ln,ln.current),we(ci,ci.current)}function hi(e){ie(ci),Ni===e&&(Ni=null),ie(ln)}var ln=z(0);function Lo(e){for(var n=e;n!==null;){if(n.tag===13){var s=n.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||vh(s)||Sh(s)))return n}else if(n.tag===19&&(n.memoizedProps.revealOrder==="forwards"||n.memoizedProps.revealOrder==="backwards"||n.memoizedProps.revealOrder==="unstable_legacy-backwards"||n.memoizedProps.revealOrder==="together")){if((n.flags&128)!==0)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var xr=0,Ve=null,Nt=null,fn=null,ko=!1,Es=!1,Ha=!1,Uo=0,Al=0,vs=null,zg=0;function $t(){throw Error(d(321))}function xc(e,n){if(n===null)return!1;for(var s=0;s<n.length&&s<e.length;s++)if(!f(e[s],n[s]))return!1;return!0}function wc(e,n,s,h,y,w){return xr=w,Ve=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,Q.H=e===null||e.memoizedState===null?m0:Bc,Ha=!1,w=s(h,y),Ha=!1,Es&&(w=Bf(n,s,h,y)),Mf(e),w}function Mf(e){Q.H=vl;var n=Nt!==null&&Nt.next!==null;if(xr=0,fn=Nt=Ve=null,ko=!1,Al=0,vs=null,n)throw Error(d(300));e===null||dn||(e=e.dependencies,e!==null&&To(e)&&(dn=!0))}function Bf(e,n,s,h){Ve=e;var y=0;do{if(Es&&(vs=null),Al=0,Es=!1,25<=y)throw Error(d(301));if(y+=1,fn=Nt=null,e.updateQueue!=null){var w=e.updateQueue;w.lastEffect=null,w.events=null,w.stores=null,w.memoCache!=null&&(w.memoCache.index=0)}Q.H=y0,w=n(s,h)}while(Es);return w}function Pg(){var e=Q.H,n=e.useState()[0];return n=typeof n.then=="function"?bl(n):n,e=e.useState()[0],(Nt!==null?Nt.memoizedState:null)!==e&&(Ve.flags|=1024),n}function Ac(){var e=Uo!==0;return Uo=0,e}function bc(e,n,s){n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~s}function Ec(e){if(ko){for(e=e.memoizedState;e!==null;){var n=e.queue;n!==null&&(n.pending=null),e=e.next}ko=!1}xr=0,fn=Nt=Ve=null,Es=!1,Al=Uo=0,vs=null}function Hn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return fn===null?Ve.memoizedState=fn=e:fn=fn.next=e,fn}function on(){if(Nt===null){var e=Ve.alternate;e=e!==null?e.memoizedState:null}else e=Nt.next;var n=fn===null?Ve.memoizedState:fn.next;if(n!==null)fn=n,Nt=e;else{if(e===null)throw Ve.alternate===null?Error(d(467)):Error(d(310));Nt=e,e={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},fn===null?Ve.memoizedState=fn=e:fn=fn.next=e}return fn}function jo(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function bl(e){var n=Al;return Al+=1,vs===null&&(vs=[]),e=Sf(vs,e,n),n=Ve,(fn===null?n.memoizedState:fn.next)===null&&(n=n.alternate,Q.H=n===null||n.memoizedState===null?m0:Bc),e}function zo(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return bl(e);if(e.$$typeof===te)return Nn(e)}throw Error(d(438,String(e)))}function vc(e){var n=null,s=Ve.updateQueue;if(s!==null&&(n=s.memoCache),n==null){var h=Ve.alternate;h!==null&&(h=h.updateQueue,h!==null&&(h=h.memoCache,h!=null&&(n={data:h.data.map(function(y){return y.slice()}),index:0})))}if(n==null&&(n={data:[],index:0}),s===null&&(s=jo(),Ve.updateQueue=s),s.memoCache=n,s=n.data[n.index],s===void 0)for(s=n.data[n.index]=Array(e),h=0;h<e;h++)s[h]=ti;return n.index++,s}function wr(e,n){return typeof n=="function"?n(e):n}function Po(e){var n=on();return Sc(n,Nt,e)}function Sc(e,n,s){var h=e.queue;if(h===null)throw Error(d(311));h.lastRenderedReducer=s;var y=e.baseQueue,w=h.pending;if(w!==null){if(y!==null){var S=y.next;y.next=w.next,w.next=S}n.baseQueue=y=w,h.pending=null}if(w=e.baseState,y===null)e.memoizedState=w;else{n=y.next;var R=S=null,L=null,q=n,re=!1;do{var le=q.lane&-536870913;if(le!==q.lane?(st&le)===le:(xr&le)===le){var X=q.revertLane;if(X===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),le===ps&&(re=!0);else if((xr&X)===X){q=q.next,X===ps&&(re=!0);continue}else le={lane:0,revertLane:q.revertLane,gesture:null,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},L===null?(R=L=le,S=w):L=L.next=le,Ve.lanes|=X,aa|=X;le=q.action,Ha&&s(w,le),w=q.hasEagerState?q.eagerState:s(w,le)}else X={lane:le,revertLane:q.revertLane,gesture:q.gesture,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null},L===null?(R=L=X,S=w):L=L.next=X,Ve.lanes|=le,aa|=le;q=q.next}while(q!==null&&q!==n);if(L===null?S=w:L.next=R,!f(w,e.memoizedState)&&(dn=!0,re&&(s=xs,s!==null)))throw s;e.memoizedState=w,e.baseState=S,e.baseQueue=L,h.lastRenderedState=w}return y===null&&(h.lanes=0),[e.memoizedState,h.dispatch]}function _c(e){var n=on(),s=n.queue;if(s===null)throw Error(d(311));s.lastRenderedReducer=e;var h=s.dispatch,y=s.pending,w=n.memoizedState;if(y!==null){s.pending=null;var S=y=y.next;do w=e(w,S.action),S=S.next;while(S!==y);f(w,n.memoizedState)||(dn=!0),n.memoizedState=w,n.baseQueue===null&&(n.baseState=w),s.lastRenderedState=w}return[w,h]}function Lf(e,n,s){var h=Ve,y=on(),w=ot;if(w){if(s===void 0)throw Error(d(407));s=s()}else s=n();var S=!f((Nt||y).memoizedState,s);if(S&&(y.memoizedState=s,dn=!0),y=y.queue,Oc(jf.bind(null,h,y,e),[e]),y.getSnapshot!==n||S||fn!==null&&fn.memoizedState.tag&1){if(h.flags|=2048,Ss(9,{destroy:void 0},Uf.bind(null,h,y,s,n),null),Ut===null)throw Error(d(349));w||(xr&127)!==0||kf(h,n,s)}return s}function kf(e,n,s){e.flags|=16384,e={getSnapshot:n,value:s},n=Ve.updateQueue,n===null?(n=jo(),Ve.updateQueue=n,n.stores=[e]):(s=n.stores,s===null?n.stores=[e]:s.push(e))}function Uf(e,n,s,h){n.value=s,n.getSnapshot=h,zf(n)&&Pf(e)}function jf(e,n,s){return s(function(){zf(n)&&Pf(e)})}function zf(e){var n=e.getSnapshot;e=e.value;try{var s=n();return!f(e,s)}catch{return!0}}function Pf(e){var n=Ma(e,2);n!==null&&ei(n,e,2)}function Cc(e){var n=Hn();if(typeof e=="function"){var s=e;if(e=s(),Ha){It(!0);try{s()}finally{It(!1)}}}return n.memoizedState=n.baseState=e,n.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:e},n}function Ff(e,n,s,h){return e.baseState=s,Sc(e,Nt,typeof h=="function"?h:wr)}function Fg(e,n,s,h,y){if(Vo(e))throw Error(d(485));if(e=n.action,e!==null){var w={payload:y,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){w.listeners.push(S)}};Q.T!==null?s(!0):w.isTransition=!1,h(w),s=n.pending,s===null?(w.next=n.pending=w,Hf(n,w)):(w.next=s.next,n.pending=s.next=w)}}function Hf(e,n){var s=n.action,h=n.payload,y=e.state;if(n.isTransition){var w=Q.T,S={};Q.T=S;try{var R=s(y,h),L=Q.S;L!==null&&L(S,R),Vf(e,n,R)}catch(q){Tc(e,n,q)}finally{w!==null&&S.types!==null&&(w.types=S.types),Q.T=w}}else try{w=s(y,h),Vf(e,n,w)}catch(q){Tc(e,n,q)}}function Vf(e,n,s){s!==null&&typeof s=="object"&&typeof s.then=="function"?s.then(function(h){Gf(e,n,h)},function(h){return Tc(e,n,h)}):Gf(e,n,s)}function Gf(e,n,s){n.status="fulfilled",n.value=s,Yf(n),e.state=s,n=e.pending,n!==null&&(s=n.next,s===n?e.pending=null:(s=s.next,n.next=s,Hf(e,s)))}function Tc(e,n,s){var h=e.pending;if(e.pending=null,h!==null){h=h.next;do n.status="rejected",n.reason=s,Yf(n),n=n.next;while(n!==h)}e.action=null}function Yf(e){e=e.listeners;for(var n=0;n<e.length;n++)(0,e[n])()}function qf(e,n){return n}function Xf(e,n){if(ot){var s=Ut.formState;if(s!==null){e:{var h=Ve;if(ot){if(Vt){t:{for(var y=Vt,w=Ii;y.nodeType!==8;){if(!w){y=null;break t}if(y=Ri(y.nextSibling),y===null){y=null;break t}}w=y.data,y=w==="F!"||w==="F"?y:null}if(y){Vt=Ri(y.nextSibling),h=y.data==="F!";break e}}Kr(h)}h=!1}h&&(n=s[0])}}return s=Hn(),s.memoizedState=s.baseState=n,h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:qf,lastRenderedState:n},s.queue=h,s=f0.bind(null,Ve,h),h.dispatch=s,h=Cc(!1),w=Mc.bind(null,Ve,!1,h.queue),h=Hn(),y={state:n,dispatch:null,action:e,pending:null},h.queue=y,s=Fg.bind(null,Ve,y,w,s),y.dispatch=s,h.memoizedState=e,[n,s,!1]}function Zf(e){var n=on();return Wf(n,Nt,e)}function Wf(e,n,s){if(n=Sc(e,n,qf)[0],e=Po(wr)[0],typeof n=="object"&&n!==null&&typeof n.then=="function")try{var h=bl(n)}catch(S){throw S===ws?No:S}else h=n;n=on();var y=n.queue,w=y.dispatch;return s!==n.memoizedState&&(Ve.flags|=2048,Ss(9,{destroy:void 0},Hg.bind(null,y,s),null)),[h,w,e]}function Hg(e,n){e.action=n}function Kf(e){var n=on(),s=Nt;if(s!==null)return Wf(n,s,e);on(),n=n.memoizedState,s=on();var h=s.queue.dispatch;return s.memoizedState=e,[n,h,!1]}function Ss(e,n,s,h){return e={tag:e,create:s,deps:h,inst:n,next:null},n=Ve.updateQueue,n===null&&(n=jo(),Ve.updateQueue=n),s=n.lastEffect,s===null?n.lastEffect=e.next=e:(h=s.next,s.next=e,e.next=h,n.lastEffect=e),e}function Qf(){return on().memoizedState}function Fo(e,n,s,h){var y=Hn();Ve.flags|=e,y.memoizedState=Ss(1|n,{destroy:void 0},s,h===void 0?null:h)}function Ho(e,n,s,h){var y=on();h=h===void 0?null:h;var w=y.memoizedState.inst;Nt!==null&&h!==null&&xc(h,Nt.memoizedState.deps)?y.memoizedState=Ss(n,w,s,h):(Ve.flags|=e,y.memoizedState=Ss(1|n,w,s,h))}function Jf(e,n){Fo(8390656,8,e,n)}function Oc(e,n){Ho(2048,8,e,n)}function Vg(e){Ve.flags|=4;var n=Ve.updateQueue;if(n===null)n=jo(),Ve.updateQueue=n,n.events=[e];else{var s=n.events;s===null?n.events=[e]:s.push(e)}}function $f(e){var n=on().memoizedState;return Vg({ref:n,nextImpl:e}),function(){if((wt&2)!==0)throw Error(d(440));return n.impl.apply(void 0,arguments)}}function e0(e,n){return Ho(4,2,e,n)}function t0(e,n){return Ho(4,4,e,n)}function n0(e,n){if(typeof n=="function"){e=e();var s=n(e);return function(){typeof s=="function"?s():n(null)}}if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function i0(e,n,s){s=s!=null?s.concat([e]):null,Ho(4,4,n0.bind(null,n,e),s)}function Ic(){}function r0(e,n){var s=on();n=n===void 0?null:n;var h=s.memoizedState;return n!==null&&xc(n,h[1])?h[0]:(s.memoizedState=[e,n],e)}function a0(e,n){var s=on();n=n===void 0?null:n;var h=s.memoizedState;if(n!==null&&xc(n,h[1]))return h[0];if(h=e(),Ha){It(!0);try{e()}finally{It(!1)}}return s.memoizedState=[h,n],h}function Nc(e,n,s){return s===void 0||(xr&1073741824)!==0&&(st&261930)===0?e.memoizedState=n:(e.memoizedState=s,e=sd(),Ve.lanes|=e,aa|=e,s)}function s0(e,n,s,h){return f(s,n)?s:bs.current!==null?(e=Nc(e,s,h),f(e,n)||(dn=!0),e):(xr&42)===0||(xr&1073741824)!==0&&(st&261930)===0?(dn=!0,e.memoizedState=s):(e=sd(),Ve.lanes|=e,aa|=e,n)}function l0(e,n,s,h,y){var w=se.p;se.p=w!==0&&8>w?w:8;var S=Q.T,R={};Q.T=R,Mc(e,!1,n,s);try{var L=y(),q=Q.S;if(q!==null&&q(R,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var re=jg(L,h);El(e,n,re,gi(e))}else El(e,n,h,gi(e))}catch(le){El(e,n,{then:function(){},status:"rejected",reason:le},gi())}finally{se.p=w,S!==null&&R.types!==null&&(S.types=R.types),Q.T=S}}function Gg(){}function Rc(e,n,s,h){if(e.tag!==5)throw Error(d(476));var y=o0(e).queue;l0(e,y,n,De,s===null?Gg:function(){return u0(e),s(h)})}function o0(e){var n=e.memoizedState;if(n!==null)return n;n={memoizedState:De,baseState:De,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:De},next:null};var s={};return n.next={memoizedState:s,baseState:s,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:wr,lastRenderedState:s},next:null},e.memoizedState=n,e=e.alternate,e!==null&&(e.memoizedState=n),n}function u0(e){var n=o0(e);n.next===null&&(n=e.alternate.memoizedState),El(e,n.next.queue,{},gi())}function Dc(){return Nn(zl)}function c0(){return on().memoizedState}function h0(){return on().memoizedState}function Yg(e){for(var n=e.return;n!==null;){switch(n.tag){case 24:case 3:var s=gi();e=$r(s);var h=ea(n,e,s);h!==null&&(ei(h,n,s),pl(h,n,s)),n={cache:lc()},e.payload=n;return}n=n.return}}function qg(e,n,s){var h=gi();s={lane:h,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},Vo(e)?d0(n,s):(s=Ku(e,n,s,h),s!==null&&(ei(s,e,h),g0(s,n,h)))}function f0(e,n,s){var h=gi();El(e,n,s,h)}function El(e,n,s,h){var y={lane:h,revertLane:0,gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null};if(Vo(e))d0(n,y);else{var w=e.alternate;if(e.lanes===0&&(w===null||w.lanes===0)&&(w=n.lastRenderedReducer,w!==null))try{var S=n.lastRenderedState,R=w(S,s);if(y.hasEagerState=!0,y.eagerState=R,f(R,S))return vo(e,n,y,0),Ut===null&&Eo(),!1}catch{}if(s=Ku(e,n,y,h),s!==null)return ei(s,e,h),g0(s,n,h),!0}return!1}function Mc(e,n,s,h){if(h={lane:2,revertLane:hh(),gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},Vo(e)){if(n)throw Error(d(479))}else n=Ku(e,s,h,2),n!==null&&ei(n,e,2)}function Vo(e){var n=e.alternate;return e===Ve||n!==null&&n===Ve}function d0(e,n){Es=ko=!0;var s=e.pending;s===null?n.next=n:(n.next=s.next,s.next=n),e.pending=n}function g0(e,n,s){if((s&4194048)!==0){var h=n.lanes;h&=e.pendingLanes,s|=h,n.lanes=s,Ki(e,s)}}var vl={readContext:Nn,use:zo,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useLayoutEffect:$t,useInsertionEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useSyncExternalStore:$t,useId:$t,useHostTransitionStatus:$t,useFormState:$t,useActionState:$t,useOptimistic:$t,useMemoCache:$t,useCacheRefresh:$t};vl.useEffectEvent=$t;var m0={readContext:Nn,use:zo,useCallback:function(e,n){return Hn().memoizedState=[e,n===void 0?null:n],e},useContext:Nn,useEffect:Jf,useImperativeHandle:function(e,n,s){s=s!=null?s.concat([e]):null,Fo(4194308,4,n0.bind(null,n,e),s)},useLayoutEffect:function(e,n){return Fo(4194308,4,e,n)},useInsertionEffect:function(e,n){Fo(4,2,e,n)},useMemo:function(e,n){var s=Hn();n=n===void 0?null:n;var h=e();if(Ha){It(!0);try{e()}finally{It(!1)}}return s.memoizedState=[h,n],h},useReducer:function(e,n,s){var h=Hn();if(s!==void 0){var y=s(n);if(Ha){It(!0);try{s(n)}finally{It(!1)}}}else y=n;return h.memoizedState=h.baseState=y,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:y},h.queue=e,e=e.dispatch=qg.bind(null,Ve,e),[h.memoizedState,e]},useRef:function(e){var n=Hn();return e={current:e},n.memoizedState=e},useState:function(e){e=Cc(e);var n=e.queue,s=f0.bind(null,Ve,n);return n.dispatch=s,[e.memoizedState,s]},useDebugValue:Ic,useDeferredValue:function(e,n){var s=Hn();return Nc(s,e,n)},useTransition:function(){var e=Cc(!1);return e=l0.bind(null,Ve,e.queue,!0,!1),Hn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,n,s){var h=Ve,y=Hn();if(ot){if(s===void 0)throw Error(d(407));s=s()}else{if(s=n(),Ut===null)throw Error(d(349));(st&127)!==0||kf(h,n,s)}y.memoizedState=s;var w={value:s,getSnapshot:n};return y.queue=w,Jf(jf.bind(null,h,w,e),[e]),h.flags|=2048,Ss(9,{destroy:void 0},Uf.bind(null,h,w,s,n),null),s},useId:function(){var e=Hn(),n=Ut.identifierPrefix;if(ot){var s=nr,h=tr;s=(h&~(1<<32-Ge(h)-1)).toString(32)+s,n="_"+n+"R_"+s,s=Uo++,0<s&&(n+="H"+s.toString(32)),n+="_"}else s=zg++,n="_"+n+"r_"+s.toString(32)+"_";return e.memoizedState=n},useHostTransitionStatus:Dc,useFormState:Xf,useActionState:Xf,useOptimistic:function(e){var n=Hn();n.memoizedState=n.baseState=e;var s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return n.queue=s,n=Mc.bind(null,Ve,!0,s),s.dispatch=n,[e,n]},useMemoCache:vc,useCacheRefresh:function(){return Hn().memoizedState=Yg.bind(null,Ve)},useEffectEvent:function(e){var n=Hn(),s={impl:e};return n.memoizedState=s,function(){if((wt&2)!==0)throw Error(d(440));return s.impl.apply(void 0,arguments)}}},Bc={readContext:Nn,use:zo,useCallback:r0,useContext:Nn,useEffect:Oc,useImperativeHandle:i0,useInsertionEffect:e0,useLayoutEffect:t0,useMemo:a0,useReducer:Po,useRef:Qf,useState:function(){return Po(wr)},useDebugValue:Ic,useDeferredValue:function(e,n){var s=on();return s0(s,Nt.memoizedState,e,n)},useTransition:function(){var e=Po(wr)[0],n=on().memoizedState;return[typeof e=="boolean"?e:bl(e),n]},useSyncExternalStore:Lf,useId:c0,useHostTransitionStatus:Dc,useFormState:Zf,useActionState:Zf,useOptimistic:function(e,n){var s=on();return Ff(s,Nt,e,n)},useMemoCache:vc,useCacheRefresh:h0};Bc.useEffectEvent=$f;var y0={readContext:Nn,use:zo,useCallback:r0,useContext:Nn,useEffect:Oc,useImperativeHandle:i0,useInsertionEffect:e0,useLayoutEffect:t0,useMemo:a0,useReducer:_c,useRef:Qf,useState:function(){return _c(wr)},useDebugValue:Ic,useDeferredValue:function(e,n){var s=on();return Nt===null?Nc(s,e,n):s0(s,Nt.memoizedState,e,n)},useTransition:function(){var e=_c(wr)[0],n=on().memoizedState;return[typeof e=="boolean"?e:bl(e),n]},useSyncExternalStore:Lf,useId:c0,useHostTransitionStatus:Dc,useFormState:Kf,useActionState:Kf,useOptimistic:function(e,n){var s=on();return Nt!==null?Ff(s,Nt,e,n):(s.baseState=e,[e,s.queue.dispatch])},useMemoCache:vc,useCacheRefresh:h0};y0.useEffectEvent=$f;function Lc(e,n,s,h){n=e.memoizedState,s=s(h,n),s=s==null?n:D({},n,s),e.memoizedState=s,e.lanes===0&&(e.updateQueue.baseState=s)}var kc={enqueueSetState:function(e,n,s){e=e._reactInternals;var h=gi(),y=$r(h);y.payload=n,s!=null&&(y.callback=s),n=ea(e,y,h),n!==null&&(ei(n,e,h),pl(n,e,h))},enqueueReplaceState:function(e,n,s){e=e._reactInternals;var h=gi(),y=$r(h);y.tag=1,y.payload=n,s!=null&&(y.callback=s),n=ea(e,y,h),n!==null&&(ei(n,e,h),pl(n,e,h))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var s=gi(),h=$r(s);h.tag=2,n!=null&&(h.callback=n),n=ea(e,h,s),n!==null&&(ei(n,e,s),pl(n,e,s))}};function p0(e,n,s,h,y,w,S){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(h,w,S):n.prototype&&n.prototype.isPureReactComponent?!g(s,h)||!g(y,w):!0}function x0(e,n,s,h){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(s,h),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(s,h),n.state!==e&&kc.enqueueReplaceState(n,n.state,null)}function Va(e,n){var s=n;if("ref"in n){s={};for(var h in n)h!=="ref"&&(s[h]=n[h])}if(e=e.defaultProps){s===n&&(s=D({},s));for(var y in e)s[y]===void 0&&(s[y]=e[y])}return s}function w0(e){bo(e)}function A0(e){console.error(e)}function b0(e){bo(e)}function Go(e,n){try{var s=e.onUncaughtError;s(n.value,{componentStack:n.stack})}catch(h){setTimeout(function(){throw h})}}function E0(e,n,s){try{var h=e.onCaughtError;h(s.value,{componentStack:s.stack,errorBoundary:n.tag===1?n.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Uc(e,n,s){return s=$r(s),s.tag=3,s.payload={element:null},s.callback=function(){Go(e,n)},s}function v0(e){return e=$r(e),e.tag=3,e}function S0(e,n,s,h){var y=s.type.getDerivedStateFromError;if(typeof y=="function"){var w=h.value;e.payload=function(){return y(w)},e.callback=function(){E0(n,s,h)}}var S=s.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(e.callback=function(){E0(n,s,h),typeof y!="function"&&(sa===null?sa=new Set([this]):sa.add(this));var R=h.stack;this.componentDidCatch(h.value,{componentStack:R!==null?R:""})})}function Xg(e,n,s,h,y){if(s.flags|=32768,h!==null&&typeof h=="object"&&typeof h.then=="function"){if(n=s.alternate,n!==null&&ys(n,s,y,!0),s=ci.current,s!==null){switch(s.tag){case 31:case 13:return Ni===null?nu():s.alternate===null&&en===0&&(en=3),s.flags&=-257,s.flags|=65536,s.lanes=y,h===Ro?s.flags|=16384:(n=s.updateQueue,n===null?s.updateQueue=new Set([h]):n.add(h),oh(e,h,y)),!1;case 22:return s.flags|=65536,h===Ro?s.flags|=16384:(n=s.updateQueue,n===null?(n={transitions:null,markerInstances:null,retryQueue:new Set([h])},s.updateQueue=n):(s=n.retryQueue,s===null?n.retryQueue=new Set([h]):s.add(h)),oh(e,h,y)),!1}throw Error(d(435,s.tag))}return oh(e,h,y),nu(),!1}if(ot)return n=ci.current,n!==null?((n.flags&65536)===0&&(n.flags|=256),n.flags|=65536,n.lanes=y,h!==nc&&(e=Error(d(422),{cause:h}),fl(Ci(e,s)))):(h!==nc&&(n=Error(d(423),{cause:h}),fl(Ci(n,s))),e=e.current.alternate,e.flags|=65536,y&=-y,e.lanes|=y,h=Ci(h,s),y=Uc(e.stateNode,h,y),dc(e,y),en!==4&&(en=2)),!1;var w=Error(d(520),{cause:h});if(w=Ci(w,s),Rl===null?Rl=[w]:Rl.push(w),en!==4&&(en=2),n===null)return!0;h=Ci(h,s),s=n;do{switch(s.tag){case 3:return s.flags|=65536,e=y&-y,s.lanes|=e,e=Uc(s.stateNode,h,e),dc(s,e),!1;case 1:if(n=s.type,w=s.stateNode,(s.flags&128)===0&&(typeof n.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(sa===null||!sa.has(w))))return s.flags|=65536,y&=-y,s.lanes|=y,y=v0(y),S0(y,e,s,h),dc(s,y),!1}s=s.return}while(s!==null);return!1}var jc=Error(d(461)),dn=!1;function Rn(e,n,s,h){n.child=e===null?Of(n,null,s,h):Fa(n,e.child,s,h)}function _0(e,n,s,h,y){s=s.render;var w=n.ref;if("ref"in h){var S={};for(var R in h)R!=="ref"&&(S[R]=h[R])}else S=h;return Ua(n),h=wc(e,n,s,S,w,y),R=Ac(),e!==null&&!dn?(bc(e,n,y),Ar(e,n,y)):(ot&&R&&ec(n),n.flags|=1,Rn(e,n,h,y),n.child)}function C0(e,n,s,h,y){if(e===null){var w=s.type;return typeof w=="function"&&!Qu(w)&&w.defaultProps===void 0&&s.compare===null?(n.tag=15,n.type=w,T0(e,n,w,h,y)):(e=_o(s.type,null,h,n,n.mode,y),e.ref=n.ref,e.return=n,n.child=e)}if(w=e.child,!qc(e,y)){var S=w.memoizedProps;if(s=s.compare,s=s!==null?s:g,s(S,h)&&e.ref===n.ref)return Ar(e,n,y)}return n.flags|=1,e=gr(w,h),e.ref=n.ref,e.return=n,n.child=e}function T0(e,n,s,h,y){if(e!==null){var w=e.memoizedProps;if(g(w,h)&&e.ref===n.ref)if(dn=!1,n.pendingProps=h=w,qc(e,y))(e.flags&131072)!==0&&(dn=!0);else return n.lanes=e.lanes,Ar(e,n,y)}return zc(e,n,s,h,y)}function O0(e,n,s,h){var y=h.children,w=e!==null?e.memoizedState:null;if(e===null&&n.stateNode===null&&(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.mode==="hidden"){if((n.flags&128)!==0){if(w=w!==null?w.baseLanes|s:s,e!==null){for(h=n.child=e.child,y=0;h!==null;)y=y|h.lanes|h.childLanes,h=h.sibling;h=y&~w}else h=0,n.child=null;return I0(e,n,w,s,h)}if((s&536870912)!==0)n.memoizedState={baseLanes:0,cachePool:null},e!==null&&Io(n,w!==null?w.cachePool:null),w!==null?Rf(n,w):mc(),Df(n);else return h=n.lanes=536870912,I0(e,n,w!==null?w.baseLanes|s:s,s,h)}else w!==null?(Io(n,w.cachePool),Rf(n,w),na(),n.memoizedState=null):(e!==null&&Io(n,null),mc(),na());return Rn(e,n,y,s),n.child}function Sl(e,n){return e!==null&&e.tag===22||n.stateNode!==null||(n.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),n.sibling}function I0(e,n,s,h,y){var w=uc();return w=w===null?null:{parent:hn._currentValue,pool:w},n.memoizedState={baseLanes:s,cachePool:w},e!==null&&Io(n,null),mc(),Df(n),e!==null&&ys(e,n,h,!0),n.childLanes=y,null}function Yo(e,n){return n=Xo({mode:n.mode,children:n.children},e.mode),n.ref=e.ref,e.child=n,n.return=e,n}function N0(e,n,s){return Fa(n,e.child,null,s),e=Yo(n,n.pendingProps),e.flags|=2,hi(n),n.memoizedState=null,e}function Zg(e,n,s){var h=n.pendingProps,y=(n.flags&128)!==0;if(n.flags&=-129,e===null){if(ot){if(h.mode==="hidden")return e=Yo(n,h),n.lanes=536870912,Sl(null,e);if(pc(n),(e=Vt)?(e=Hd(e,Ii),e=e!==null&&e.data==="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Zr!==null?{id:tr,overflow:nr}:null,retryLane:536870912,hydrationErrors:null},s=df(e),s.return=n,n.child=s,In=n,Vt=null)):e=null,e===null)throw Kr(n);return n.lanes=536870912,null}return Yo(n,h)}var w=e.memoizedState;if(w!==null){var S=w.dehydrated;if(pc(n),y)if(n.flags&256)n.flags&=-257,n=N0(e,n,s);else if(n.memoizedState!==null)n.child=e.child,n.flags|=128,n=null;else throw Error(d(558));else if(dn||ys(e,n,s,!1),y=(s&e.childLanes)!==0,dn||y){if(h=Ut,h!==null&&(S=es(h,s),S!==0&&S!==w.retryLane))throw w.retryLane=S,Ma(e,S),ei(h,e,S),jc;nu(),n=N0(e,n,s)}else e=w.treeContext,Vt=Ri(S.nextSibling),In=n,ot=!0,Wr=null,Ii=!1,e!==null&&yf(n,e),n=Yo(n,h),n.flags|=4096;return n}return e=gr(e.child,{mode:h.mode,children:h.children}),e.ref=n.ref,n.child=e,e.return=n,e}function qo(e,n){var s=n.ref;if(s===null)e!==null&&e.ref!==null&&(n.flags|=4194816);else{if(typeof s!="function"&&typeof s!="object")throw Error(d(284));(e===null||e.ref!==s)&&(n.flags|=4194816)}}function zc(e,n,s,h,y){return Ua(n),s=wc(e,n,s,h,void 0,y),h=Ac(),e!==null&&!dn?(bc(e,n,y),Ar(e,n,y)):(ot&&h&&ec(n),n.flags|=1,Rn(e,n,s,y),n.child)}function R0(e,n,s,h,y,w){return Ua(n),n.updateQueue=null,s=Bf(n,h,s,y),Mf(e),h=Ac(),e!==null&&!dn?(bc(e,n,w),Ar(e,n,w)):(ot&&h&&ec(n),n.flags|=1,Rn(e,n,s,w),n.child)}function D0(e,n,s,h,y){if(Ua(n),n.stateNode===null){var w=fs,S=s.contextType;typeof S=="object"&&S!==null&&(w=Nn(S)),w=new s(h,w),n.memoizedState=w.state!==null&&w.state!==void 0?w.state:null,w.updater=kc,n.stateNode=w,w._reactInternals=n,w=n.stateNode,w.props=h,w.state=n.memoizedState,w.refs={},hc(n),S=s.contextType,w.context=typeof S=="object"&&S!==null?Nn(S):fs,w.state=n.memoizedState,S=s.getDerivedStateFromProps,typeof S=="function"&&(Lc(n,s,S,h),w.state=n.memoizedState),typeof s.getDerivedStateFromProps=="function"||typeof w.getSnapshotBeforeUpdate=="function"||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(S=w.state,typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount(),S!==w.state&&kc.enqueueReplaceState(w,w.state,null),wl(n,h,w,y),xl(),w.state=n.memoizedState),typeof w.componentDidMount=="function"&&(n.flags|=4194308),h=!0}else if(e===null){w=n.stateNode;var R=n.memoizedProps,L=Va(s,R);w.props=L;var q=w.context,re=s.contextType;S=fs,typeof re=="object"&&re!==null&&(S=Nn(re));var le=s.getDerivedStateFromProps;re=typeof le=="function"||typeof w.getSnapshotBeforeUpdate=="function",R=n.pendingProps!==R,re||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(R||q!==S)&&x0(n,w,h,S),Jr=!1;var X=n.memoizedState;w.state=X,wl(n,h,w,y),xl(),q=n.memoizedState,R||X!==q||Jr?(typeof le=="function"&&(Lc(n,s,le,h),q=n.memoizedState),(L=Jr||p0(n,s,L,h,X,q,S))?(re||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(n.flags|=4194308)):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=h,n.memoizedState=q),w.props=h,w.state=q,w.context=S,h=L):(typeof w.componentDidMount=="function"&&(n.flags|=4194308),h=!1)}else{w=n.stateNode,fc(e,n),S=n.memoizedProps,re=Va(s,S),w.props=re,le=n.pendingProps,X=w.context,q=s.contextType,L=fs,typeof q=="object"&&q!==null&&(L=Nn(q)),R=s.getDerivedStateFromProps,(q=typeof R=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(S!==le||X!==L)&&x0(n,w,h,L),Jr=!1,X=n.memoizedState,w.state=X,wl(n,h,w,y),xl();var J=n.memoizedState;S!==le||X!==J||Jr||e!==null&&e.dependencies!==null&&To(e.dependencies)?(typeof R=="function"&&(Lc(n,s,R,h),J=n.memoizedState),(re=Jr||p0(n,s,re,h,X,J,L)||e!==null&&e.dependencies!==null&&To(e.dependencies))?(q||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(h,J,L),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(h,J,L)),typeof w.componentDidUpdate=="function"&&(n.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof w.componentDidUpdate!="function"||S===e.memoizedProps&&X===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&X===e.memoizedState||(n.flags|=1024),n.memoizedProps=h,n.memoizedState=J),w.props=h,w.state=J,w.context=L,h=re):(typeof w.componentDidUpdate!="function"||S===e.memoizedProps&&X===e.memoizedState||(n.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||S===e.memoizedProps&&X===e.memoizedState||(n.flags|=1024),h=!1)}return w=h,qo(e,n),h=(n.flags&128)!==0,w||h?(w=n.stateNode,s=h&&typeof s.getDerivedStateFromError!="function"?null:w.render(),n.flags|=1,e!==null&&h?(n.child=Fa(n,e.child,null,y),n.child=Fa(n,null,s,y)):Rn(e,n,s,y),n.memoizedState=w.state,e=n.child):e=Ar(e,n,y),e}function M0(e,n,s,h){return La(),n.flags|=256,Rn(e,n,s,h),n.child}var Pc={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Fc(e){return{baseLanes:e,cachePool:Ef()}}function Hc(e,n,s){return e=e!==null?e.childLanes&~s:0,n&&(e|=di),e}function B0(e,n,s){var h=n.pendingProps,y=!1,w=(n.flags&128)!==0,S;if((S=w)||(S=e!==null&&e.memoizedState===null?!1:(ln.current&2)!==0),S&&(y=!0,n.flags&=-129),S=(n.flags&32)!==0,n.flags&=-33,e===null){if(ot){if(y?ta(n):na(),(e=Vt)?(e=Hd(e,Ii),e=e!==null&&e.data!=="&"?e:null,e!==null&&(n.memoizedState={dehydrated:e,treeContext:Zr!==null?{id:tr,overflow:nr}:null,retryLane:536870912,hydrationErrors:null},s=df(e),s.return=n,n.child=s,In=n,Vt=null)):e=null,e===null)throw Kr(n);return Sh(e)?n.lanes=32:n.lanes=536870912,null}var R=h.children;return h=h.fallback,y?(na(),y=n.mode,R=Xo({mode:"hidden",children:R},y),h=Ba(h,y,s,null),R.return=n,h.return=n,R.sibling=h,n.child=R,h=n.child,h.memoizedState=Fc(s),h.childLanes=Hc(e,S,s),n.memoizedState=Pc,Sl(null,h)):(ta(n),Vc(n,R))}var L=e.memoizedState;if(L!==null&&(R=L.dehydrated,R!==null)){if(w)n.flags&256?(ta(n),n.flags&=-257,n=Gc(e,n,s)):n.memoizedState!==null?(na(),n.child=e.child,n.flags|=128,n=null):(na(),R=h.fallback,y=n.mode,h=Xo({mode:"visible",children:h.children},y),R=Ba(R,y,s,null),R.flags|=2,h.return=n,R.return=n,h.sibling=R,n.child=h,Fa(n,e.child,null,s),h=n.child,h.memoizedState=Fc(s),h.childLanes=Hc(e,S,s),n.memoizedState=Pc,n=Sl(null,h));else if(ta(n),Sh(R)){if(S=R.nextSibling&&R.nextSibling.dataset,S)var q=S.dgst;S=q,h=Error(d(419)),h.stack="",h.digest=S,fl({value:h,source:null,stack:null}),n=Gc(e,n,s)}else if(dn||ys(e,n,s,!1),S=(s&e.childLanes)!==0,dn||S){if(S=Ut,S!==null&&(h=es(S,s),h!==0&&h!==L.retryLane))throw L.retryLane=h,Ma(e,h),ei(S,e,h),jc;vh(R)||nu(),n=Gc(e,n,s)}else vh(R)?(n.flags|=192,n.child=e.child,n=null):(e=L.treeContext,Vt=Ri(R.nextSibling),In=n,ot=!0,Wr=null,Ii=!1,e!==null&&yf(n,e),n=Vc(n,h.children),n.flags|=4096);return n}return y?(na(),R=h.fallback,y=n.mode,L=e.child,q=L.sibling,h=gr(L,{mode:"hidden",children:h.children}),h.subtreeFlags=L.subtreeFlags&65011712,q!==null?R=gr(q,R):(R=Ba(R,y,s,null),R.flags|=2),R.return=n,h.return=n,h.sibling=R,n.child=h,Sl(null,h),h=n.child,R=e.child.memoizedState,R===null?R=Fc(s):(y=R.cachePool,y!==null?(L=hn._currentValue,y=y.parent!==L?{parent:L,pool:L}:y):y=Ef(),R={baseLanes:R.baseLanes|s,cachePool:y}),h.memoizedState=R,h.childLanes=Hc(e,S,s),n.memoizedState=Pc,Sl(e.child,h)):(ta(n),s=e.child,e=s.sibling,s=gr(s,{mode:"visible",children:h.children}),s.return=n,s.sibling=null,e!==null&&(S=n.deletions,S===null?(n.deletions=[e],n.flags|=16):S.push(e)),n.child=s,n.memoizedState=null,s)}function Vc(e,n){return n=Xo({mode:"visible",children:n},e.mode),n.return=e,e.child=n}function Xo(e,n){return e=ui(22,e,null,n),e.lanes=0,e}function Gc(e,n,s){return Fa(n,e.child,null,s),e=Vc(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function L0(e,n,s){e.lanes|=n;var h=e.alternate;h!==null&&(h.lanes|=n),ac(e.return,n,s)}function Yc(e,n,s,h,y,w){var S=e.memoizedState;S===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:h,tail:s,tailMode:y,treeForkCount:w}:(S.isBackwards=n,S.rendering=null,S.renderingStartTime=0,S.last=h,S.tail=s,S.tailMode=y,S.treeForkCount=w)}function k0(e,n,s){var h=n.pendingProps,y=h.revealOrder,w=h.tail;h=h.children;var S=ln.current,R=(S&2)!==0;if(R?(S=S&1|2,n.flags|=128):S&=1,we(ln,S),Rn(e,n,h,s),h=ot?hl:0,!R&&e!==null&&(e.flags&128)!==0)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&L0(e,s,n);else if(e.tag===19)L0(e,s,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(y){case"forwards":for(s=n.child,y=null;s!==null;)e=s.alternate,e!==null&&Lo(e)===null&&(y=s),s=s.sibling;s=y,s===null?(y=n.child,n.child=null):(y=s.sibling,s.sibling=null),Yc(n,!1,y,s,w,h);break;case"backwards":case"unstable_legacy-backwards":for(s=null,y=n.child,n.child=null;y!==null;){if(e=y.alternate,e!==null&&Lo(e)===null){n.child=y;break}e=y.sibling,y.sibling=s,s=y,y=e}Yc(n,!0,s,null,w,h);break;case"together":Yc(n,!1,null,null,void 0,h);break;default:n.memoizedState=null}return n.child}function Ar(e,n,s){if(e!==null&&(n.dependencies=e.dependencies),aa|=n.lanes,(s&n.childLanes)===0)if(e!==null){if(ys(e,n,s,!1),(s&n.childLanes)===0)return null}else return null;if(e!==null&&n.child!==e.child)throw Error(d(153));if(n.child!==null){for(e=n.child,s=gr(e,e.pendingProps),n.child=s,s.return=n;e.sibling!==null;)e=e.sibling,s=s.sibling=gr(e,e.pendingProps),s.return=n;s.sibling=null}return n.child}function qc(e,n){return(e.lanes&n)!==0?!0:(e=e.dependencies,!!(e!==null&&To(e)))}function Wg(e,n,s){switch(n.tag){case 3:ct(n,n.stateNode.containerInfo),Qr(n,hn,e.memoizedState.cache),La();break;case 27:case 5:Mi(n);break;case 4:ct(n,n.stateNode.containerInfo);break;case 10:Qr(n,n.type,n.memoizedProps.value);break;case 31:if(n.memoizedState!==null)return n.flags|=128,pc(n),null;break;case 13:var h=n.memoizedState;if(h!==null)return h.dehydrated!==null?(ta(n),n.flags|=128,null):(s&n.child.childLanes)!==0?B0(e,n,s):(ta(n),e=Ar(e,n,s),e!==null?e.sibling:null);ta(n);break;case 19:var y=(e.flags&128)!==0;if(h=(s&n.childLanes)!==0,h||(ys(e,n,s,!1),h=(s&n.childLanes)!==0),y){if(h)return k0(e,n,s);n.flags|=128}if(y=n.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),we(ln,ln.current),h)break;return null;case 22:return n.lanes=0,O0(e,n,s,n.pendingProps);case 24:Qr(n,hn,e.memoizedState.cache)}return Ar(e,n,s)}function U0(e,n,s){if(e!==null)if(e.memoizedProps!==n.pendingProps)dn=!0;else{if(!qc(e,s)&&(n.flags&128)===0)return dn=!1,Wg(e,n,s);dn=(e.flags&131072)!==0}else dn=!1,ot&&(n.flags&1048576)!==0&&mf(n,hl,n.index);switch(n.lanes=0,n.tag){case 16:e:{var h=n.pendingProps;if(e=za(n.elementType),n.type=e,typeof e=="function")Qu(e)?(h=Va(e,h),n.tag=1,n=D0(null,n,e,h,s)):(n.tag=0,n=zc(null,n,e,h,s));else{if(e!=null){var y=e.$$typeof;if(y===xe){n.tag=11,n=_0(null,n,e,h,s);break e}else if(y===$){n.tag=14,n=C0(null,n,e,h,s);break e}}throw n=Ot(e)||e,Error(d(306,n,""))}}return n;case 0:return zc(e,n,n.type,n.pendingProps,s);case 1:return h=n.type,y=Va(h,n.pendingProps),D0(e,n,h,y,s);case 3:e:{if(ct(n,n.stateNode.containerInfo),e===null)throw Error(d(387));h=n.pendingProps;var w=n.memoizedState;y=w.element,fc(e,n),wl(n,h,null,s);var S=n.memoizedState;if(h=S.cache,Qr(n,hn,h),h!==w.cache&&sc(n,[hn],s,!0),xl(),h=S.element,w.isDehydrated)if(w={element:h,isDehydrated:!1,cache:S.cache},n.updateQueue.baseState=w,n.memoizedState=w,n.flags&256){n=M0(e,n,h,s);break e}else if(h!==y){y=Ci(Error(d(424)),n),fl(y),n=M0(e,n,h,s);break e}else for(e=n.stateNode.containerInfo,e.nodeType===9?e=e.body:e=e.nodeName==="HTML"?e.ownerDocument.body:e,Vt=Ri(e.firstChild),In=n,ot=!0,Wr=null,Ii=!0,s=Of(n,null,h,s),n.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(La(),h===y){n=Ar(e,n,s);break e}Rn(e,n,h,s)}n=n.child}return n;case 26:return qo(e,n),e===null?(s=Zd(n.type,null,n.pendingProps,null))?n.memoizedState=s:ot||(s=n.type,e=n.pendingProps,h=uu(pe.current).createElement(s),h[rn]=n,h[St]=e,Dn(h,s,e),Qt(h),n.stateNode=h):n.memoizedState=Zd(n.type,e.memoizedProps,n.pendingProps,e.memoizedState),null;case 27:return Mi(n),e===null&&ot&&(h=n.stateNode=Yd(n.type,n.pendingProps,pe.current),In=n,Ii=!0,y=Vt,ca(n.type)?(_h=y,Vt=Ri(h.firstChild)):Vt=y),Rn(e,n,n.pendingProps.children,s),qo(e,n),e===null&&(n.flags|=4194304),n.child;case 5:return e===null&&ot&&((y=h=Vt)&&(h=_2(h,n.type,n.pendingProps,Ii),h!==null?(n.stateNode=h,In=n,Vt=Ri(h.firstChild),Ii=!1,y=!0):y=!1),y||Kr(n)),Mi(n),y=n.type,w=n.pendingProps,S=e!==null?e.memoizedProps:null,h=w.children,Ah(y,w)?h=null:S!==null&&Ah(y,S)&&(n.flags|=32),n.memoizedState!==null&&(y=wc(e,n,Pg,null,null,s),zl._currentValue=y),qo(e,n),Rn(e,n,h,s),n.child;case 6:return e===null&&ot&&((e=s=Vt)&&(s=C2(s,n.pendingProps,Ii),s!==null?(n.stateNode=s,In=n,Vt=null,e=!0):e=!1),e||Kr(n)),null;case 13:return B0(e,n,s);case 4:return ct(n,n.stateNode.containerInfo),h=n.pendingProps,e===null?n.child=Fa(n,null,h,s):Rn(e,n,h,s),n.child;case 11:return _0(e,n,n.type,n.pendingProps,s);case 7:return Rn(e,n,n.pendingProps,s),n.child;case 8:return Rn(e,n,n.pendingProps.children,s),n.child;case 12:return Rn(e,n,n.pendingProps.children,s),n.child;case 10:return h=n.pendingProps,Qr(n,n.type,h.value),Rn(e,n,h.children,s),n.child;case 9:return y=n.type._context,h=n.pendingProps.children,Ua(n),y=Nn(y),h=h(y),n.flags|=1,Rn(e,n,h,s),n.child;case 14:return C0(e,n,n.type,n.pendingProps,s);case 15:return T0(e,n,n.type,n.pendingProps,s);case 19:return k0(e,n,s);case 31:return Zg(e,n,s);case 22:return O0(e,n,s,n.pendingProps);case 24:return Ua(n),h=Nn(hn),e===null?(y=uc(),y===null&&(y=Ut,w=lc(),y.pooledCache=w,w.refCount++,w!==null&&(y.pooledCacheLanes|=s),y=w),n.memoizedState={parent:h,cache:y},hc(n),Qr(n,hn,y)):((e.lanes&s)!==0&&(fc(e,n),wl(n,null,null,s),xl()),y=e.memoizedState,w=n.memoizedState,y.parent!==h?(y={parent:h,cache:h},n.memoizedState=y,n.lanes===0&&(n.memoizedState=n.updateQueue.baseState=y),Qr(n,hn,h)):(h=w.cache,Qr(n,hn,h),h!==y.cache&&sc(n,[hn],s,!0))),Rn(e,n,n.pendingProps.children,s),n.child;case 29:throw n.pendingProps}throw Error(d(156,n.tag))}function br(e){e.flags|=4}function Xc(e,n,s,h,y){if((n=(e.mode&32)!==0)&&(n=!1),n){if(e.flags|=16777216,(y&335544128)===y)if(e.stateNode.complete)e.flags|=8192;else if(cd())e.flags|=8192;else throw Pa=Ro,cc}else e.flags&=-16777217}function j0(e,n){if(n.type!=="stylesheet"||(n.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!$d(n))if(cd())e.flags|=8192;else throw Pa=Ro,cc}function Zo(e,n){n!==null&&(e.flags|=4),e.flags&16384&&(n=e.tag!==22?xn():536870912,e.lanes|=n,Os|=n)}function _l(e,n){if(!ot)switch(e.tailMode){case"hidden":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?e.tail=null:s.sibling=null;break;case"collapsed":s=e.tail;for(var h=null;s!==null;)s.alternate!==null&&(h=s),s=s.sibling;h===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:h.sibling=null}}function Gt(e){var n=e.alternate!==null&&e.alternate.child===e.child,s=0,h=0;if(n)for(var y=e.child;y!==null;)s|=y.lanes|y.childLanes,h|=y.subtreeFlags&65011712,h|=y.flags&65011712,y.return=e,y=y.sibling;else for(y=e.child;y!==null;)s|=y.lanes|y.childLanes,h|=y.subtreeFlags,h|=y.flags,y.return=e,y=y.sibling;return e.subtreeFlags|=h,e.childLanes=s,n}function Kg(e,n,s){var h=n.pendingProps;switch(tc(n),n.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Gt(n),null;case 1:return Gt(n),null;case 3:return s=n.stateNode,h=null,e!==null&&(h=e.memoizedState.cache),n.memoizedState.cache!==h&&(n.flags|=2048),pr(hn),Mt(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(ms(n)?br(n):e===null||e.memoizedState.isDehydrated&&(n.flags&256)===0||(n.flags|=1024,ic())),Gt(n),null;case 26:var y=n.type,w=n.memoizedState;return e===null?(br(n),w!==null?(Gt(n),j0(n,w)):(Gt(n),Xc(n,y,null,h,s))):w?w!==e.memoizedState?(br(n),Gt(n),j0(n,w)):(Gt(n),n.flags&=-16777217):(e=e.memoizedProps,e!==h&&br(n),Gt(n),Xc(n,y,e,h,s)),null;case 27:if(yn(n),s=pe.current,y=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==h&&br(n);else{if(!h){if(n.stateNode===null)throw Error(d(166));return Gt(n),null}e=Ae.current,ms(n)?pf(n):(e=Yd(y,h,s),n.stateNode=e,br(n))}return Gt(n),null;case 5:if(yn(n),y=n.type,e!==null&&n.stateNode!=null)e.memoizedProps!==h&&br(n);else{if(!h){if(n.stateNode===null)throw Error(d(166));return Gt(n),null}if(w=Ae.current,ms(n))pf(n);else{var S=uu(pe.current);switch(w){case 1:w=S.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:w=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":w=S.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":w=S.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":w=S.createElement("div"),w.innerHTML="<script><\/script>",w=w.removeChild(w.firstChild);break;case"select":w=typeof h.is=="string"?S.createElement("select",{is:h.is}):S.createElement("select"),h.multiple?w.multiple=!0:h.size&&(w.size=h.size);break;default:w=typeof h.is=="string"?S.createElement(y,{is:h.is}):S.createElement(y)}}w[rn]=n,w[St]=h;e:for(S=n.child;S!==null;){if(S.tag===5||S.tag===6)w.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===n)break e;for(;S.sibling===null;){if(S.return===null||S.return===n)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}n.stateNode=w;e:switch(Dn(w,y,h),y){case"button":case"input":case"select":case"textarea":h=!!h.autoFocus;break e;case"img":h=!0;break e;default:h=!1}h&&br(n)}}return Gt(n),Xc(n,n.type,e===null?null:e.memoizedProps,n.pendingProps,s),null;case 6:if(e&&n.stateNode!=null)e.memoizedProps!==h&&br(n);else{if(typeof h!="string"&&n.stateNode===null)throw Error(d(166));if(e=pe.current,ms(n)){if(e=n.stateNode,s=n.memoizedProps,h=null,y=In,y!==null)switch(y.tag){case 27:case 5:h=y.memoizedProps}e[rn]=n,e=!!(e.nodeValue===s||h!==null&&h.suppressHydrationWarning===!0||Bd(e.nodeValue,s)),e||Kr(n,!0)}else e=uu(e).createTextNode(h),e[rn]=n,n.stateNode=e}return Gt(n),null;case 31:if(s=n.memoizedState,e===null||e.memoizedState!==null){if(h=ms(n),s!==null){if(e===null){if(!h)throw Error(d(318));if(e=n.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(d(557));e[rn]=n}else La(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Gt(n),e=!1}else s=ic(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=s),e=!0;if(!e)return n.flags&256?(hi(n),n):(hi(n),null);if((n.flags&128)!==0)throw Error(d(558))}return Gt(n),null;case 13:if(h=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(y=ms(n),h!==null&&h.dehydrated!==null){if(e===null){if(!y)throw Error(d(318));if(y=n.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(d(317));y[rn]=n}else La(),(n.flags&128)===0&&(n.memoizedState=null),n.flags|=4;Gt(n),y=!1}else y=ic(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=y),y=!0;if(!y)return n.flags&256?(hi(n),n):(hi(n),null)}return hi(n),(n.flags&128)!==0?(n.lanes=s,n):(s=h!==null,e=e!==null&&e.memoizedState!==null,s&&(h=n.child,y=null,h.alternate!==null&&h.alternate.memoizedState!==null&&h.alternate.memoizedState.cachePool!==null&&(y=h.alternate.memoizedState.cachePool.pool),w=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(w=h.memoizedState.cachePool.pool),w!==y&&(h.flags|=2048)),s!==e&&s&&(n.child.flags|=8192),Zo(n,n.updateQueue),Gt(n),null);case 4:return Mt(),e===null&&mh(n.stateNode.containerInfo),Gt(n),null;case 10:return pr(n.type),Gt(n),null;case 19:if(ie(ln),h=n.memoizedState,h===null)return Gt(n),null;if(y=(n.flags&128)!==0,w=h.rendering,w===null)if(y)_l(h,!1);else{if(en!==0||e!==null&&(e.flags&128)!==0)for(e=n.child;e!==null;){if(w=Lo(e),w!==null){for(n.flags|=128,_l(h,!1),e=w.updateQueue,n.updateQueue=e,Zo(n,e),n.subtreeFlags=0,e=s,s=n.child;s!==null;)ff(s,e),s=s.sibling;return we(ln,ln.current&1|2),ot&&mr(n,h.treeForkCount),n.child}e=e.sibling}h.tail!==null&&Zt()>$o&&(n.flags|=128,y=!0,_l(h,!1),n.lanes=4194304)}else{if(!y)if(e=Lo(w),e!==null){if(n.flags|=128,y=!0,e=e.updateQueue,n.updateQueue=e,Zo(n,e),_l(h,!0),h.tail===null&&h.tailMode==="hidden"&&!w.alternate&&!ot)return Gt(n),null}else 2*Zt()-h.renderingStartTime>$o&&s!==536870912&&(n.flags|=128,y=!0,_l(h,!1),n.lanes=4194304);h.isBackwards?(w.sibling=n.child,n.child=w):(e=h.last,e!==null?e.sibling=w:n.child=w,h.last=w)}return h.tail!==null?(e=h.tail,h.rendering=e,h.tail=e.sibling,h.renderingStartTime=Zt(),e.sibling=null,s=ln.current,we(ln,y?s&1|2:s&1),ot&&mr(n,h.treeForkCount),e):(Gt(n),null);case 22:case 23:return hi(n),yc(),h=n.memoizedState!==null,e!==null?e.memoizedState!==null!==h&&(n.flags|=8192):h&&(n.flags|=8192),h?(s&536870912)!==0&&(n.flags&128)===0&&(Gt(n),n.subtreeFlags&6&&(n.flags|=8192)):Gt(n),s=n.updateQueue,s!==null&&Zo(n,s.retryQueue),s=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),h=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(h=n.memoizedState.cachePool.pool),h!==s&&(n.flags|=2048),e!==null&&ie(ja),null;case 24:return s=null,e!==null&&(s=e.memoizedState.cache),n.memoizedState.cache!==s&&(n.flags|=2048),pr(hn),Gt(n),null;case 25:return null;case 30:return null}throw Error(d(156,n.tag))}function Qg(e,n){switch(tc(n),n.tag){case 1:return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return pr(hn),Mt(),e=n.flags,(e&65536)!==0&&(e&128)===0?(n.flags=e&-65537|128,n):null;case 26:case 27:case 5:return yn(n),null;case 31:if(n.memoizedState!==null){if(hi(n),n.alternate===null)throw Error(d(340));La()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 13:if(hi(n),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(d(340));La()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return ie(ln),null;case 4:return Mt(),null;case 10:return pr(n.type),null;case 22:case 23:return hi(n),yc(),e!==null&&ie(ja),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 24:return pr(hn),null;case 25:return null;default:return null}}function z0(e,n){switch(tc(n),n.tag){case 3:pr(hn),Mt();break;case 26:case 27:case 5:yn(n);break;case 4:Mt();break;case 31:n.memoizedState!==null&&hi(n);break;case 13:hi(n);break;case 19:ie(ln);break;case 10:pr(n.type);break;case 22:case 23:hi(n),yc(),e!==null&&ie(ja);break;case 24:pr(hn)}}function Cl(e,n){try{var s=n.updateQueue,h=s!==null?s.lastEffect:null;if(h!==null){var y=h.next;s=y;do{if((s.tag&e)===e){h=void 0;var w=s.create,S=s.inst;h=w(),S.destroy=h}s=s.next}while(s!==y)}}catch(R){Ct(n,n.return,R)}}function ia(e,n,s){try{var h=n.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var w=y.next;h=w;do{if((h.tag&e)===e){var S=h.inst,R=S.destroy;if(R!==void 0){S.destroy=void 0,y=n;var L=s,q=R;try{q()}catch(re){Ct(y,L,re)}}}h=h.next}while(h!==w)}}catch(re){Ct(n,n.return,re)}}function P0(e){var n=e.updateQueue;if(n!==null){var s=e.stateNode;try{Nf(n,s)}catch(h){Ct(e,e.return,h)}}}function F0(e,n,s){s.props=Va(e.type,e.memoizedProps),s.state=e.memoizedState;try{s.componentWillUnmount()}catch(h){Ct(e,n,h)}}function Tl(e,n){try{var s=e.ref;if(s!==null){switch(e.tag){case 26:case 27:case 5:var h=e.stateNode;break;case 30:h=e.stateNode;break;default:h=e.stateNode}typeof s=="function"?e.refCleanup=s(h):s.current=h}}catch(y){Ct(e,n,y)}}function ir(e,n){var s=e.ref,h=e.refCleanup;if(s!==null)if(typeof h=="function")try{h()}catch(y){Ct(e,n,y)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof s=="function")try{s(null)}catch(y){Ct(e,n,y)}else s.current=null}function H0(e){var n=e.type,s=e.memoizedProps,h=e.stateNode;try{e:switch(n){case"button":case"input":case"select":case"textarea":s.autoFocus&&h.focus();break e;case"img":s.src?h.src=s.src:s.srcSet&&(h.srcset=s.srcSet)}}catch(y){Ct(e,e.return,y)}}function Zc(e,n,s){try{var h=e.stateNode;w2(h,e.type,s,n),h[St]=n}catch(y){Ct(e,e.return,y)}}function V0(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&ca(e.type)||e.tag===4}function Wc(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||V0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&ca(e.type)||e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Kc(e,n,s){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s).insertBefore(e,n):(n=s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,n.appendChild(e),s=s._reactRootContainer,s!=null||n.onclick!==null||(n.onclick=Xn));else if(h!==4&&(h===27&&ca(e.type)&&(s=e.stateNode,n=null),e=e.child,e!==null))for(Kc(e,n,s),e=e.sibling;e!==null;)Kc(e,n,s),e=e.sibling}function Wo(e,n,s){var h=e.tag;if(h===5||h===6)e=e.stateNode,n?s.insertBefore(e,n):s.appendChild(e);else if(h!==4&&(h===27&&ca(e.type)&&(s=e.stateNode),e=e.child,e!==null))for(Wo(e,n,s),e=e.sibling;e!==null;)Wo(e,n,s),e=e.sibling}function G0(e){var n=e.stateNode,s=e.memoizedProps;try{for(var h=e.type,y=n.attributes;y.length;)n.removeAttributeNode(y[0]);Dn(n,h,s),n[rn]=e,n[St]=s}catch(w){Ct(e,e.return,w)}}var Er=!1,gn=!1,Qc=!1,Y0=typeof WeakSet=="function"?WeakSet:Set,_n=null;function Jg(e,n){if(e=e.containerInfo,xh=yu,e=O(e),I(e)){if("selectionStart"in e)var s={start:e.selectionStart,end:e.selectionEnd};else e:{s=(s=e.ownerDocument)&&s.defaultView||window;var h=s.getSelection&&s.getSelection();if(h&&h.rangeCount!==0){s=h.anchorNode;var y=h.anchorOffset,w=h.focusNode;h=h.focusOffset;try{s.nodeType,w.nodeType}catch{s=null;break e}var S=0,R=-1,L=-1,q=0,re=0,le=e,X=null;t:for(;;){for(var J;le!==s||y!==0&&le.nodeType!==3||(R=S+y),le!==w||h!==0&&le.nodeType!==3||(L=S+h),le.nodeType===3&&(S+=le.nodeValue.length),(J=le.firstChild)!==null;)X=le,le=J;for(;;){if(le===e)break t;if(X===s&&++q===y&&(R=S),X===w&&++re===h&&(L=S),(J=le.nextSibling)!==null)break;le=X,X=le.parentNode}le=J}s=R===-1||L===-1?null:{start:R,end:L}}else s=null}s=s||{start:0,end:0}}else s=null;for(wh={focusedElem:e,selectionRange:s},yu=!1,_n=n;_n!==null;)if(n=_n,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,_n=e;else for(;_n!==null;){switch(n=_n,w=n.alternate,e=n.flags,n.tag){case 0:if((e&4)!==0&&(e=n.updateQueue,e=e!==null?e.events:null,e!==null))for(s=0;s<e.length;s++)y=e[s],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&w!==null){e=void 0,s=n,y=w.memoizedProps,w=w.memoizedState,h=s.stateNode;try{var _e=Va(s.type,y);e=h.getSnapshotBeforeUpdate(_e,w),h.__reactInternalSnapshotBeforeUpdate=e}catch(ke){Ct(s,s.return,ke)}}break;case 3:if((e&1024)!==0){if(e=n.stateNode.containerInfo,s=e.nodeType,s===9)Eh(e);else if(s===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Eh(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(d(163))}if(e=n.sibling,e!==null){e.return=n.return,_n=e;break}_n=n.return}}function q0(e,n,s){var h=s.flags;switch(s.tag){case 0:case 11:case 15:Sr(e,s),h&4&&Cl(5,s);break;case 1:if(Sr(e,s),h&4)if(e=s.stateNode,n===null)try{e.componentDidMount()}catch(S){Ct(s,s.return,S)}else{var y=Va(s.type,n.memoizedProps);n=n.memoizedState;try{e.componentDidUpdate(y,n,e.__reactInternalSnapshotBeforeUpdate)}catch(S){Ct(s,s.return,S)}}h&64&&P0(s),h&512&&Tl(s,s.return);break;case 3:if(Sr(e,s),h&64&&(e=s.updateQueue,e!==null)){if(n=null,s.child!==null)switch(s.child.tag){case 27:case 5:n=s.child.stateNode;break;case 1:n=s.child.stateNode}try{Nf(e,n)}catch(S){Ct(s,s.return,S)}}break;case 27:n===null&&h&4&&G0(s);case 26:case 5:Sr(e,s),n===null&&h&4&&H0(s),h&512&&Tl(s,s.return);break;case 12:Sr(e,s);break;case 31:Sr(e,s),h&4&&W0(e,s);break;case 13:Sr(e,s),h&4&&K0(e,s),h&64&&(e=s.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(s=l2.bind(null,s),T2(e,s))));break;case 22:if(h=s.memoizedState!==null||Er,!h){n=n!==null&&n.memoizedState!==null||gn,y=Er;var w=gn;Er=h,(gn=n)&&!w?_r(e,s,(s.subtreeFlags&8772)!==0):Sr(e,s),Er=y,gn=w}break;case 30:break;default:Sr(e,s)}}function X0(e){var n=e.alternate;n!==null&&(e.alternate=null,X0(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&qn(n)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var Xt=null,Kn=!1;function vr(e,n,s){for(s=s.child;s!==null;)Z0(e,n,s),s=s.sibling}function Z0(e,n,s){if(me&&typeof me.onCommitFiberUnmount=="function")try{me.onCommitFiberUnmount(jt,s)}catch{}switch(s.tag){case 26:gn||ir(s,n),vr(e,n,s),s.memoizedState?s.memoizedState.count--:s.stateNode&&(s=s.stateNode,s.parentNode.removeChild(s));break;case 27:gn||ir(s,n);var h=Xt,y=Kn;ca(s.type)&&(Xt=s.stateNode,Kn=!1),vr(e,n,s),kl(s.stateNode),Xt=h,Kn=y;break;case 5:gn||ir(s,n);case 6:if(h=Xt,y=Kn,Xt=null,vr(e,n,s),Xt=h,Kn=y,Xt!==null)if(Kn)try{(Xt.nodeType===9?Xt.body:Xt.nodeName==="HTML"?Xt.ownerDocument.body:Xt).removeChild(s.stateNode)}catch(w){Ct(s,n,w)}else try{Xt.removeChild(s.stateNode)}catch(w){Ct(s,n,w)}break;case 18:Xt!==null&&(Kn?(e=Xt,Pd(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,s.stateNode),ks(e)):Pd(Xt,s.stateNode));break;case 4:h=Xt,y=Kn,Xt=s.stateNode.containerInfo,Kn=!0,vr(e,n,s),Xt=h,Kn=y;break;case 0:case 11:case 14:case 15:ia(2,s,n),gn||ia(4,s,n),vr(e,n,s);break;case 1:gn||(ir(s,n),h=s.stateNode,typeof h.componentWillUnmount=="function"&&F0(s,n,h)),vr(e,n,s);break;case 21:vr(e,n,s);break;case 22:gn=(h=gn)||s.memoizedState!==null,vr(e,n,s),gn=h;break;default:vr(e,n,s)}}function W0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ks(e)}catch(s){Ct(n,n.return,s)}}}function K0(e,n){if(n.memoizedState===null&&(e=n.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ks(e)}catch(s){Ct(n,n.return,s)}}function $g(e){switch(e.tag){case 31:case 13:case 19:var n=e.stateNode;return n===null&&(n=e.stateNode=new Y0),n;case 22:return e=e.stateNode,n=e._retryCache,n===null&&(n=e._retryCache=new Y0),n;default:throw Error(d(435,e.tag))}}function Ko(e,n){var s=$g(e);n.forEach(function(h){if(!s.has(h)){s.add(h);var y=o2.bind(null,e,h);h.then(y,y)}})}function Qn(e,n){var s=n.deletions;if(s!==null)for(var h=0;h<s.length;h++){var y=s[h],w=e,S=n,R=S;e:for(;R!==null;){switch(R.tag){case 27:if(ca(R.type)){Xt=R.stateNode,Kn=!1;break e}break;case 5:Xt=R.stateNode,Kn=!1;break e;case 3:case 4:Xt=R.stateNode.containerInfo,Kn=!0;break e}R=R.return}if(Xt===null)throw Error(d(160));Z0(w,S,y),Xt=null,Kn=!1,w=y.alternate,w!==null&&(w.return=null),y.return=null}if(n.subtreeFlags&13886)for(n=n.child;n!==null;)Q0(n,e),n=n.sibling}var Fi=null;function Q0(e,n){var s=e.alternate,h=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Qn(n,e),Jn(e),h&4&&(ia(3,e,e.return),Cl(3,e),ia(5,e,e.return));break;case 1:Qn(n,e),Jn(e),h&512&&(gn||s===null||ir(s,s.return)),h&64&&Er&&(e=e.updateQueue,e!==null&&(h=e.callbacks,h!==null&&(s=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=s===null?h:s.concat(h))));break;case 26:var y=Fi;if(Qn(n,e),Jn(e),h&512&&(gn||s===null||ir(s,s.return)),h&4){var w=s!==null?s.memoizedState:null;if(h=e.memoizedState,s===null)if(h===null)if(e.stateNode===null){e:{h=e.type,s=e.memoizedProps,y=y.ownerDocument||y;t:switch(h){case"title":w=y.getElementsByTagName("title")[0],(!w||w[Sa]||w[rn]||w.namespaceURI==="http://www.w3.org/2000/svg"||w.hasAttribute("itemprop"))&&(w=y.createElement(h),y.head.insertBefore(w,y.querySelector("head > title"))),Dn(w,h,s),w[rn]=e,Qt(w),h=w;break e;case"link":var S=Qd("link","href",y).get(h+(s.href||""));if(S){for(var R=0;R<S.length;R++)if(w=S[R],w.getAttribute("href")===(s.href==null||s.href===""?null:s.href)&&w.getAttribute("rel")===(s.rel==null?null:s.rel)&&w.getAttribute("title")===(s.title==null?null:s.title)&&w.getAttribute("crossorigin")===(s.crossOrigin==null?null:s.crossOrigin)){S.splice(R,1);break t}}w=y.createElement(h),Dn(w,h,s),y.head.appendChild(w);break;case"meta":if(S=Qd("meta","content",y).get(h+(s.content||""))){for(R=0;R<S.length;R++)if(w=S[R],w.getAttribute("content")===(s.content==null?null:""+s.content)&&w.getAttribute("name")===(s.name==null?null:s.name)&&w.getAttribute("property")===(s.property==null?null:s.property)&&w.getAttribute("http-equiv")===(s.httpEquiv==null?null:s.httpEquiv)&&w.getAttribute("charset")===(s.charSet==null?null:s.charSet)){S.splice(R,1);break t}}w=y.createElement(h),Dn(w,h,s),y.head.appendChild(w);break;default:throw Error(d(468,h))}w[rn]=e,Qt(w),h=w}e.stateNode=h}else Jd(y,e.type,e.stateNode);else e.stateNode=Kd(y,h,e.memoizedProps);else w!==h?(w===null?s.stateNode!==null&&(s=s.stateNode,s.parentNode.removeChild(s)):w.count--,h===null?Jd(y,e.type,e.stateNode):Kd(y,h,e.memoizedProps)):h===null&&e.stateNode!==null&&Zc(e,e.memoizedProps,s.memoizedProps)}break;case 27:Qn(n,e),Jn(e),h&512&&(gn||s===null||ir(s,s.return)),s!==null&&h&4&&Zc(e,e.memoizedProps,s.memoizedProps);break;case 5:if(Qn(n,e),Jn(e),h&512&&(gn||s===null||ir(s,s.return)),e.flags&32){y=e.stateNode;try{zr(y,"")}catch(_e){Ct(e,e.return,_e)}}h&4&&e.stateNode!=null&&(y=e.memoizedProps,Zc(e,y,s!==null?s.memoizedProps:y)),h&1024&&(Qc=!0);break;case 6:if(Qn(n,e),Jn(e),h&4){if(e.stateNode===null)throw Error(d(162));h=e.memoizedProps,s=e.stateNode;try{s.nodeValue=h}catch(_e){Ct(e,e.return,_e)}}break;case 3:if(fu=null,y=Fi,Fi=cu(n.containerInfo),Qn(n,e),Fi=y,Jn(e),h&4&&s!==null&&s.memoizedState.isDehydrated)try{ks(n.containerInfo)}catch(_e){Ct(e,e.return,_e)}Qc&&(Qc=!1,J0(e));break;case 4:h=Fi,Fi=cu(e.stateNode.containerInfo),Qn(n,e),Jn(e),Fi=h;break;case 12:Qn(n,e),Jn(e);break;case 31:Qn(n,e),Jn(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Ko(e,h)));break;case 13:Qn(n,e),Jn(e),e.child.flags&8192&&e.memoizedState!==null!=(s!==null&&s.memoizedState!==null)&&(Jo=Zt()),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Ko(e,h)));break;case 22:y=e.memoizedState!==null;var L=s!==null&&s.memoizedState!==null,q=Er,re=gn;if(Er=q||y,gn=re||L,Qn(n,e),gn=re,Er=q,Jn(e),h&8192)e:for(n=e.stateNode,n._visibility=y?n._visibility&-2:n._visibility|1,y&&(s===null||L||Er||gn||Ga(e)),s=null,n=e;;){if(n.tag===5||n.tag===26){if(s===null){L=s=n;try{if(w=L.stateNode,y)S=w.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{R=L.stateNode;var le=L.memoizedProps.style,X=le!=null&&le.hasOwnProperty("display")?le.display:null;R.style.display=X==null||typeof X=="boolean"?"":(""+X).trim()}}catch(_e){Ct(L,L.return,_e)}}}else if(n.tag===6){if(s===null){L=n;try{L.stateNode.nodeValue=y?"":L.memoizedProps}catch(_e){Ct(L,L.return,_e)}}}else if(n.tag===18){if(s===null){L=n;try{var J=L.stateNode;y?Fd(J,!0):Fd(L.stateNode,!1)}catch(_e){Ct(L,L.return,_e)}}}else if((n.tag!==22&&n.tag!==23||n.memoizedState===null||n===e)&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;s===n&&(s=null),n=n.return}s===n&&(s=null),n.sibling.return=n.return,n=n.sibling}h&4&&(h=e.updateQueue,h!==null&&(s=h.retryQueue,s!==null&&(h.retryQueue=null,Ko(e,s))));break;case 19:Qn(n,e),Jn(e),h&4&&(h=e.updateQueue,h!==null&&(e.updateQueue=null,Ko(e,h)));break;case 30:break;case 21:break;default:Qn(n,e),Jn(e)}}function Jn(e){var n=e.flags;if(n&2){try{for(var s,h=e.return;h!==null;){if(V0(h)){s=h;break}h=h.return}if(s==null)throw Error(d(160));switch(s.tag){case 27:var y=s.stateNode,w=Wc(e);Wo(e,w,y);break;case 5:var S=s.stateNode;s.flags&32&&(zr(S,""),s.flags&=-33);var R=Wc(e);Wo(e,R,S);break;case 3:case 4:var L=s.stateNode.containerInfo,q=Wc(e);Kc(e,q,L);break;default:throw Error(d(161))}}catch(re){Ct(e,e.return,re)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function J0(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var n=e;J0(n),n.tag===5&&n.flags&1024&&n.stateNode.reset(),e=e.sibling}}function Sr(e,n){if(n.subtreeFlags&8772)for(n=n.child;n!==null;)q0(e,n.alternate,n),n=n.sibling}function Ga(e){for(e=e.child;e!==null;){var n=e;switch(n.tag){case 0:case 11:case 14:case 15:ia(4,n,n.return),Ga(n);break;case 1:ir(n,n.return);var s=n.stateNode;typeof s.componentWillUnmount=="function"&&F0(n,n.return,s),Ga(n);break;case 27:kl(n.stateNode);case 26:case 5:ir(n,n.return),Ga(n);break;case 22:n.memoizedState===null&&Ga(n);break;case 30:Ga(n);break;default:Ga(n)}e=e.sibling}}function _r(e,n,s){for(s=s&&(n.subtreeFlags&8772)!==0,n=n.child;n!==null;){var h=n.alternate,y=e,w=n,S=w.flags;switch(w.tag){case 0:case 11:case 15:_r(y,w,s),Cl(4,w);break;case 1:if(_r(y,w,s),h=w,y=h.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(q){Ct(h,h.return,q)}if(h=w,y=h.updateQueue,y!==null){var R=h.stateNode;try{var L=y.shared.hiddenCallbacks;if(L!==null)for(y.shared.hiddenCallbacks=null,y=0;y<L.length;y++)If(L[y],R)}catch(q){Ct(h,h.return,q)}}s&&S&64&&P0(w),Tl(w,w.return);break;case 27:G0(w);case 26:case 5:_r(y,w,s),s&&h===null&&S&4&&H0(w),Tl(w,w.return);break;case 12:_r(y,w,s);break;case 31:_r(y,w,s),s&&S&4&&W0(y,w);break;case 13:_r(y,w,s),s&&S&4&&K0(y,w);break;case 22:w.memoizedState===null&&_r(y,w,s),Tl(w,w.return);break;case 30:break;default:_r(y,w,s)}n=n.sibling}}function Jc(e,n){var s=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(s=e.memoizedState.cachePool.pool),e=null,n.memoizedState!==null&&n.memoizedState.cachePool!==null&&(e=n.memoizedState.cachePool.pool),e!==s&&(e!=null&&e.refCount++,s!=null&&dl(s))}function $c(e,n){e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&dl(e))}function Hi(e,n,s,h){if(n.subtreeFlags&10256)for(n=n.child;n!==null;)$0(e,n,s,h),n=n.sibling}function $0(e,n,s,h){var y=n.flags;switch(n.tag){case 0:case 11:case 15:Hi(e,n,s,h),y&2048&&Cl(9,n);break;case 1:Hi(e,n,s,h);break;case 3:Hi(e,n,s,h),y&2048&&(e=null,n.alternate!==null&&(e=n.alternate.memoizedState.cache),n=n.memoizedState.cache,n!==e&&(n.refCount++,e!=null&&dl(e)));break;case 12:if(y&2048){Hi(e,n,s,h),e=n.stateNode;try{var w=n.memoizedProps,S=w.id,R=w.onPostCommit;typeof R=="function"&&R(S,n.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(L){Ct(n,n.return,L)}}else Hi(e,n,s,h);break;case 31:Hi(e,n,s,h);break;case 13:Hi(e,n,s,h);break;case 23:break;case 22:w=n.stateNode,S=n.alternate,n.memoizedState!==null?w._visibility&2?Hi(e,n,s,h):Ol(e,n):w._visibility&2?Hi(e,n,s,h):(w._visibility|=2,_s(e,n,s,h,(n.subtreeFlags&10256)!==0||!1)),y&2048&&Jc(S,n);break;case 24:Hi(e,n,s,h),y&2048&&$c(n.alternate,n);break;default:Hi(e,n,s,h)}}function _s(e,n,s,h,y){for(y=y&&((n.subtreeFlags&10256)!==0||!1),n=n.child;n!==null;){var w=e,S=n,R=s,L=h,q=S.flags;switch(S.tag){case 0:case 11:case 15:_s(w,S,R,L,y),Cl(8,S);break;case 23:break;case 22:var re=S.stateNode;S.memoizedState!==null?re._visibility&2?_s(w,S,R,L,y):Ol(w,S):(re._visibility|=2,_s(w,S,R,L,y)),y&&q&2048&&Jc(S.alternate,S);break;case 24:_s(w,S,R,L,y),y&&q&2048&&$c(S.alternate,S);break;default:_s(w,S,R,L,y)}n=n.sibling}}function Ol(e,n){if(n.subtreeFlags&10256)for(n=n.child;n!==null;){var s=e,h=n,y=h.flags;switch(h.tag){case 22:Ol(s,h),y&2048&&Jc(h.alternate,h);break;case 24:Ol(s,h),y&2048&&$c(h.alternate,h);break;default:Ol(s,h)}n=n.sibling}}var Il=8192;function Cs(e,n,s){if(e.subtreeFlags&Il)for(e=e.child;e!==null;)ed(e,n,s),e=e.sibling}function ed(e,n,s){switch(e.tag){case 26:Cs(e,n,s),e.flags&Il&&e.memoizedState!==null&&z2(s,Fi,e.memoizedState,e.memoizedProps);break;case 5:Cs(e,n,s);break;case 3:case 4:var h=Fi;Fi=cu(e.stateNode.containerInfo),Cs(e,n,s),Fi=h;break;case 22:e.memoizedState===null&&(h=e.alternate,h!==null&&h.memoizedState!==null?(h=Il,Il=16777216,Cs(e,n,s),Il=h):Cs(e,n,s));break;default:Cs(e,n,s)}}function td(e){var n=e.alternate;if(n!==null&&(e=n.child,e!==null)){n.child=null;do n=e.sibling,e.sibling=null,e=n;while(e!==null)}}function Nl(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var h=n[s];_n=h,id(h,e)}td(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)nd(e),e=e.sibling}function nd(e){switch(e.tag){case 0:case 11:case 15:Nl(e),e.flags&2048&&ia(9,e,e.return);break;case 3:Nl(e);break;case 12:Nl(e);break;case 22:var n=e.stateNode;e.memoizedState!==null&&n._visibility&2&&(e.return===null||e.return.tag!==13)?(n._visibility&=-3,Qo(e)):Nl(e);break;default:Nl(e)}}function Qo(e){var n=e.deletions;if((e.flags&16)!==0){if(n!==null)for(var s=0;s<n.length;s++){var h=n[s];_n=h,id(h,e)}td(e)}for(e=e.child;e!==null;){switch(n=e,n.tag){case 0:case 11:case 15:ia(8,n,n.return),Qo(n);break;case 22:s=n.stateNode,s._visibility&2&&(s._visibility&=-3,Qo(n));break;default:Qo(n)}e=e.sibling}}function id(e,n){for(;_n!==null;){var s=_n;switch(s.tag){case 0:case 11:case 15:ia(8,s,n);break;case 23:case 22:if(s.memoizedState!==null&&s.memoizedState.cachePool!==null){var h=s.memoizedState.cachePool.pool;h!=null&&h.refCount++}break;case 24:dl(s.memoizedState.cache)}if(h=s.child,h!==null)h.return=s,_n=h;else e:for(s=e;_n!==null;){h=_n;var y=h.sibling,w=h.return;if(X0(h),h===s){_n=null;break e}if(y!==null){y.return=w,_n=y;break e}_n=w}}}var e2={getCacheForType:function(e){var n=Nn(hn),s=n.data.get(e);return s===void 0&&(s=e(),n.data.set(e,s)),s},cacheSignal:function(){return Nn(hn).controller.signal}},t2=typeof WeakMap=="function"?WeakMap:Map,wt=0,Ut=null,et=null,st=0,_t=0,fi=null,ra=!1,Ts=!1,eh=!1,Cr=0,en=0,aa=0,Ya=0,th=0,di=0,Os=0,Rl=null,$n=null,nh=!1,Jo=0,rd=0,$o=1/0,eu=null,sa=null,En=0,la=null,Is=null,Tr=0,ih=0,rh=null,ad=null,Dl=0,ah=null;function gi(){return(wt&2)!==0&&st!==0?st&-st:Q.T!==null?hh():kn()}function sd(){if(di===0)if((st&536870912)===0||ot){var e=rt;rt<<=1,(rt&3932160)===0&&(rt=262144),di=e}else di=536870912;return e=ci.current,e!==null&&(e.flags|=32),di}function ei(e,n,s){(e===Ut&&(_t===2||_t===9)||e.cancelPendingCommit!==null)&&(Ns(e,0),oa(e,st,di,!1)),Wi(e,s),((wt&2)===0||e!==Ut)&&(e===Ut&&((wt&2)===0&&(Ya|=s),en===4&&oa(e,st,di,!1)),rr(e))}function ld(e,n,s){if((wt&6)!==0)throw Error(d(327));var h=!s&&(n&127)===0&&(n&e.expiredLanes)===0||Tn(e,n),y=h?r2(e,n):lh(e,n,!0),w=h;do{if(y===0){Ts&&!h&&oa(e,n,0,!1);break}else{if(s=e.current.alternate,w&&!n2(s)){y=lh(e,n,!1),w=!1;continue}if(y===2){if(w=n,e.errorRecoveryDisabledLanes&w)var S=0;else S=e.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){n=S;e:{var R=e;y=Rl;var L=R.current.memoizedState.isDehydrated;if(L&&(Ns(R,S).flags|=256),S=lh(R,S,!1),S!==2){if(eh&&!L){R.errorRecoveryDisabledLanes|=w,Ya|=w,y=4;break e}w=$n,$n=y,w!==null&&($n===null?$n=w:$n.push.apply($n,w))}y=S}if(w=!1,y!==2)continue}}if(y===1){Ns(e,0),oa(e,n,0,!0);break}e:{switch(h=e,w=y,w){case 0:case 1:throw Error(d(345));case 4:if((n&4194048)!==n)break;case 6:oa(h,n,di,!ra);break e;case 2:$n=null;break;case 3:case 5:break;default:throw Error(d(329))}if((n&62914560)===n&&(y=Jo+300-Zt(),10<y)){if(oa(h,n,di,!ra),va(h,0,!0)!==0)break e;Tr=n,h.timeoutHandle=jd(od.bind(null,h,s,$n,eu,nh,n,di,Ya,Os,ra,w,"Throttled",-0,0),y);break e}od(h,s,$n,eu,nh,n,di,Ya,Os,ra,w,null,-0,0)}}break}while(!0);rr(e)}function od(e,n,s,h,y,w,S,R,L,q,re,le,X,J){if(e.timeoutHandle=-1,le=n.subtreeFlags,le&8192||(le&16785408)===16785408){le={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Xn},ed(n,w,le);var _e=(w&62914560)===w?Jo-Zt():(w&4194048)===w?rd-Zt():0;if(_e=P2(le,_e),_e!==null){Tr=w,e.cancelPendingCommit=_e(yd.bind(null,e,n,w,s,h,y,S,R,L,re,le,null,X,J)),oa(e,w,S,!q);return}}yd(e,n,w,s,h,y,S,R,L)}function n2(e){for(var n=e;;){var s=n.tag;if((s===0||s===11||s===15)&&n.flags&16384&&(s=n.updateQueue,s!==null&&(s=s.stores,s!==null)))for(var h=0;h<s.length;h++){var y=s[h],w=y.getSnapshot;y=y.value;try{if(!f(w(),y))return!1}catch{return!1}}if(s=n.child,n.subtreeFlags&16384&&s!==null)s.return=n,n=s;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function oa(e,n,s,h){n&=~th,n&=~Ya,e.suspendedLanes|=n,e.pingedLanes&=~n,h&&(e.warmLanes|=n),h=e.expirationTimes;for(var y=n;0<y;){var w=31-Ge(y),S=1<<w;h[w]=-1,y&=~S}s!==0&&ao(e,s,n)}function tu(){return(wt&6)===0?(Ml(0),!1):!0}function sh(){if(et!==null){if(_t===0)var e=et.return;else e=et,yr=ka=null,Ec(e),As=null,ml=0,e=et;for(;e!==null;)z0(e.alternate,e),e=e.return;et=null}}function Ns(e,n){var s=e.timeoutHandle;s!==-1&&(e.timeoutHandle=-1,E2(s)),s=e.cancelPendingCommit,s!==null&&(e.cancelPendingCommit=null,s()),Tr=0,sh(),Ut=e,et=s=gr(e.current,null),st=n,_t=0,fi=null,ra=!1,Ts=Tn(e,n),eh=!1,Os=di=th=Ya=aa=en=0,$n=Rl=null,nh=!1,(n&8)!==0&&(n|=n&32);var h=e.entangledLanes;if(h!==0)for(e=e.entanglements,h&=n;0<h;){var y=31-Ge(h),w=1<<y;n|=e[y],h&=~w}return Cr=n,Eo(),s}function ud(e,n){Ve=null,Q.H=vl,n===ws||n===No?(n=_f(),_t=3):n===cc?(n=_f(),_t=4):_t=n===jc?8:n!==null&&typeof n=="object"&&typeof n.then=="function"?6:1,fi=n,et===null&&(en=1,Go(e,Ci(n,e.current)))}function cd(){var e=ci.current;return e===null?!0:(st&4194048)===st?Ni===null:(st&62914560)===st||(st&536870912)!==0?e===Ni:!1}function hd(){var e=Q.H;return Q.H=vl,e===null?vl:e}function fd(){var e=Q.A;return Q.A=e2,e}function nu(){en=4,ra||(st&4194048)!==st&&ci.current!==null||(Ts=!0),(aa&134217727)===0&&(Ya&134217727)===0||Ut===null||oa(Ut,st,di,!1)}function lh(e,n,s){var h=wt;wt|=2;var y=hd(),w=fd();(Ut!==e||st!==n)&&(eu=null,Ns(e,n)),n=!1;var S=en;e:do try{if(_t!==0&&et!==null){var R=et,L=fi;switch(_t){case 8:sh(),S=6;break e;case 3:case 2:case 9:case 6:ci.current===null&&(n=!0);var q=_t;if(_t=0,fi=null,Rs(e,R,L,q),s&&Ts){S=0;break e}break;default:q=_t,_t=0,fi=null,Rs(e,R,L,q)}}i2(),S=en;break}catch(re){ud(e,re)}while(!0);return n&&e.shellSuspendCounter++,yr=ka=null,wt=h,Q.H=y,Q.A=w,et===null&&(Ut=null,st=0,Eo()),S}function i2(){for(;et!==null;)dd(et)}function r2(e,n){var s=wt;wt|=2;var h=hd(),y=fd();Ut!==e||st!==n?(eu=null,$o=Zt()+500,Ns(e,n)):Ts=Tn(e,n);e:do try{if(_t!==0&&et!==null){n=et;var w=fi;t:switch(_t){case 1:_t=0,fi=null,Rs(e,n,w,1);break;case 2:case 9:if(vf(w)){_t=0,fi=null,gd(n);break}n=function(){_t!==2&&_t!==9||Ut!==e||(_t=7),rr(e)},w.then(n,n);break e;case 3:_t=7;break e;case 4:_t=5;break e;case 7:vf(w)?(_t=0,fi=null,gd(n)):(_t=0,fi=null,Rs(e,n,w,7));break;case 5:var S=null;switch(et.tag){case 26:S=et.memoizedState;case 5:case 27:var R=et;if(S?$d(S):R.stateNode.complete){_t=0,fi=null;var L=R.sibling;if(L!==null)et=L;else{var q=R.return;q!==null?(et=q,iu(q)):et=null}break t}}_t=0,fi=null,Rs(e,n,w,5);break;case 6:_t=0,fi=null,Rs(e,n,w,6);break;case 8:sh(),en=6;break e;default:throw Error(d(462))}}a2();break}catch(re){ud(e,re)}while(!0);return yr=ka=null,Q.H=h,Q.A=y,wt=s,et!==null?0:(Ut=null,st=0,Eo(),en)}function a2(){for(;et!==null&&!Ja();)dd(et)}function dd(e){var n=U0(e.alternate,e,Cr);e.memoizedProps=e.pendingProps,n===null?iu(e):et=n}function gd(e){var n=e,s=n.alternate;switch(n.tag){case 15:case 0:n=R0(s,n,n.pendingProps,n.type,void 0,st);break;case 11:n=R0(s,n,n.pendingProps,n.type.render,n.ref,st);break;case 5:Ec(n);default:z0(s,n),n=et=ff(n,Cr),n=U0(s,n,Cr)}e.memoizedProps=e.pendingProps,n===null?iu(e):et=n}function Rs(e,n,s,h){yr=ka=null,Ec(n),As=null,ml=0;var y=n.return;try{if(Xg(e,y,n,s,st)){en=1,Go(e,Ci(s,e.current)),et=null;return}}catch(w){if(y!==null)throw et=y,w;en=1,Go(e,Ci(s,e.current)),et=null;return}n.flags&32768?(ot||h===1?e=!0:Ts||(st&536870912)!==0?e=!1:(ra=e=!0,(h===2||h===9||h===3||h===6)&&(h=ci.current,h!==null&&h.tag===13&&(h.flags|=16384))),md(n,e)):iu(n)}function iu(e){var n=e;do{if((n.flags&32768)!==0){md(n,ra);return}e=n.return;var s=Kg(n.alternate,n,Cr);if(s!==null){et=s;return}if(n=n.sibling,n!==null){et=n;return}et=n=e}while(n!==null);en===0&&(en=5)}function md(e,n){do{var s=Qg(e.alternate,e);if(s!==null){s.flags&=32767,et=s;return}if(s=e.return,s!==null&&(s.flags|=32768,s.subtreeFlags=0,s.deletions=null),!n&&(e=e.sibling,e!==null)){et=e;return}et=e=s}while(e!==null);en=6,et=null}function yd(e,n,s,h,y,w,S,R,L){e.cancelPendingCommit=null;do ru();while(En!==0);if((wt&6)!==0)throw Error(d(327));if(n!==null){if(n===e.current)throw Error(d(177));if(w=n.lanes|n.childLanes,w|=Wu,bi(e,s,w,S,R,L),e===Ut&&(et=Ut=null,st=0),Is=n,la=e,Tr=s,ih=w,rh=y,ad=h,(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,u2(ni,function(){return bd(),null})):(e.callbackNode=null,e.callbackPriority=0),h=(n.flags&13878)!==0,(n.subtreeFlags&13878)!==0||h){h=Q.T,Q.T=null,y=se.p,se.p=2,S=wt,wt|=4;try{Jg(e,n,s)}finally{wt=S,se.p=y,Q.T=h}}En=1,pd(),xd(),wd()}}function pd(){if(En===1){En=0;var e=la,n=Is,s=(n.flags&13878)!==0;if((n.subtreeFlags&13878)!==0||s){s=Q.T,Q.T=null;var h=se.p;se.p=2;var y=wt;wt|=4;try{Q0(n,e);var w=wh,S=O(e.containerInfo),R=w.focusedElem,L=w.selectionRange;if(S!==R&&R&&R.ownerDocument&&v(R.ownerDocument.documentElement,R)){if(L!==null&&I(R)){var q=L.start,re=L.end;if(re===void 0&&(re=q),"selectionStart"in R)R.selectionStart=q,R.selectionEnd=Math.min(re,R.value.length);else{var le=R.ownerDocument||document,X=le&&le.defaultView||window;if(X.getSelection){var J=X.getSelection(),_e=R.textContent.length,ke=Math.min(L.start,_e),Dt=L.end===void 0?ke:Math.min(L.end,_e);!J.extend&&ke>Dt&&(S=Dt,Dt=ke,ke=S);var H=A(R,ke),j=A(R,Dt);if(H&&j&&(J.rangeCount!==1||J.anchorNode!==H.node||J.anchorOffset!==H.offset||J.focusNode!==j.node||J.focusOffset!==j.offset)){var Y=le.createRange();Y.setStart(H.node,H.offset),J.removeAllRanges(),ke>Dt?(J.addRange(Y),J.extend(j.node,j.offset)):(Y.setEnd(j.node,j.offset),J.addRange(Y))}}}}for(le=[],J=R;J=J.parentNode;)J.nodeType===1&&le.push({element:J,left:J.scrollLeft,top:J.scrollTop});for(typeof R.focus=="function"&&R.focus(),R=0;R<le.length;R++){var ae=le[R];ae.element.scrollLeft=ae.left,ae.element.scrollTop=ae.top}}yu=!!xh,wh=xh=null}finally{wt=y,se.p=h,Q.T=s}}e.current=n,En=2}}function xd(){if(En===2){En=0;var e=la,n=Is,s=(n.flags&8772)!==0;if((n.subtreeFlags&8772)!==0||s){s=Q.T,Q.T=null;var h=se.p;se.p=2;var y=wt;wt|=4;try{q0(e,n.alternate,n)}finally{wt=y,se.p=h,Q.T=s}}En=3}}function wd(){if(En===4||En===3){En=0,ro();var e=la,n=Is,s=Tr,h=ad;(n.subtreeFlags&10256)!==0||(n.flags&10256)!==0?En=5:(En=0,Is=la=null,Ad(e,e.pendingLanes));var y=e.pendingLanes;if(y===0&&(sa=null),Bi(s),n=n.stateNode,me&&typeof me.onCommitFiberRoot=="function")try{me.onCommitFiberRoot(jt,n,void 0,(n.current.flags&128)===128)}catch{}if(h!==null){n=Q.T,y=se.p,se.p=2,Q.T=null;try{for(var w=e.onRecoverableError,S=0;S<h.length;S++){var R=h[S];w(R.value,{componentStack:R.stack})}}finally{Q.T=n,se.p=y}}(Tr&3)!==0&&ru(),rr(e),y=e.pendingLanes,(s&261930)!==0&&(y&42)!==0?e===ah?Dl++:(Dl=0,ah=e):Dl=0,Ml(0)}}function Ad(e,n){(e.pooledCacheLanes&=n)===0&&(n=e.pooledCache,n!=null&&(e.pooledCache=null,dl(n)))}function ru(){return pd(),xd(),wd(),bd()}function bd(){if(En!==5)return!1;var e=la,n=ih;ih=0;var s=Bi(Tr),h=Q.T,y=se.p;try{se.p=32>s?32:s,Q.T=null,s=rh,rh=null;var w=la,S=Tr;if(En=0,Is=la=null,Tr=0,(wt&6)!==0)throw Error(d(331));var R=wt;if(wt|=4,nd(w.current),$0(w,w.current,S,s),wt=R,Ml(0,!1),me&&typeof me.onPostCommitFiberRoot=="function")try{me.onPostCommitFiberRoot(jt,w)}catch{}return!0}finally{se.p=y,Q.T=h,Ad(e,n)}}function Ed(e,n,s){n=Ci(s,n),n=Uc(e.stateNode,n,2),e=ea(e,n,2),e!==null&&(Wi(e,2),rr(e))}function Ct(e,n,s){if(e.tag===3)Ed(e,e,s);else for(;n!==null;){if(n.tag===3){Ed(n,e,s);break}else if(n.tag===1){var h=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof h.componentDidCatch=="function"&&(sa===null||!sa.has(h))){e=Ci(s,e),s=v0(2),h=ea(n,s,2),h!==null&&(S0(s,h,n,e),Wi(h,2),rr(h));break}}n=n.return}}function oh(e,n,s){var h=e.pingCache;if(h===null){h=e.pingCache=new t2;var y=new Set;h.set(n,y)}else y=h.get(n),y===void 0&&(y=new Set,h.set(n,y));y.has(s)||(eh=!0,y.add(s),e=s2.bind(null,e,n,s),n.then(e,e))}function s2(e,n,s){var h=e.pingCache;h!==null&&h.delete(n),e.pingedLanes|=e.suspendedLanes&s,e.warmLanes&=~s,Ut===e&&(st&s)===s&&(en===4||en===3&&(st&62914560)===st&&300>Zt()-Jo?(wt&2)===0&&Ns(e,0):th|=s,Os===st&&(Os=0)),rr(e)}function vd(e,n){n===0&&(n=xn()),e=Ma(e,n),e!==null&&(Wi(e,n),rr(e))}function l2(e){var n=e.memoizedState,s=0;n!==null&&(s=n.retryLane),vd(e,s)}function o2(e,n){var s=0;switch(e.tag){case 31:case 13:var h=e.stateNode,y=e.memoizedState;y!==null&&(s=y.retryLane);break;case 19:h=e.stateNode;break;case 22:h=e.stateNode._retryCache;break;default:throw Error(d(314))}h!==null&&h.delete(n),vd(e,s)}function u2(e,n){return Mr(e,n)}var au=null,Ds=null,uh=!1,su=!1,ch=!1,ua=0;function rr(e){e!==Ds&&e.next===null&&(Ds===null?au=Ds=e:Ds=Ds.next=e),su=!0,uh||(uh=!0,h2())}function Ml(e,n){if(!ch&&su){ch=!0;do for(var s=!1,h=au;h!==null;){if(e!==0){var y=h.pendingLanes;if(y===0)var w=0;else{var S=h.suspendedLanes,R=h.pingedLanes;w=(1<<31-Ge(42|e)+1)-1,w&=y&~(S&~R),w=w&201326741?w&201326741|1:w?w|2:0}w!==0&&(s=!0,Td(h,w))}else w=st,w=va(h,h===Ut?w:0,h.cancelPendingCommit!==null||h.timeoutHandle!==-1),(w&3)===0||Tn(h,w)||(s=!0,Td(h,w));h=h.next}while(s);ch=!1}}function c2(){Sd()}function Sd(){su=uh=!1;var e=0;ua!==0&&b2()&&(e=ua);for(var n=Zt(),s=null,h=au;h!==null;){var y=h.next,w=_d(h,n);w===0?(h.next=null,s===null?au=y:s.next=y,y===null&&(Ds=s)):(s=h,(e!==0||(w&3)!==0)&&(su=!0)),h=y}En!==0&&En!==5||Ml(e),ua!==0&&(ua=0)}function _d(e,n){for(var s=e.suspendedLanes,h=e.pingedLanes,y=e.expirationTimes,w=e.pendingLanes&-62914561;0<w;){var S=31-Ge(w),R=1<<S,L=y[S];L===-1?((R&s)===0||(R&h)!==0)&&(y[S]=el(R,n)):L<=n&&(e.expiredLanes|=R),w&=~R}if(n=Ut,s=st,s=va(e,e===n?s:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),h=e.callbackNode,s===0||e===n&&(_t===2||_t===9)||e.cancelPendingCommit!==null)return h!==null&&h!==null&&Se(h),e.callbackNode=null,e.callbackPriority=0;if((s&3)===0||Tn(e,s)){if(n=s&-s,n===e.callbackPriority)return n;switch(h!==null&&Se(h),Bi(s)){case 2:case 8:s=Qs;break;case 32:s=ni;break;case 268435456:s=Js;break;default:s=ni}return h=Cd.bind(null,e),s=Mr(s,h),e.callbackPriority=n,e.callbackNode=s,n}return h!==null&&h!==null&&Se(h),e.callbackPriority=2,e.callbackNode=null,2}function Cd(e,n){if(En!==0&&En!==5)return e.callbackNode=null,e.callbackPriority=0,null;var s=e.callbackNode;if(ru()&&e.callbackNode!==s)return null;var h=st;return h=va(e,e===Ut?h:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),h===0?null:(ld(e,h,n),_d(e,Zt()),e.callbackNode!=null&&e.callbackNode===s?Cd.bind(null,e):null)}function Td(e,n){if(ru())return null;ld(e,n,!0)}function h2(){v2(function(){(wt&6)!==0?Mr(Yn,c2):Sd()})}function hh(){if(ua===0){var e=ps;e===0&&(e=Ea,Ea<<=1,(Ea&261888)===0&&(Ea=256)),ua=e}return ua}function Od(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Pr(""+e)}function Id(e,n){var s=n.ownerDocument.createElement("input");return s.name=n.name,s.value=n.value,e.id&&s.setAttribute("form",e.id),n.parentNode.insertBefore(s,n),e=new FormData(e),s.parentNode.removeChild(s),e}function f2(e,n,s,h,y){if(n==="submit"&&s&&s.stateNode===y){var w=Od((y[St]||null).action),S=h.submitter;S&&(n=(n=S[St]||null)?Od(n.formAction):S.getAttribute("formAction"),n!==null&&(w=n,S=null));var R=new wn("action","action",null,h,y);e.push({event:R,listeners:[{instance:null,listener:function(){if(h.defaultPrevented){if(ua!==0){var L=S?Id(y,S):new FormData(y);Rc(s,{pending:!0,data:L,method:y.method,action:w},null,L)}}else typeof w=="function"&&(R.preventDefault(),L=S?Id(y,S):new FormData(y),Rc(s,{pending:!0,data:L,method:y.method,action:w},w,L))},currentTarget:y}]})}}for(var fh=0;fh<cl.length;fh++){var dh=cl[fh],d2=dh.toLowerCase(),g2=dh[0].toUpperCase()+dh.slice(1);Pi(d2,"on"+g2)}Pi(Wn,"onAnimationEnd"),Pi(On,"onAnimationIteration"),Pi(Et,"onAnimationStart"),Pi("dblclick","onDoubleClick"),Pi("focusin","onFocus"),Pi("focusout","onBlur"),Pi(bn,"onTransitionRun"),Pi(Fn,"onTransitionStart"),Pi(Xr,"onTransitionCancel"),Pi(dr,"onTransitionEnd"),ri("onMouseEnter",["mouseout","mouseover"]),ri("onMouseLeave",["mouseout","mouseover"]),ri("onPointerEnter",["pointerout","pointerover"]),ri("onPointerLeave",["pointerout","pointerover"]),At("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),At("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),At("onBeforeInput",["compositionend","keypress","textInput","paste"]),At("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),At("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),At("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bl="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),m2=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Bl));function Nd(e,n){n=(n&4)!==0;for(var s=0;s<e.length;s++){var h=e[s],y=h.event;h=h.listeners;e:{var w=void 0;if(n)for(var S=h.length-1;0<=S;S--){var R=h[S],L=R.instance,q=R.currentTarget;if(R=R.listener,L!==w&&y.isPropagationStopped())break e;w=R,y.currentTarget=q;try{w(y)}catch(re){bo(re)}y.currentTarget=null,w=L}else for(S=0;S<h.length;S++){if(R=h[S],L=R.instance,q=R.currentTarget,R=R.listener,L!==w&&y.isPropagationStopped())break e;w=R,y.currentTarget=q;try{w(y)}catch(re){bo(re)}y.currentTarget=null,w=L}}}}function tt(e,n){var s=n[Br];s===void 0&&(s=n[Br]=new Set);var h=e+"__bubble";s.has(h)||(Rd(n,e,2,!1),s.add(h))}function gh(e,n,s){var h=0;n&&(h|=4),Rd(s,e,h,n)}var lu="_reactListening"+Math.random().toString(36).slice(2);function mh(e){if(!e[lu]){e[lu]=!0,ue.forEach(function(s){s!=="selectionchange"&&(m2.has(s)||gh(s,!1,e),gh(s,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[lu]||(n[lu]=!0,gh("selectionchange",!1,n))}}function Rd(e,n,s,h){switch(s1(n)){case 2:var y=V2;break;case 8:y=G2;break;default:y=Nh}s=y.bind(null,n,s,e),y=void 0,!il||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(y=!0),h?y!==void 0?e.addEventListener(n,s,{capture:!0,passive:y}):e.addEventListener(n,s,!0):y!==void 0?e.addEventListener(n,s,{passive:y}):e.addEventListener(n,s,!1)}function yh(e,n,s,h,y){var w=h;if((n&1)===0&&(n&2)===0&&h!==null)e:for(;;){if(h===null)return;var S=h.tag;if(S===3||S===4){var R=h.stateNode.containerInfo;if(R===y)break;if(S===4)for(S=h.return;S!==null;){var L=S.tag;if((L===3||L===4)&&S.stateNode.containerInfo===y)return;S=S.return}for(;R!==null;){if(S=Kt(R),S===null)return;if(L=S.tag,L===5||L===6||L===26||L===27){h=w=S;continue e}R=R.parentNode}}h=h.return}uo(function(){var q=w,re=nl(s),le=[];e:{var X=Ao.get(e);if(X!==void 0){var J=wn,_e=e;switch(e){case"keypress":if(Qi(s)===0)break e;case"keydown":case"keyup":J=os;break;case"focusin":_e="focus",J=sl;break;case"focusout":_e="blur",J=sl;break;case"beforeblur":case"afterblur":J=sl;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":J=xt;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":J=ss;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":J=qu;break;case Wn:case On:case Et:J=Ye;break;case dr:J=ur;break;case"scroll":case"scrollend":J=co;break;case"wheel":J=Xu;break;case"copy":case"cut":case"paste":J=ls;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":J=bt;break;case"toggle":case"beforetoggle":J=ol}var ke=(n&4)!==0,Dt=!ke&&(e==="scroll"||e==="scrollend"),H=ke?X!==null?X+"Capture":null:X;ke=[];for(var j=q,Y;j!==null;){var ae=j;if(Y=ae.stateNode,ae=ae.tag,ae!==5&&ae!==26&&ae!==27||Y===null||H===null||(ae=Pe(j,H),ae!=null&&ke.push(Ll(j,ae,Y))),Dt)break;j=j.return}0<ke.length&&(X=new J(X,_e,null,s,re),le.push({event:X,listeners:ke}))}}if((n&7)===0){e:{if(X=e==="mouseover"||e==="pointerover",J=e==="mouseout"||e==="pointerout",X&&s!==_a&&(_e=s.relatedTarget||s.fromElement)&&(Kt(_e)||_e[ii]))break e;if((J||X)&&(X=re.window===re?re:(X=re.ownerDocument)?X.defaultView||X.parentWindow:window,J?(_e=s.relatedTarget||s.toElement,J=q,_e=_e?Kt(_e):null,_e!==null&&(Dt=m(_e),ke=_e.tag,_e!==Dt||ke!==5&&ke!==27&&ke!==6)&&(_e=null)):(J=null,_e=q),J!==_e)){if(ke=xt,ae="onMouseLeave",H="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(ke=bt,ae="onPointerLeave",H="onPointerEnter",j="pointer"),Dt=J==null?X:Lr(J),Y=_e==null?X:Lr(_e),X=new ke(ae,j+"leave",J,s,re),X.target=Dt,X.relatedTarget=Y,ae=null,Kt(re)===q&&(ke=new ke(H,j+"enter",_e,s,re),ke.target=Y,ke.relatedTarget=Dt,ae=ke),Dt=ae,J&&_e)t:{for(ke=y2,H=J,j=_e,Y=0,ae=H;ae;ae=ke(ae))Y++;ae=0;for(var Re=j;Re;Re=ke(Re))ae++;for(;0<Y-ae;)H=ke(H),Y--;for(;0<ae-Y;)j=ke(j),ae--;for(;Y--;){if(H===j||j!==null&&H===j.alternate){ke=H;break t}H=ke(H),j=ke(j)}ke=null}else ke=null;J!==null&&Dd(le,X,J,ke,!1),_e!==null&&Dt!==null&&Dd(le,Dt,_e,ke,!0)}}e:{if(X=q?Lr(q):window,J=X.nodeName&&X.nodeName.toLowerCase(),J==="select"||J==="input"&&X.type==="file")var mt=oi;else if(ul(X))if(wo)mt=o;else{mt=i;var Oe=t}else J=X.nodeName,!J||J.toLowerCase()!=="input"||X.type!=="checkbox"&&X.type!=="radio"?q&&Bt(q.elementType)&&(mt=oi):mt=a;if(mt&&(mt=mt(e,q))){li(le,mt,s,re);break e}Oe&&Oe(e,X,q),e==="focusout"&&q&&X.type==="number"&&q.memoizedProps.value!=null&&M(X,"number",X.value)}switch(Oe=q?Lr(q):window,e){case"focusin":(ul(Oe)||Oe.contentEditable==="true")&&(k=Oe,U=q,V=null);break;case"focusout":V=U=k=null;break;case"mousedown":Z=!0;break;case"contextmenu":case"mouseup":case"dragend":Z=!1,ge(le,s,re);break;case"selectionchange":if(B)break;case"keydown":case"keyup":ge(le,s,re)}var qe;if(Oa)e:{switch(e){case"compositionstart":var lt="onCompositionStart";break e;case"compositionend":lt="onCompositionEnd";break e;case"compositionupdate":lt="onCompositionUpdate";break e}lt=void 0}else qr?xo(e,s)&&(lt="onCompositionEnd"):e==="keydown"&&s.keyCode===229&&(lt="onCompositionStart");lt&&(po&&s.locale!=="ko"&&(qr||lt!=="onCompositionStart"?lt==="onCompositionEnd"&&qr&&(qe=Fr()):(ji=re,zi="value"in ji?ji.value:ji.textContent,qr=!0)),Oe=ou(q,lt),0<Oe.length&&(lt=new go(lt,e,null,s,re),le.push({event:lt,listeners:Oe}),qe?lt.data=qe:(qe=Yr(s),qe!==null&&(lt.data=qe)))),(qe=yo?er(e,s):cs(e,s))&&(lt=ou(q,"onBeforeInput"),0<lt.length&&(Oe=new go("onBeforeInput","beforeinput",null,s,re),le.push({event:Oe,listeners:lt}),Oe.data=qe)),f2(le,e,q,s,re)}Nd(le,n)})}function Ll(e,n,s){return{instance:e,listener:n,currentTarget:s}}function ou(e,n){for(var s=n+"Capture",h=[];e!==null;){var y=e,w=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||w===null||(y=Pe(e,s),y!=null&&h.unshift(Ll(e,y,w)),y=Pe(e,n),y!=null&&h.push(Ll(e,y,w))),e.tag===3)return h;e=e.return}return[]}function y2(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function Dd(e,n,s,h,y){for(var w=n._reactName,S=[];s!==null&&s!==h;){var R=s,L=R.alternate,q=R.stateNode;if(R=R.tag,L!==null&&L===h)break;R!==5&&R!==26&&R!==27||q===null||(L=q,y?(q=Pe(s,w),q!=null&&S.unshift(Ll(s,q,L))):y||(q=Pe(s,w),q!=null&&S.push(Ll(s,q,L)))),s=s.return}S.length!==0&&e.push({event:n,listeners:S})}var p2=/\r\n?/g,x2=/\u0000|\uFFFD/g;function Md(e){return(typeof e=="string"?e:""+e).replace(p2,`
`).replace(x2,"")}function Bd(e,n){return n=Md(n),Md(e)===n}function Rt(e,n,s,h,y,w){switch(s){case"children":typeof h=="string"?n==="body"||n==="textarea"&&h===""||zr(e,h):(typeof h=="number"||typeof h=="bigint")&&n!=="body"&&zr(e,""+h);break;case"className":Ur(e,"class",h);break;case"tabIndex":Ur(e,"tabindex",h);break;case"dir":case"role":case"viewBox":case"width":case"height":Ur(e,s,h);break;case"style":Ne(e,h,w);break;case"data":if(n!=="object"){Ur(e,"data",h);break}case"src":case"href":if(h===""&&(n!=="a"||s!=="href")){e.removeAttribute(s);break}if(h==null||typeof h=="function"||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(s);break}h=Pr(""+h),e.setAttribute(s,h);break;case"action":case"formAction":if(typeof h=="function"){e.setAttribute(s,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof w=="function"&&(s==="formAction"?(n!=="input"&&Rt(e,n,"name",y.name,y,null),Rt(e,n,"formEncType",y.formEncType,y,null),Rt(e,n,"formMethod",y.formMethod,y,null),Rt(e,n,"formTarget",y.formTarget,y,null)):(Rt(e,n,"encType",y.encType,y,null),Rt(e,n,"method",y.method,y,null),Rt(e,n,"target",y.target,y,null)));if(h==null||typeof h=="symbol"||typeof h=="boolean"){e.removeAttribute(s);break}h=Pr(""+h),e.setAttribute(s,h);break;case"onClick":h!=null&&(e.onclick=Xn);break;case"onScroll":h!=null&&tt("scroll",e);break;case"onScrollEnd":h!=null&&tt("scrollend",e);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(d(61));if(s=h.__html,s!=null){if(y.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"multiple":e.multiple=h&&typeof h!="function"&&typeof h!="symbol";break;case"muted":e.muted=h&&typeof h!="function"&&typeof h!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(h==null||typeof h=="function"||typeof h=="boolean"||typeof h=="symbol"){e.removeAttribute("xlink:href");break}s=Pr(""+h),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",s);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(s,""+h):e.removeAttribute(s);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":h&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(s,""):e.removeAttribute(s);break;case"capture":case"download":h===!0?e.setAttribute(s,""):h!==!1&&h!=null&&typeof h!="function"&&typeof h!="symbol"?e.setAttribute(s,h):e.removeAttribute(s);break;case"cols":case"rows":case"size":case"span":h!=null&&typeof h!="function"&&typeof h!="symbol"&&!isNaN(h)&&1<=h?e.setAttribute(s,h):e.removeAttribute(s);break;case"rowSpan":case"start":h==null||typeof h=="function"||typeof h=="symbol"||isNaN(h)?e.removeAttribute(s):e.setAttribute(s,h);break;case"popover":tt("beforetoggle",e),tt("toggle",e),kr(e,"popover",h);break;case"xlinkActuate":ai(e,"http://www.w3.org/1999/xlink","xlink:actuate",h);break;case"xlinkArcrole":ai(e,"http://www.w3.org/1999/xlink","xlink:arcrole",h);break;case"xlinkRole":ai(e,"http://www.w3.org/1999/xlink","xlink:role",h);break;case"xlinkShow":ai(e,"http://www.w3.org/1999/xlink","xlink:show",h);break;case"xlinkTitle":ai(e,"http://www.w3.org/1999/xlink","xlink:title",h);break;case"xlinkType":ai(e,"http://www.w3.org/1999/xlink","xlink:type",h);break;case"xmlBase":ai(e,"http://www.w3.org/XML/1998/namespace","xml:base",h);break;case"xmlLang":ai(e,"http://www.w3.org/XML/1998/namespace","xml:lang",h);break;case"xmlSpace":ai(e,"http://www.w3.org/XML/1998/namespace","xml:space",h);break;case"is":kr(e,"is",h);break;case"innerText":case"textContent":break;default:(!(2<s.length)||s[0]!=="o"&&s[0]!=="O"||s[1]!=="n"&&s[1]!=="N")&&(s=oo.get(s)||s,kr(e,s,h))}}function ph(e,n,s,h,y,w){switch(s){case"style":Ne(e,h,w);break;case"dangerouslySetInnerHTML":if(h!=null){if(typeof h!="object"||!("__html"in h))throw Error(d(61));if(s=h.__html,s!=null){if(y.children!=null)throw Error(d(60));e.innerHTML=s}}break;case"children":typeof h=="string"?zr(e,h):(typeof h=="number"||typeof h=="bigint")&&zr(e,""+h);break;case"onScroll":h!=null&&tt("scroll",e);break;case"onScrollEnd":h!=null&&tt("scrollend",e);break;case"onClick":h!=null&&(e.onclick=Xn);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!lo.hasOwnProperty(s))e:{if(s[0]==="o"&&s[1]==="n"&&(y=s.endsWith("Capture"),n=s.slice(2,y?s.length-7:void 0),w=e[St]||null,w=w!=null?w[s]:null,typeof w=="function"&&e.removeEventListener(n,w,y),typeof h=="function")){typeof w!="function"&&w!==null&&(s in e?e[s]=null:e.hasAttribute(s)&&e.removeAttribute(s)),e.addEventListener(n,h,y);break e}s in e?e[s]=h:h===!0?e.setAttribute(s,""):kr(e,s,h)}}}function Dn(e,n,s){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":tt("error",e),tt("load",e);var h=!1,y=!1,w;for(w in s)if(s.hasOwnProperty(w)){var S=s[w];if(S!=null)switch(w){case"src":h=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(d(137,n));default:Rt(e,n,w,S,s,null)}}y&&Rt(e,n,"srcSet",s.srcSet,s,null),h&&Rt(e,n,"src",s.src,s,null);return;case"input":tt("invalid",e);var R=w=S=y=null,L=null,q=null;for(h in s)if(s.hasOwnProperty(h)){var re=s[h];if(re!=null)switch(h){case"name":y=re;break;case"type":S=re;break;case"checked":L=re;break;case"defaultChecked":q=re;break;case"value":w=re;break;case"defaultValue":R=re;break;case"children":case"dangerouslySetInnerHTML":if(re!=null)throw Error(d(137,n));break;default:Rt(e,n,h,re,s,null)}}G(e,w,R,L,q,S,y,!1);return;case"select":tt("invalid",e),h=S=w=null;for(y in s)if(s.hasOwnProperty(y)&&(R=s[y],R!=null))switch(y){case"value":w=R;break;case"defaultValue":S=R;break;case"multiple":h=R;default:Rt(e,n,y,R,s,null)}n=w,s=S,e.multiple=!!h,n!=null?Ce(e,!!h,n,!1):s!=null&&Ce(e,!!h,s,!0);return;case"textarea":tt("invalid",e),w=y=h=null;for(S in s)if(s.hasOwnProperty(S)&&(R=s[S],R!=null))switch(S){case"value":h=R;break;case"defaultValue":y=R;break;case"children":w=R;break;case"dangerouslySetInnerHTML":if(R!=null)throw Error(d(91));break;default:Rt(e,n,S,R,s,null)}zn(e,h,y,w);return;case"option":for(L in s)s.hasOwnProperty(L)&&(h=s[L],h!=null)&&(L==="selected"?e.selected=h&&typeof h!="function"&&typeof h!="symbol":Rt(e,n,L,h,s,null));return;case"dialog":tt("beforetoggle",e),tt("toggle",e),tt("cancel",e),tt("close",e);break;case"iframe":case"object":tt("load",e);break;case"video":case"audio":for(h=0;h<Bl.length;h++)tt(Bl[h],e);break;case"image":tt("error",e),tt("load",e);break;case"details":tt("toggle",e);break;case"embed":case"source":case"link":tt("error",e),tt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(q in s)if(s.hasOwnProperty(q)&&(h=s[q],h!=null))switch(q){case"children":case"dangerouslySetInnerHTML":throw Error(d(137,n));default:Rt(e,n,q,h,s,null)}return;default:if(Bt(n)){for(re in s)s.hasOwnProperty(re)&&(h=s[re],h!==void 0&&ph(e,n,re,h,s,void 0));return}}for(R in s)s.hasOwnProperty(R)&&(h=s[R],h!=null&&Rt(e,n,R,h,s,null))}function w2(e,n,s,h){switch(n){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,w=null,S=null,R=null,L=null,q=null,re=null;for(J in s){var le=s[J];if(s.hasOwnProperty(J)&&le!=null)switch(J){case"checked":break;case"value":break;case"defaultValue":L=le;default:h.hasOwnProperty(J)||Rt(e,n,J,null,h,le)}}for(var X in h){var J=h[X];if(le=s[X],h.hasOwnProperty(X)&&(J!=null||le!=null))switch(X){case"type":w=J;break;case"name":y=J;break;case"checked":q=J;break;case"defaultChecked":re=J;break;case"value":S=J;break;case"defaultValue":R=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(d(137,n));break;default:J!==le&&Rt(e,n,X,J,h,le)}}un(e,S,R,L,q,re,w,y);return;case"select":J=S=R=X=null;for(w in s)if(L=s[w],s.hasOwnProperty(w)&&L!=null)switch(w){case"value":break;case"multiple":J=L;default:h.hasOwnProperty(w)||Rt(e,n,w,null,h,L)}for(y in h)if(w=h[y],L=s[y],h.hasOwnProperty(y)&&(w!=null||L!=null))switch(y){case"value":X=w;break;case"defaultValue":R=w;break;case"multiple":S=w;default:w!==L&&Rt(e,n,y,w,h,L)}n=R,s=S,h=J,X!=null?Ce(e,!!s,X,!1):!!h!=!!s&&(n!=null?Ce(e,!!s,n,!0):Ce(e,!!s,s?[]:"",!1));return;case"textarea":J=X=null;for(R in s)if(y=s[R],s.hasOwnProperty(R)&&y!=null&&!h.hasOwnProperty(R))switch(R){case"value":break;case"children":break;default:Rt(e,n,R,null,h,y)}for(S in h)if(y=h[S],w=s[S],h.hasOwnProperty(S)&&(y!=null||w!=null))switch(S){case"value":X=y;break;case"defaultValue":J=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(d(91));break;default:y!==w&&Rt(e,n,S,y,h,w)}an(e,X,J);return;case"option":for(var _e in s)X=s[_e],s.hasOwnProperty(_e)&&X!=null&&!h.hasOwnProperty(_e)&&(_e==="selected"?e.selected=!1:Rt(e,n,_e,null,h,X));for(L in h)X=h[L],J=s[L],h.hasOwnProperty(L)&&X!==J&&(X!=null||J!=null)&&(L==="selected"?e.selected=X&&typeof X!="function"&&typeof X!="symbol":Rt(e,n,L,X,h,J));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var ke in s)X=s[ke],s.hasOwnProperty(ke)&&X!=null&&!h.hasOwnProperty(ke)&&Rt(e,n,ke,null,h,X);for(q in h)if(X=h[q],J=s[q],h.hasOwnProperty(q)&&X!==J&&(X!=null||J!=null))switch(q){case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(d(137,n));break;default:Rt(e,n,q,X,h,J)}return;default:if(Bt(n)){for(var Dt in s)X=s[Dt],s.hasOwnProperty(Dt)&&X!==void 0&&!h.hasOwnProperty(Dt)&&ph(e,n,Dt,void 0,h,X);for(re in h)X=h[re],J=s[re],!h.hasOwnProperty(re)||X===J||X===void 0&&J===void 0||ph(e,n,re,X,h,J);return}}for(var H in s)X=s[H],s.hasOwnProperty(H)&&X!=null&&!h.hasOwnProperty(H)&&Rt(e,n,H,null,h,X);for(le in h)X=h[le],J=s[le],!h.hasOwnProperty(le)||X===J||X==null&&J==null||Rt(e,n,le,X,h,J)}function Ld(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function A2(){if(typeof performance.getEntriesByType=="function"){for(var e=0,n=0,s=performance.getEntriesByType("resource"),h=0;h<s.length;h++){var y=s[h],w=y.transferSize,S=y.initiatorType,R=y.duration;if(w&&R&&Ld(S)){for(S=0,R=y.responseEnd,h+=1;h<s.length;h++){var L=s[h],q=L.startTime;if(q>R)break;var re=L.transferSize,le=L.initiatorType;re&&Ld(le)&&(L=L.responseEnd,S+=re*(L<R?1:(R-q)/(L-q)))}if(--h,n+=8*(w+S)/(y.duration/1e3),e++,10<e)break}}if(0<e)return n/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var xh=null,wh=null;function uu(e){return e.nodeType===9?e:e.ownerDocument}function kd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Ud(e,n){if(e===0)switch(n){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&n==="foreignObject"?0:e}function Ah(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.children=="bigint"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var bh=null;function b2(){var e=window.event;return e&&e.type==="popstate"?e===bh?!1:(bh=e,!0):(bh=null,!1)}var jd=typeof setTimeout=="function"?setTimeout:void 0,E2=typeof clearTimeout=="function"?clearTimeout:void 0,zd=typeof Promise=="function"?Promise:void 0,v2=typeof queueMicrotask=="function"?queueMicrotask:typeof zd<"u"?function(e){return zd.resolve(null).then(e).catch(S2)}:jd;function S2(e){setTimeout(function(){throw e})}function ca(e){return e==="head"}function Pd(e,n){var s=n,h=0;do{var y=s.nextSibling;if(e.removeChild(s),y&&y.nodeType===8)if(s=y.data,s==="/$"||s==="/&"){if(h===0){e.removeChild(y),ks(n);return}h--}else if(s==="$"||s==="$?"||s==="$~"||s==="$!"||s==="&")h++;else if(s==="html")kl(e.ownerDocument.documentElement);else if(s==="head"){s=e.ownerDocument.head,kl(s);for(var w=s.firstChild;w;){var S=w.nextSibling,R=w.nodeName;w[Sa]||R==="SCRIPT"||R==="STYLE"||R==="LINK"&&w.rel.toLowerCase()==="stylesheet"||s.removeChild(w),w=S}}else s==="body"&&kl(e.ownerDocument.body);s=y}while(s);ks(n)}function Fd(e,n){var s=e;e=0;do{var h=s.nextSibling;if(s.nodeType===1?n?(s._stashedDisplay=s.style.display,s.style.display="none"):(s.style.display=s._stashedDisplay||"",s.getAttribute("style")===""&&s.removeAttribute("style")):s.nodeType===3&&(n?(s._stashedText=s.nodeValue,s.nodeValue=""):s.nodeValue=s._stashedText||""),h&&h.nodeType===8)if(s=h.data,s==="/$"){if(e===0)break;e--}else s!=="$"&&s!=="$?"&&s!=="$~"&&s!=="$!"||e++;s=h}while(s)}function Eh(e){var n=e.firstChild;for(n&&n.nodeType===10&&(n=n.nextSibling);n;){var s=n;switch(n=n.nextSibling,s.nodeName){case"HTML":case"HEAD":case"BODY":Eh(s),qn(s);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(s.rel.toLowerCase()==="stylesheet")continue}e.removeChild(s)}}function _2(e,n,s,h){for(;e.nodeType===1;){var y=s;if(e.nodeName.toLowerCase()!==n.toLowerCase()){if(!h&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(h){if(!e[Sa])switch(n){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(w=e.getAttribute("rel"),w==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(w!==y.rel||e.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||e.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||e.getAttribute("title")!==(y.title==null?null:y.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(w=e.getAttribute("src"),(w!==(y.src==null?null:y.src)||e.getAttribute("type")!==(y.type==null?null:y.type)||e.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&w&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(n==="input"&&e.type==="hidden"){var w=y.name==null?null:""+y.name;if(y.type==="hidden"&&e.getAttribute("name")===w)return e}else return e;if(e=Ri(e.nextSibling),e===null)break}return null}function C2(e,n,s){if(n==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!s||(e=Ri(e.nextSibling),e===null))return null;return e}function Hd(e,n){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!n||(e=Ri(e.nextSibling),e===null))return null;return e}function vh(e){return e.data==="$?"||e.data==="$~"}function Sh(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function T2(e,n){var s=e.ownerDocument;if(e.data==="$~")e._reactRetry=n;else if(e.data!=="$?"||s.readyState!=="loading")n();else{var h=function(){n(),s.removeEventListener("DOMContentLoaded",h)};s.addEventListener("DOMContentLoaded",h),e._reactRetry=h}}function Ri(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?"||n==="$~"||n==="&"||n==="F!"||n==="F")break;if(n==="/$"||n==="/&")return null}}return e}var _h=null;function Vd(e){e=e.nextSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="/$"||s==="/&"){if(n===0)return Ri(e.nextSibling);n--}else s!=="$"&&s!=="$!"&&s!=="$?"&&s!=="$~"&&s!=="&"||n++}e=e.nextSibling}return null}function Gd(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var s=e.data;if(s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"){if(n===0)return e;n--}else s!=="/$"&&s!=="/&"||n++}e=e.previousSibling}return null}function Yd(e,n,s){switch(n=uu(s),e){case"html":if(e=n.documentElement,!e)throw Error(d(452));return e;case"head":if(e=n.head,!e)throw Error(d(453));return e;case"body":if(e=n.body,!e)throw Error(d(454));return e;default:throw Error(d(451))}}function kl(e){for(var n=e.attributes;n.length;)e.removeAttributeNode(n[0]);qn(e)}var Di=new Map,qd=new Set;function cu(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var Or=se.d;se.d={f:O2,r:I2,D:N2,C:R2,L:D2,m:M2,X:L2,S:B2,M:k2};function O2(){var e=Or.f(),n=tu();return e||n}function I2(e){var n=pt(e);n!==null&&n.tag===5&&n.type==="form"?u0(n):Or.r(e)}var Ms=typeof document>"u"?null:document;function Xd(e,n,s){var h=Ms;if(h&&typeof n=="string"&&n){var y=Ze(n);y='link[rel="'+e+'"][href="'+y+'"]',typeof s=="string"&&(y+='[crossorigin="'+s+'"]'),qd.has(y)||(qd.add(y),e={rel:e,crossOrigin:s,href:n},h.querySelector(y)===null&&(n=h.createElement("link"),Dn(n,"link",e),Qt(n),h.head.appendChild(n)))}}function N2(e){Or.D(e),Xd("dns-prefetch",e,null)}function R2(e,n){Or.C(e,n),Xd("preconnect",e,n)}function D2(e,n,s){Or.L(e,n,s);var h=Ms;if(h&&e&&n){var y='link[rel="preload"][as="'+Ze(n)+'"]';n==="image"&&s&&s.imageSrcSet?(y+='[imagesrcset="'+Ze(s.imageSrcSet)+'"]',typeof s.imageSizes=="string"&&(y+='[imagesizes="'+Ze(s.imageSizes)+'"]')):y+='[href="'+Ze(e)+'"]';var w=y;switch(n){case"style":w=Bs(e);break;case"script":w=Ls(e)}Di.has(w)||(e=D({rel:"preload",href:n==="image"&&s&&s.imageSrcSet?void 0:e,as:n},s),Di.set(w,e),h.querySelector(y)!==null||n==="style"&&h.querySelector(Ul(w))||n==="script"&&h.querySelector(jl(w))||(n=h.createElement("link"),Dn(n,"link",e),Qt(n),h.head.appendChild(n)))}}function M2(e,n){Or.m(e,n);var s=Ms;if(s&&e){var h=n&&typeof n.as=="string"?n.as:"script",y='link[rel="modulepreload"][as="'+Ze(h)+'"][href="'+Ze(e)+'"]',w=y;switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":w=Ls(e)}if(!Di.has(w)&&(e=D({rel:"modulepreload",href:e},n),Di.set(w,e),s.querySelector(y)===null)){switch(h){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(s.querySelector(jl(w)))return}h=s.createElement("link"),Dn(h,"link",e),Qt(h),s.head.appendChild(h)}}}function B2(e,n,s){Or.S(e,n,s);var h=Ms;if(h&&e){var y=jn(h).hoistableStyles,w=Bs(e);n=n||"default";var S=y.get(w);if(!S){var R={loading:0,preload:null};if(S=h.querySelector(Ul(w)))R.loading=5;else{e=D({rel:"stylesheet",href:e,"data-precedence":n},s),(s=Di.get(w))&&Ch(e,s);var L=S=h.createElement("link");Qt(L),Dn(L,"link",e),L._p=new Promise(function(q,re){L.onload=q,L.onerror=re}),L.addEventListener("load",function(){R.loading|=1}),L.addEventListener("error",function(){R.loading|=2}),R.loading|=4,hu(S,n,h)}S={type:"stylesheet",instance:S,count:1,state:R},y.set(w,S)}}}function L2(e,n){Or.X(e,n);var s=Ms;if(s&&e){var h=jn(s).hoistableScripts,y=Ls(e),w=h.get(y);w||(w=s.querySelector(jl(y)),w||(e=D({src:e,async:!0},n),(n=Di.get(y))&&Th(e,n),w=s.createElement("script"),Qt(w),Dn(w,"link",e),s.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(y,w))}}function k2(e,n){Or.M(e,n);var s=Ms;if(s&&e){var h=jn(s).hoistableScripts,y=Ls(e),w=h.get(y);w||(w=s.querySelector(jl(y)),w||(e=D({src:e,async:!0,type:"module"},n),(n=Di.get(y))&&Th(e,n),w=s.createElement("script"),Qt(w),Dn(w,"link",e),s.head.appendChild(w)),w={type:"script",instance:w,count:1,state:null},h.set(y,w))}}function Zd(e,n,s,h){var y=(y=pe.current)?cu(y):null;if(!y)throw Error(d(446));switch(e){case"meta":case"title":return null;case"style":return typeof s.precedence=="string"&&typeof s.href=="string"?(n=Bs(s.href),s=jn(y).hoistableStyles,h=s.get(n),h||(h={type:"style",instance:null,count:0,state:null},s.set(n,h)),h):{type:"void",instance:null,count:0,state:null};case"link":if(s.rel==="stylesheet"&&typeof s.href=="string"&&typeof s.precedence=="string"){e=Bs(s.href);var w=jn(y).hoistableStyles,S=w.get(e);if(S||(y=y.ownerDocument||y,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},w.set(e,S),(w=y.querySelector(Ul(e)))&&!w._p&&(S.instance=w,S.state.loading=5),Di.has(e)||(s={rel:"preload",as:"style",href:s.href,crossOrigin:s.crossOrigin,integrity:s.integrity,media:s.media,hrefLang:s.hrefLang,referrerPolicy:s.referrerPolicy},Di.set(e,s),w||U2(y,e,s,S.state))),n&&h===null)throw Error(d(528,""));return S}if(n&&h!==null)throw Error(d(529,""));return null;case"script":return n=s.async,s=s.src,typeof s=="string"&&n&&typeof n!="function"&&typeof n!="symbol"?(n=Ls(s),s=jn(y).hoistableScripts,h=s.get(n),h||(h={type:"script",instance:null,count:0,state:null},s.set(n,h)),h):{type:"void",instance:null,count:0,state:null};default:throw Error(d(444,e))}}function Bs(e){return'href="'+Ze(e)+'"'}function Ul(e){return'link[rel="stylesheet"]['+e+"]"}function Wd(e){return D({},e,{"data-precedence":e.precedence,precedence:null})}function U2(e,n,s,h){e.querySelector('link[rel="preload"][as="style"]['+n+"]")?h.loading=1:(n=e.createElement("link"),h.preload=n,n.addEventListener("load",function(){return h.loading|=1}),n.addEventListener("error",function(){return h.loading|=2}),Dn(n,"link",s),Qt(n),e.head.appendChild(n))}function Ls(e){return'[src="'+Ze(e)+'"]'}function jl(e){return"script[async]"+e}function Kd(e,n,s){if(n.count++,n.instance===null)switch(n.type){case"style":var h=e.querySelector('style[data-href~="'+Ze(s.href)+'"]');if(h)return n.instance=h,Qt(h),h;var y=D({},s,{"data-href":s.href,"data-precedence":s.precedence,href:null,precedence:null});return h=(e.ownerDocument||e).createElement("style"),Qt(h),Dn(h,"style",y),hu(h,s.precedence,e),n.instance=h;case"stylesheet":y=Bs(s.href);var w=e.querySelector(Ul(y));if(w)return n.state.loading|=4,n.instance=w,Qt(w),w;h=Wd(s),(y=Di.get(y))&&Ch(h,y),w=(e.ownerDocument||e).createElement("link"),Qt(w);var S=w;return S._p=new Promise(function(R,L){S.onload=R,S.onerror=L}),Dn(w,"link",h),n.state.loading|=4,hu(w,s.precedence,e),n.instance=w;case"script":return w=Ls(s.src),(y=e.querySelector(jl(w)))?(n.instance=y,Qt(y),y):(h=s,(y=Di.get(w))&&(h=D({},s),Th(h,y)),e=e.ownerDocument||e,y=e.createElement("script"),Qt(y),Dn(y,"link",h),e.head.appendChild(y),n.instance=y);case"void":return null;default:throw Error(d(443,n.type))}else n.type==="stylesheet"&&(n.state.loading&4)===0&&(h=n.instance,n.state.loading|=4,hu(h,s.precedence,e));return n.instance}function hu(e,n,s){for(var h=s.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=h.length?h[h.length-1]:null,w=y,S=0;S<h.length;S++){var R=h[S];if(R.dataset.precedence===n)w=R;else if(w!==y)break}w?w.parentNode.insertBefore(e,w.nextSibling):(n=s.nodeType===9?s.head:s,n.insertBefore(e,n.firstChild))}function Ch(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.title==null&&(e.title=n.title)}function Th(e,n){e.crossOrigin==null&&(e.crossOrigin=n.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=n.referrerPolicy),e.integrity==null&&(e.integrity=n.integrity)}var fu=null;function Qd(e,n,s){if(fu===null){var h=new Map,y=fu=new Map;y.set(s,h)}else y=fu,h=y.get(s),h||(h=new Map,y.set(s,h));if(h.has(e))return h;for(h.set(e,null),s=s.getElementsByTagName(e),y=0;y<s.length;y++){var w=s[y];if(!(w[Sa]||w[rn]||e==="link"&&w.getAttribute("rel")==="stylesheet")&&w.namespaceURI!=="http://www.w3.org/2000/svg"){var S=w.getAttribute(n)||"";S=e+S;var R=h.get(S);R?R.push(w):h.set(S,[w])}}return h}function Jd(e,n,s){e=e.ownerDocument||e,e.head.insertBefore(s,n==="title"?e.querySelector("head > title"):null)}function j2(e,n,s){if(s===1||n.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof n.precedence!="string"||typeof n.href!="string"||n.href==="")break;return!0;case"link":if(typeof n.rel!="string"||typeof n.href!="string"||n.href===""||n.onLoad||n.onError)break;return n.rel==="stylesheet"?(e=n.disabled,typeof n.precedence=="string"&&e==null):!0;case"script":if(n.async&&typeof n.async!="function"&&typeof n.async!="symbol"&&!n.onLoad&&!n.onError&&n.src&&typeof n.src=="string")return!0}return!1}function $d(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function z2(e,n,s,h){if(s.type==="stylesheet"&&(typeof h.media!="string"||matchMedia(h.media).matches!==!1)&&(s.state.loading&4)===0){if(s.instance===null){var y=Bs(h.href),w=n.querySelector(Ul(y));if(w){n=w._p,n!==null&&typeof n=="object"&&typeof n.then=="function"&&(e.count++,e=du.bind(e),n.then(e,e)),s.state.loading|=4,s.instance=w,Qt(w);return}w=n.ownerDocument||n,h=Wd(h),(y=Di.get(y))&&Ch(h,y),w=w.createElement("link"),Qt(w);var S=w;S._p=new Promise(function(R,L){S.onload=R,S.onerror=L}),Dn(w,"link",h),s.instance=w}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(s,n),(n=s.state.preload)&&(s.state.loading&3)===0&&(e.count++,s=du.bind(e),n.addEventListener("load",s),n.addEventListener("error",s))}}var Oh=0;function P2(e,n){return e.stylesheets&&e.count===0&&mu(e,e.stylesheets),0<e.count||0<e.imgCount?function(s){var h=setTimeout(function(){if(e.stylesheets&&mu(e,e.stylesheets),e.unsuspend){var w=e.unsuspend;e.unsuspend=null,w()}},6e4+n);0<e.imgBytes&&Oh===0&&(Oh=62500*A2());var y=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&mu(e,e.stylesheets),e.unsuspend)){var w=e.unsuspend;e.unsuspend=null,w()}},(e.imgBytes>Oh?50:800)+n);return e.unsuspend=s,function(){e.unsuspend=null,clearTimeout(h),clearTimeout(y)}}:null}function du(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)mu(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var gu=null;function mu(e,n){e.stylesheets=null,e.unsuspend!==null&&(e.count++,gu=new Map,n.forEach(F2,e),gu=null,du.call(e))}function F2(e,n){if(!(n.state.loading&4)){var s=gu.get(e);if(s)var h=s.get(null);else{s=new Map,gu.set(e,s);for(var y=e.querySelectorAll("link[data-precedence],style[data-precedence]"),w=0;w<y.length;w++){var S=y[w];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(s.set(S.dataset.precedence,S),h=S)}h&&s.set(null,h)}y=n.instance,S=y.getAttribute("data-precedence"),w=s.get(S)||h,w===h&&s.set(null,y),s.set(S,y),this.count++,h=du.bind(this),y.addEventListener("load",h),y.addEventListener("error",h),w?w.parentNode.insertBefore(y,w.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(y,e.firstChild)),n.state.loading|=4}}var zl={$$typeof:te,Provider:null,Consumer:null,_currentValue:De,_currentValue2:De,_threadCount:0};function H2(e,n,s,h,y,w,S,R,L){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zi(0),this.hiddenUpdates=Zi(null),this.identifierPrefix=h,this.onUncaughtError=y,this.onCaughtError=w,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function e1(e,n,s,h,y,w,S,R,L,q,re,le){return e=new H2(e,n,s,S,L,q,re,le,R),n=1,w===!0&&(n|=24),w=ui(3,null,null,n),e.current=w,w.stateNode=e,n=lc(),n.refCount++,e.pooledCache=n,n.refCount++,w.memoizedState={element:h,isDehydrated:s,cache:n},hc(w),e}function t1(e){return e?(e=fs,e):fs}function n1(e,n,s,h,y,w){y=t1(y),h.context===null?h.context=y:h.pendingContext=y,h=$r(n),h.payload={element:s},w=w===void 0?null:w,w!==null&&(h.callback=w),s=ea(e,h,n),s!==null&&(ei(s,e,n),pl(s,e,n))}function i1(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var s=e.retryLane;e.retryLane=s!==0&&s<n?s:n}}function Ih(e,n){i1(e,n),(e=e.alternate)&&i1(e,n)}function r1(e){if(e.tag===13||e.tag===31){var n=Ma(e,67108864);n!==null&&ei(n,e,67108864),Ih(e,67108864)}}function a1(e){if(e.tag===13||e.tag===31){var n=gi();n=Sn(n);var s=Ma(e,n);s!==null&&ei(s,e,n),Ih(e,n)}}var yu=!0;function V2(e,n,s,h){var y=Q.T;Q.T=null;var w=se.p;try{se.p=2,Nh(e,n,s,h)}finally{se.p=w,Q.T=y}}function G2(e,n,s,h){var y=Q.T;Q.T=null;var w=se.p;try{se.p=8,Nh(e,n,s,h)}finally{se.p=w,Q.T=y}}function Nh(e,n,s,h){if(yu){var y=Rh(h);if(y===null)yh(e,n,h,pu,s),l1(e,h);else if(q2(y,e,n,s,h))h.stopPropagation();else if(l1(e,h),n&4&&-1<Y2.indexOf(e)){for(;y!==null;){var w=pt(y);if(w!==null)switch(w.tag){case 3:if(w=w.stateNode,w.current.memoizedState.isDehydrated){var S=Xi(w.pendingLanes);if(S!==0){var R=w;for(R.pendingLanes|=2,R.entangledLanes|=2;S;){var L=1<<31-Ge(S);R.entanglements[1]|=L,S&=~L}rr(w),(wt&6)===0&&($o=Zt()+500,Ml(0))}}break;case 31:case 13:R=Ma(w,2),R!==null&&ei(R,w,2),tu(),Ih(w,2)}if(w=Rh(h),w===null&&yh(e,n,h,pu,s),w===y)break;y=w}y!==null&&h.stopPropagation()}else yh(e,n,h,null,s)}}function Rh(e){return e=nl(e),Dh(e)}var pu=null;function Dh(e){if(pu=null,e=Kt(e),e!==null){var n=m(e);if(n===null)e=null;else{var s=n.tag;if(s===13){if(e=E(n),e!==null)return e;e=null}else if(s===31){if(e=_(n),e!==null)return e;e=null}else if(s===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null)}}return pu=e,null}function s1(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ks()){case Yn:return 2;case Qs:return 8;case ni:case Cn:return 32;case Js:return 268435456;default:return 32}default:return 32}}var Mh=!1,ha=null,fa=null,da=null,Pl=new Map,Fl=new Map,ga=[],Y2="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function l1(e,n){switch(e){case"focusin":case"focusout":ha=null;break;case"dragenter":case"dragleave":fa=null;break;case"mouseover":case"mouseout":da=null;break;case"pointerover":case"pointerout":Pl.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fl.delete(n.pointerId)}}function Hl(e,n,s,h,y,w){return e===null||e.nativeEvent!==w?(e={blockedOn:n,domEventName:s,eventSystemFlags:h,nativeEvent:w,targetContainers:[y]},n!==null&&(n=pt(n),n!==null&&r1(n)),e):(e.eventSystemFlags|=h,n=e.targetContainers,y!==null&&n.indexOf(y)===-1&&n.push(y),e)}function q2(e,n,s,h,y){switch(n){case"focusin":return ha=Hl(ha,e,n,s,h,y),!0;case"dragenter":return fa=Hl(fa,e,n,s,h,y),!0;case"mouseover":return da=Hl(da,e,n,s,h,y),!0;case"pointerover":var w=y.pointerId;return Pl.set(w,Hl(Pl.get(w)||null,e,n,s,h,y)),!0;case"gotpointercapture":return w=y.pointerId,Fl.set(w,Hl(Fl.get(w)||null,e,n,s,h,y)),!0}return!1}function o1(e){var n=Kt(e.target);if(n!==null){var s=m(n);if(s!==null){if(n=s.tag,n===13){if(n=E(s),n!==null){e.blockedOn=n,Ee(e.priority,function(){a1(s)});return}}else if(n===31){if(n=_(s),n!==null){e.blockedOn=n,Ee(e.priority,function(){a1(s)});return}}else if(n===3&&s.stateNode.current.memoizedState.isDehydrated){e.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xu(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var s=Rh(e.nativeEvent);if(s===null){s=e.nativeEvent;var h=new s.constructor(s.type,s);_a=h,s.target.dispatchEvent(h),_a=null}else return n=pt(s),n!==null&&r1(n),e.blockedOn=s,!1;n.shift()}return!0}function u1(e,n,s){xu(e)&&s.delete(n)}function X2(){Mh=!1,ha!==null&&xu(ha)&&(ha=null),fa!==null&&xu(fa)&&(fa=null),da!==null&&xu(da)&&(da=null),Pl.forEach(u1),Fl.forEach(u1)}function wu(e,n){e.blockedOn===n&&(e.blockedOn=null,Mh||(Mh=!0,u.unstable_scheduleCallback(u.unstable_NormalPriority,X2)))}var Au=null;function c1(e){Au!==e&&(Au=e,u.unstable_scheduleCallback(u.unstable_NormalPriority,function(){Au===e&&(Au=null);for(var n=0;n<e.length;n+=3){var s=e[n],h=e[n+1],y=e[n+2];if(typeof h!="function"){if(Dh(h||s)===null)continue;break}var w=pt(s);w!==null&&(e.splice(n,3),n-=3,Rc(w,{pending:!0,data:y,method:s.method,action:h},h,y))}}))}function ks(e){function n(L){return wu(L,e)}ha!==null&&wu(ha,e),fa!==null&&wu(fa,e),da!==null&&wu(da,e),Pl.forEach(n),Fl.forEach(n);for(var s=0;s<ga.length;s++){var h=ga[s];h.blockedOn===e&&(h.blockedOn=null)}for(;0<ga.length&&(s=ga[0],s.blockedOn===null);)o1(s),s.blockedOn===null&&ga.shift();if(s=(e.ownerDocument||e).$$reactFormReplay,s!=null)for(h=0;h<s.length;h+=3){var y=s[h],w=s[h+1],S=y[St]||null;if(typeof w=="function")S||c1(s);else if(S){var R=null;if(w&&w.hasAttribute("formAction")){if(y=w,S=w[St]||null)R=S.formAction;else if(Dh(y)!==null)continue}else R=S.action;typeof R=="function"?s[h+1]=R:(s.splice(h,3),h-=3),c1(s)}}}function h1(){function e(w){w.canIntercept&&w.info==="react-transition"&&w.intercept({handler:function(){return new Promise(function(S){return y=S})},focusReset:"manual",scroll:"manual"})}function n(){y!==null&&(y(),y=null),h||setTimeout(s,20)}function s(){if(!h&&!navigation.transition){var w=navigation.currentEntry;w&&w.url!=null&&navigation.navigate(w.url,{state:w.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var h=!1,y=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",n),navigation.addEventListener("navigateerror",n),setTimeout(s,100),function(){h=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",n),navigation.removeEventListener("navigateerror",n),y!==null&&(y(),y=null)}}}function Bh(e){this._internalRoot=e}bu.prototype.render=Bh.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(d(409));var s=n.current,h=gi();n1(s,h,e,n,null,null)},bu.prototype.unmount=Bh.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;n1(e.current,2,null,e,null,null),tu(),n[ii]=null}};function bu(e){this._internalRoot=e}bu.prototype.unstable_scheduleHydration=function(e){if(e){var n=kn();e={blockedOn:null,target:e,priority:n};for(var s=0;s<ga.length&&n!==0&&n<ga[s].priority;s++);ga.splice(s,0,e),s===0&&o1(e)}};var f1=r.version;if(f1!=="19.2.4")throw Error(d(527,f1,"19.2.4"));se.findDOMNode=function(e){var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(d(188)):(e=Object.keys(e).join(","),Error(d(268,e)));return e=b(n),e=e!==null?N(e):null,e=e===null?null:e.stateNode,e};var Z2={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Eu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Eu.isDisabled&&Eu.supportsFiber)try{jt=Eu.inject(Z2),me=Eu}catch{}}return Gl.createRoot=function(e,n){if(!p(e))throw Error(d(299));var s=!1,h="",y=w0,w=A0,S=b0;return n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(h=n.identifierPrefix),n.onUncaughtError!==void 0&&(y=n.onUncaughtError),n.onCaughtError!==void 0&&(w=n.onCaughtError),n.onRecoverableError!==void 0&&(S=n.onRecoverableError)),n=e1(e,1,!1,null,null,s,h,null,y,w,S,h1),e[ii]=n.current,mh(e),new Bh(n)},Gl.hydrateRoot=function(e,n,s){if(!p(e))throw Error(d(299));var h=!1,y="",w=w0,S=A0,R=b0,L=null;return s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(y=s.identifierPrefix),s.onUncaughtError!==void 0&&(w=s.onUncaughtError),s.onCaughtError!==void 0&&(S=s.onCaughtError),s.onRecoverableError!==void 0&&(R=s.onRecoverableError),s.formState!==void 0&&(L=s.formState)),n=e1(e,1,!0,n,s??null,h,y,L,w,S,R,h1),n.context=t1(null),s=n.current,h=gi(),h=Sn(h),y=$r(h),y.callback=null,ea(s,y,h),s=h,n.current.lanes=s,Wi(n,s),rr(n),e[ii]=n.current,mh(e),new bu(n)},Gl.version="19.2.4",Gl}var E1;function rm(){if(E1)return Uh.exports;E1=1;function u(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(u)}catch(r){console.error(r)}}return u(),Uh.exports=im(),Uh.exports}var am=rm(),ve;(function(u){u[u.QR_CODE=0]="QR_CODE",u[u.AZTEC=1]="AZTEC",u[u.CODABAR=2]="CODABAR",u[u.CODE_39=3]="CODE_39",u[u.CODE_93=4]="CODE_93",u[u.CODE_128=5]="CODE_128",u[u.DATA_MATRIX=6]="DATA_MATRIX",u[u.MAXICODE=7]="MAXICODE",u[u.ITF=8]="ITF",u[u.EAN_13=9]="EAN_13",u[u.EAN_8=10]="EAN_8",u[u.PDF_417=11]="PDF_417",u[u.RSS_14=12]="RSS_14",u[u.RSS_EXPANDED=13]="RSS_EXPANDED",u[u.UPC_A=14]="UPC_A",u[u.UPC_E=15]="UPC_E",u[u.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ve||(ve={}));var v1=new Map([[ve.QR_CODE,"QR_CODE"],[ve.AZTEC,"AZTEC"],[ve.CODABAR,"CODABAR"],[ve.CODE_39,"CODE_39"],[ve.CODE_93,"CODE_93"],[ve.CODE_128,"CODE_128"],[ve.DATA_MATRIX,"DATA_MATRIX"],[ve.MAXICODE,"MAXICODE"],[ve.ITF,"ITF"],[ve.EAN_13,"EAN_13"],[ve.EAN_8,"EAN_8"],[ve.PDF_417,"PDF_417"],[ve.RSS_14,"RSS_14"],[ve.RSS_EXPANDED,"RSS_EXPANDED"],[ve.UPC_A,"UPC_A"],[ve.UPC_E,"UPC_E"],[ve.UPC_EAN_EXTENSION,"UPC_EAN_EXTENSION"]]),S1;(function(u){u[u.UNKNOWN=0]="UNKNOWN",u[u.URL=1]="URL"})(S1||(S1={}));function sm(u){return Object.values(ve).includes(u)}var Aa;(function(u){u[u.SCAN_TYPE_CAMERA=0]="SCAN_TYPE_CAMERA",u[u.SCAN_TYPE_FILE=1]="SCAN_TYPE_FILE"})(Aa||(Aa={}));var Yi=(function(){function u(){}return u.GITHUB_PROJECT_URL="https://github.com/mebjas/html5-qrcode",u.SCAN_DEFAULT_FPS=2,u.DEFAULT_DISABLE_FLIP=!1,u.DEFAULT_REMEMBER_LAST_CAMERA_USED=!0,u.DEFAULT_SUPPORTED_SCAN_TYPE=[Aa.SCAN_TYPE_CAMERA,Aa.SCAN_TYPE_FILE],u})(),cg=(function(){function u(r,l){this.format=r,this.formatName=l}return u.prototype.toString=function(){return this.formatName},u.create=function(r){if(!v1.has(r))throw"".concat(r," not in html5QrcodeSupportedFormatsTextMap");return new u(r,v1.get(r))},u})(),_1=(function(){function u(){}return u.createFromText=function(r){var l={text:r};return{decodedText:r,result:l}},u.createFromQrcodeResult=function(r){return{decodedText:r.text,result:r}},u})(),Zh;(function(u){u[u.UNKWOWN_ERROR=0]="UNKWOWN_ERROR",u[u.IMPLEMENTATION_ERROR=1]="IMPLEMENTATION_ERROR",u[u.NO_CODE_FOUND_ERROR=2]="NO_CODE_FOUND_ERROR"})(Zh||(Zh={}));var hg=(function(){function u(){}return u.createFrom=function(r){return{errorMessage:r,type:Zh.UNKWOWN_ERROR}},u})(),fg=(function(){function u(r){this.verbose=r}return u.prototype.log=function(r){this.verbose&&console.log(r)},u.prototype.warn=function(r){this.verbose&&console.warn(r)},u.prototype.logError=function(r,l){(this.verbose||l===!0)&&console.error(r)},u.prototype.logErrors=function(r){if(r.length===0)throw"Logger#logError called without arguments";this.verbose&&console.error(r)},u})();function ar(u){return typeof u>"u"||u===null}function lm(u,r,l){return u>l?l:u<r?r:u}var qs=(function(){function u(){}return u.codeParseError=function(r){return"QR code parse error, error = ".concat(r)},u.errorGettingUserMedia=function(r){return"Error getting userMedia, error = ".concat(r)},u.onlyDeviceSupportedError=function(){return"The device doesn't support navigator.mediaDevices , only supported cameraIdOrConfig in this case is deviceId parameter (string)."},u.cameraStreamingNotSupported=function(){return"Camera streaming not supported by the browser."},u.unableToQuerySupportedDevices=function(){return"Unable to query supported devices, unknown error."},u.insecureContextCameraQueryError=function(){return"Camera access is only supported in secure context like https or localhost."},u.scannerPaused=function(){return"Scanner paused"},u})(),Tt=(function(){function u(){}return u.scanningStatus=function(){return"Scanning"},u.idleStatus=function(){return"Idle"},u.errorStatus=function(){return"Error"},u.permissionStatus=function(){return"Permission"},u.noCameraFoundErrorStatus=function(){return"No Cameras"},u.lastMatch=function(r){return"Last Match: ".concat(r)},u.codeScannerTitle=function(){return"Code Scanner"},u.cameraPermissionTitle=function(){return"Request Camera Permissions"},u.cameraPermissionRequesting=function(){return"Requesting camera permissions..."},u.noCameraFound=function(){return"No camera found"},u.scanButtonStopScanningText=function(){return"Stop Scanning"},u.scanButtonStartScanningText=function(){return"Start Scanning"},u.torchOnButton=function(){return"Switch On Torch"},u.torchOffButton=function(){return"Switch Off Torch"},u.torchOnFailedMessage=function(){return"Failed to turn on torch"},u.torchOffFailedMessage=function(){return"Failed to turn off torch"},u.scanButtonScanningStarting=function(){return"Launching Camera..."},u.textIfCameraScanSelected=function(){return"Scan an Image File"},u.textIfFileScanSelected=function(){return"Scan using camera directly"},u.selectCamera=function(){return"Select Camera"},u.fileSelectionChooseImage=function(){return"Choose Image"},u.fileSelectionChooseAnother=function(){return"Choose Another"},u.fileSelectionNoImageSelected=function(){return"No image choosen"},u.anonymousCameraPrefix=function(){return"Anonymous Camera"},u.dragAndDropMessage=function(){return"Or drop an image to scan"},u.dragAndDropMessageOnlyImages=function(){return"Or drop an image to scan (other files not supported)"},u.zoom=function(){return"zoom"},u.loadingImage=function(){return"Loading image..."},u.cameraScanAltText=function(){return"Camera based scan"},u.fileScanAltText=function(){return"Fule based scan"},u})(),C1=(function(){function u(){}return u.poweredBy=function(){return"Powered by "},u.reportIssues=function(){return"Report issues"},u})(),dg=(function(){function u(){}return u.isMediaStreamConstraintsValid=function(r,l){if(typeof r!="object"){var d=typeof r;return l.logError("videoConstraints should be of type object, the "+"object passed is of type ".concat(d,"."),!0),!1}for(var p=["autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","volume"],m=new Set(p),E=Object.keys(r),_=0,C=E;_<C.length;_++){var b=C[_];if(m.has(b))return l.logError("".concat(b," is not supported videoConstaints."),!0),!1}return!0},u})(),ql={exports:{}},om=ql.exports,T1;function um(){return T1||(T1=1,(function(u,r){(function(l,d){d(r)})(om,(function(l){function d(T){return T==null}var p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(T,t){T.__proto__=t}||function(T,t){for(var i in t)t.hasOwnProperty(i)&&(T[i]=t[i])};function m(T,t){p(T,t);function i(){this.constructor=T}T.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function E(T,t){var i=Object.setPrototypeOf;i?i(T,t):T.__proto__=t}function _(T,t){t===void 0&&(t=T.constructor);var i=Error.captureStackTrace;i&&i(T,t)}var C=(function(T){m(t,T);function t(i){var a=this.constructor,o=T.call(this,i)||this;return Object.defineProperty(o,"name",{value:a.name,enumerable:!1}),E(o,a.prototype),_(o),o}return t})(Error);class b extends C{constructor(t=void 0){super(t),this.message=t}getKind(){return this.constructor.kind}}b.kind="Exception";class N extends b{}N.kind="ArgumentException";class D extends b{}D.kind="IllegalArgumentException";class F{constructor(t){if(this.binarizer=t,t===null)throw new D("Binarizer must be non-null.")}getWidth(){return this.binarizer.getWidth()}getHeight(){return this.binarizer.getHeight()}getBlackRow(t,i){return this.binarizer.getBlackRow(t,i)}getBlackMatrix(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix}isCropSupported(){return this.binarizer.getLuminanceSource().isCropSupported()}crop(t,i,a,o){const c=this.binarizer.getLuminanceSource().crop(t,i,a,o);return new F(this.binarizer.createBinarizer(c))}isRotateSupported(){return this.binarizer.getLuminanceSource().isRotateSupported()}rotateCounterClockwise(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new F(this.binarizer.createBinarizer(t))}rotateCounterClockwise45(){const t=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new F(this.binarizer.createBinarizer(t))}toString(){try{return this.getBlackMatrix().toString()}catch{return""}}}class P extends b{static getChecksumInstance(){return new P}}P.kind="ChecksumException";class ne{constructor(t){this.source=t}getLuminanceSource(){return this.source}getWidth(){return this.source.getWidth()}getHeight(){return this.source.getHeight()}}class K{static arraycopy(t,i,a,o,c){for(;c--;)a[o++]=t[i++]}static currentTimeMillis(){return Date.now()}}class oe extends b{}oe.kind="IndexOutOfBoundsException";class ye extends oe{constructor(t=void 0,i=void 0){super(i),this.index=t,this.message=i}}ye.kind="ArrayIndexOutOfBoundsException";class fe{static fill(t,i){for(let a=0,o=t.length;a<o;a++)t[a]=i}static fillWithin(t,i,a,o){fe.rangeCheck(t.length,i,a);for(let c=i;c<a;c++)t[c]=o}static rangeCheck(t,i,a){if(i>a)throw new D("fromIndex("+i+") > toIndex("+a+")");if(i<0)throw new ye(i);if(a>t)throw new ye(a)}static asList(...t){return t}static create(t,i,a){return Array.from({length:t}).map(c=>Array.from({length:i}).fill(a))}static createInt32Array(t,i,a){return Array.from({length:t}).map(c=>Int32Array.from({length:i}).fill(a))}static equals(t,i){if(!t||!i||!t.length||!i.length||t.length!==i.length)return!1;for(let a=0,o=t.length;a<o;a++)if(t[a]!==i[a])return!1;return!0}static hashCode(t){if(t===null)return 0;let i=1;for(const a of t)i=31*i+a;return i}static fillUint8Array(t,i){for(let a=0;a!==t.length;a++)t[a]=i}static copyOf(t,i){return t.slice(0,i)}static copyOfUint8Array(t,i){if(t.length<=i){const a=new Uint8Array(i);return a.set(t),a}return t.slice(0,i)}static copyOfRange(t,i,a){const o=a-i,c=new Int32Array(o);return K.arraycopy(t,i,c,0,o),c}static binarySearch(t,i,a){a===void 0&&(a=fe.numberComparator);let o=0,c=t.length-1;for(;o<=c;){const f=c+o>>1,g=a(i,t[f]);if(g>0)o=f+1;else if(g<0)c=f-1;else return f}return-o-1}static numberComparator(t,i){return t-i}}class te{static numberOfTrailingZeros(t){let i;if(t===0)return 32;let a=31;return i=t<<16,i!==0&&(a-=16,t=i),i=t<<8,i!==0&&(a-=8,t=i),i=t<<4,i!==0&&(a-=4,t=i),i=t<<2,i!==0&&(a-=2,t=i),a-(t<<1>>>31)}static numberOfLeadingZeros(t){if(t===0)return 32;let i=1;return t>>>16||(i+=16,t<<=16),t>>>24||(i+=8,t<<=8),t>>>28||(i+=4,t<<=4),t>>>30||(i+=2,t<<=2),i-=t>>>31,i}static toHexString(t){return t.toString(16)}static toBinaryString(t){return String(parseInt(String(t),2))}static bitCount(t){return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),t=t+(t>>>4)&252645135,t=t+(t>>>8),t=t+(t>>>16),t&63}static truncDivision(t,i){return Math.trunc(t/i)}static parseInt(t,i=void 0){return parseInt(t,i)}}te.MIN_VALUE_32_BITS=-2147483648,te.MAX_VALUE=Number.MAX_SAFE_INTEGER;class xe{constructor(t,i){t===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=t,i==null?this.bits=xe.makeArray(t):this.bits=i)}getSize(){return this.size}getSizeInBytes(){return Math.floor((this.size+7)/8)}ensureCapacity(t){if(t>this.bits.length*32){const i=xe.makeArray(t);K.arraycopy(this.bits,0,i,0,this.bits.length),this.bits=i}}get(t){return(this.bits[Math.floor(t/32)]&1<<(t&31))!==0}set(t){this.bits[Math.floor(t/32)]|=1<<(t&31)}flip(t){this.bits[Math.floor(t/32)]^=1<<(t&31)}getNextSet(t){const i=this.size;if(t>=i)return i;const a=this.bits;let o=Math.floor(t/32),c=a[o];c&=~((1<<(t&31))-1);const f=a.length;for(;c===0;){if(++o===f)return i;c=a[o]}const g=o*32+te.numberOfTrailingZeros(c);return g>i?i:g}getNextUnset(t){const i=this.size;if(t>=i)return i;const a=this.bits;let o=Math.floor(t/32),c=~a[o];c&=~((1<<(t&31))-1);const f=a.length;for(;c===0;){if(++o===f)return i;c=~a[o]}const g=o*32+te.numberOfTrailingZeros(c);return g>i?i:g}setBulk(t,i){this.bits[Math.floor(t/32)]=i}setRange(t,i){if(i<t||t<0||i>this.size)throw new D;if(i===t)return;i--;const a=Math.floor(t/32),o=Math.floor(i/32),c=this.bits;for(let f=a;f<=o;f++){const g=f>a?0:t&31,A=(2<<(f<o?31:i&31))-(1<<g);c[f]|=A}}clear(){const t=this.bits.length,i=this.bits;for(let a=0;a<t;a++)i[a]=0}isRange(t,i,a){if(i<t||t<0||i>this.size)throw new D;if(i===t)return!0;i--;const o=Math.floor(t/32),c=Math.floor(i/32),f=this.bits;for(let g=o;g<=c;g++){const x=g>o?0:t&31,v=(2<<(g<c?31:i&31))-(1<<x)&4294967295;if((f[g]&v)!==(a?v:0))return!1}return!0}appendBit(t){this.ensureCapacity(this.size+1),t&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++}appendBits(t,i){if(i<0||i>32)throw new D("Num bits must be between 0 and 32");this.ensureCapacity(this.size+i);for(let a=i;a>0;a--)this.appendBit((t>>a-1&1)===1)}appendBitArray(t){const i=t.size;this.ensureCapacity(this.size+i);for(let a=0;a<i;a++)this.appendBit(t.get(a))}xor(t){if(this.size!==t.size)throw new D("Sizes don't match");const i=this.bits;for(let a=0,o=i.length;a<o;a++)i[a]^=t.bits[a]}toBytes(t,i,a,o){for(let c=0;c<o;c++){let f=0;for(let g=0;g<8;g++)this.get(t)&&(f|=1<<7-g),t++;i[a+c]=f}}getBitArray(){return this.bits}reverse(){const t=new Int32Array(this.bits.length),i=Math.floor((this.size-1)/32),a=i+1,o=this.bits;for(let c=0;c<a;c++){let f=o[c];f=f>>1&1431655765|(f&1431655765)<<1,f=f>>2&858993459|(f&858993459)<<2,f=f>>4&252645135|(f&252645135)<<4,f=f>>8&16711935|(f&16711935)<<8,f=f>>16&65535|(f&65535)<<16,t[i-c]=f}if(this.size!==a*32){const c=a*32-this.size;let f=t[0]>>>c;for(let g=1;g<a;g++){const x=t[g];f|=x<<32-c,t[g-1]=f,f=x>>>c}t[a-1]=f}this.bits=t}static makeArray(t){return new Int32Array(Math.floor((t+31)/32))}equals(t){if(!(t instanceof xe))return!1;const i=t;return this.size===i.size&&fe.equals(this.bits,i.bits)}hashCode(){return 31*this.size+fe.hashCode(this.bits)}toString(){let t="";for(let i=0,a=this.size;i<a;i++)(i&7)===0&&(t+=" "),t+=this.get(i)?"X":".";return t}clone(){return new xe(this.size,this.bits.slice())}}var Ke;(function(T){T[T.OTHER=0]="OTHER",T[T.PURE_BARCODE=1]="PURE_BARCODE",T[T.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",T[T.TRY_HARDER=3]="TRY_HARDER",T[T.CHARACTER_SET=4]="CHARACTER_SET",T[T.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",T[T.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",T[T.ASSUME_GS1=7]="ASSUME_GS1",T[T.RETURN_CODABAR_START_END=8]="RETURN_CODABAR_START_END",T[T.NEED_RESULT_POINT_CALLBACK=9]="NEED_RESULT_POINT_CALLBACK",T[T.ALLOWED_EAN_EXTENSIONS=10]="ALLOWED_EAN_EXTENSIONS"})(Ke||(Ke={}));var be=Ke;class $ extends b{static getFormatInstance(){return new $}}$.kind="FormatException";var Me;(function(T){T[T.Cp437=0]="Cp437",T[T.ISO8859_1=1]="ISO8859_1",T[T.ISO8859_2=2]="ISO8859_2",T[T.ISO8859_3=3]="ISO8859_3",T[T.ISO8859_4=4]="ISO8859_4",T[T.ISO8859_5=5]="ISO8859_5",T[T.ISO8859_6=6]="ISO8859_6",T[T.ISO8859_7=7]="ISO8859_7",T[T.ISO8859_8=8]="ISO8859_8",T[T.ISO8859_9=9]="ISO8859_9",T[T.ISO8859_10=10]="ISO8859_10",T[T.ISO8859_11=11]="ISO8859_11",T[T.ISO8859_13=12]="ISO8859_13",T[T.ISO8859_14=13]="ISO8859_14",T[T.ISO8859_15=14]="ISO8859_15",T[T.ISO8859_16=15]="ISO8859_16",T[T.SJIS=16]="SJIS",T[T.Cp1250=17]="Cp1250",T[T.Cp1251=18]="Cp1251",T[T.Cp1252=19]="Cp1252",T[T.Cp1256=20]="Cp1256",T[T.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",T[T.UTF8=22]="UTF8",T[T.ASCII=23]="ASCII",T[T.Big5=24]="Big5",T[T.GB18030=25]="GB18030",T[T.EUC_KR=26]="EUC_KR"})(Me||(Me={}));class ce{constructor(t,i,a,...o){this.valueIdentifier=t,this.name=a,typeof i=="number"?this.values=Int32Array.from([i]):this.values=i,this.otherEncodingNames=o,ce.VALUE_IDENTIFIER_TO_ECI.set(t,this),ce.NAME_TO_ECI.set(a,this);const c=this.values;for(let f=0,g=c.length;f!==g;f++){const x=c[f];ce.VALUES_TO_ECI.set(x,this)}for(const f of o)ce.NAME_TO_ECI.set(f,this)}getValueIdentifier(){return this.valueIdentifier}getName(){return this.name}getValue(){return this.values[0]}static getCharacterSetECIByValue(t){if(t<0||t>=900)throw new $("incorect value");const i=ce.VALUES_TO_ECI.get(t);if(i===void 0)throw new $("incorect value");return i}static getCharacterSetECIByName(t){const i=ce.NAME_TO_ECI.get(t);if(i===void 0)throw new $("incorect value");return i}equals(t){if(!(t instanceof ce))return!1;const i=t;return this.getName()===i.getName()}}ce.VALUE_IDENTIFIER_TO_ECI=new Map,ce.VALUES_TO_ECI=new Map,ce.NAME_TO_ECI=new Map,ce.Cp437=new ce(Me.Cp437,Int32Array.from([0,2]),"Cp437"),ce.ISO8859_1=new ce(Me.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),ce.ISO8859_2=new ce(Me.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),ce.ISO8859_3=new ce(Me.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),ce.ISO8859_4=new ce(Me.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),ce.ISO8859_5=new ce(Me.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),ce.ISO8859_6=new ce(Me.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),ce.ISO8859_7=new ce(Me.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),ce.ISO8859_8=new ce(Me.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),ce.ISO8859_9=new ce(Me.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),ce.ISO8859_10=new ce(Me.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),ce.ISO8859_11=new ce(Me.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),ce.ISO8859_13=new ce(Me.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),ce.ISO8859_14=new ce(Me.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),ce.ISO8859_15=new ce(Me.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),ce.ISO8859_16=new ce(Me.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),ce.SJIS=new ce(Me.SJIS,20,"SJIS","Shift_JIS"),ce.Cp1250=new ce(Me.Cp1250,21,"Cp1250","windows-1250"),ce.Cp1251=new ce(Me.Cp1251,22,"Cp1251","windows-1251"),ce.Cp1252=new ce(Me.Cp1252,23,"Cp1252","windows-1252"),ce.Cp1256=new ce(Me.Cp1256,24,"Cp1256","windows-1256"),ce.UnicodeBigUnmarked=new ce(Me.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),ce.UTF8=new ce(Me.UTF8,26,"UTF8","UTF-8"),ce.ASCII=new ce(Me.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),ce.Big5=new ce(Me.Big5,28,"Big5"),ce.GB18030=new ce(Me.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),ce.EUC_KR=new ce(Me.EUC_KR,30,"EUC_KR","EUC-KR");class ti extends b{}ti.kind="UnsupportedOperationException";class Pt{static decode(t,i){const a=this.encodingName(i);return this.customDecoder?this.customDecoder(t,a):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(a)?this.decodeFallback(t,a):new TextDecoder(a).decode(t)}static shouldDecodeOnFallback(t){return!Pt.isBrowser()&&t==="ISO-8859-1"}static encode(t,i){const a=this.encodingName(i);return this.customEncoder?this.customEncoder(t,a):typeof TextEncoder>"u"?this.encodeFallback(t):new TextEncoder().encode(t)}static isBrowser(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"}static encodingName(t){return typeof t=="string"?t:t.getName()}static encodingCharacterSet(t){return t instanceof ce?t:ce.getCharacterSetECIByName(t)}static decodeFallback(t,i){const a=this.encodingCharacterSet(i);if(Pt.isDecodeFallbackSupported(a)){let o="";for(let c=0,f=t.length;c<f;c++){let g=t[c].toString(16);g.length<2&&(g="0"+g),o+="%"+g}return decodeURIComponent(o)}if(a.equals(ce.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(t.buffer));throw new ti(`Encoding ${this.encodingName(i)} not supported by fallback.`)}static isDecodeFallbackSupported(t){return t.equals(ce.UTF8)||t.equals(ce.ISO8859_1)||t.equals(ce.ASCII)}static encodeFallback(t){const a=btoa(unescape(encodeURIComponent(t))).split(""),o=[];for(let c=0;c<a.length;c++)o.push(a[c].charCodeAt(0));return new Uint8Array(o)}}class Te{static castAsNonUtf8Char(t,i=null){const a=i?i.getName():this.ISO88591;return Pt.decode(new Uint8Array([t]),a)}static guessEncoding(t,i){if(i!=null&&i.get(be.CHARACTER_SET)!==void 0)return i.get(be.CHARACTER_SET).toString();const a=t.length;let o=!0,c=!0,f=!0,g=0,x=0,A=0,v=0,O=0,I=0,B=0,k=0,U=0,V=0,Z=0;const ge=t.length>3&&t[0]===239&&t[1]===187&&t[2]===191;for(let de=0;de<a&&(o||c||f);de++){const he=t[de]&255;f&&(g>0?(he&128)===0?f=!1:g--:(he&128)!==0&&((he&64)===0?f=!1:(g++,(he&32)===0?x++:(g++,(he&16)===0?A++:(g++,(he&8)===0?v++:f=!1))))),o&&(he>127&&he<160?o=!1:he>159&&(he<192||he===215||he===247)&&Z++),c&&(O>0?he<64||he===127||he>252?c=!1:O--:he===128||he===160||he>239?c=!1:he>160&&he<224?(I++,k=0,B++,B>U&&(U=B)):he>127?(O++,B=0,k++,k>V&&(V=k)):(B=0,k=0))}return f&&g>0&&(f=!1),c&&O>0&&(c=!1),f&&(ge||x+A+v>0)?Te.UTF8:c&&(Te.ASSUME_SHIFT_JIS||U>=3||V>=3)?Te.SHIFT_JIS:o&&c?U===2&&I===2||Z*10>=a?Te.SHIFT_JIS:Te.ISO88591:o?Te.ISO88591:c?Te.SHIFT_JIS:f?Te.UTF8:Te.PLATFORM_DEFAULT_ENCODING}static format(t,...i){let a=-1;function o(f,g,x,A,v,O){if(f==="%%")return"%";if(i[++a]===void 0)return;f=A?parseInt(A.substr(1)):void 0;let I=v?parseInt(v.substr(1)):void 0,B;switch(O){case"s":B=i[a];break;case"c":B=i[a][0];break;case"f":B=parseFloat(i[a]).toFixed(f);break;case"p":B=parseFloat(i[a]).toPrecision(f);break;case"e":B=parseFloat(i[a]).toExponential(f);break;case"x":B=parseInt(i[a]).toString(I||16);break;case"d":B=parseFloat(parseInt(i[a],I||10).toPrecision(f)).toFixed(0);break}B=typeof B=="object"?JSON.stringify(B):(+B).toString(I);let k=parseInt(x),U=x&&x[0]+""=="0"?"0":" ";for(;B.length<k;)B=g!==void 0?B+U:U+B;return B}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(c,o)}static getBytes(t,i){return Pt.encode(t,i)}static getCharCode(t,i=0){return t.charCodeAt(i)}static getCharAt(t){return String.fromCharCode(t)}}Te.SHIFT_JIS=ce.SJIS.getName(),Te.GB2312="GB2312",Te.ISO88591=ce.ISO8859_1.getName(),Te.EUC_JP="EUC_JP",Te.UTF8=ce.UTF8.getName(),Te.PLATFORM_DEFAULT_ENCODING=Te.UTF8,Te.ASSUME_SHIFT_JIS=!1;class nt{constructor(t=""){this.value=t}enableDecoding(t){return this.encoding=t,this}append(t){return typeof t=="string"?this.value+=t.toString():this.encoding?this.value+=Te.castAsNonUtf8Char(t,this.encoding):this.value+=String.fromCharCode(t),this}appendChars(t,i,a){for(let o=i;i<i+a;o++)this.append(t[o]);return this}length(){return this.value.length}charAt(t){return this.value.charAt(t)}deleteCharAt(t){this.value=this.value.substr(0,t)+this.value.substring(t+1)}setCharAt(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+1)}substring(t,i){return this.value.substring(t,i)}setLengthToZero(){this.value=""}toString(){return this.value}insert(t,i){this.value=this.value.substr(0,t)+i+this.value.substr(t+i.length)}}class Ot{constructor(t,i,a,o){if(this.width=t,this.height=i,this.rowSize=a,this.bits=o,i==null&&(i=t),this.height=i,t<1||i<1)throw new D("Both dimensions must be greater than 0");a==null&&(a=Math.floor((t+31)/32)),this.rowSize=a,o==null&&(this.bits=new Int32Array(this.rowSize*this.height))}static parseFromBooleanArray(t){const i=t.length,a=t[0].length,o=new Ot(a,i);for(let c=0;c<i;c++){const f=t[c];for(let g=0;g<a;g++)f[g]&&o.set(g,c)}return o}static parseFromString(t,i,a){if(t===null)throw new D("stringRepresentation cannot be null");const o=new Array(t.length);let c=0,f=0,g=-1,x=0,A=0;for(;A<t.length;)if(t.charAt(A)===`
`||t.charAt(A)==="\r"){if(c>f){if(g===-1)g=c-f;else if(c-f!==g)throw new D("row lengths do not match");f=c,x++}A++}else if(t.substring(A,A+i.length)===i)A+=i.length,o[c]=!0,c++;else if(t.substring(A,A+a.length)===a)A+=a.length,o[c]=!1,c++;else throw new D("illegal character encountered: "+t.substring(A));if(c>f){if(g===-1)g=c-f;else if(c-f!==g)throw new D("row lengths do not match");x++}const v=new Ot(g,x);for(let O=0;O<c;O++)o[O]&&v.set(Math.floor(O%g),Math.floor(O/g));return v}get(t,i){const a=i*this.rowSize+Math.floor(t/32);return(this.bits[a]>>>(t&31)&1)!==0}set(t,i){const a=i*this.rowSize+Math.floor(t/32);this.bits[a]|=1<<(t&31)&4294967295}unset(t,i){const a=i*this.rowSize+Math.floor(t/32);this.bits[a]&=~(1<<(t&31)&4294967295)}flip(t,i){const a=i*this.rowSize+Math.floor(t/32);this.bits[a]^=1<<(t&31)&4294967295}xor(t){if(this.width!==t.getWidth()||this.height!==t.getHeight()||this.rowSize!==t.getRowSize())throw new D("input matrix dimensions do not match");const i=new xe(Math.floor(this.width/32)+1),a=this.rowSize,o=this.bits;for(let c=0,f=this.height;c<f;c++){const g=c*a,x=t.getRow(c,i).getBitArray();for(let A=0;A<a;A++)o[g+A]^=x[A]}}clear(){const t=this.bits,i=t.length;for(let a=0;a<i;a++)t[a]=0}setRegion(t,i,a,o){if(i<0||t<0)throw new D("Left and top must be nonnegative");if(o<1||a<1)throw new D("Height and width must be at least 1");const c=t+a,f=i+o;if(f>this.height||c>this.width)throw new D("The region must fit inside the matrix");const g=this.rowSize,x=this.bits;for(let A=i;A<f;A++){const v=A*g;for(let O=t;O<c;O++)x[v+Math.floor(O/32)]|=1<<(O&31)&4294967295}}getRow(t,i){i==null||i.getSize()<this.width?i=new xe(this.width):i.clear();const a=this.rowSize,o=this.bits,c=t*a;for(let f=0;f<a;f++)i.setBulk(f*32,o[c+f]);return i}setRow(t,i){K.arraycopy(i.getBitArray(),0,this.bits,t*this.rowSize,this.rowSize)}rotate180(){const t=this.getWidth(),i=this.getHeight();let a=new xe(t),o=new xe(t);for(let c=0,f=Math.floor((i+1)/2);c<f;c++)a=this.getRow(c,a),o=this.getRow(i-1-c,o),a.reverse(),o.reverse(),this.setRow(c,o),this.setRow(i-1-c,a)}getEnclosingRectangle(){const t=this.width,i=this.height,a=this.rowSize,o=this.bits;let c=t,f=i,g=-1,x=-1;for(let A=0;A<i;A++)for(let v=0;v<a;v++){const O=o[A*a+v];if(O!==0){if(A<f&&(f=A),A>x&&(x=A),v*32<c){let I=0;for(;(O<<31-I&4294967295)===0;)I++;v*32+I<c&&(c=v*32+I)}if(v*32+31>g){let I=31;for(;!(O>>>I);)I--;v*32+I>g&&(g=v*32+I)}}}return g<c||x<f?null:Int32Array.from([c,f,g-c+1,x-f+1])}getTopLeftOnBit(){const t=this.rowSize,i=this.bits;let a=0;for(;a<i.length&&i[a]===0;)a++;if(a===i.length)return null;const o=a/t;let c=a%t*32;const f=i[a];let g=0;for(;(f<<31-g&4294967295)===0;)g++;return c+=g,Int32Array.from([c,o])}getBottomRightOnBit(){const t=this.rowSize,i=this.bits;let a=i.length-1;for(;a>=0&&i[a]===0;)a--;if(a<0)return null;const o=Math.floor(a/t);let c=Math.floor(a%t)*32;const f=i[a];let g=31;for(;!(f>>>g);)g--;return c+=g,Int32Array.from([c,o])}getWidth(){return this.width}getHeight(){return this.height}getRowSize(){return this.rowSize}equals(t){if(!(t instanceof Ot))return!1;const i=t;return this.width===i.width&&this.height===i.height&&this.rowSize===i.rowSize&&fe.equals(this.bits,i.bits)}hashCode(){let t=this.width;return t=31*t+this.width,t=31*t+this.height,t=31*t+this.rowSize,t=31*t+fe.hashCode(this.bits),t}toString(t="X ",i="  ",a=`
`){return this.buildToString(t,i,a)}buildToString(t,i,a){let o=new nt;for(let c=0,f=this.height;c<f;c++){for(let g=0,x=this.width;g<x;g++)o.append(this.get(g,c)?t:i);o.append(a)}return o.toString()}clone(){return new Ot(this.width,this.height,this.rowSize,this.bits.slice())}}class ee extends b{static getNotFoundInstance(){return new ee}}ee.kind="NotFoundException";class Q extends ne{constructor(t){super(t),this.luminances=Q.EMPTY,this.buckets=new Int32Array(Q.LUMINANCE_BUCKETS)}getBlackRow(t,i){const a=this.getLuminanceSource(),o=a.getWidth();i==null||i.getSize()<o?i=new xe(o):i.clear(),this.initArrays(o);const c=a.getRow(t,this.luminances),f=this.buckets;for(let x=0;x<o;x++)f[(c[x]&255)>>Q.LUMINANCE_SHIFT]++;const g=Q.estimateBlackPoint(f);if(o<3)for(let x=0;x<o;x++)(c[x]&255)<g&&i.set(x);else{let x=c[0]&255,A=c[1]&255;for(let v=1;v<o-1;v++){const O=c[v+1]&255;(A*4-x-O)/2<g&&i.set(v),x=A,A=O}}return i}getBlackMatrix(){const t=this.getLuminanceSource(),i=t.getWidth(),a=t.getHeight(),o=new Ot(i,a);this.initArrays(i);const c=this.buckets;for(let x=1;x<5;x++){const A=Math.floor(a*x/5),v=t.getRow(A,this.luminances),O=Math.floor(i*4/5);for(let I=Math.floor(i/5);I<O;I++){const B=v[I]&255;c[B>>Q.LUMINANCE_SHIFT]++}}const f=Q.estimateBlackPoint(c),g=t.getMatrix();for(let x=0;x<a;x++){const A=x*i;for(let v=0;v<i;v++)(g[A+v]&255)<f&&o.set(v,x)}return o}createBinarizer(t){return new Q(t)}initArrays(t){this.luminances.length<t&&(this.luminances=new Uint8ClampedArray(t));const i=this.buckets;for(let a=0;a<Q.LUMINANCE_BUCKETS;a++)i[a]=0}static estimateBlackPoint(t){const i=t.length;let a=0,o=0,c=0;for(let v=0;v<i;v++)t[v]>c&&(o=v,c=t[v]),t[v]>a&&(a=t[v]);let f=0,g=0;for(let v=0;v<i;v++){const O=v-o,I=t[v]*O*O;I>g&&(f=v,g=I)}if(o>f){const v=o;o=f,f=v}if(f-o<=i/16)throw new ee;let x=f-1,A=-1;for(let v=f-1;v>o;v--){const O=v-o,I=O*O*(f-v)*(a-t[v]);I>A&&(x=v,A=I)}return x<<Q.LUMINANCE_SHIFT}}Q.LUMINANCE_BITS=5,Q.LUMINANCE_SHIFT=8-Q.LUMINANCE_BITS,Q.LUMINANCE_BUCKETS=1<<Q.LUMINANCE_BITS,Q.EMPTY=Uint8ClampedArray.from([0]);class se extends Q{constructor(t){super(t),this.matrix=null}getBlackMatrix(){if(this.matrix!==null)return this.matrix;const t=this.getLuminanceSource(),i=t.getWidth(),a=t.getHeight();if(i>=se.MINIMUM_DIMENSION&&a>=se.MINIMUM_DIMENSION){const o=t.getMatrix();let c=i>>se.BLOCK_SIZE_POWER;(i&se.BLOCK_SIZE_MASK)!==0&&c++;let f=a>>se.BLOCK_SIZE_POWER;(a&se.BLOCK_SIZE_MASK)!==0&&f++;const g=se.calculateBlackPoints(o,c,f,i,a),x=new Ot(i,a);se.calculateThresholdForBlock(o,c,f,i,a,g,x),this.matrix=x}else this.matrix=super.getBlackMatrix();return this.matrix}createBinarizer(t){return new se(t)}static calculateThresholdForBlock(t,i,a,o,c,f,g){const x=c-se.BLOCK_SIZE,A=o-se.BLOCK_SIZE;for(let v=0;v<a;v++){let O=v<<se.BLOCK_SIZE_POWER;O>x&&(O=x);const I=se.cap(v,2,a-3);for(let B=0;B<i;B++){let k=B<<se.BLOCK_SIZE_POWER;k>A&&(k=A);const U=se.cap(B,2,i-3);let V=0;for(let ge=-2;ge<=2;ge++){const de=f[I+ge];V+=de[U-2]+de[U-1]+de[U]+de[U+1]+de[U+2]}const Z=V/25;se.thresholdBlock(t,k,O,Z,o,g)}}}static cap(t,i,a){return t<i?i:t>a?a:t}static thresholdBlock(t,i,a,o,c,f){for(let g=0,x=a*c+i;g<se.BLOCK_SIZE;g++,x+=c)for(let A=0;A<se.BLOCK_SIZE;A++)(t[x+A]&255)<=o&&f.set(i+A,a+g)}static calculateBlackPoints(t,i,a,o,c){const f=c-se.BLOCK_SIZE,g=o-se.BLOCK_SIZE,x=new Array(a);for(let A=0;A<a;A++){x[A]=new Int32Array(i);let v=A<<se.BLOCK_SIZE_POWER;v>f&&(v=f);for(let O=0;O<i;O++){let I=O<<se.BLOCK_SIZE_POWER;I>g&&(I=g);let B=0,k=255,U=0;for(let Z=0,ge=v*o+I;Z<se.BLOCK_SIZE;Z++,ge+=o){for(let de=0;de<se.BLOCK_SIZE;de++){const he=t[ge+de]&255;B+=he,he<k&&(k=he),he>U&&(U=he)}if(U-k>se.MIN_DYNAMIC_RANGE)for(Z++,ge+=o;Z<se.BLOCK_SIZE;Z++,ge+=o)for(let de=0;de<se.BLOCK_SIZE;de++)B+=t[ge+de]&255}let V=B>>se.BLOCK_SIZE_POWER*2;if(U-k<=se.MIN_DYNAMIC_RANGE&&(V=k/2,A>0&&O>0)){const Z=(x[A-1][O]+2*x[A][O-1]+x[A-1][O-1])/4;k<Z&&(V=Z)}x[A][O]=V}}return x}}se.BLOCK_SIZE_POWER=3,se.BLOCK_SIZE=1<<se.BLOCK_SIZE_POWER,se.BLOCK_SIZE_MASK=se.BLOCK_SIZE-1,se.MINIMUM_DIMENSION=se.BLOCK_SIZE*5,se.MIN_DYNAMIC_RANGE=24;class De{constructor(t,i){this.width=t,this.height=i}getWidth(){return this.width}getHeight(){return this.height}isCropSupported(){return!1}crop(t,i,a,o){throw new ti("This luminance source does not support cropping.")}isRotateSupported(){return!1}rotateCounterClockwise(){throw new ti("This luminance source does not support rotation by 90 degrees.")}rotateCounterClockwise45(){throw new ti("This luminance source does not support rotation by 45 degrees.")}toString(){const t=new Uint8ClampedArray(this.width);let i=new nt;for(let a=0;a<this.height;a++){const o=this.getRow(a,t);for(let c=0;c<this.width;c++){const f=o[c]&255;let g;f<64?g="#":f<128?g="+":f<192?g=".":g=" ",i.append(g)}i.append(`
`)}return i.toString()}}class Qe extends De{constructor(t){super(t.getWidth(),t.getHeight()),this.delegate=t}getRow(t,i){const a=this.delegate.getRow(t,i),o=this.getWidth();for(let c=0;c<o;c++)a[c]=255-(a[c]&255);return a}getMatrix(){const t=this.delegate.getMatrix(),i=this.getWidth()*this.getHeight(),a=new Uint8ClampedArray(i);for(let o=0;o<i;o++)a[o]=255-(t[o]&255);return a}isCropSupported(){return this.delegate.isCropSupported()}crop(t,i,a,o){return new Qe(this.delegate.crop(t,i,a,o))}isRotateSupported(){return this.delegate.isRotateSupported()}invert(){return this.delegate}rotateCounterClockwise(){return new Qe(this.delegate.rotateCounterClockwise())}rotateCounterClockwise45(){return new Qe(this.delegate.rotateCounterClockwise45())}}class it extends De{constructor(t){super(t.width,t.height),this.canvas=t,this.tempCanvasElement=null,this.buffer=it.makeBufferFromCanvasImageData(t)}static makeBufferFromCanvasImageData(t){const i=t.getContext("2d").getImageData(0,0,t.width,t.height);return it.toGrayscaleBuffer(i.data,t.width,t.height)}static toGrayscaleBuffer(t,i,a){const o=new Uint8ClampedArray(i*a);for(let c=0,f=0,g=t.length;c<g;c+=4,f++){let x;if(t[c+3]===0)x=255;else{const v=t[c],O=t[c+1],I=t[c+2];x=306*v+601*O+117*I+512>>10}o[f]=x}return o}getRow(t,i){if(t<0||t>=this.getHeight())throw new D("Requested row is outside the image: "+t);const a=this.getWidth(),o=t*a;return i===null?i=this.buffer.slice(o,o+a):(i.length<a&&(i=new Uint8ClampedArray(a)),i.set(this.buffer.slice(o,o+a))),i}getMatrix(){return this.buffer}isCropSupported(){return!0}crop(t,i,a,o){return super.crop(t,i,a,o),this}isRotateSupported(){return!0}rotateCounterClockwise(){return this.rotate(-90),this}rotateCounterClockwise45(){return this.rotate(-45),this}getTempCanvasElement(){if(this.tempCanvasElement===null){const t=this.canvas.ownerDocument.createElement("canvas");t.width=this.canvas.width,t.height=this.canvas.height,this.tempCanvasElement=t}return this.tempCanvasElement}rotate(t){const i=this.getTempCanvasElement(),a=i.getContext("2d"),o=t*it.DEGREE_TO_RADIANS,c=this.canvas.width,f=this.canvas.height,g=Math.ceil(Math.abs(Math.cos(o))*c+Math.abs(Math.sin(o))*f),x=Math.ceil(Math.abs(Math.sin(o))*c+Math.abs(Math.cos(o))*f);return i.width=g,i.height=x,a.translate(g/2,x/2),a.rotate(o),a.drawImage(this.canvas,c/-2,f/-2),this.buffer=it.makeBufferFromCanvasImageData(i),this}invert(){return new Qe(this)}}it.DEGREE_TO_RADIANS=Math.PI/180;class z{constructor(t,i,a){this.deviceId=t,this.label=i,this.kind="videoinput",this.groupId=a||void 0}toJSON(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}}}var ie=(globalThis||vu||self||window||void 0)&&(globalThis||vu||self||window||void 0).__awaiter||function(T,t,i,a){function o(c){return c instanceof i?c:new i(function(f){f(c)})}return new(i||(i=Promise))(function(c,f){function g(v){try{A(a.next(v))}catch(O){f(O)}}function x(v){try{A(a.throw(v))}catch(O){f(O)}}function A(v){v.done?c(v.value):o(v.value).then(g,x)}A((a=a.apply(T,t||[])).next())})};class we{constructor(t,i=500,a){this.reader=t,this.timeBetweenScansMillis=i,this._hints=a,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}get hasNavigator(){return typeof navigator<"u"}get isMediaDevicesSuported(){return this.hasNavigator&&!!navigator.mediaDevices}get canEnumerateDevices(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)}get timeBetweenDecodingAttempts(){return this._timeBetweenDecodingAttempts}set timeBetweenDecodingAttempts(t){this._timeBetweenDecodingAttempts=t<0?0:t}set hints(t){this._hints=t||null}get hints(){return this._hints}listVideoInputDevices(){return ie(this,void 0,void 0,function*(){if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");const t=yield navigator.mediaDevices.enumerateDevices(),i=[];for(const a of t){const o=a.kind==="video"?"videoinput":a.kind;if(o!=="videoinput")continue;const c=a.deviceId||a.id,f=a.label||`Video device ${i.length+1}`,g=a.groupId,x={deviceId:c,label:f,kind:o,groupId:g};i.push(x)}return i})}getVideoInputDevices(){return ie(this,void 0,void 0,function*(){return(yield this.listVideoInputDevices()).map(i=>new z(i.deviceId,i.label))})}findDeviceById(t){return ie(this,void 0,void 0,function*(){const i=yield this.listVideoInputDevices();return i?i.find(a=>a.deviceId===t):null})}decodeFromInputVideoDevice(t,i){return ie(this,void 0,void 0,function*(){return yield this.decodeOnceFromVideoDevice(t,i)})}decodeOnceFromVideoDevice(t,i){return ie(this,void 0,void 0,function*(){this.reset();let a;t?a={deviceId:{exact:t}}:a={facingMode:"environment"};const o={video:a};return yield this.decodeOnceFromConstraints(o,i)})}decodeOnceFromConstraints(t,i){return ie(this,void 0,void 0,function*(){const a=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeOnceFromStream(a,i)})}decodeOnceFromStream(t,i){return ie(this,void 0,void 0,function*(){this.reset();const a=yield this.attachStreamToVideo(t,i);return yield this.decodeOnce(a)})}decodeFromInputVideoDeviceContinuously(t,i,a){return ie(this,void 0,void 0,function*(){return yield this.decodeFromVideoDevice(t,i,a)})}decodeFromVideoDevice(t,i,a){return ie(this,void 0,void 0,function*(){let o;t?o={deviceId:{exact:t}}:o={facingMode:"environment"};const c={video:o};return yield this.decodeFromConstraints(c,i,a)})}decodeFromConstraints(t,i,a){return ie(this,void 0,void 0,function*(){const o=yield navigator.mediaDevices.getUserMedia(t);return yield this.decodeFromStream(o,i,a)})}decodeFromStream(t,i,a){return ie(this,void 0,void 0,function*(){this.reset();const o=yield this.attachStreamToVideo(t,i);return yield this.decodeContinuously(o,a)})}stopAsyncDecode(){this._stopAsyncDecode=!0}stopContinuousDecode(){this._stopContinuousDecode=!0}attachStreamToVideo(t,i){return ie(this,void 0,void 0,function*(){const a=this.prepareVideoElement(i);return this.addVideoSource(a,t),this.videoElement=a,this.stream=t,yield this.playVideoOnLoadAsync(a),a})}playVideoOnLoadAsync(t){return new Promise((i,a)=>this.playVideoOnLoad(t,()=>i()))}playVideoOnLoad(t,i){this.videoEndedListener=()=>this.stopStreams(),this.videoCanPlayListener=()=>this.tryPlayVideo(t),t.addEventListener("ended",this.videoEndedListener),t.addEventListener("canplay",this.videoCanPlayListener),t.addEventListener("playing",i),this.tryPlayVideo(t)}isVideoPlaying(t){return t.currentTime>0&&!t.paused&&!t.ended&&t.readyState>2}tryPlayVideo(t){return ie(this,void 0,void 0,function*(){if(this.isVideoPlaying(t)){console.warn("Trying to play video that is already playing.");return}try{yield t.play()}catch{console.warn("It was not possible to play the video.")}})}getMediaElement(t,i){const a=document.getElementById(t);if(!a)throw new N(`element with id '${t}' not found`);if(a.nodeName.toLowerCase()!==i.toLowerCase())throw new N(`element with id '${t}' must be an ${i} element`);return a}decodeFromImage(t,i){if(!t&&!i)throw new N("either imageElement with a src set or an url must be provided");return i&&!t?this.decodeFromImageUrl(i):this.decodeFromImageElement(t)}decodeFromVideo(t,i){if(!t&&!i)throw new N("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrl(i):this.decodeFromVideoElement(t)}decodeFromVideoContinuously(t,i,a){if(t===void 0&&i===void 0)throw new N("Either an element with a src set or an URL must be provided");return i&&!t?this.decodeFromVideoUrlContinuously(i,a):this.decodeFromVideoElementContinuously(t,a)}decodeFromImageElement(t){if(!t)throw new N("An image element must be provided.");this.reset();const i=this.prepareImageElement(t);this.imageElement=i;let a;return this.isImageLoaded(i)?a=this.decodeOnce(i,!1,!0):a=this._decodeOnLoadImage(i),a}decodeFromVideoElement(t){const i=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideo(i)}decodeFromVideoElementContinuously(t,i){const a=this._decodeFromVideoElementSetup(t);return this._decodeOnLoadVideoContinuously(a,i)}_decodeFromVideoElementSetup(t){if(!t)throw new N("A video element must be provided.");this.reset();const i=this.prepareVideoElement(t);return this.videoElement=i,i}decodeFromImageUrl(t){if(!t)throw new N("An URL must be provided.");this.reset();const i=this.prepareImageElement();this.imageElement=i;const a=this._decodeOnLoadImage(i);return i.src=t,a}decodeFromVideoUrl(t){if(!t)throw new N("An URL must be provided.");this.reset();const i=this.prepareVideoElement(),a=this.decodeFromVideoElement(i);return i.src=t,a}decodeFromVideoUrlContinuously(t,i){if(!t)throw new N("An URL must be provided.");this.reset();const a=this.prepareVideoElement(),o=this.decodeFromVideoElementContinuously(a,i);return a.src=t,o}_decodeOnLoadImage(t){return new Promise((i,a)=>{this.imageLoadedListener=()=>this.decodeOnce(t,!1,!0).then(i,a),t.addEventListener("load",this.imageLoadedListener)})}_decodeOnLoadVideo(t){return ie(this,void 0,void 0,function*(){return yield this.playVideoOnLoadAsync(t),yield this.decodeOnce(t)})}_decodeOnLoadVideoContinuously(t,i){return ie(this,void 0,void 0,function*(){yield this.playVideoOnLoadAsync(t),this.decodeContinuously(t,i)})}isImageLoaded(t){return!(!t.complete||t.naturalWidth===0)}prepareImageElement(t){let i;return typeof t>"u"&&(i=document.createElement("img"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"img")),t instanceof HTMLImageElement&&(i=t),i}prepareVideoElement(t){let i;return!t&&typeof document<"u"&&(i=document.createElement("video"),i.width=200,i.height=200),typeof t=="string"&&(i=this.getMediaElement(t,"video")),t instanceof HTMLVideoElement&&(i=t),i.setAttribute("autoplay","true"),i.setAttribute("muted","true"),i.setAttribute("playsinline","true"),i}decodeOnce(t,i=!0,a=!0){this._stopAsyncDecode=!1;const o=(c,f)=>{if(this._stopAsyncDecode){f(new ee("Video stream has ended before any code could be detected.")),this._stopAsyncDecode=void 0;return}try{const g=this.decode(t);c(g)}catch(g){const x=i&&g instanceof ee,v=(g instanceof P||g instanceof $)&&a;if(x||v)return setTimeout(o,this._timeBetweenDecodingAttempts,c,f);f(g)}};return new Promise((c,f)=>o(c,f))}decodeContinuously(t,i){this._stopContinuousDecode=!1;const a=()=>{if(this._stopContinuousDecode){this._stopContinuousDecode=void 0;return}try{const o=this.decode(t);i(o,null),setTimeout(a,this.timeBetweenScansMillis)}catch(o){i(null,o);const c=o instanceof P||o instanceof $,f=o instanceof ee;(c||f)&&setTimeout(a,this._timeBetweenDecodingAttempts)}};a()}decode(t){const i=this.createBinaryBitmap(t);return this.decodeBitmap(i)}_isHTMLVideoElement(t){return t.videoWidth!==0}drawFrameOnCanvas(t,i,a){i||(i={sx:0,sy:0,sWidth:t.videoWidth,sHeight:t.videoHeight,dx:0,dy:0,dWidth:t.videoWidth,dHeight:t.videoHeight}),a||(a=this.captureCanvasContext),a.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}drawImageOnCanvas(t,i,a=this.captureCanvasContext){i||(i={sx:0,sy:0,sWidth:t.naturalWidth,sHeight:t.naturalHeight,dx:0,dy:0,dWidth:t.naturalWidth,dHeight:t.naturalHeight}),a||(a=this.captureCanvasContext),a.drawImage(t,i.sx,i.sy,i.sWidth,i.sHeight,i.dx,i.dy,i.dWidth,i.dHeight)}createBinaryBitmap(t){this.getCaptureCanvasContext(t),this._isHTMLVideoElement(t)?this.drawFrameOnCanvas(t):this.drawImageOnCanvas(t);const i=this.getCaptureCanvas(t),a=new it(i),o=new se(a);return new F(o)}getCaptureCanvasContext(t){if(!this.captureCanvasContext){const a=this.getCaptureCanvas(t).getContext("2d");this.captureCanvasContext=a}return this.captureCanvasContext}getCaptureCanvas(t){if(!this.captureCanvas){const i=this.createCaptureCanvas(t);this.captureCanvas=i}return this.captureCanvas}decodeBitmap(t){return this.reader.decode(t,this._hints)}createCaptureCanvas(t){if(typeof document>"u")return this._destroyCaptureCanvas(),null;const i=document.createElement("canvas");let a,o;return typeof t<"u"&&(t instanceof HTMLVideoElement?(a=t.videoWidth,o=t.videoHeight):t instanceof HTMLImageElement&&(a=t.naturalWidth||t.width,o=t.naturalHeight||t.height)),i.style.width=a+"px",i.style.height=o+"px",i.width=a,i.height=o,i}stopStreams(){this.stream&&(this.stream.getVideoTracks().forEach(t=>t.stop()),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()}reset(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()}_destroyVideoElement(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)}_destroyImageElement(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)}_destroyCaptureCanvas(){this.captureCanvasContext=void 0,this.captureCanvas=void 0}addVideoSource(t,i){try{t.srcObject=i}catch{t.src=URL.createObjectURL(i)}}cleanVideoSource(t){try{t.srcObject=null}catch{t.src=""}this.videoElement.removeAttribute("src")}}class Ae{constructor(t,i,a=i==null?0:8*i.length,o,c,f=K.currentTimeMillis()){this.text=t,this.rawBytes=i,this.numBits=a,this.resultPoints=o,this.format=c,this.timestamp=f,this.text=t,this.rawBytes=i,a==null?this.numBits=i==null?0:8*i.length:this.numBits=a,this.resultPoints=o,this.format=c,this.resultMetadata=null,f==null?this.timestamp=K.currentTimeMillis():this.timestamp=f}getText(){return this.text}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}getResultPoints(){return this.resultPoints}getBarcodeFormat(){return this.format}getResultMetadata(){return this.resultMetadata}putMetadata(t,i){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(t,i)}putAllMetadata(t){t!==null&&(this.resultMetadata===null?this.resultMetadata=t:this.resultMetadata=new Map(t))}addResultPoints(t){const i=this.resultPoints;if(i===null)this.resultPoints=t;else if(t!==null&&t.length>0){const a=new Array(i.length+t.length);K.arraycopy(i,0,a,0,i.length),K.arraycopy(t,0,a,i.length,t.length),this.resultPoints=a}}getTimestamp(){return this.timestamp}toString(){return this.text}}var ze;(function(T){T[T.AZTEC=0]="AZTEC",T[T.CODABAR=1]="CODABAR",T[T.CODE_39=2]="CODE_39",T[T.CODE_93=3]="CODE_93",T[T.CODE_128=4]="CODE_128",T[T.DATA_MATRIX=5]="DATA_MATRIX",T[T.EAN_8=6]="EAN_8",T[T.EAN_13=7]="EAN_13",T[T.ITF=8]="ITF",T[T.MAXICODE=9]="MAXICODE",T[T.PDF_417=10]="PDF_417",T[T.QR_CODE=11]="QR_CODE",T[T.RSS_14=12]="RSS_14",T[T.RSS_EXPANDED=13]="RSS_EXPANDED",T[T.UPC_A=14]="UPC_A",T[T.UPC_E=15]="UPC_E",T[T.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION"})(ze||(ze={}));var pe=ze,ut;(function(T){T[T.OTHER=0]="OTHER",T[T.ORIENTATION=1]="ORIENTATION",T[T.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",T[T.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",T[T.ISSUE_NUMBER=4]="ISSUE_NUMBER",T[T.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",T[T.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",T[T.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",T[T.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",T[T.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",T[T.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY"})(ut||(ut={}));var ct=ut;class Mt{constructor(t,i,a,o,c=-1,f=-1){this.rawBytes=t,this.text=i,this.byteSegments=a,this.ecLevel=o,this.structuredAppendSequenceNumber=c,this.structuredAppendParity=f,this.numBits=t==null?0:8*t.length}getRawBytes(){return this.rawBytes}getNumBits(){return this.numBits}setNumBits(t){this.numBits=t}getText(){return this.text}getByteSegments(){return this.byteSegments}getECLevel(){return this.ecLevel}getErrorsCorrected(){return this.errorsCorrected}setErrorsCorrected(t){this.errorsCorrected=t}getErasures(){return this.erasures}setErasures(t){this.erasures=t}getOther(){return this.other}setOther(t){this.other=t}hasStructuredAppend(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0}getStructuredAppendParity(){return this.structuredAppendParity}getStructuredAppendSequenceNumber(){return this.structuredAppendSequenceNumber}}class Mi{exp(t){return this.expTable[t]}log(t){if(t===0)throw new D;return this.logTable[t]}static addOrSubtract(t,i){return t^i}}class yn{constructor(t,i){if(i.length===0)throw new D;this.field=t;const a=i.length;if(a>1&&i[0]===0){let o=1;for(;o<a&&i[o]===0;)o++;o===a?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(a-o),K.arraycopy(i,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);const i=this.coefficients;let a;if(t===1){a=0;for(let f=0,g=i.length;f!==g;f++){const x=i[f];a=Mi.addOrSubtract(a,x)}return a}a=i[0];const o=i.length,c=this.field;for(let f=1;f<o;f++)a=Mi.addOrSubtract(c.multiply(t,a),i[f]);return a}addOrSubtract(t){if(!this.field.equals(t.field))throw new D("GenericGFPolys do not have same GenericGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,a=t.coefficients;if(i.length>a.length){const f=i;i=a,a=f}let o=new Int32Array(a.length);const c=a.length-i.length;K.arraycopy(a,0,o,0,c);for(let f=c;f<a.length;f++)o[f]=Mi.addOrSubtract(i[f-c],a[f]);return new yn(this.field,o)}multiply(t){if(!this.field.equals(t.field))throw new D("GenericGFPolys do not have same GenericGF field");if(this.isZero()||t.isZero())return this.field.getZero();const i=this.coefficients,a=i.length,o=t.coefficients,c=o.length,f=new Int32Array(a+c-1),g=this.field;for(let x=0;x<a;x++){const A=i[x];for(let v=0;v<c;v++)f[x+v]=Mi.addOrSubtract(f[x+v],g.multiply(A,o[v]))}return new yn(g,f)}multiplyScalar(t){if(t===0)return this.field.getZero();if(t===1)return this;const i=this.coefficients.length,a=this.field,o=new Int32Array(i),c=this.coefficients;for(let f=0;f<i;f++)o[f]=a.multiply(c[f],t);return new yn(a,o)}multiplyByMonomial(t,i){if(t<0)throw new D;if(i===0)return this.field.getZero();const a=this.coefficients,o=a.length,c=new Int32Array(o+t),f=this.field;for(let g=0;g<o;g++)c[g]=f.multiply(a[g],i);return new yn(f,c)}divide(t){if(!this.field.equals(t.field))throw new D("GenericGFPolys do not have same GenericGF field");if(t.isZero())throw new D("Divide by 0");const i=this.field;let a=i.getZero(),o=this;const c=t.getCoefficient(t.getDegree()),f=i.inverse(c);for(;o.getDegree()>=t.getDegree()&&!o.isZero();){const g=o.getDegree()-t.getDegree(),x=i.multiply(o.getCoefficient(o.getDegree()),f),A=t.multiplyByMonomial(g,x),v=i.buildMonomial(g,x);a=a.addOrSubtract(v),o=o.addOrSubtract(A)}return[a,o]}toString(){let t="";for(let i=this.getDegree();i>=0;i--){let a=this.getCoefficient(i);if(a!==0){if(a<0?(t+=" - ",a=-a):t.length>0&&(t+=" + "),i===0||a!==1){const o=this.field.log(a);o===0?t+="1":o===1?t+="a":(t+="a^",t+=o)}i!==0&&(i===1?t+="x":(t+="x^",t+=i))}}return t}}class Dr extends b{}Dr.kind="ArithmeticException";class ht extends Mi{constructor(t,i,a){super(),this.primitive=t,this.size=i,this.generatorBase=a;const o=new Int32Array(i);let c=1;for(let g=0;g<i;g++)o[g]=c,c*=2,c>=i&&(c^=t,c&=i-1);this.expTable=o;const f=new Int32Array(i);for(let g=0;g<i-1;g++)f[o[g]]=g;this.logTable=f,this.zero=new yn(this,Int32Array.from([0])),this.one=new yn(this,Int32Array.from([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new D;if(i===0)return this.zero;const a=new Int32Array(t+1);return a[0]=i,new yn(this,a)}inverse(t){if(t===0)throw new Dr;return this.expTable[this.size-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.size-1)]}getSize(){return this.size}getGeneratorBase(){return this.generatorBase}toString(){return"GF(0x"+te.toHexString(this.primitive)+","+this.size+")"}equals(t){return t===this}}ht.AZTEC_DATA_12=new ht(4201,4096,1),ht.AZTEC_DATA_10=new ht(1033,1024,1),ht.AZTEC_DATA_6=new ht(67,64,1),ht.AZTEC_PARAM=new ht(19,16,1),ht.QR_CODE_FIELD_256=new ht(285,256,0),ht.DATA_MATRIX_FIELD_256=new ht(301,256,1),ht.AZTEC_DATA_8=ht.DATA_MATRIX_FIELD_256,ht.MAXICODE_FIELD_64=ht.AZTEC_DATA_6;class Vn extends b{}Vn.kind="ReedSolomonException";class Gn extends b{}Gn.kind="IllegalStateException";class sr{constructor(t){this.field=t}decode(t,i){const a=this.field,o=new yn(a,t),c=new Int32Array(i);let f=!0;for(let B=0;B<i;B++){const k=o.evaluateAt(a.exp(B+a.getGeneratorBase()));c[c.length-1-B]=k,k!==0&&(f=!1)}if(f)return;const g=new yn(a,c),x=this.runEuclideanAlgorithm(a.buildMonomial(i,1),g,i),A=x[0],v=x[1],O=this.findErrorLocations(A),I=this.findErrorMagnitudes(v,O);for(let B=0;B<O.length;B++){const k=t.length-1-a.log(O[B]);if(k<0)throw new Vn("Bad error location");t[k]=ht.addOrSubtract(t[k],I[B])}}runEuclideanAlgorithm(t,i,a){if(t.getDegree()<i.getDegree()){const B=t;t=i,i=B}const o=this.field;let c=t,f=i,g=o.getZero(),x=o.getOne();for(;f.getDegree()>=(a/2|0);){let B=c,k=g;if(c=f,g=x,c.isZero())throw new Vn("r_{i-1} was zero");f=B;let U=o.getZero();const V=c.getCoefficient(c.getDegree()),Z=o.inverse(V);for(;f.getDegree()>=c.getDegree()&&!f.isZero();){const ge=f.getDegree()-c.getDegree(),de=o.multiply(f.getCoefficient(f.getDegree()),Z);U=U.addOrSubtract(o.buildMonomial(ge,de)),f=f.addOrSubtract(c.multiplyByMonomial(ge,de))}if(x=U.multiply(g).addOrSubtract(k),f.getDegree()>=c.getDegree())throw new Gn("Division algorithm failed to reduce polynomial?")}const A=x.getCoefficient(0);if(A===0)throw new Vn("sigmaTilde(0) was zero");const v=o.inverse(A),O=x.multiplyScalar(v),I=f.multiplyScalar(v);return[O,I]}findErrorLocations(t){const i=t.getDegree();if(i===1)return Int32Array.from([t.getCoefficient(1)]);const a=new Int32Array(i);let o=0;const c=this.field;for(let f=1;f<c.getSize()&&o<i;f++)t.evaluateAt(f)===0&&(a[o]=c.inverse(f),o++);if(o!==i)throw new Vn("Error locator degree does not match number of roots");return a}findErrorMagnitudes(t,i){const a=i.length,o=new Int32Array(a),c=this.field;for(let f=0;f<a;f++){const g=c.inverse(i[f]);let x=1;for(let A=0;A<a;A++)if(f!==A){const v=c.multiply(i[A],g),O=(v&1)===0?v|1:v&-2;x=c.multiply(x,O)}o[f]=c.multiply(t.evaluateAt(g),c.inverse(x)),c.getGeneratorBase()!==0&&(o[f]=c.multiply(o[f],g))}return o}}var pn;(function(T){T[T.UPPER=0]="UPPER",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.DIGIT=3]="DIGIT",T[T.PUNCT=4]="PUNCT",T[T.BINARY=5]="BINARY"})(pn||(pn={}));class vt{decode(t){this.ddata=t;let i=t.getBits(),a=this.extractBits(i),o=this.correctBits(a),c=vt.convertBoolArrayToByteArray(o),f=vt.getEncodedData(o),g=new Mt(c,f,null,null);return g.setNumBits(o.length),g}static highLevelDecode(t){return this.getEncodedData(t)}static getEncodedData(t){let i=t.length,a=pn.UPPER,o=pn.UPPER,c="",f=0;for(;f<i;)if(o===pn.BINARY){if(i-f<5)break;let g=vt.readCode(t,f,5);if(f+=5,g===0){if(i-f<11)break;g=vt.readCode(t,f,11)+31,f+=11}for(let x=0;x<g;x++){if(i-f<8){f=i;break}const A=vt.readCode(t,f,8);c+=Te.castAsNonUtf8Char(A),f+=8}o=a}else{let g=o===pn.DIGIT?4:5;if(i-f<g)break;let x=vt.readCode(t,f,g);f+=g;let A=vt.getCharacter(o,x);A.startsWith("CTRL_")?(a=o,o=vt.getTable(A.charAt(5)),A.charAt(6)==="L"&&(a=o)):(c+=A,o=a)}return c}static getTable(t){switch(t){case"L":return pn.LOWER;case"P":return pn.PUNCT;case"M":return pn.MIXED;case"D":return pn.DIGIT;case"B":return pn.BINARY;default:return pn.UPPER}}static getCharacter(t,i){switch(t){case pn.UPPER:return vt.UPPER_TABLE[i];case pn.LOWER:return vt.LOWER_TABLE[i];case pn.MIXED:return vt.MIXED_TABLE[i];case pn.PUNCT:return vt.PUNCT_TABLE[i];case pn.DIGIT:return vt.DIGIT_TABLE[i];default:throw new Gn("Bad table")}}correctBits(t){let i,a;this.ddata.getNbLayers()<=2?(a=6,i=ht.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(a=8,i=ht.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(a=10,i=ht.AZTEC_DATA_10):(a=12,i=ht.AZTEC_DATA_12);let o=this.ddata.getNbDatablocks(),c=t.length/a;if(c<o)throw new $;let f=t.length%a,g=new Int32Array(c);for(let I=0;I<c;I++,f+=a)g[I]=vt.readCode(t,f,a);try{new sr(i).decode(g,c-o)}catch(I){throw new $(I)}let x=(1<<a)-1,A=0;for(let I=0;I<o;I++){let B=g[I];if(B===0||B===x)throw new $;(B===1||B===x-1)&&A++}let v=new Array(o*a-A),O=0;for(let I=0;I<o;I++){let B=g[I];if(B===1||B===x-1)v.fill(B>1,O,O+a-1),O+=a-1;else for(let k=a-1;k>=0;--k)v[O++]=(B&1<<k)!==0}return v}extractBits(t){let i=this.ddata.isCompact(),a=this.ddata.getNbLayers(),o=(i?11:14)+a*4,c=new Int32Array(o),f=new Array(this.totalBitsInLayer(a,i));if(i)for(let g=0;g<c.length;g++)c[g]=g;else{let g=o+1+2*te.truncDivision(te.truncDivision(o,2)-1,15),x=o/2,A=te.truncDivision(g,2);for(let v=0;v<x;v++){let O=v+te.truncDivision(v,15);c[x-v-1]=A-O-1,c[x+v]=A+O+1}}for(let g=0,x=0;g<a;g++){let A=(a-g)*4+(i?9:12),v=g*2,O=o-1-v;for(let I=0;I<A;I++){let B=I*2;for(let k=0;k<2;k++)f[x+B+k]=t.get(c[v+k],c[v+I]),f[x+2*A+B+k]=t.get(c[v+I],c[O-k]),f[x+4*A+B+k]=t.get(c[O-k],c[O-I]),f[x+6*A+B+k]=t.get(c[O-I],c[v+k])}x+=A*8}return f}static readCode(t,i,a){let o=0;for(let c=i;c<i+a;c++)o<<=1,t[c]&&(o|=1);return o}static readByte(t,i){let a=t.length-i;return a>=8?vt.readCode(t,i,8):vt.readCode(t,i,a)<<8-a}static convertBoolArrayToByteArray(t){let i=new Uint8Array((t.length+7)/8);for(let a=0;a<i.length;a++)i[a]=vt.readByte(t,8*a);return i}totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}vt.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],vt.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],vt.MIXED_TABLE=["CTRL_PS"," ","\\1","\\2","\\3","\\4","\\5","\\6","\\7","\b","	",`
`,"\\13","\f","\r","\\33","\\34","\\35","\\36","\\37","@","\\","^","_","`","|","~","\\177","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],vt.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],vt.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"];class Je{constructor(){}static round(t){return t===NaN?0:t<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:t>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:t+(t<0?-.5:.5)|0}static distance(t,i,a,o){const c=t-a,f=i-o;return Math.sqrt(c*c+f*f)}static sum(t){let i=0;for(let a=0,o=t.length;a!==o;a++){const c=t[a];i+=c}return i}}class Mr{static floatToIntBits(t){return t}}Mr.MAX_VALUE=Number.MAX_SAFE_INTEGER;class Se{constructor(t,i){this.x=t,this.y=i}getX(){return this.x}getY(){return this.y}equals(t){if(t instanceof Se){const i=t;return this.x===i.x&&this.y===i.y}return!1}hashCode(){return 31*Mr.floatToIntBits(this.x)+Mr.floatToIntBits(this.y)}toString(){return"("+this.x+","+this.y+")"}static orderBestPatterns(t){const i=this.distance(t[0],t[1]),a=this.distance(t[1],t[2]),o=this.distance(t[0],t[2]);let c,f,g;if(a>=i&&a>=o?(f=t[0],c=t[1],g=t[2]):o>=a&&o>=i?(f=t[1],c=t[0],g=t[2]):(f=t[2],c=t[0],g=t[1]),this.crossProductZ(c,f,g)<0){const x=c;c=g,g=x}t[0]=c,t[1]=f,t[2]=g}static distance(t,i){return Je.distance(t.x,t.y,i.x,i.y)}static crossProductZ(t,i,a){const o=i.x,c=i.y;return(a.x-o)*(t.y-c)-(a.y-c)*(t.x-o)}}class Ja{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class ro extends Ja{constructor(t,i,a,o,c){super(t,i),this.compact=a,this.nbDatablocks=o,this.nbLayers=c}getNbLayers(){return this.nbLayers}getNbDatablocks(){return this.nbDatablocks}isCompact(){return this.compact}}class Zt{constructor(t,i,a,o){this.image=t,this.height=t.getHeight(),this.width=t.getWidth(),i==null&&(i=Zt.INIT_SIZE),a==null&&(a=t.getWidth()/2|0),o==null&&(o=t.getHeight()/2|0);const c=i/2|0;if(this.leftInit=a-c,this.rightInit=a+c,this.upInit=o-c,this.downInit=o+c,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new ee}detect(){let t=this.leftInit,i=this.rightInit,a=this.upInit,o=this.downInit,c=!1,f=!0,g=!1,x=!1,A=!1,v=!1,O=!1;const I=this.width,B=this.height;for(;f;){f=!1;let k=!0;for(;(k||!x)&&i<I;)k=this.containsBlackPoint(a,o,i,!1),k?(i++,f=!0,x=!0):x||i++;if(i>=I){c=!0;break}let U=!0;for(;(U||!A)&&o<B;)U=this.containsBlackPoint(t,i,o,!0),U?(o++,f=!0,A=!0):A||o++;if(o>=B){c=!0;break}let V=!0;for(;(V||!v)&&t>=0;)V=this.containsBlackPoint(a,o,t,!1),V?(t--,f=!0,v=!0):v||t--;if(t<0){c=!0;break}let Z=!0;for(;(Z||!O)&&a>=0;)Z=this.containsBlackPoint(t,i,a,!0),Z?(a--,f=!0,O=!0):O||a--;if(a<0){c=!0;break}f&&(g=!0)}if(!c&&g){const k=i-t;let U=null;for(let de=1;U===null&&de<k;de++)U=this.getBlackPointOnSegment(t,o-de,t+de,o);if(U==null)throw new ee;let V=null;for(let de=1;V===null&&de<k;de++)V=this.getBlackPointOnSegment(t,a+de,t+de,a);if(V==null)throw new ee;let Z=null;for(let de=1;Z===null&&de<k;de++)Z=this.getBlackPointOnSegment(i,a+de,i-de,a);if(Z==null)throw new ee;let ge=null;for(let de=1;ge===null&&de<k;de++)ge=this.getBlackPointOnSegment(i,o-de,i-de,o);if(ge==null)throw new ee;return this.centerEdges(ge,U,Z,V)}else throw new ee}getBlackPointOnSegment(t,i,a,o){const c=Je.round(Je.distance(t,i,a,o)),f=(a-t)/c,g=(o-i)/c,x=this.image;for(let A=0;A<c;A++){const v=Je.round(t+A*f),O=Je.round(i+A*g);if(x.get(v,O))return new Se(v,O)}return null}centerEdges(t,i,a,o){const c=t.getX(),f=t.getY(),g=i.getX(),x=i.getY(),A=a.getX(),v=a.getY(),O=o.getX(),I=o.getY(),B=Zt.CORR;return c<this.width/2?[new Se(O-B,I+B),new Se(g+B,x+B),new Se(A-B,v-B),new Se(c+B,f-B)]:[new Se(O+B,I+B),new Se(g+B,x-B),new Se(A-B,v+B),new Se(c-B,f-B)]}containsBlackPoint(t,i,a,o){const c=this.image;if(o){for(let f=t;f<=i;f++)if(c.get(f,a))return!0}else for(let f=t;f<=i;f++)if(c.get(a,f))return!0;return!1}}Zt.INIT_SIZE=10,Zt.CORR=1;class Ks{static checkAndNudgePoints(t,i){const a=t.getWidth(),o=t.getHeight();let c=!0;for(let f=0;f<i.length&&c;f+=2){const g=Math.floor(i[f]),x=Math.floor(i[f+1]);if(g<-1||g>a||x<-1||x>o)throw new ee;c=!1,g===-1?(i[f]=0,c=!0):g===a&&(i[f]=a-1,c=!0),x===-1?(i[f+1]=0,c=!0):x===o&&(i[f+1]=o-1,c=!0)}c=!0;for(let f=i.length-2;f>=0&&c;f-=2){const g=Math.floor(i[f]),x=Math.floor(i[f+1]);if(g<-1||g>a||x<-1||x>o)throw new ee;c=!1,g===-1?(i[f]=0,c=!0):g===a&&(i[f]=a-1,c=!0),x===-1?(i[f+1]=0,c=!0):x===o&&(i[f+1]=o-1,c=!0)}}}class Yn{constructor(t,i,a,o,c,f,g,x,A){this.a11=t,this.a21=i,this.a31=a,this.a12=o,this.a22=c,this.a32=f,this.a13=g,this.a23=x,this.a33=A}static quadrilateralToQuadrilateral(t,i,a,o,c,f,g,x,A,v,O,I,B,k,U,V){const Z=Yn.quadrilateralToSquare(t,i,a,o,c,f,g,x);return Yn.squareToQuadrilateral(A,v,O,I,B,k,U,V).times(Z)}transformPoints(t){const i=t.length,a=this.a11,o=this.a12,c=this.a13,f=this.a21,g=this.a22,x=this.a23,A=this.a31,v=this.a32,O=this.a33;for(let I=0;I<i;I+=2){const B=t[I],k=t[I+1],U=c*B+x*k+O;t[I]=(a*B+f*k+A)/U,t[I+1]=(o*B+g*k+v)/U}}transformPointsWithValues(t,i){const a=this.a11,o=this.a12,c=this.a13,f=this.a21,g=this.a22,x=this.a23,A=this.a31,v=this.a32,O=this.a33,I=t.length;for(let B=0;B<I;B++){const k=t[B],U=i[B],V=c*k+x*U+O;t[B]=(a*k+f*U+A)/V,i[B]=(o*k+g*U+v)/V}}static squareToQuadrilateral(t,i,a,o,c,f,g,x){const A=t-a+c-g,v=i-o+f-x;if(A===0&&v===0)return new Yn(a-t,c-a,t,o-i,f-o,i,0,0,1);{const O=a-c,I=g-c,B=o-f,k=x-f,U=O*k-I*B,V=(A*k-I*v)/U,Z=(O*v-A*B)/U;return new Yn(a-t+V*a,g-t+Z*g,t,o-i+V*o,x-i+Z*x,i,V,Z,1)}}static quadrilateralToSquare(t,i,a,o,c,f,g,x){return Yn.squareToQuadrilateral(t,i,a,o,c,f,g,x).buildAdjoint()}buildAdjoint(){return new Yn(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)}times(t){return new Yn(this.a11*t.a11+this.a21*t.a12+this.a31*t.a13,this.a11*t.a21+this.a21*t.a22+this.a31*t.a23,this.a11*t.a31+this.a21*t.a32+this.a31*t.a33,this.a12*t.a11+this.a22*t.a12+this.a32*t.a13,this.a12*t.a21+this.a22*t.a22+this.a32*t.a23,this.a12*t.a31+this.a22*t.a32+this.a32*t.a33,this.a13*t.a11+this.a23*t.a12+this.a33*t.a13,this.a13*t.a21+this.a23*t.a22+this.a33*t.a23,this.a13*t.a31+this.a23*t.a32+this.a33*t.a33)}}class Qs extends Ks{sampleGrid(t,i,a,o,c,f,g,x,A,v,O,I,B,k,U,V,Z,ge,de){const he=Yn.quadrilateralToQuadrilateral(o,c,f,g,x,A,v,O,I,B,k,U,V,Z,ge,de);return this.sampleGridWithTransform(t,i,a,he)}sampleGridWithTransform(t,i,a,o){if(i<=0||a<=0)throw new ee;const c=new Ot(i,a),f=new Float32Array(2*i);for(let g=0;g<a;g++){const x=f.length,A=g+.5;for(let v=0;v<x;v+=2)f[v]=v/2+.5,f[v+1]=A;o.transformPoints(f),Ks.checkAndNudgePoints(t,f);try{for(let v=0;v<x;v+=2)t.get(Math.floor(f[v]),Math.floor(f[v+1]))&&c.set(v/2,g)}catch{throw new ee}}return c}}class ni{static setGridSampler(t){ni.gridSampler=t}static getInstance(){return ni.gridSampler}}ni.gridSampler=new Qs;class Cn{constructor(t,i){this.x=t,this.y=i}toResultPoint(){return new Se(this.getX(),this.getY())}getX(){return this.x}getY(){return this.y}}class Js{constructor(t){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=t}detect(){return this.detectMirror(!1)}detectMirror(t){let i=this.getMatrixCenter(),a=this.getBullsEyeCorners(i);if(t){let f=a[0];a[0]=a[2],a[2]=f}this.extractParameters(a);let o=this.sampleGrid(this.image,a[this.shift%4],a[(this.shift+1)%4],a[(this.shift+2)%4],a[(this.shift+3)%4]),c=this.getMatrixCornerPoints(a);return new ro(o,c,this.compact,this.nbDataBlocks,this.nbLayers)}extractParameters(t){if(!this.isValidPoint(t[0])||!this.isValidPoint(t[1])||!this.isValidPoint(t[2])||!this.isValidPoint(t[3]))throw new ee;let i=2*this.nbCenterLayers,a=new Int32Array([this.sampleLine(t[0],t[1],i),this.sampleLine(t[1],t[2],i),this.sampleLine(t[2],t[3],i),this.sampleLine(t[3],t[0],i)]);this.shift=this.getRotation(a,i);let o=0;for(let f=0;f<4;f++){let g=a[(this.shift+f)%4];this.compact?(o<<=7,o+=g>>1&127):(o<<=10,o+=(g>>2&992)+(g>>1&31))}let c=this.getCorrectedParameterData(o,this.compact);this.compact?(this.nbLayers=(c>>6)+1,this.nbDataBlocks=(c&63)+1):(this.nbLayers=(c>>11)+1,this.nbDataBlocks=(c&2047)+1)}getRotation(t,i){let a=0;t.forEach((o,c,f)=>{let g=(o>>i-2<<1)+(o&1);a=(a<<3)+g}),a=((a&1)<<11)+(a>>1);for(let o=0;o<4;o++)if(te.bitCount(a^this.EXPECTED_CORNER_BITS[o])<=2)return o;throw new ee}getCorrectedParameterData(t,i){let a,o;i?(a=7,o=2):(a=10,o=4);let c=a-o,f=new Int32Array(a);for(let x=a-1;x>=0;--x)f[x]=t&15,t>>=4;try{new sr(ht.AZTEC_PARAM).decode(f,c)}catch{throw new ee}let g=0;for(let x=0;x<o;x++)g=(g<<4)+f[x];return g}getBullsEyeCorners(t){let i=t,a=t,o=t,c=t,f=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){let O=this.getFirstDifferent(i,f,1,-1),I=this.getFirstDifferent(a,f,1,1),B=this.getFirstDifferent(o,f,-1,1),k=this.getFirstDifferent(c,f,-1,-1);if(this.nbCenterLayers>2){let U=this.distancePoint(k,O)*this.nbCenterLayers/(this.distancePoint(c,i)*(this.nbCenterLayers+2));if(U<.75||U>1.25||!this.isWhiteOrBlackRectangle(O,I,B,k))break}i=O,a=I,o=B,c=k,f=!f}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new ee;this.compact=this.nbCenterLayers===5;let g=new Se(i.getX()+.5,i.getY()-.5),x=new Se(a.getX()+.5,a.getY()+.5),A=new Se(o.getX()-.5,o.getY()+.5),v=new Se(c.getX()-.5,c.getY()-.5);return this.expandSquare([g,x,A,v],2*this.nbCenterLayers-3,2*this.nbCenterLayers)}getMatrixCenter(){let t,i,a,o;try{let g=new Zt(this.image).detect();t=g[0],i=g[1],a=g[2],o=g[3]}catch{let x=this.image.getWidth()/2,A=this.image.getHeight()/2;t=this.getFirstDifferent(new Cn(x+7,A-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Cn(x+7,A+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Cn(x-7,A+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new Cn(x-7,A-7),!1,-1,-1).toResultPoint()}let c=Je.round((t.getX()+o.getX()+i.getX()+a.getX())/4),f=Je.round((t.getY()+o.getY()+i.getY()+a.getY())/4);try{let g=new Zt(this.image,15,c,f).detect();t=g[0],i=g[1],a=g[2],o=g[3]}catch{t=this.getFirstDifferent(new Cn(c+7,f-7),!1,1,-1).toResultPoint(),i=this.getFirstDifferent(new Cn(c+7,f+7),!1,1,1).toResultPoint(),a=this.getFirstDifferent(new Cn(c-7,f+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new Cn(c-7,f-7),!1,-1,-1).toResultPoint()}return c=Je.round((t.getX()+o.getX()+i.getX()+a.getX())/4),f=Je.round((t.getY()+o.getY()+i.getY()+a.getY())/4),new Cn(c,f)}getMatrixCornerPoints(t){return this.expandSquare(t,2*this.nbCenterLayers,this.getDimension())}sampleGrid(t,i,a,o,c){let f=ni.getInstance(),g=this.getDimension(),x=g/2-this.nbCenterLayers,A=g/2+this.nbCenterLayers;return f.sampleGrid(t,g,g,x,x,A,x,A,A,x,A,i.getX(),i.getY(),a.getX(),a.getY(),o.getX(),o.getY(),c.getX(),c.getY())}sampleLine(t,i,a){let o=0,c=this.distanceResultPoint(t,i),f=c/a,g=t.getX(),x=t.getY(),A=f*(i.getX()-t.getX())/c,v=f*(i.getY()-t.getY())/c;for(let O=0;O<a;O++)this.image.get(Je.round(g+O*A),Je.round(x+O*v))&&(o|=1<<a-O-1);return o}isWhiteOrBlackRectangle(t,i,a,o){let c=3;t=new Cn(t.getX()-c,t.getY()+c),i=new Cn(i.getX()-c,i.getY()-c),a=new Cn(a.getX()+c,a.getY()-c),o=new Cn(o.getX()+c,o.getY()+c);let f=this.getColor(o,t);if(f===0)return!1;let g=this.getColor(t,i);return g!==f||(g=this.getColor(i,a),g!==f)?!1:(g=this.getColor(a,o),g===f)}getColor(t,i){let a=this.distancePoint(t,i),o=(i.getX()-t.getX())/a,c=(i.getY()-t.getY())/a,f=0,g=t.getX(),x=t.getY(),A=this.image.get(t.getX(),t.getY()),v=Math.ceil(a);for(let I=0;I<v;I++)g+=o,x+=c,this.image.get(Je.round(g),Je.round(x))!==A&&f++;let O=f/a;return O>.1&&O<.9?0:O<=.1===A?1:-1}getFirstDifferent(t,i,a,o){let c=t.getX()+a,f=t.getY()+o;for(;this.isValid(c,f)&&this.image.get(c,f)===i;)c+=a,f+=o;for(c-=a,f-=o;this.isValid(c,f)&&this.image.get(c,f)===i;)c+=a;for(c-=a;this.isValid(c,f)&&this.image.get(c,f)===i;)f+=o;return f-=o,new Cn(c,f)}expandSquare(t,i,a){let o=a/(2*i),c=t[0].getX()-t[2].getX(),f=t[0].getY()-t[2].getY(),g=(t[0].getX()+t[2].getX())/2,x=(t[0].getY()+t[2].getY())/2,A=new Se(g+o*c,x+o*f),v=new Se(g-o*c,x-o*f);c=t[1].getX()-t[3].getX(),f=t[1].getY()-t[3].getY(),g=(t[1].getX()+t[3].getX())/2,x=(t[1].getY()+t[3].getY())/2;let O=new Se(g+o*c,x+o*f),I=new Se(g-o*c,x-o*f);return[A,O,v,I]}isValid(t,i){return t>=0&&t<this.image.getWidth()&&i>0&&i<this.image.getHeight()}isValidPoint(t){let i=Je.round(t.getX()),a=Je.round(t.getY());return this.isValid(i,a)}distancePoint(t,i){return Je.distance(t.getX(),t.getY(),i.getX(),i.getY())}distanceResultPoint(t,i){return Je.distance(t.getX(),t.getY(),i.getX(),i.getY())}getDimension(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(te.truncDivision(this.nbLayers-4,8)+1)+15}}class $a{decode(t,i=null){let a=null,o=new Js(t.getBlackMatrix()),c=null,f=null;try{let v=o.detectMirror(!1);c=v.getPoints(),this.reportFoundResultPoints(i,c),f=new vt().decode(v)}catch(v){a=v}if(f==null)try{let v=o.detectMirror(!0);c=v.getPoints(),this.reportFoundResultPoints(i,c),f=new vt().decode(v)}catch(v){throw a??v}let g=new Ae(f.getText(),f.getRawBytes(),f.getNumBits(),c,pe.AZTEC,K.currentTimeMillis()),x=f.getByteSegments();x!=null&&g.putMetadata(ct.BYTE_SEGMENTS,x);let A=f.getECLevel();return A!=null&&g.putMetadata(ct.ERROR_CORRECTION_LEVEL,A),g}reportFoundResultPoints(t,i){if(t!=null){let a=t.get(be.NEED_RESULT_POINT_CALLBACK);a!=null&&i.forEach((o,c,f)=>{a.foundPossibleResultPoint(o)})}}reset(){}}class Pu extends we{constructor(t=500){super(new $a,t)}}class jt{decode(t,i){try{return this.doDecode(t,i)}catch{if(i&&i.get(be.TRY_HARDER)===!0&&t.isRotateSupported()){const c=t.rotateCounterClockwise(),f=this.doDecode(c,i),g=f.getResultMetadata();let x=270;g!==null&&g.get(ct.ORIENTATION)===!0&&(x=x+g.get(ct.ORIENTATION)%360),f.putMetadata(ct.ORIENTATION,x);const A=f.getResultPoints();if(A!==null){const v=c.getHeight();for(let O=0;O<A.length;O++)A[O]=new Se(v-A[O].getY()-1,A[O].getX())}return f}else throw new ee}}reset(){}doDecode(t,i){const a=t.getWidth(),o=t.getHeight();let c=new xe(a);const f=i&&i.get(be.TRY_HARDER)===!0,g=Math.max(1,o>>(f?8:5));let x;f?x=o:x=15;const A=Math.trunc(o/2);for(let v=0;v<x;v++){const O=Math.trunc((v+1)/2),I=(v&1)===0,B=A+g*(I?O:-O);if(B<0||B>=o)break;try{c=t.getBlackRow(B,c)}catch{continue}for(let k=0;k<2;k++){if(k===1&&(c.reverse(),i&&i.get(be.NEED_RESULT_POINT_CALLBACK)===!0)){const U=new Map;i.forEach((V,Z)=>U.set(Z,V)),U.delete(be.NEED_RESULT_POINT_CALLBACK),i=U}try{const U=this.decodeRow(B,c,i);if(k===1){U.putMetadata(ct.ORIENTATION,180);const V=U.getResultPoints();V!==null&&(V[0]=new Se(a-V[0].getX()-1,V[0].getY()),V[1]=new Se(a-V[1].getX()-1,V[1].getY()))}return U}catch{}}}throw new ee}static recordPattern(t,i,a){const o=a.length;for(let A=0;A<o;A++)a[A]=0;const c=t.getSize();if(i>=c)throw new ee;let f=!t.get(i),g=0,x=i;for(;x<c;){if(t.get(x)!==f)a[g]++;else{if(++g===o)break;a[g]=1,f=!f}x++}if(!(g===o||g===o-1&&x===c))throw new ee}static recordPatternInReverse(t,i,a){let o=a.length,c=t.get(i);for(;i>0&&o>=0;)t.get(--i)!==c&&(o--,c=!c);if(o>=0)throw new ee;jt.recordPattern(t,i+1,a)}static patternMatchVariance(t,i,a){const o=t.length;let c=0,f=0;for(let A=0;A<o;A++)c+=t[A],f+=i[A];if(c<f)return Number.POSITIVE_INFINITY;const g=c/f;a*=g;let x=0;for(let A=0;A<o;A++){const v=t[A],O=i[A]*g,I=v>O?v-O:O-v;if(I>a)return Number.POSITIVE_INFINITY;x+=I}return x/c}}class me extends jt{static findStartPattern(t){const i=t.getSize(),a=t.getNextSet(0);let o=0,c=Int32Array.from([0,0,0,0,0,0]),f=a,g=!1;const x=6;for(let A=a;A<i;A++)if(t.get(A)!==g)c[o]++;else{if(o===x-1){let v=me.MAX_AVG_VARIANCE,O=-1;for(let I=me.CODE_START_A;I<=me.CODE_START_C;I++){const B=jt.patternMatchVariance(c,me.CODE_PATTERNS[I],me.MAX_INDIVIDUAL_VARIANCE);B<v&&(v=B,O=I)}if(O>=0&&t.isRange(Math.max(0,f-(A-f)/2),f,!1))return Int32Array.from([f,A,O]);f+=c[0]+c[1],c=c.slice(2,c.length-1),c[o-1]=0,c[o]=0,o--}else o++;c[o]=1,g=!g}throw new ee}static decodeCode(t,i,a){jt.recordPattern(t,a,i);let o=me.MAX_AVG_VARIANCE,c=-1;for(let f=0;f<me.CODE_PATTERNS.length;f++){const g=me.CODE_PATTERNS[f],x=this.patternMatchVariance(i,g,me.MAX_INDIVIDUAL_VARIANCE);x<o&&(o=x,c=f)}if(c>=0)return c;throw new ee}decodeRow(t,i,a){const o=a&&a.get(be.ASSUME_GS1)===!0,c=me.findStartPattern(i),f=c[2];let g=0;const x=new Uint8Array(20);x[g++]=f;let A;switch(f){case me.CODE_START_A:A=me.CODE_CODE_A;break;case me.CODE_START_B:A=me.CODE_CODE_B;break;case me.CODE_START_C:A=me.CODE_CODE_C;break;default:throw new $}let v=!1,O=!1,I="",B=c[0],k=c[1];const U=Int32Array.from([0,0,0,0,0,0]);let V=0,Z=0,ge=f,de=0,he=!0,Xe=!1,Fe=!1;for(;!v;){const dr=O;switch(O=!1,V=Z,Z=me.decodeCode(i,U,k),x[g++]=Z,Z!==me.CODE_STOP&&(he=!0),Z!==me.CODE_STOP&&(de++,ge+=de*Z),B=k,k+=U.reduce((Ao,cl)=>Ao+cl,0),Z){case me.CODE_START_A:case me.CODE_START_B:case me.CODE_START_C:throw new $}switch(A){case me.CODE_CODE_A:if(Z<64)Fe===Xe?I+=String.fromCharCode(32+Z):I+=String.fromCharCode(32+Z+128),Fe=!1;else if(Z<96)Fe===Xe?I+=String.fromCharCode(Z-64):I+=String.fromCharCode(Z+64),Fe=!1;else switch(Z!==me.CODE_STOP&&(he=!1),Z){case me.CODE_FNC_1:o&&(I.length===0?I+="]C1":I+="");break;case me.CODE_FNC_2:case me.CODE_FNC_3:break;case me.CODE_FNC_4_A:!Xe&&Fe?(Xe=!0,Fe=!1):Xe&&Fe?(Xe=!1,Fe=!1):Fe=!0;break;case me.CODE_SHIFT:O=!0,A=me.CODE_CODE_B;break;case me.CODE_CODE_B:A=me.CODE_CODE_B;break;case me.CODE_CODE_C:A=me.CODE_CODE_C;break;case me.CODE_STOP:v=!0;break}break;case me.CODE_CODE_B:if(Z<96)Fe===Xe?I+=String.fromCharCode(32+Z):I+=String.fromCharCode(32+Z+128),Fe=!1;else switch(Z!==me.CODE_STOP&&(he=!1),Z){case me.CODE_FNC_1:o&&(I.length===0?I+="]C1":I+="");break;case me.CODE_FNC_2:case me.CODE_FNC_3:break;case me.CODE_FNC_4_B:!Xe&&Fe?(Xe=!0,Fe=!1):Xe&&Fe?(Xe=!1,Fe=!1):Fe=!0;break;case me.CODE_SHIFT:O=!0,A=me.CODE_CODE_A;break;case me.CODE_CODE_A:A=me.CODE_CODE_A;break;case me.CODE_CODE_C:A=me.CODE_CODE_C;break;case me.CODE_STOP:v=!0;break}break;case me.CODE_CODE_C:if(Z<100)Z<10&&(I+="0"),I+=Z;else switch(Z!==me.CODE_STOP&&(he=!1),Z){case me.CODE_FNC_1:o&&(I.length===0?I+="]C1":I+="");break;case me.CODE_CODE_A:A=me.CODE_CODE_A;break;case me.CODE_CODE_B:A=me.CODE_CODE_B;break;case me.CODE_STOP:v=!0;break}break}dr&&(A=A===me.CODE_CODE_A?me.CODE_CODE_B:me.CODE_CODE_A)}const Jt=k-B;if(k=i.getNextUnset(k),!i.isRange(k,Math.min(i.getSize(),k+(k-B)/2),!1))throw new ee;if(ge-=de*V,ge%103!==V)throw new P;const Wn=I.length;if(Wn===0)throw new ee;Wn>0&&he&&(A===me.CODE_CODE_C?I=I.substring(0,Wn-2):I=I.substring(0,Wn-1));const On=(c[1]+c[0])/2,Et=B+Jt/2,bn=x.length,Fn=new Uint8Array(bn);for(let dr=0;dr<bn;dr++)Fn[dr]=x[dr];const Xr=[new Se(On,t),new Se(Et,t)];return new Ae(I,Fn,0,Xr,pe.CODE_128,new Date().getTime())}}me.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],me.MAX_AVG_VARIANCE=.25,me.MAX_INDIVIDUAL_VARIANCE=.7,me.CODE_SHIFT=98,me.CODE_CODE_C=99,me.CODE_CODE_B=100,me.CODE_CODE_A=101,me.CODE_FNC_1=102,me.CODE_FNC_2=97,me.CODE_FNC_3=96,me.CODE_FNC_4_A=101,me.CODE_FNC_4_B=100,me.CODE_START_A=103,me.CODE_START_B=104,me.CODE_START_C=105,me.CODE_STOP=106;class It extends jt{constructor(t=!1,i=!1){super(),this.usingCheckDigit=t,this.extendedMode=i,this.decodeRowResult="",this.counters=new Int32Array(9)}decodeRow(t,i,a){let o=this.counters;o.fill(0),this.decodeRowResult="";let c=It.findAsteriskPattern(i,o),f=i.getNextSet(c[1]),g=i.getSize(),x,A;do{It.recordPattern(i,f,o);let U=It.toNarrowWidePattern(o);if(U<0)throw new ee;x=It.patternToChar(U),this.decodeRowResult+=x,A=f;for(let V of o)f+=V;f=i.getNextSet(f)}while(x!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);let v=0;for(let U of o)v+=U;let O=f-A-v;if(f!==g&&O*2<v)throw new ee;if(this.usingCheckDigit){let U=this.decodeRowResult.length-1,V=0;for(let Z=0;Z<U;Z++)V+=It.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(Z));if(this.decodeRowResult.charAt(U)!==It.ALPHABET_STRING.charAt(V%43))throw new P;this.decodeRowResult=this.decodeRowResult.substring(0,U)}if(this.decodeRowResult.length===0)throw new ee;let I;this.extendedMode?I=It.decodeExtended(this.decodeRowResult):I=this.decodeRowResult;let B=(c[1]+c[0])/2,k=A+v/2;return new Ae(I,null,0,[new Se(B,t),new Se(k,t)],pe.CODE_39,new Date().getTime())}static findAsteriskPattern(t,i){let a=t.getSize(),o=t.getNextSet(0),c=0,f=o,g=!1,x=i.length;for(let A=o;A<a;A++)if(t.get(A)!==g)i[c]++;else{if(c===x-1){if(this.toNarrowWidePattern(i)===It.ASTERISK_ENCODING&&t.isRange(Math.max(0,f-Math.floor((A-f)/2)),f,!1))return[f,A];f+=i[0]+i[1],i.copyWithin(0,2,2+c-1),i[c-1]=0,i[c]=0,c--}else c++;i[c]=1,g=!g}throw new ee}static toNarrowWidePattern(t){let i=t.length,a=0,o;do{let c=2147483647;for(let x of t)x<c&&x>a&&(c=x);a=c,o=0;let f=0,g=0;for(let x=0;x<i;x++){let A=t[x];A>a&&(g|=1<<i-1-x,o++,f+=A)}if(o===3){for(let x=0;x<i&&o>0;x++){let A=t[x];if(A>a&&(o--,A*2>=f))return-1}return g}}while(o>3);return-1}static patternToChar(t){for(let i=0;i<It.CHARACTER_ENCODINGS.length;i++)if(It.CHARACTER_ENCODINGS[i]===t)return It.ALPHABET_STRING.charAt(i);if(t===It.ASTERISK_ENCODING)return"*";throw new ee}static decodeExtended(t){let i=t.length,a="";for(let o=0;o<i;o++){let c=t.charAt(o);if(c==="+"||c==="$"||c==="%"||c==="/"){let f=t.charAt(o+1),g="\0";switch(c){case"+":if(f>="A"&&f<="Z")g=String.fromCharCode(f.charCodeAt(0)+32);else throw new $;break;case"$":if(f>="A"&&f<="Z")g=String.fromCharCode(f.charCodeAt(0)-64);else throw new $;break;case"%":if(f>="A"&&f<="E")g=String.fromCharCode(f.charCodeAt(0)-38);else if(f>="F"&&f<="J")g=String.fromCharCode(f.charCodeAt(0)-11);else if(f>="K"&&f<="O")g=String.fromCharCode(f.charCodeAt(0)+16);else if(f>="P"&&f<="T")g=String.fromCharCode(f.charCodeAt(0)+43);else if(f==="U")g="\0";else if(f==="V")g="@";else if(f==="W")g="`";else if(f==="X"||f==="Y"||f==="Z")g="";else throw new $;break;case"/":if(f>="A"&&f<="O")g=String.fromCharCode(f.charCodeAt(0)-32);else if(f==="Z")g=":";else throw new $;break}a+=g,o++}else a+=c}return a}}It.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",It.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],It.ASTERISK_ENCODING=148;class Ge extends jt{constructor(){super(...arguments),this.narrowLineWidth=-1}decodeRow(t,i,a){let o=this.decodeStart(i),c=this.decodeEnd(i),f=new nt;Ge.decodeMiddle(i,o[1],c[0],f);let g=f.toString(),x=null;a!=null&&(x=a.get(be.ALLOWED_LENGTHS)),x==null&&(x=Ge.DEFAULT_ALLOWED_LENGTHS);let A=g.length,v=!1,O=0;for(let k of x){if(A===k){v=!0;break}k>O&&(O=k)}if(!v&&A>O&&(v=!0),!v)throw new $;const I=[new Se(o[1],t),new Se(c[0],t)];return new Ae(g,null,0,I,pe.ITF,new Date().getTime())}static decodeMiddle(t,i,a,o){let c=new Int32Array(10),f=new Int32Array(5),g=new Int32Array(5);for(c.fill(0),f.fill(0),g.fill(0);i<a;){jt.recordPattern(t,i,c);for(let A=0;A<5;A++){let v=2*A;f[A]=c[v],g[A]=c[v+1]}let x=Ge.decodeDigit(f);o.append(x.toString()),x=this.decodeDigit(g),o.append(x.toString()),c.forEach(function(A){i+=A})}}decodeStart(t){let i=Ge.skipWhiteSpace(t),a=Ge.findGuardPattern(t,i,Ge.START_PATTERN);return this.narrowLineWidth=(a[1]-a[0])/4,this.validateQuietZone(t,a[0]),a}validateQuietZone(t,i){let a=this.narrowLineWidth*10;a=a<i?a:i;for(let o=i-1;a>0&&o>=0&&!t.get(o);o--)a--;if(a!==0)throw new ee}static skipWhiteSpace(t){const i=t.getSize(),a=t.getNextSet(0);if(a===i)throw new ee;return a}decodeEnd(t){t.reverse();try{let i=Ge.skipWhiteSpace(t),a;try{a=Ge.findGuardPattern(t,i,Ge.END_PATTERN_REVERSED[0])}catch(c){c instanceof ee&&(a=Ge.findGuardPattern(t,i,Ge.END_PATTERN_REVERSED[1]))}this.validateQuietZone(t,a[0]);let o=a[0];return a[0]=t.getSize()-a[1],a[1]=t.getSize()-o,a}finally{t.reverse()}}static findGuardPattern(t,i,a){let o=a.length,c=new Int32Array(o),f=t.getSize(),g=!1,x=0,A=i;c.fill(0);for(let v=i;v<f;v++)if(t.get(v)!==g)c[x]++;else{if(x===o-1){if(jt.patternMatchVariance(c,a,Ge.MAX_INDIVIDUAL_VARIANCE)<Ge.MAX_AVG_VARIANCE)return[A,v];A+=c[0]+c[1],K.arraycopy(c,2,c,0,x-1),c[x-1]=0,c[x]=0,x--}else x++;c[x]=1,g=!g}throw new ee}static decodeDigit(t){let i=Ge.MAX_AVG_VARIANCE,a=-1,o=Ge.PATTERNS.length;for(let c=0;c<o;c++){let f=Ge.PATTERNS[c],g=jt.patternMatchVariance(t,f,Ge.MAX_INDIVIDUAL_VARIANCE);g<i?(i=g,a=c):g===i&&(a=-1)}if(a>=0)return a%10;throw new ee}}Ge.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],Ge.MAX_AVG_VARIANCE=.38,Ge.MAX_INDIVIDUAL_VARIANCE=.5,Ge.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],Ge.START_PATTERN=Int32Array.from([1,1,1,1]),Ge.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])];class Yt extends jt{constructor(){super(...arguments),this.decodeRowStringBuffer=""}static findStartGuardPattern(t){let i=!1,a,o=0,c=Int32Array.from([0,0,0]);for(;!i;){c=Int32Array.from([0,0,0]),a=Yt.findGuardPattern(t,o,!1,this.START_END_PATTERN,c);let f=a[0];o=a[1];let g=f-(o-f);g>=0&&(i=t.isRange(g,f,!1))}return a}static checkChecksum(t){return Yt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let a=parseInt(t.charAt(i-1),10);return Yt.getStandardUPCEANChecksum(t.substring(0,i-1))===a}static getStandardUPCEANChecksum(t){let i=t.length,a=0;for(let o=i-1;o>=0;o-=2){let c=t.charAt(o).charCodeAt(0)-48;if(c<0||c>9)throw new $;a+=c}a*=3;for(let o=i-2;o>=0;o-=2){let c=t.charAt(o).charCodeAt(0)-48;if(c<0||c>9)throw new $;a+=c}return(1e3-a)%10}static decodeEnd(t,i){return Yt.findGuardPattern(t,i,!1,Yt.START_END_PATTERN,new Int32Array(Yt.START_END_PATTERN.length).fill(0))}static findGuardPatternWithoutCounters(t,i,a,o){return this.findGuardPattern(t,i,a,o,new Int32Array(o.length))}static findGuardPattern(t,i,a,o,c){let f=t.getSize();i=a?t.getNextUnset(i):t.getNextSet(i);let g=0,x=i,A=o.length,v=a;for(let O=i;O<f;O++)if(t.get(O)!==v)c[g]++;else{if(g===A-1){if(jt.patternMatchVariance(c,o,Yt.MAX_INDIVIDUAL_VARIANCE)<Yt.MAX_AVG_VARIANCE)return Int32Array.from([x,O]);x+=c[0]+c[1];let I=c.slice(2,c.length-1);for(let B=0;B<g-1;B++)c[B]=I[B];c[g-1]=0,c[g]=0,g--}else g++;c[g]=1,v=!v}throw new ee}static decodeDigit(t,i,a,o){this.recordPattern(t,a,i);let c=this.MAX_AVG_VARIANCE,f=-1,g=o.length;for(let x=0;x<g;x++){let A=o[x],v=jt.patternMatchVariance(i,A,Yt.MAX_INDIVIDUAL_VARIANCE);v<c&&(c=v,f=x)}if(f>=0)return f;throw new ee}}Yt.MAX_AVG_VARIANCE=.48,Yt.MAX_INDIVIDUAL_VARIANCE=.7,Yt.START_END_PATTERN=Int32Array.from([1,1,1]),Yt.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),Yt.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Yt.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])];class ba{constructor(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,a){let o=this.decodeRowStringBuffer,c=this.decodeMiddle(i,a,o),f=o.toString(),g=ba.parseExtensionString(f),x=[new Se((a[0]+a[1])/2,t),new Se(c,t)],A=new Ae(f,null,0,x,pe.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&A.putAllMetadata(g),A}decodeMiddle(t,i,a){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let c=t.getSize(),f=i[1],g=0;for(let A=0;A<5&&f<c;A++){let v=Yt.decodeDigit(t,o,f,Yt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+v%10);for(let O of o)f+=O;v>=10&&(g|=1<<4-A),A!==4&&(f=t.getNextSet(f),f=t.getNextUnset(f))}if(a.length!==5)throw new ee;let x=this.determineCheckDigit(g);if(ba.extensionChecksum(a.toString())!==x)throw new ee;return f}static extensionChecksum(t){let i=t.length,a=0;for(let o=i-2;o>=0;o-=2)a+=t.charAt(o).charCodeAt(0)-48;a*=3;for(let o=i-1;o>=0;o-=2)a+=t.charAt(o).charCodeAt(0)-48;return a*=3,a%10}determineCheckDigit(t){for(let i=0;i<10;i++)if(t===this.CHECK_DIGIT_ENCODINGS[i])return i;throw new ee}static parseExtensionString(t){if(t.length!==5)return null;let i=ba.parseExtension5String(t);return i==null?null:new Map([[ct.SUGGESTED_PRICE,i]])}static parseExtension5String(t){let i;switch(t.charAt(0)){case"0":i="";break;case"5":i="$";break;case"9":switch(t){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}i="";break;default:i="";break}let a=parseInt(t.substring(1)),o=(a/100).toString(),c=a%100,f=c<10?"0"+c:c.toString();return i+o+"."+f}}class $s{constructor(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}decodeRow(t,i,a){let o=this.decodeRowStringBuffer,c=this.decodeMiddle(i,a,o),f=o.toString(),g=$s.parseExtensionString(f),x=[new Se((a[0]+a[1])/2,t),new Se(c,t)],A=new Ae(f,null,0,x,pe.UPC_EAN_EXTENSION,new Date().getTime());return g!=null&&A.putAllMetadata(g),A}decodeMiddle(t,i,a){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let c=t.getSize(),f=i[1],g=0;for(let x=0;x<2&&f<c;x++){let A=Yt.decodeDigit(t,o,f,Yt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+A%10);for(let v of o)f+=v;A>=10&&(g|=1<<1-x),x!==1&&(f=t.getNextSet(f),f=t.getNextUnset(f))}if(a.length!==2)throw new ee;if(parseInt(a.toString())%4!==g)throw new ee;return f}static parseExtensionString(t){return t.length!==2?null:new Map([[ct.ISSUE_NUMBER,parseInt(t)]])}}class Ea{static decodeRow(t,i,a){let o=Yt.findGuardPattern(i,a,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{return new ba().decodeRow(t,i,o)}catch{return new $s().decodeRow(t,i,o)}}}Ea.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]);class rt extends Yt{constructor(){super(),this.decodeRowStringBuffer="",rt.L_AND_G_PATTERNS=rt.L_PATTERNS.map(t=>Int32Array.from(t));for(let t=10;t<20;t++){let i=rt.L_PATTERNS[t-10],a=new Int32Array(i.length);for(let o=0;o<i.length;o++)a[o]=i[i.length-o-1];rt.L_AND_G_PATTERNS[t]=a}}decodeRow(t,i,a){let o=rt.findStartGuardPattern(i),c=a==null?null:a.get(be.NEED_RESULT_POINT_CALLBACK);if(c!=null){const he=new Se((o[0]+o[1])/2,t);c.foundPossibleResultPoint(he)}let f=this.decodeMiddle(i,o,this.decodeRowStringBuffer),g=f.rowOffset,x=f.resultString;if(c!=null){const he=new Se(g,t);c.foundPossibleResultPoint(he)}let A=this.decodeEnd(i,g);if(c!=null){const he=new Se((A[0]+A[1])/2,t);c.foundPossibleResultPoint(he)}let v=A[1],O=v+(v-A[0]);if(O>=i.getSize()||!i.isRange(v,O,!1))throw new ee;let I=x.toString();if(I.length<8)throw new $;if(!rt.checkChecksum(I))throw new P;let B=(o[1]+o[0])/2,k=(A[1]+A[0])/2,U=this.getBarcodeFormat(),V=[new Se(B,t),new Se(k,t)],Z=new Ae(I,null,0,V,U,new Date().getTime()),ge=0;try{let he=Ea.decodeRow(t,i,A[1]);Z.putMetadata(ct.UPC_EAN_EXTENSION,he.getText()),Z.putAllMetadata(he.getResultMetadata()),Z.addResultPoints(he.getResultPoints()),ge=he.getText().length}catch{}let de=a==null?null:a.get(be.ALLOWED_EAN_EXTENSIONS);if(de!=null){let he=!1;for(let Xe in de)if(ge.toString()===Xe){he=!0;break}if(!he)throw new ee}return Z}decodeEnd(t,i){return rt.findGuardPattern(t,i,!1,rt.START_END_PATTERN,new Int32Array(rt.START_END_PATTERN.length).fill(0))}static checkChecksum(t){return rt.checkStandardUPCEANChecksum(t)}static checkStandardUPCEANChecksum(t){let i=t.length;if(i===0)return!1;let a=parseInt(t.charAt(i-1),10);return rt.getStandardUPCEANChecksum(t.substring(0,i-1))===a}static getStandardUPCEANChecksum(t){let i=t.length,a=0;for(let o=i-1;o>=0;o-=2){let c=t.charAt(o).charCodeAt(0)-48;if(c<0||c>9)throw new $;a+=c}a*=3;for(let o=i-2;o>=0;o-=2){let c=t.charAt(o).charCodeAt(0)-48;if(c<0||c>9)throw new $;a+=c}return(1e3-a)%10}}class Ai extends rt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,a){let o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let c=t.getSize(),f=i[1],g=0;for(let A=0;A<6&&f<c;A++){let v=rt.decodeDigit(t,o,f,rt.L_AND_G_PATTERNS);a+=String.fromCharCode(48+v%10);for(let O of o)f+=O;v>=10&&(g|=1<<5-A)}a=Ai.determineFirstDigit(a,g),f=rt.findGuardPattern(t,f,!0,rt.MIDDLE_PATTERN,new Int32Array(rt.MIDDLE_PATTERN.length).fill(0))[1];for(let A=0;A<6&&f<c;A++){let v=rt.decodeDigit(t,o,f,rt.L_PATTERNS);a+=String.fromCharCode(48+v);for(let O of o)f+=O}return{rowOffset:f,resultString:a}}getBarcodeFormat(){return pe.EAN_13}static determineFirstDigit(t,i){for(let a=0;a<10;a++)if(i===this.FIRST_DIGIT_ENCODINGS[a])return t=String.fromCharCode(48+a)+t,t;throw new ee}}Ai.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26];class Xi extends rt{constructor(){super(),this.decodeMiddleCounters=Int32Array.from([0,0,0,0])}decodeMiddle(t,i,a){const o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;let c=t.getSize(),f=i[1];for(let x=0;x<4&&f<c;x++){let A=rt.decodeDigit(t,o,f,rt.L_PATTERNS);a+=String.fromCharCode(48+A);for(let v of o)f+=v}f=rt.findGuardPattern(t,f,!0,rt.MIDDLE_PATTERN,new Int32Array(rt.MIDDLE_PATTERN.length).fill(0))[1];for(let x=0;x<4&&f<c;x++){let A=rt.decodeDigit(t,o,f,rt.L_PATTERNS);a+=String.fromCharCode(48+A);for(let v of o)f+=v}return{rowOffset:f,resultString:a}}getBarcodeFormat(){return pe.EAN_8}}class va extends rt{constructor(){super(...arguments),this.ean13Reader=new Ai}getBarcodeFormat(){return pe.UPC_A}decode(t,i){return this.maybeReturnResult(this.ean13Reader.decode(t))}decodeRow(t,i,a){return this.maybeReturnResult(this.ean13Reader.decodeRow(t,i,a))}decodeMiddle(t,i,a){return this.ean13Reader.decodeMiddle(t,i,a)}maybeReturnResult(t){let i=t.getText();if(i.charAt(0)==="0"){let a=new Ae(i.substring(1),null,null,t.getResultPoints(),pe.UPC_A);return t.getResultMetadata()!=null&&a.putAllMetadata(t.getResultMetadata()),a}else throw new ee}reset(){this.ean13Reader.reset()}}class Tn extends rt{constructor(){super(),this.decodeMiddleCounters=new Int32Array(4)}decodeMiddle(t,i,a){const o=this.decodeMiddleCounters.map(A=>A);o[0]=0,o[1]=0,o[2]=0,o[3]=0;const c=t.getSize();let f=i[1],g=0;for(let A=0;A<6&&f<c;A++){const v=Tn.decodeDigit(t,o,f,Tn.L_AND_G_PATTERNS);a+=String.fromCharCode(48+v%10);for(let O of o)f+=O;v>=10&&(g|=1<<5-A)}let x=Tn.determineNumSysAndCheckDigit(a,g);return{rowOffset:f,resultString:x}}decodeEnd(t,i){return Tn.findGuardPatternWithoutCounters(t,i,!0,Tn.MIDDLE_END_PATTERN)}checkChecksum(t){return rt.checkChecksum(Tn.convertUPCEtoUPCA(t))}static determineNumSysAndCheckDigit(t,i){for(let a=0;a<=1;a++)for(let o=0;o<10;o++)if(i===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[a][o]){let c=String.fromCharCode(48+a),f=String.fromCharCode(48+o);return c+t+f}throw ee.getNotFoundInstance()}getBarcodeFormat(){return pe.UPC_E}static convertUPCEtoUPCA(t){const i=t.slice(1,7).split("").map(c=>c.charCodeAt(0)),a=new nt;a.append(t.charAt(0));let o=i[5];switch(o){case 0:case 1:case 2:a.appendChars(i,0,2),a.append(o),a.append("0000"),a.appendChars(i,2,3);break;case 3:a.appendChars(i,0,3),a.append("00000"),a.appendChars(i,3,2);break;case 4:a.appendChars(i,0,4),a.append("00000"),a.append(i[4]);break;default:a.appendChars(i,0,5),a.append("0000"),a.append(o);break}return t.length>=8&&a.append(t.charAt(7)),a.toString()}}Tn.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),Tn.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,26])];class el extends jt{constructor(t){super();let i=t==null?null:t.get(be.POSSIBLE_FORMATS),a=[];d(i)?(a.push(new Ai),a.push(new va),a.push(new Xi),a.push(new Tn)):(i.indexOf(pe.EAN_13)>-1&&a.push(new Ai),i.indexOf(pe.UPC_A)>-1&&a.push(new va),i.indexOf(pe.EAN_8)>-1&&a.push(new Xi),i.indexOf(pe.UPC_E)>-1&&a.push(new Tn)),this.readers=a}decodeRow(t,i,a){for(let o of this.readers)try{const c=o.decodeRow(t,i,a),f=c.getBarcodeFormat()===pe.EAN_13&&c.getText().charAt(0)==="0",g=a==null?null:a.get(be.POSSIBLE_FORMATS),x=g==null||g.includes(pe.UPC_A);if(f&&x){const A=c.getRawBytes(),v=new Ae(c.getText().substring(1),A,A?A.length:null,c.getResultPoints(),pe.UPC_A);return v.putAllMetadata(c.getResultMetadata()),v}return c}catch{}throw new ee}reset(){for(let t of this.readers)t.reset()}}class xn extends jt{constructor(){super(),this.decodeFinderCounters=new Int32Array(4),this.dataCharacterCounters=new Int32Array(8),this.oddRoundingErrors=new Array(4),this.evenRoundingErrors=new Array(4),this.oddCounts=new Array(this.dataCharacterCounters.length/2),this.evenCounts=new Array(this.dataCharacterCounters.length/2)}getDecodeFinderCounters(){return this.decodeFinderCounters}getDataCharacterCounters(){return this.dataCharacterCounters}getOddRoundingErrors(){return this.oddRoundingErrors}getEvenRoundingErrors(){return this.evenRoundingErrors}getOddCounts(){return this.oddCounts}getEvenCounts(){return this.evenCounts}parseFinderValue(t,i){for(let a=0;a<i.length;a++)if(jt.patternMatchVariance(t,i[a],xn.MAX_INDIVIDUAL_VARIANCE)<xn.MAX_AVG_VARIANCE)return a;throw new ee}static count(t){return Je.sum(new Int32Array(t))}static increment(t,i){let a=0,o=i[0];for(let c=1;c<t.length;c++)i[c]>o&&(o=i[c],a=c);t[a]++}static decrement(t,i){let a=0,o=i[0];for(let c=1;c<t.length;c++)i[c]<o&&(o=i[c],a=c);t[a]--}static isFinderPattern(t){let i=t[0]+t[1],a=i+t[2]+t[3],o=i/a;if(o>=xn.MIN_FINDER_PATTERN_RATIO&&o<=xn.MAX_FINDER_PATTERN_RATIO){let c=Number.MAX_SAFE_INTEGER,f=Number.MIN_SAFE_INTEGER;for(let g of t)g>f&&(f=g),g<c&&(c=g);return f<10*c}return!1}}xn.MAX_AVG_VARIANCE=.2,xn.MAX_INDIVIDUAL_VARIANCE=.45,xn.MIN_FINDER_PATTERN_RATIO=9.5/12,xn.MAX_FINDER_PATTERN_RATIO=12.5/14;class Zi{constructor(t,i){this.value=t,this.checksumPortion=i}getValue(){return this.value}getChecksumPortion(){return this.checksumPortion}toString(){return this.value+"("+this.checksumPortion+")"}equals(t){if(!(t instanceof Zi))return!1;const i=t;return this.value===i.value&&this.checksumPortion===i.checksumPortion}hashCode(){return this.value^this.checksumPortion}}class Wi{constructor(t,i,a,o,c){this.value=t,this.startEnd=i,this.value=t,this.startEnd=i,this.resultPoints=new Array,this.resultPoints.push(new Se(a,c)),this.resultPoints.push(new Se(o,c))}getValue(){return this.value}getStartEnd(){return this.startEnd}getResultPoints(){return this.resultPoints}equals(t){if(!(t instanceof Wi))return!1;const i=t;return this.value===i.value}hashCode(){return this.value}}class bi{constructor(){}static getRSSvalue(t,i,a){let o=0;for(let x of t)o+=x;let c=0,f=0,g=t.length;for(let x=0;x<g-1;x++){let A;for(A=1,f|=1<<x;A<t[x];A++,f&=~(1<<x)){let v=bi.combins(o-A-1,g-x-2);if(a&&f===0&&o-A-(g-x-1)>=g-x-1&&(v-=bi.combins(o-A-(g-x),g-x-2)),g-x-1>1){let O=0;for(let I=o-A-(g-x-2);I>i;I--)O+=bi.combins(o-A-I-1,g-x-3);v-=O*(g-1-x)}else o-A>i&&v--;c+=v}o-=A}return c}static combins(t,i){let a,o;t-i>i?(o=i,a=t-i):(o=t-i,a=i);let c=1,f=1;for(let g=t;g>a;g--)c*=g,f<=o&&(c/=f,f++);for(;f<=o;)c/=f,f++;return c}}class ao{static buildBitArray(t){let i=t.length*2-1;t[t.length-1].getRightChar()==null&&(i-=1);let a=12*i,o=new xe(a),c=0,g=t[0].getRightChar().getValue();for(let x=11;x>=0;--x)(g&1<<x)!=0&&o.set(c),c++;for(let x=1;x<t.length;++x){let A=t[x],v=A.getLeftChar().getValue();for(let O=11;O>=0;--O)(v&1<<O)!=0&&o.set(c),c++;if(A.getRightChar()!=null){let O=A.getRightChar().getValue();for(let I=11;I>=0;--I)(O&1<<I)!=0&&o.set(c),c++}}return o}}class Ki{constructor(t,i){i?this.decodedInformation=null:(this.finished=t,this.decodedInformation=i)}getDecodedInformation(){return this.decodedInformation}isFinished(){return this.finished}}class es{constructor(t){this.newPosition=t}getNewPosition(){return this.newPosition}}class Sn extends es{constructor(t,i){super(t),this.value=i}getValue(){return this.value}isFNC1(){return this.value===Sn.FNC1}}Sn.FNC1="$";class Bi extends es{constructor(t,i,a){super(t),a?(this.remaining=!0,this.remainingValue=this.remainingValue):(this.remaining=!1,this.remainingValue=0),this.newString=i}getNewString(){return this.newString}isRemaining(){return this.remaining}getRemainingValue(){return this.remainingValue}}class kn extends es{constructor(t,i,a){if(super(t),i<0||i>10||a<0||a>10)throw new $;this.firstDigit=i,this.secondDigit=a}getFirstDigit(){return this.firstDigit}getSecondDigit(){return this.secondDigit}getValue(){return this.firstDigit*10+this.secondDigit}isFirstDigitFNC1(){return this.firstDigit===kn.FNC1}isSecondDigitFNC1(){return this.secondDigit===kn.FNC1}isAnyFNC1(){return this.firstDigit===kn.FNC1||this.secondDigit===kn.FNC1}}kn.FNC1=10;class Ee{constructor(){}static parseFieldsInGeneralPurpose(t){if(!t)return null;if(t.length<2)throw new ee;let i=t.substring(0,2);for(let c of Ee.TWO_DIGIT_DATA_LENGTH)if(c[0]===i)return c[1]===Ee.VARIABLE_LENGTH?Ee.processVariableAI(2,c[2],t):Ee.processFixedAI(2,c[1],t);if(t.length<3)throw new ee;let a=t.substring(0,3);for(let c of Ee.THREE_DIGIT_DATA_LENGTH)if(c[0]===a)return c[1]===Ee.VARIABLE_LENGTH?Ee.processVariableAI(3,c[2],t):Ee.processFixedAI(3,c[1],t);for(let c of Ee.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH)if(c[0]===a)return c[1]===Ee.VARIABLE_LENGTH?Ee.processVariableAI(4,c[2],t):Ee.processFixedAI(4,c[1],t);if(t.length<4)throw new ee;let o=t.substring(0,4);for(let c of Ee.FOUR_DIGIT_DATA_LENGTH)if(c[0]===o)return c[1]===Ee.VARIABLE_LENGTH?Ee.processVariableAI(4,c[2],t):Ee.processFixedAI(4,c[1],t);throw new ee}static processFixedAI(t,i,a){if(a.length<t)throw new ee;let o=a.substring(0,t);if(a.length<t+i)throw new ee;let c=a.substring(t,t+i),f=a.substring(t+i),g="("+o+")"+c,x=Ee.parseFieldsInGeneralPurpose(f);return x==null?g:g+x}static processVariableAI(t,i,a){let o=a.substring(0,t),c;a.length<t+i?c=a.length:c=t+i;let f=a.substring(t,c),g=a.substring(c),x="("+o+")"+f,A=Ee.parseFieldsInGeneralPurpose(g);return A==null?x:x+A}}Ee.VARIABLE_LENGTH=[],Ee.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",Ee.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",Ee.VARIABLE_LENGTH,20],["22",Ee.VARIABLE_LENGTH,29],["30",Ee.VARIABLE_LENGTH,8],["37",Ee.VARIABLE_LENGTH,8],["90",Ee.VARIABLE_LENGTH,30],["91",Ee.VARIABLE_LENGTH,30],["92",Ee.VARIABLE_LENGTH,30],["93",Ee.VARIABLE_LENGTH,30],["94",Ee.VARIABLE_LENGTH,30],["95",Ee.VARIABLE_LENGTH,30],["96",Ee.VARIABLE_LENGTH,30],["97",Ee.VARIABLE_LENGTH,3],["98",Ee.VARIABLE_LENGTH,30],["99",Ee.VARIABLE_LENGTH,30]],Ee.THREE_DIGIT_DATA_LENGTH=[["240",Ee.VARIABLE_LENGTH,30],["241",Ee.VARIABLE_LENGTH,30],["242",Ee.VARIABLE_LENGTH,6],["250",Ee.VARIABLE_LENGTH,30],["251",Ee.VARIABLE_LENGTH,30],["253",Ee.VARIABLE_LENGTH,17],["254",Ee.VARIABLE_LENGTH,20],["400",Ee.VARIABLE_LENGTH,30],["401",Ee.VARIABLE_LENGTH,30],["402",17],["403",Ee.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",Ee.VARIABLE_LENGTH,20],["421",Ee.VARIABLE_LENGTH,15],["422",3],["423",Ee.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],Ee.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",Ee.VARIABLE_LENGTH,15],["391",Ee.VARIABLE_LENGTH,18],["392",Ee.VARIABLE_LENGTH,15],["393",Ee.VARIABLE_LENGTH,18],["703",Ee.VARIABLE_LENGTH,30]],Ee.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",Ee.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",Ee.VARIABLE_LENGTH,20],["8003",Ee.VARIABLE_LENGTH,30],["8004",Ee.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",Ee.VARIABLE_LENGTH,30],["8008",Ee.VARIABLE_LENGTH,12],["8018",18],["8020",Ee.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",Ee.VARIABLE_LENGTH,70],["8200",Ee.VARIABLE_LENGTH,70]];class Un{constructor(t){this.buffer=new nt,this.information=t}decodeAllCodes(t,i){let a=i,o=null;do{let c=this.decodeGeneralPurposeField(a,o),f=Ee.parseFieldsInGeneralPurpose(c.getNewString());if(f!=null&&t.append(f),c.isRemaining()?o=""+c.getRemainingValue():o=null,a===c.getNewPosition())break;a=c.getNewPosition()}while(!0);return t.toString()}isStillNumeric(t){if(t+7>this.information.getSize())return t+4<=this.information.getSize();for(let i=t;i<t+3;++i)if(this.information.get(i))return!0;return this.information.get(t+3)}decodeNumeric(t){if(t+7>this.information.getSize()){let c=this.extractNumericValueFromBitArray(t,4);return c===0?new kn(this.information.getSize(),kn.FNC1,kn.FNC1):new kn(this.information.getSize(),c-1,kn.FNC1)}let i=this.extractNumericValueFromBitArray(t,7),a=(i-8)/11,o=(i-8)%11;return new kn(t+7,a,o)}extractNumericValueFromBitArray(t,i){return Un.extractNumericValueFromBitArray(this.information,t,i)}static extractNumericValueFromBitArray(t,i,a){let o=0;for(let c=0;c<a;++c)t.get(i+c)&&(o|=1<<a-c-1);return o}decodeGeneralPurposeField(t,i){this.buffer.setLengthToZero(),i!=null&&this.buffer.append(i),this.current.setPosition(t);let a=this.parseBlocks();return a!=null&&a.isRemaining()?new Bi(this.current.getPosition(),this.buffer.toString(),a.getRemainingValue()):new Bi(this.current.getPosition(),this.buffer.toString())}parseBlocks(){let t,i;do{let a=this.current.getPosition();if(this.current.isAlpha()?(i=this.parseAlphaBlock(),t=i.isFinished()):this.current.isIsoIec646()?(i=this.parseIsoIec646Block(),t=i.isFinished()):(i=this.parseNumericBlock(),t=i.isFinished()),!(a!==this.current.getPosition())&&!t)break}while(!t);return i.getDecodedInformation()}parseNumericBlock(){for(;this.isStillNumeric(this.current.getPosition());){let t=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFirstDigitFNC1()){let i;return t.isSecondDigitFNC1()?i=new Bi(this.current.getPosition(),this.buffer.toString()):i=new Bi(this.current.getPosition(),this.buffer.toString(),t.getSecondDigit()),new Ki(!0,i)}if(this.buffer.append(t.getFirstDigit()),t.isSecondDigitFNC1()){let i=new Bi(this.current.getPosition(),this.buffer.toString());return new Ki(!0,i)}this.buffer.append(t.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ki(!1)}parseIsoIec646Block(){for(;this.isStillIsoIec646(this.current.getPosition());){let t=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new Bi(this.current.getPosition(),this.buffer.toString());return new Ki(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ki(!1)}parseAlphaBlock(){for(;this.isStillAlpha(this.current.getPosition());){let t=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(t.getNewPosition()),t.isFNC1()){let i=new Bi(this.current.getPosition(),this.buffer.toString());return new Ki(!0,i)}this.buffer.append(t.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ki(!1)}isStillIsoIec646(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+7>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,7);if(a>=64&&a<116)return!0;if(t+8>this.information.getSize())return!1;let o=this.extractNumericValueFromBitArray(t,8);return o>=232&&o<253}decodeIsoIec646(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new Sn(t+5,Sn.FNC1);if(i>=5&&i<15)return new Sn(t+5,"0"+(i-5));let a=this.extractNumericValueFromBitArray(t,7);if(a>=64&&a<90)return new Sn(t+7,""+(a+1));if(a>=90&&a<116)return new Sn(t+7,""+(a+7));let o=this.extractNumericValueFromBitArray(t,8),c;switch(o){case 232:c="!";break;case 233:c='"';break;case 234:c="%";break;case 235:c="&";break;case 236:c="'";break;case 237:c="(";break;case 238:c=")";break;case 239:c="*";break;case 240:c="+";break;case 241:c=",";break;case 242:c="-";break;case 243:c=".";break;case 244:c="/";break;case 245:c=":";break;case 246:c=";";break;case 247:c="<";break;case 248:c="=";break;case 249:c=">";break;case 250:c="?";break;case 251:c="_";break;case 252:c=" ";break;default:throw new $}return new Sn(t+8,c)}isStillAlpha(t){if(t+5>this.information.getSize())return!1;let i=this.extractNumericValueFromBitArray(t,5);if(i>=5&&i<16)return!0;if(t+6>this.information.getSize())return!1;let a=this.extractNumericValueFromBitArray(t,6);return a>=16&&a<63}decodeAlphanumeric(t){let i=this.extractNumericValueFromBitArray(t,5);if(i===15)return new Sn(t+5,Sn.FNC1);if(i>=5&&i<15)return new Sn(t+5,"0"+(i-5));let a=this.extractNumericValueFromBitArray(t,6);if(a>=32&&a<58)return new Sn(t+6,""+(a+33));let o;switch(a){case 58:o="*";break;case 59:o=",";break;case 60:o="-";break;case 61:o=".";break;case 62:o="/";break;default:throw new Gn("Decoding invalid alphanumeric value: "+a)}return new Sn(t+6,o)}isAlphaTo646ToAlphaLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<5&&i+t<this.information.getSize();++i)if(i===2){if(!this.information.get(t+2))return!1}else if(this.information.get(t+i))return!1;return!0}isAlphaOr646ToNumericLatch(t){if(t+3>this.information.getSize())return!1;for(let i=t;i<t+3;++i)if(this.information.get(i))return!1;return!0}isNumericToAlphaNumericLatch(t){if(t+1>this.information.getSize())return!1;for(let i=0;i<4&&i+t<this.information.getSize();++i)if(this.information.get(t+i))return!1;return!0}}class rn{constructor(t){this.information=t,this.generalDecoder=new Un(t)}getInformation(){return this.information}getGeneralDecoder(){return this.generalDecoder}}class St extends rn{constructor(t){super(t)}encodeCompressedGtin(t,i){t.append("(01)");let a=t.length();t.append("9"),this.encodeCompressedGtinWithoutAI(t,i,a)}encodeCompressedGtinWithoutAI(t,i,a){for(let o=0;o<4;++o){let c=this.getGeneralDecoder().extractNumericValueFromBitArray(i+10*o,10);c/100===0&&t.append("0"),c/10===0&&t.append("0"),t.append(c)}St.appendCheckDigit(t,a)}static appendCheckDigit(t,i){let a=0;for(let o=0;o<13;o++){let c=t.charAt(o+i).charCodeAt(0)-48;a+=(o&1)===0?3*c:c}a=10-a%10,a===10&&(a=0),t.append(a)}}St.GTIN_SIZE=40;class ii extends St{constructor(t){super(t)}parseInformation(){let t=new nt;t.append("(01)");let i=t.length(),a=this.getGeneralDecoder().extractNumericValueFromBitArray(ii.HEADER_SIZE,4);return t.append(a),this.encodeCompressedGtinWithoutAI(t,ii.HEADER_SIZE+4,i),this.getGeneralDecoder().decodeAllCodes(t,ii.HEADER_SIZE+44)}}ii.HEADER_SIZE=4;class Br extends rn{constructor(t){super(t)}parseInformation(){let t=new nt;return this.getGeneralDecoder().decodeAllCodes(t,Br.HEADER_SIZE)}}Br.HEADER_SIZE=5;class ts extends St{constructor(t){super(t)}encodeCompressedWeight(t,i,a){let o=this.getGeneralDecoder().extractNumericValueFromBitArray(i,a);this.addWeightCode(t,o);let c=this.checkWeight(o),f=1e5;for(let g=0;g<5;++g)c/f===0&&t.append("0"),f/=10;t.append(c)}}class Ei extends ts{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()!=Ei.HEADER_SIZE+ts.GTIN_SIZE+Ei.WEIGHT_SIZE)throw new ee;let t=new nt;return this.encodeCompressedGtin(t,Ei.HEADER_SIZE),this.encodeCompressedWeight(t,Ei.HEADER_SIZE+ts.GTIN_SIZE,Ei.WEIGHT_SIZE),t.toString()}}Ei.HEADER_SIZE=5,Ei.WEIGHT_SIZE=15;class so extends Ei{constructor(t){super(t)}addWeightCode(t,i){t.append("(3103)")}checkWeight(t){return t}}class Sa extends Ei{constructor(t){super(t)}addWeightCode(t,i){i<1e4?t.append("(3202)"):t.append("(3203)")}checkWeight(t){return t<1e4?t:t-1e4}}class qn extends St{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<qn.HEADER_SIZE+St.GTIN_SIZE)throw new ee;let t=new nt;this.encodeCompressedGtin(t,qn.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(qn.HEADER_SIZE+St.GTIN_SIZE,qn.LAST_DIGIT_SIZE);t.append("(392"),t.append(i),t.append(")");let a=this.getGeneralDecoder().decodeGeneralPurposeField(qn.HEADER_SIZE+St.GTIN_SIZE+qn.LAST_DIGIT_SIZE,null);return t.append(a.getNewString()),t.toString()}}qn.HEADER_SIZE=8,qn.LAST_DIGIT_SIZE=2;class Kt extends St{constructor(t){super(t)}parseInformation(){if(this.getInformation().getSize()<Kt.HEADER_SIZE+St.GTIN_SIZE)throw new ee;let t=new nt;this.encodeCompressedGtin(t,Kt.HEADER_SIZE);let i=this.getGeneralDecoder().extractNumericValueFromBitArray(Kt.HEADER_SIZE+St.GTIN_SIZE,Kt.LAST_DIGIT_SIZE);t.append("(393"),t.append(i),t.append(")");let a=this.getGeneralDecoder().extractNumericValueFromBitArray(Kt.HEADER_SIZE+St.GTIN_SIZE+Kt.LAST_DIGIT_SIZE,Kt.FIRST_THREE_DIGITS_SIZE);a/100==0&&t.append("0"),a/10==0&&t.append("0"),t.append(a);let o=this.getGeneralDecoder().decodeGeneralPurposeField(Kt.HEADER_SIZE+St.GTIN_SIZE+Kt.LAST_DIGIT_SIZE+Kt.FIRST_THREE_DIGITS_SIZE,null);return t.append(o.getNewString()),t.toString()}}Kt.HEADER_SIZE=8,Kt.LAST_DIGIT_SIZE=2,Kt.FIRST_THREE_DIGITS_SIZE=10;class pt extends ts{constructor(t,i,a){super(t),this.dateCode=a,this.firstAIdigits=i}parseInformation(){if(this.getInformation().getSize()!=pt.HEADER_SIZE+pt.GTIN_SIZE+pt.WEIGHT_SIZE+pt.DATE_SIZE)throw new ee;let t=new nt;return this.encodeCompressedGtin(t,pt.HEADER_SIZE),this.encodeCompressedWeight(t,pt.HEADER_SIZE+pt.GTIN_SIZE,pt.WEIGHT_SIZE),this.encodeCompressedDate(t,pt.HEADER_SIZE+pt.GTIN_SIZE+pt.WEIGHT_SIZE),t.toString()}encodeCompressedDate(t,i){let a=this.getGeneralDecoder().extractNumericValueFromBitArray(i,pt.DATE_SIZE);if(a==38400)return;t.append("("),t.append(this.dateCode),t.append(")");let o=a%32;a/=32;let c=a%12+1;a/=12;let f=a;f/10==0&&t.append("0"),t.append(f),c/10==0&&t.append("0"),t.append(c),o/10==0&&t.append("0"),t.append(o)}addWeightCode(t,i){t.append("("),t.append(this.firstAIdigits),t.append(i/1e5),t.append(")")}checkWeight(t){return t%1e5}}pt.HEADER_SIZE=8,pt.WEIGHT_SIZE=20,pt.DATE_SIZE=16;function Lr(T){try{if(T.get(1))return new ii(T);if(!T.get(2))return new Br(T);switch(Un.extractNumericValueFromBitArray(T,1,4)){case 4:return new so(T);case 5:return new Sa(T)}switch(Un.extractNumericValueFromBitArray(T,1,5)){case 12:return new qn(T);case 13:return new Kt(T)}switch(Un.extractNumericValueFromBitArray(T,1,7)){case 56:return new pt(T,"310","11");case 57:return new pt(T,"320","11");case 58:return new pt(T,"310","13");case 59:return new pt(T,"320","13");case 60:return new pt(T,"310","15");case 61:return new pt(T,"320","15");case 62:return new pt(T,"310","17");case 63:return new pt(T,"320","17")}}catch(t){throw console.log(t),new Gn("unknown decoder: "+T)}}class jn{constructor(t,i,a,o){this.leftchar=t,this.rightchar=i,this.finderpattern=a,this.maybeLast=o}mayBeLast(){return this.maybeLast}getLeftChar(){return this.leftchar}getRightChar(){return this.rightchar}getFinderPattern(){return this.finderpattern}mustBeLast(){return this.rightchar==null}toString(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"}static equals(t,i){return t instanceof jn?jn.equalsOrNull(t.leftchar,i.leftchar)&&jn.equalsOrNull(t.rightchar,i.rightchar)&&jn.equalsOrNull(t.finderpattern,i.finderpattern):!1}static equalsOrNull(t,i){return t===null?i===null:jn.equals(t,i)}hashCode(){return this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue()}}class Qt{constructor(t,i,a){this.pairs=t,this.rowNumber=i,this.wasReversed=a}getPairs(){return this.pairs}getRowNumber(){return this.rowNumber}isReversed(){return this.wasReversed}isEquivalent(t){return this.checkEqualitity(this,t)}toString(){return"{ "+this.pairs+" }"}equals(t,i){return t instanceof Qt?this.checkEqualitity(t,i)&&t.wasReversed===i.wasReversed:!1}checkEqualitity(t,i){if(!t||!i)return;let a;return t.forEach((o,c)=>{i.forEach(f=>{o.getLeftChar().getValue()===f.getLeftChar().getValue()&&o.getRightChar().getValue()===f.getRightChar().getValue()&&o.getFinderPatter().getValue()===f.getFinderPatter().getValue()&&(a=!0)})}),a}}class ue extends xn{constructor(t){super(...arguments),this.pairs=new Array(ue.MAX_PAIRS),this.rows=new Array,this.startEnd=[2],this.verbose=t===!0}decodeRow(t,i,a){this.pairs.length=0,this.startFromEven=!1;try{return ue.constructResult(this.decodeRow2pairs(t,i))}catch(o){this.verbose&&console.log(o)}return this.pairs.length=0,this.startFromEven=!0,ue.constructResult(this.decodeRow2pairs(t,i))}reset(){this.pairs.length=0,this.rows.length=0}decodeRow2pairs(t,i){let a=!1;for(;!a;)try{this.pairs.push(this.retrieveNextPair(i,this.pairs,t))}catch(c){if(c instanceof ee){if(!this.pairs.length)throw new ee;a=!0}}if(this.checkChecksum())return this.pairs;let o;if(this.rows.length?o=!0:o=!1,this.storeRow(t,!1),o){let c=this.checkRowsBoolean(!1);if(c!=null||(c=this.checkRowsBoolean(!0),c!=null))return c}throw new ee}checkRowsBoolean(t){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,t&&(this.rows=this.rows.reverse());let i=null;try{i=this.checkRows(new Array,0)}catch(a){this.verbose&&console.log(a)}return t&&(this.rows=this.rows.reverse()),i}checkRows(t,i){for(let a=i;a<this.rows.length;a++){let o=this.rows[a];this.pairs.length=0;for(let f of t)this.pairs.push(f.getPairs());if(this.pairs.push(o.getPairs()),!ue.isValidSequence(this.pairs))continue;if(this.checkChecksum())return this.pairs;let c=new Array(t);c.push(o);try{return this.checkRows(c,a+1)}catch(f){this.verbose&&console.log(f)}}throw new ee}static isValidSequence(t){for(let i of ue.FINDER_PATTERN_SEQUENCES){if(t.length>i.length)continue;let a=!0;for(let o=0;o<t.length;o++)if(t[o].getFinderPattern().getValue()!=i[o]){a=!1;break}if(a)return!0}return!1}storeRow(t,i){let a=0,o=!1,c=!1;for(;a<this.rows.length;){let f=this.rows[a];if(f.getRowNumber()>t){c=f.isEquivalent(this.pairs);break}o=f.isEquivalent(this.pairs),a++}c||o||ue.isPartialRow(this.pairs,this.rows)||(this.rows.push(a,new Qt(this.pairs,t,i)),this.removePartialRows(this.pairs,this.rows))}removePartialRows(t,i){for(let a of i)if(a.getPairs().length!==t.length){for(let o of a.getPairs())for(let c of t)if(jn.equals(o,c))break}}static isPartialRow(t,i){for(let a of i){let o=!0;for(let c of t){let f=!1;for(let g of a.getPairs())if(c.equals(g)){f=!0;break}if(!f){o=!1;break}}if(o)return!0}return!1}getRows(){return this.rows}static constructResult(t){let i=ao.buildBitArray(t),o=Lr(i).parseInformation(),c=t[0].getFinderPattern().getResultPoints(),f=t[t.length-1].getFinderPattern().getResultPoints(),g=[c[0],c[1],f[0],f[1]];return new Ae(o,null,null,g,pe.RSS_EXPANDED,null)}checkChecksum(){let t=this.pairs.get(0),i=t.getLeftChar(),a=t.getRightChar();if(a==null)return!1;let o=a.getChecksumPortion(),c=2;for(let g=1;g<this.pairs.size();++g){let x=this.pairs.get(g);o+=x.getLeftChar().getChecksumPortion(),c++;let A=x.getRightChar();A!=null&&(o+=A.getChecksumPortion(),c++)}return o%=211,211*(c-4)+o==i.getValue()}static getNextSecondBar(t,i){let a;return t.get(i)?(a=t.getNextUnset(i),a=t.getNextSet(a)):(a=t.getNextSet(i),a=t.getNextUnset(a)),a}retrieveNextPair(t,i,a){let o=i.length%2==0;this.startFromEven&&(o=!o);let c,f=!0,g=-1;do this.findNextPair(t,i,g),c=this.parseFoundFinderPattern(t,a,o),c==null?g=ue.getNextSecondBar(t,this.startEnd[0]):f=!1;while(f);let x=this.decodeDataCharacter(t,c,o,!0);if(!this.isEmptyPair(i)&&i[i.length-1].mustBeLast())throw new ee;let A;try{A=this.decodeDataCharacter(t,c,o,!1)}catch(v){A=null,this.verbose&&console.log(v)}return new jn(x,A,c,!0)}isEmptyPair(t){return t.length===0}findNextPair(t,i,a){let o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;let c=t.getSize(),f;a>=0?f=a:this.isEmptyPair(i)?f=0:f=i[i.length-1].getFinderPattern().getStartEnd()[1];let g=i.length%2!=0;this.startFromEven&&(g=!g);let x=!1;for(;f<c&&(x=!t.get(f),!!x);)f++;let A=0,v=f;for(let O=f;O<c;O++)if(t.get(O)!=x)o[A]++;else{if(A==3){if(g&&ue.reverseCounters(o),ue.isFinderPattern(o)){this.startEnd[0]=v,this.startEnd[1]=O;return}g&&ue.reverseCounters(o),v+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,A--}else A++;o[A]=1,x=!x}throw new ee}static reverseCounters(t){let i=t.length;for(let a=0;a<i/2;++a){let o=t[a];t[a]=t[i-a-1],t[i-a-1]=o}}parseFoundFinderPattern(t,i,a){let o,c,f;if(a){let A=this.startEnd[0]-1;for(;A>=0&&!t.get(A);)A--;A++,o=this.startEnd[0]-A,c=A,f=this.startEnd[1]}else c=this.startEnd[0],f=t.getNextUnset(this.startEnd[1]+1),o=f-this.startEnd[1];let g=this.getDecodeFinderCounters();K.arraycopy(g,0,g,1,g.length-1),g[0]=o;let x;try{x=this.parseFinderValue(g,ue.FINDER_PATTERNS)}catch{return null}return new Wi(x,[c,f],c,f,i)}decodeDataCharacter(t,i,a,o){let c=this.getDataCharacterCounters();for(let Et=0;Et<c.length;Et++)c[Et]=0;if(o)ue.recordPatternInReverse(t,i.getStartEnd()[0],c);else{ue.recordPattern(t,i.getStartEnd()[1],c);for(let Et=0,bn=c.length-1;Et<bn;Et++,bn--){let Fn=c[Et];c[Et]=c[bn],c[bn]=Fn}}let f=17,g=Je.sum(new Int32Array(c))/f,x=(i.getStartEnd()[1]-i.getStartEnd()[0])/15;if(Math.abs(g-x)/x>.3)throw new ee;let A=this.getOddCounts(),v=this.getEvenCounts(),O=this.getOddRoundingErrors(),I=this.getEvenRoundingErrors();for(let Et=0;Et<c.length;Et++){let bn=1*c[Et]/g,Fn=bn+.5;if(Fn<1){if(bn<.3)throw new ee;Fn=1}else if(Fn>8){if(bn>8.7)throw new ee;Fn=8}let Xr=Et/2;(Et&1)==0?(A[Xr]=Fn,O[Xr]=bn-Fn):(v[Xr]=Fn,I[Xr]=bn-Fn)}this.adjustOddEvenCounts(f);let B=4*i.getValue()+(a?0:2)+(o?0:1)-1,k=0,U=0;for(let Et=A.length-1;Et>=0;Et--){if(ue.isNotA1left(i,a,o)){let bn=ue.WEIGHTS[B][2*Et];U+=A[Et]*bn}k+=A[Et]}let V=0;for(let Et=v.length-1;Et>=0;Et--)if(ue.isNotA1left(i,a,o)){let bn=ue.WEIGHTS[B][2*Et+1];V+=v[Et]*bn}let Z=U+V;if((k&1)!=0||k>13||k<4)throw new ee;let ge=(13-k)/2,de=ue.SYMBOL_WIDEST[ge],he=9-de,Xe=bi.getRSSvalue(A,de,!0),Fe=bi.getRSSvalue(v,he,!1),Jt=ue.EVEN_TOTAL_SUBSET[ge],Wn=ue.GSUM[ge],On=Xe*Jt+Fe+Wn;return new Zi(On,Z)}static isNotA1left(t,i,a){return!(t.getValue()==0&&i&&a)}adjustOddEvenCounts(t){let i=Je.sum(new Int32Array(this.getOddCounts())),a=Je.sum(new Int32Array(this.getEvenCounts())),o=!1,c=!1;i>13?c=!0:i<4&&(o=!0);let f=!1,g=!1;a>13?g=!0:a<4&&(f=!0);let x=i+a-t,A=(i&1)==1,v=(a&1)==0;if(x==1)if(A){if(v)throw new ee;c=!0}else{if(!v)throw new ee;g=!0}else if(x==-1)if(A){if(v)throw new ee;o=!0}else{if(!v)throw new ee;f=!0}else if(x==0){if(A){if(!v)throw new ee;i<a?(o=!0,g=!0):(c=!0,f=!0)}else if(v)throw new ee}else throw new ee;if(o){if(c)throw new ee;ue.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(c&&ue.decrement(this.getOddCounts(),this.getOddRoundingErrors()),f){if(g)throw new ee;ue.increment(this.getEvenCounts(),this.getOddRoundingErrors())}g&&ue.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}ue.SYMBOL_WIDEST=[7,5,4,3,1],ue.EVEN_TOTAL_SUBSET=[4,20,52,104,204],ue.GSUM=[0,348,1388,2948,3988],ue.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],ue.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],ue.FINDER_PAT_A=0,ue.FINDER_PAT_B=1,ue.FINDER_PAT_C=2,ue.FINDER_PAT_D=3,ue.FINDER_PAT_E=4,ue.FINDER_PAT_F=5,ue.FINDER_PATTERN_SEQUENCES=[[ue.FINDER_PAT_A,ue.FINDER_PAT_A],[ue.FINDER_PAT_A,ue.FINDER_PAT_B,ue.FINDER_PAT_B],[ue.FINDER_PAT_A,ue.FINDER_PAT_C,ue.FINDER_PAT_B,ue.FINDER_PAT_D],[ue.FINDER_PAT_A,ue.FINDER_PAT_E,ue.FINDER_PAT_B,ue.FINDER_PAT_D,ue.FINDER_PAT_C],[ue.FINDER_PAT_A,ue.FINDER_PAT_E,ue.FINDER_PAT_B,ue.FINDER_PAT_D,ue.FINDER_PAT_D,ue.FINDER_PAT_F],[ue.FINDER_PAT_A,ue.FINDER_PAT_E,ue.FINDER_PAT_B,ue.FINDER_PAT_D,ue.FINDER_PAT_E,ue.FINDER_PAT_F,ue.FINDER_PAT_F],[ue.FINDER_PAT_A,ue.FINDER_PAT_A,ue.FINDER_PAT_B,ue.FINDER_PAT_B,ue.FINDER_PAT_C,ue.FINDER_PAT_C,ue.FINDER_PAT_D,ue.FINDER_PAT_D],[ue.FINDER_PAT_A,ue.FINDER_PAT_A,ue.FINDER_PAT_B,ue.FINDER_PAT_B,ue.FINDER_PAT_C,ue.FINDER_PAT_C,ue.FINDER_PAT_D,ue.FINDER_PAT_E,ue.FINDER_PAT_E],[ue.FINDER_PAT_A,ue.FINDER_PAT_A,ue.FINDER_PAT_B,ue.FINDER_PAT_B,ue.FINDER_PAT_C,ue.FINDER_PAT_C,ue.FINDER_PAT_D,ue.FINDER_PAT_E,ue.FINDER_PAT_F,ue.FINDER_PAT_F],[ue.FINDER_PAT_A,ue.FINDER_PAT_A,ue.FINDER_PAT_B,ue.FINDER_PAT_B,ue.FINDER_PAT_C,ue.FINDER_PAT_D,ue.FINDER_PAT_D,ue.FINDER_PAT_E,ue.FINDER_PAT_E,ue.FINDER_PAT_F,ue.FINDER_PAT_F]],ue.MAX_PAIRS=11;class lo extends Zi{constructor(t,i,a){super(t,i),this.count=0,this.finderPattern=a}getFinderPattern(){return this.finderPattern}getCount(){return this.count}incrementCount(){this.count++}}class At extends xn{constructor(){super(...arguments),this.possibleLeftPairs=[],this.possibleRightPairs=[]}decodeRow(t,i,a){const o=this.decodePair(i,!1,t,a);At.addOrTally(this.possibleLeftPairs,o),i.reverse();let c=this.decodePair(i,!0,t,a);At.addOrTally(this.possibleRightPairs,c),i.reverse();for(let f of this.possibleLeftPairs)if(f.getCount()>1){for(let g of this.possibleRightPairs)if(g.getCount()>1&&At.checkChecksum(f,g))return At.constructResult(f,g)}throw new ee}static addOrTally(t,i){if(i==null)return;let a=!1;for(let o of t)if(o.getValue()===i.getValue()){o.incrementCount(),a=!0;break}a||t.push(i)}reset(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0}static constructResult(t,i){let a=4537077*t.getValue()+i.getValue(),o=new String(a).toString(),c=new nt;for(let A=13-o.length;A>0;A--)c.append("0");c.append(o);let f=0;for(let A=0;A<13;A++){let v=c.charAt(A).charCodeAt(0)-48;f+=(A&1)===0?3*v:v}f=10-f%10,f===10&&(f=0),c.append(f.toString());let g=t.getFinderPattern().getResultPoints(),x=i.getFinderPattern().getResultPoints();return new Ae(c.toString(),null,0,[g[0],g[1],x[0],x[1]],pe.RSS_14,new Date().getTime())}static checkChecksum(t,i){let a=(t.getChecksumPortion()+16*i.getChecksumPortion())%79,o=9*t.getFinderPattern().getValue()+i.getFinderPattern().getValue();return o>72&&o--,o>8&&o--,a===o}decodePair(t,i,a,o){try{let c=this.findFinderPattern(t,i),f=this.parseFoundFinderPattern(t,a,i,c),g=o==null?null:o.get(be.NEED_RESULT_POINT_CALLBACK);if(g!=null){let v=(c[0]+c[1])/2;i&&(v=t.getSize()-1-v),g.foundPossibleResultPoint(new Se(v,a))}let x=this.decodeDataCharacter(t,f,!0),A=this.decodeDataCharacter(t,f,!1);return new lo(1597*x.getValue()+A.getValue(),x.getChecksumPortion()+4*A.getChecksumPortion(),f)}catch{return null}}decodeDataCharacter(t,i,a){let o=this.getDataCharacterCounters();for(let V=0;V<o.length;V++)o[V]=0;if(a)jt.recordPatternInReverse(t,i.getStartEnd()[0],o);else{jt.recordPattern(t,i.getStartEnd()[1]+1,o);for(let V=0,Z=o.length-1;V<Z;V++,Z--){let ge=o[V];o[V]=o[Z],o[Z]=ge}}let c=a?16:15,f=Je.sum(new Int32Array(o))/c,g=this.getOddCounts(),x=this.getEvenCounts(),A=this.getOddRoundingErrors(),v=this.getEvenRoundingErrors();for(let V=0;V<o.length;V++){let Z=o[V]/f,ge=Math.floor(Z+.5);ge<1?ge=1:ge>8&&(ge=8);let de=Math.floor(V/2);(V&1)===0?(g[de]=ge,A[de]=Z-ge):(x[de]=ge,v[de]=Z-ge)}this.adjustOddEvenCounts(a,c);let O=0,I=0;for(let V=g.length-1;V>=0;V--)I*=9,I+=g[V],O+=g[V];let B=0,k=0;for(let V=x.length-1;V>=0;V--)B*=9,B+=x[V],k+=x[V];let U=I+3*B;if(a){if((O&1)!==0||O>12||O<4)throw new ee;let V=(12-O)/2,Z=At.OUTSIDE_ODD_WIDEST[V],ge=9-Z,de=bi.getRSSvalue(g,Z,!1),he=bi.getRSSvalue(x,ge,!0),Xe=At.OUTSIDE_EVEN_TOTAL_SUBSET[V],Fe=At.OUTSIDE_GSUM[V];return new Zi(de*Xe+he+Fe,U)}else{if((k&1)!==0||k>10||k<4)throw new ee;let V=(10-k)/2,Z=At.INSIDE_ODD_WIDEST[V],ge=9-Z,de=bi.getRSSvalue(g,Z,!0),he=bi.getRSSvalue(x,ge,!1),Xe=At.INSIDE_ODD_TOTAL_SUBSET[V],Fe=At.INSIDE_GSUM[V];return new Zi(he*Xe+de+Fe,U)}}findFinderPattern(t,i){let a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;let o=t.getSize(),c=!1,f=0;for(;f<o&&(c=!t.get(f),i!==c);)f++;let g=0,x=f;for(let A=f;A<o;A++)if(t.get(A)!==c)a[g]++;else{if(g===3){if(xn.isFinderPattern(a))return[x,A];x+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,g--}else g++;a[g]=1,c=!c}throw new ee}parseFoundFinderPattern(t,i,a,o){let c=t.get(o[0]),f=o[0]-1;for(;f>=0&&c!==t.get(f);)f--;f++;const g=o[0]-f,x=this.getDecodeFinderCounters(),A=new Int32Array(x.length);K.arraycopy(x,0,A,1,x.length-1),A[0]=g;const v=this.parseFinderValue(A,At.FINDER_PATTERNS);let O=f,I=o[1];return a&&(O=t.getSize()-1-O,I=t.getSize()-1-I),new Wi(v,[f,o[1]],O,I,i)}adjustOddEvenCounts(t,i){let a=Je.sum(new Int32Array(this.getOddCounts())),o=Je.sum(new Int32Array(this.getEvenCounts())),c=!1,f=!1,g=!1,x=!1;t?(a>12?f=!0:a<4&&(c=!0),o>12?x=!0:o<4&&(g=!0)):(a>11?f=!0:a<5&&(c=!0),o>10?x=!0:o<4&&(g=!0));let A=a+o-i,v=(a&1)===(t?1:0),O=(o&1)===1;if(A===1)if(v){if(O)throw new ee;f=!0}else{if(!O)throw new ee;x=!0}else if(A===-1)if(v){if(O)throw new ee;c=!0}else{if(!O)throw new ee;g=!0}else if(A===0){if(v){if(!O)throw new ee;a<o?(c=!0,x=!0):(f=!0,g=!0)}else if(O)throw new ee}else throw new ee;if(c){if(f)throw new ee;xn.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(f&&xn.decrement(this.getOddCounts(),this.getOddRoundingErrors()),g){if(x)throw new ee;xn.increment(this.getEvenCounts(),this.getOddRoundingErrors())}x&&xn.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())}}At.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],At.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],At.OUTSIDE_GSUM=[0,161,961,2015,2715],At.INSIDE_GSUM=[0,336,1036,1516],At.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],At.INSIDE_ODD_WIDEST=[2,4,6,8],At.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])];class ri extends jt{constructor(t,i){super(),this.readers=[],this.verbose=i===!0;const a=t?t.get(be.POSSIBLE_FORMATS):null,o=t&&t.get(be.ASSUME_CODE_39_CHECK_DIGIT)!==void 0;a?((a.includes(pe.EAN_13)||a.includes(pe.UPC_A)||a.includes(pe.EAN_8)||a.includes(pe.UPC_E))&&this.readers.push(new el(t)),a.includes(pe.CODE_39)&&this.readers.push(new It(o)),a.includes(pe.CODE_128)&&this.readers.push(new me),a.includes(pe.ITF)&&this.readers.push(new Ge),a.includes(pe.RSS_14)&&this.readers.push(new At),a.includes(pe.RSS_EXPANDED)&&this.readers.push(new ue(this.verbose))):(this.readers.push(new el(t)),this.readers.push(new It),this.readers.push(new el(t)),this.readers.push(new me),this.readers.push(new Ge),this.readers.push(new At),this.readers.push(new ue(this.verbose)))}decodeRow(t,i,a){for(let o=0;o<this.readers.length;o++)try{return this.readers[o].decodeRow(t,i,a)}catch{}throw new ee}reset(){this.readers.forEach(t=>t.reset())}}class Fu extends we{constructor(t=500,i){super(new ri(i),t,i)}}class dt{constructor(t,i,a){this.ecCodewords=t,this.ecBlocks=[i],a&&this.ecBlocks.push(a)}getECCodewords(){return this.ecCodewords}getECBlocks(){return this.ecBlocks}}class ft{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class $e{constructor(t,i,a,o,c,f){this.versionNumber=t,this.symbolSizeRows=i,this.symbolSizeColumns=a,this.dataRegionSizeRows=o,this.dataRegionSizeColumns=c,this.ecBlocks=f;let g=0;const x=f.getECCodewords(),A=f.getECBlocks();for(let v of A)g+=v.getCount()*(v.getDataCodewords()+x);this.totalCodewords=g}getVersionNumber(){return this.versionNumber}getSymbolSizeRows(){return this.symbolSizeRows}getSymbolSizeColumns(){return this.symbolSizeColumns}getDataRegionSizeRows(){return this.dataRegionSizeRows}getDataRegionSizeColumns(){return this.dataRegionSizeColumns}getTotalCodewords(){return this.totalCodewords}getECBlocks(){return this.ecBlocks}static getVersionForDimensions(t,i){if((t&1)!==0||(i&1)!==0)throw new $;for(let a of $e.VERSIONS)if(a.symbolSizeRows===t&&a.symbolSizeColumns===i)return a;throw new $}toString(){return""+this.versionNumber}static buildVersions(){return[new $e(1,10,10,8,8,new dt(5,new ft(1,3))),new $e(2,12,12,10,10,new dt(7,new ft(1,5))),new $e(3,14,14,12,12,new dt(10,new ft(1,8))),new $e(4,16,16,14,14,new dt(12,new ft(1,12))),new $e(5,18,18,16,16,new dt(14,new ft(1,18))),new $e(6,20,20,18,18,new dt(18,new ft(1,22))),new $e(7,22,22,20,20,new dt(20,new ft(1,30))),new $e(8,24,24,22,22,new dt(24,new ft(1,36))),new $e(9,26,26,24,24,new dt(28,new ft(1,44))),new $e(10,32,32,14,14,new dt(36,new ft(1,62))),new $e(11,36,36,16,16,new dt(42,new ft(1,86))),new $e(12,40,40,18,18,new dt(48,new ft(1,114))),new $e(13,44,44,20,20,new dt(56,new ft(1,144))),new $e(14,48,48,22,22,new dt(68,new ft(1,174))),new $e(15,52,52,24,24,new dt(42,new ft(2,102))),new $e(16,64,64,14,14,new dt(56,new ft(2,140))),new $e(17,72,72,16,16,new dt(36,new ft(4,92))),new $e(18,80,80,18,18,new dt(48,new ft(4,114))),new $e(19,88,88,20,20,new dt(56,new ft(4,144))),new $e(20,96,96,22,22,new dt(68,new ft(4,174))),new $e(21,104,104,24,24,new dt(56,new ft(6,136))),new $e(22,120,120,18,18,new dt(68,new ft(6,175))),new $e(23,132,132,20,20,new dt(62,new ft(8,163))),new $e(24,144,144,22,22,new dt(62,new ft(8,156),new ft(2,155))),new $e(25,8,18,6,16,new dt(7,new ft(1,5))),new $e(26,8,32,6,14,new dt(11,new ft(1,10))),new $e(27,12,26,10,24,new dt(14,new ft(1,16))),new $e(28,12,36,10,16,new dt(18,new ft(1,22))),new $e(29,16,36,14,16,new dt(24,new ft(1,32))),new $e(30,16,48,14,22,new dt(28,new ft(1,49)))]}}$e.VERSIONS=$e.buildVersions();class kr{constructor(t){const i=t.getHeight();if(i<8||i>144||(i&1)!==0)throw new $;this.version=kr.readVersion(t),this.mappingBitMatrix=this.extractDataRegion(t),this.readMappingMatrix=new Ot(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}getVersion(){return this.version}static readVersion(t){const i=t.getHeight(),a=t.getWidth();return $e.getVersionForDimensions(i,a)}readCodewords(){const t=new Int8Array(this.version.getTotalCodewords());let i=0,a=4,o=0;const c=this.mappingBitMatrix.getHeight(),f=this.mappingBitMatrix.getWidth();let g=!1,x=!1,A=!1,v=!1;do if(a===c&&o===0&&!g)t[i++]=this.readCorner1(c,f)&255,a-=2,o+=2,g=!0;else if(a===c-2&&o===0&&(f&3)!==0&&!x)t[i++]=this.readCorner2(c,f)&255,a-=2,o+=2,x=!0;else if(a===c+4&&o===2&&(f&7)===0&&!A)t[i++]=this.readCorner3(c,f)&255,a-=2,o+=2,A=!0;else if(a===c-2&&o===0&&(f&7)===4&&!v)t[i++]=this.readCorner4(c,f)&255,a-=2,o+=2,v=!0;else{do a<c&&o>=0&&!this.readMappingMatrix.get(o,a)&&(t[i++]=this.readUtah(a,o,c,f)&255),a-=2,o+=2;while(a>=0&&o<f);a+=1,o+=3;do a>=0&&o<f&&!this.readMappingMatrix.get(o,a)&&(t[i++]=this.readUtah(a,o,c,f)&255),a+=2,o-=2;while(a<c&&o>=0);a+=3,o+=1}while(a<c||o<f);if(i!==this.version.getTotalCodewords())throw new $;return t}readModule(t,i,a,o){return t<0&&(t+=a,i+=4-(a+4&7)),i<0&&(i+=o,t+=4-(o+4&7)),this.readMappingMatrix.set(i,t),this.mappingBitMatrix.get(i,t)}readUtah(t,i,a,o){let c=0;return this.readModule(t-2,i-2,a,o)&&(c|=1),c<<=1,this.readModule(t-2,i-1,a,o)&&(c|=1),c<<=1,this.readModule(t-1,i-2,a,o)&&(c|=1),c<<=1,this.readModule(t-1,i-1,a,o)&&(c|=1),c<<=1,this.readModule(t-1,i,a,o)&&(c|=1),c<<=1,this.readModule(t,i-2,a,o)&&(c|=1),c<<=1,this.readModule(t,i-1,a,o)&&(c|=1),c<<=1,this.readModule(t,i,a,o)&&(c|=1),c}readCorner1(t,i){let a=0;return this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,1,t,i)&&(a|=1),a<<=1,this.readModule(t-1,2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a<<=1,this.readModule(2,i-1,t,i)&&(a|=1),a<<=1,this.readModule(3,i-1,t,i)&&(a|=1),a}readCorner2(t,i){let a=0;return this.readModule(t-3,0,t,i)&&(a|=1),a<<=1,this.readModule(t-2,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(0,i-4,t,i)&&(a|=1),a<<=1,this.readModule(0,i-3,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a}readCorner3(t,i){let a=0;return this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,i-1,t,i)&&(a|=1),a<<=1,this.readModule(0,i-3,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-3,t,i)&&(a|=1),a<<=1,this.readModule(1,i-2,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a}readCorner4(t,i){let a=0;return this.readModule(t-3,0,t,i)&&(a|=1),a<<=1,this.readModule(t-2,0,t,i)&&(a|=1),a<<=1,this.readModule(t-1,0,t,i)&&(a|=1),a<<=1,this.readModule(0,i-2,t,i)&&(a|=1),a<<=1,this.readModule(0,i-1,t,i)&&(a|=1),a<<=1,this.readModule(1,i-1,t,i)&&(a|=1),a<<=1,this.readModule(2,i-1,t,i)&&(a|=1),a<<=1,this.readModule(3,i-1,t,i)&&(a|=1),a}extractDataRegion(t){const i=this.version.getSymbolSizeRows(),a=this.version.getSymbolSizeColumns();if(t.getHeight()!==i)throw new D("Dimension of bitMatrix must match the version size");const o=this.version.getDataRegionSizeRows(),c=this.version.getDataRegionSizeColumns(),f=i/o|0,g=a/c|0,x=f*o,A=g*c,v=new Ot(A,x);for(let O=0;O<f;++O){const I=O*o;for(let B=0;B<g;++B){const k=B*c;for(let U=0;U<o;++U){const V=O*(o+2)+1+U,Z=I+U;for(let ge=0;ge<c;++ge){const de=B*(c+2)+1+ge;if(t.get(de,V)){const he=k+ge;v.set(he,Z)}}}}}return v}}class Ur{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i){const a=i.getECBlocks();let o=0;const c=a.getECBlocks();for(let U of c)o+=U.getCount();const f=new Array(o);let g=0;for(let U of c)for(let V=0;V<U.getCount();V++){const Z=U.getDataCodewords(),ge=a.getECCodewords()+Z;f[g++]=new Ur(Z,new Uint8Array(ge))}const A=f[0].codewords.length-a.getECCodewords(),v=A-1;let O=0;for(let U=0;U<v;U++)for(let V=0;V<g;V++)f[V].codewords[U]=t[O++];const I=i.getVersionNumber()===24,B=I?8:g;for(let U=0;U<B;U++)f[U].codewords[A-1]=t[O++];const k=f[0].codewords.length;for(let U=A;U<k;U++)for(let V=0;V<g;V++){const Z=I?(V+8)%g:V,ge=I&&Z>7?U-1:U;f[Z].codewords[ge]=t[O++]}if(O!==t.length)throw new D;return f}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}class ai{constructor(t){this.bytes=t,this.byteOffset=0,this.bitOffset=0}getBitOffset(){return this.bitOffset}getByteOffset(){return this.byteOffset}readBits(t){if(t<1||t>32||t>this.available())throw new D(""+t);let i=0,a=this.bitOffset,o=this.byteOffset;const c=this.bytes;if(a>0){const f=8-a,g=t<f?t:f,x=f-g,A=255>>8-g<<x;i=(c[o]&A)>>x,t-=g,a+=g,a===8&&(a=0,o++)}if(t>0){for(;t>=8;)i=i<<8|c[o]&255,o++,t-=8;if(t>0){const f=8-t,g=255>>f<<f;i=i<<t|(c[o]&g)>>f,a+=t}}return this.bitOffset=a,this.byteOffset=o,i}available(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset}}var gt;(function(T){T[T.PAD_ENCODE=0]="PAD_ENCODE",T[T.ASCII_ENCODE=1]="ASCII_ENCODE",T[T.C40_ENCODE=2]="C40_ENCODE",T[T.TEXT_ENCODE=3]="TEXT_ENCODE",T[T.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",T[T.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",T[T.BASE256_ENCODE=6]="BASE256_ENCODE"})(gt||(gt={}));class Li{static decode(t){const i=new ai(t),a=new nt,o=new nt,c=new Array;let f=gt.ASCII_ENCODE;do if(f===gt.ASCII_ENCODE)f=this.decodeAsciiSegment(i,a,o);else{switch(f){case gt.C40_ENCODE:this.decodeC40Segment(i,a);break;case gt.TEXT_ENCODE:this.decodeTextSegment(i,a);break;case gt.ANSIX12_ENCODE:this.decodeAnsiX12Segment(i,a);break;case gt.EDIFACT_ENCODE:this.decodeEdifactSegment(i,a);break;case gt.BASE256_ENCODE:this.decodeBase256Segment(i,a,c);break;default:throw new $}f=gt.ASCII_ENCODE}while(f!==gt.PAD_ENCODE&&i.available()>0);return o.length()>0&&a.append(o.toString()),new Mt(t,a.toString(),c.length===0?null:c,null)}static decodeAsciiSegment(t,i,a){let o=!1;do{let c=t.readBits(8);if(c===0)throw new $;if(c<=128)return o&&(c+=128),i.append(String.fromCharCode(c-1)),gt.ASCII_ENCODE;if(c===129)return gt.PAD_ENCODE;if(c<=229){const f=c-130;f<10&&i.append("0"),i.append(""+f)}else switch(c){case 230:return gt.C40_ENCODE;case 231:return gt.BASE256_ENCODE;case 232:i.append("");break;case 233:case 234:break;case 235:o=!0;break;case 236:i.append("[)>05"),a.insert(0,"");break;case 237:i.append("[)>06"),a.insert(0,"");break;case 238:return gt.ANSIX12_ENCODE;case 239:return gt.TEXT_ENCODE;case 240:return gt.EDIFACT_ENCODE;case 241:break;default:if(c!==254||t.available()!==0)throw new $;break}}while(t.available()>0);return gt.ASCII_ENCODE}static decodeC40Segment(t,i){let a=!1;const o=[];let c=0;do{if(t.available()===8)return;const f=t.readBits(8);if(f===254)return;this.parseTwoBytes(f,t.readBits(8),o);for(let g=0;g<3;g++){const x=o[g];switch(c){case 0:if(x<3)c=x+1;else if(x<this.C40_BASIC_SET_CHARS.length){const A=this.C40_BASIC_SET_CHARS[x];a?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):i.append(A)}else throw new $;break;case 1:a?(i.append(String.fromCharCode(x+128)),a=!1):i.append(String.fromCharCode(x)),c=0;break;case 2:if(x<this.C40_SHIFT2_SET_CHARS.length){const A=this.C40_SHIFT2_SET_CHARS[x];a?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):i.append(A)}else switch(x){case 27:i.append("");break;case 30:a=!0;break;default:throw new $}c=0;break;case 3:a?(i.append(String.fromCharCode(x+224)),a=!1):i.append(String.fromCharCode(x+96)),c=0;break;default:throw new $}}}while(t.available()>0)}static decodeTextSegment(t,i){let a=!1,o=[],c=0;do{if(t.available()===8)return;const f=t.readBits(8);if(f===254)return;this.parseTwoBytes(f,t.readBits(8),o);for(let g=0;g<3;g++){const x=o[g];switch(c){case 0:if(x<3)c=x+1;else if(x<this.TEXT_BASIC_SET_CHARS.length){const A=this.TEXT_BASIC_SET_CHARS[x];a?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):i.append(A)}else throw new $;break;case 1:a?(i.append(String.fromCharCode(x+128)),a=!1):i.append(String.fromCharCode(x)),c=0;break;case 2:if(x<this.TEXT_SHIFT2_SET_CHARS.length){const A=this.TEXT_SHIFT2_SET_CHARS[x];a?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):i.append(A)}else switch(x){case 27:i.append("");break;case 30:a=!0;break;default:throw new $}c=0;break;case 3:if(x<this.TEXT_SHIFT3_SET_CHARS.length){const A=this.TEXT_SHIFT3_SET_CHARS[x];a?(i.append(String.fromCharCode(A.charCodeAt(0)+128)),a=!1):i.append(A),c=0}else throw new $;break;default:throw new $}}}while(t.available()>0)}static decodeAnsiX12Segment(t,i){const a=[];do{if(t.available()===8)return;const o=t.readBits(8);if(o===254)return;this.parseTwoBytes(o,t.readBits(8),a);for(let c=0;c<3;c++){const f=a[c];switch(f){case 0:i.append("\r");break;case 1:i.append("*");break;case 2:i.append(">");break;case 3:i.append(" ");break;default:if(f<14)i.append(String.fromCharCode(f+44));else if(f<40)i.append(String.fromCharCode(f+51));else throw new $;break}}}while(t.available()>0)}static parseTwoBytes(t,i,a){let o=(t<<8)+i-1,c=Math.floor(o/1600);a[0]=c,o-=c*1600,c=Math.floor(o/40),a[1]=c,a[2]=o-c*40}static decodeEdifactSegment(t,i){do{if(t.available()<=16)return;for(let a=0;a<4;a++){let o=t.readBits(6);if(o===31){const c=8-t.getBitOffset();c!==8&&t.readBits(c);return}(o&32)===0&&(o|=64),i.append(String.fromCharCode(o))}}while(t.available()>0)}static decodeBase256Segment(t,i,a){let o=1+t.getByteOffset();const c=this.unrandomize255State(t.readBits(8),o++);let f;if(c===0?f=t.available()/8|0:c<250?f=c:f=250*(c-249)+this.unrandomize255State(t.readBits(8),o++),f<0)throw new $;const g=new Uint8Array(f);for(let x=0;x<f;x++){if(t.available()<8)throw new $;g[x]=this.unrandomize255State(t.readBits(8),o++)}a.push(g);try{i.append(Pt.decode(g,Te.ISO88591))}catch(x){throw new Gn("Platform does not support required encoding: "+x.message)}}static unrandomize255State(t,i){const a=149*i%255+1,o=t-a;return o>=0?o:o+256}}Li.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],Li.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Li.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],Li.TEXT_SHIFT2_SET_CHARS=Li.C40_SHIFT2_SET_CHARS,Li.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~",""];class Hu{constructor(){this.rsDecoder=new sr(ht.DATA_MATRIX_FIELD_256)}decode(t){const i=new kr(t),a=i.getVersion(),o=i.readCodewords(),c=Ur.getDataBlocks(o,a);let f=0;for(let A of c)f+=A.getNumDataCodewords();const g=new Uint8Array(f),x=c.length;for(let A=0;A<x;A++){const v=c[A],O=v.getCodewords(),I=v.getNumDataCodewords();this.correctErrors(O,I);for(let B=0;B<I;B++)g[B*x+A]=O[B]}return Li.decode(g)}correctErrors(t,i){const a=new Int32Array(t);try{this.rsDecoder.decode(a,t.length-i)}catch{throw new P}for(let o=0;o<i;o++)t[o]=a[o]}}class Ft{constructor(t){this.image=t,this.rectangleDetector=new Zt(this.image)}detect(){const t=this.rectangleDetector.detect();let i=this.detectSolid1(t);if(i=this.detectSolid2(i),i[3]=this.correctTopRight(i),!i[3])throw new ee;i=this.shiftToModuleCenter(i);const a=i[0],o=i[1],c=i[2],f=i[3];let g=this.transitionsBetween(a,f)+1,x=this.transitionsBetween(c,f)+1;(g&1)===1&&(g+=1),(x&1)===1&&(x+=1),4*g<7*x&&4*x<7*g&&(g=x=Math.max(g,x));let A=Ft.sampleGrid(this.image,a,o,c,f,g,x);return new Ja(A,[a,o,c,f])}static shiftPoint(t,i,a){let o=(i.getX()-t.getX())/(a+1),c=(i.getY()-t.getY())/(a+1);return new Se(t.getX()+o,t.getY()+c)}static moveAway(t,i,a){let o=t.getX(),c=t.getY();return o<i?o-=1:o+=1,c<a?c-=1:c+=1,new Se(o,c)}detectSolid1(t){let i=t[0],a=t[1],o=t[3],c=t[2],f=this.transitionsBetween(i,a),g=this.transitionsBetween(a,o),x=this.transitionsBetween(o,c),A=this.transitionsBetween(c,i),v=f,O=[c,i,a,o];return v>g&&(v=g,O[0]=i,O[1]=a,O[2]=o,O[3]=c),v>x&&(v=x,O[0]=a,O[1]=o,O[2]=c,O[3]=i),v>A&&(O[0]=o,O[1]=c,O[2]=i,O[3]=a),O}detectSolid2(t){let i=t[0],a=t[1],o=t[2],c=t[3],f=this.transitionsBetween(i,c),g=Ft.shiftPoint(a,o,(f+1)*4),x=Ft.shiftPoint(o,a,(f+1)*4),A=this.transitionsBetween(g,i),v=this.transitionsBetween(x,c);return A<v?(t[0]=i,t[1]=a,t[2]=o,t[3]=c):(t[0]=a,t[1]=o,t[2]=c,t[3]=i),t}correctTopRight(t){let i=t[0],a=t[1],o=t[2],c=t[3],f=this.transitionsBetween(i,c),g=this.transitionsBetween(a,c),x=Ft.shiftPoint(i,a,(g+1)*4),A=Ft.shiftPoint(o,a,(f+1)*4);f=this.transitionsBetween(x,c),g=this.transitionsBetween(A,c);let v=new Se(c.getX()+(o.getX()-a.getX())/(f+1),c.getY()+(o.getY()-a.getY())/(f+1)),O=new Se(c.getX()+(i.getX()-a.getX())/(g+1),c.getY()+(i.getY()-a.getY())/(g+1));if(!this.isValid(v))return this.isValid(O)?O:null;if(!this.isValid(O))return v;let I=this.transitionsBetween(x,v)+this.transitionsBetween(A,v),B=this.transitionsBetween(x,O)+this.transitionsBetween(A,O);return I>B?v:O}shiftToModuleCenter(t){let i=t[0],a=t[1],o=t[2],c=t[3],f=this.transitionsBetween(i,c)+1,g=this.transitionsBetween(o,c)+1,x=Ft.shiftPoint(i,a,g*4),A=Ft.shiftPoint(o,a,f*4);f=this.transitionsBetween(x,c)+1,g=this.transitionsBetween(A,c)+1,(f&1)===1&&(f+=1),(g&1)===1&&(g+=1);let v=(i.getX()+a.getX()+o.getX()+c.getX())/4,O=(i.getY()+a.getY()+o.getY()+c.getY())/4;i=Ft.moveAway(i,v,O),a=Ft.moveAway(a,v,O),o=Ft.moveAway(o,v,O),c=Ft.moveAway(c,v,O);let I,B;return x=Ft.shiftPoint(i,a,g*4),x=Ft.shiftPoint(x,c,f*4),I=Ft.shiftPoint(a,i,g*4),I=Ft.shiftPoint(I,o,f*4),A=Ft.shiftPoint(o,c,g*4),A=Ft.shiftPoint(A,a,f*4),B=Ft.shiftPoint(c,o,g*4),B=Ft.shiftPoint(B,i,f*4),[x,I,A,B]}isValid(t){return t.getX()>=0&&t.getX()<this.image.getWidth()&&t.getY()>0&&t.getY()<this.image.getHeight()}static sampleGrid(t,i,a,o,c,f,g){return ni.getInstance().sampleGrid(t,f,g,.5,.5,f-.5,.5,f-.5,g-.5,.5,g-.5,i.getX(),i.getY(),c.getX(),c.getY(),o.getX(),o.getY(),a.getX(),a.getY())}transitionsBetween(t,i){let a=Math.trunc(t.getX()),o=Math.trunc(t.getY()),c=Math.trunc(i.getX()),f=Math.trunc(i.getY()),g=Math.abs(f-o)>Math.abs(c-a);if(g){let U=a;a=o,o=U,U=c,c=f,f=U}let x=Math.abs(c-a),A=Math.abs(f-o),v=-x/2,O=o<f?1:-1,I=a<c?1:-1,B=0,k=this.image.get(g?o:a,g?a:o);for(let U=a,V=o;U!==c;U+=I){let Z=this.image.get(g?V:U,g?U:V);if(Z!==k&&(B++,k=Z),v+=A,v>0){if(V===f)break;V+=O,v-=x}}return B}}class ki{constructor(){this.decoder=new Hu}decode(t,i=null){let a,o;if(i!=null&&i.has(be.PURE_BARCODE)){const A=ki.extractPureBits(t.getBlackMatrix());a=this.decoder.decode(A),o=ki.NO_POINTS}else{const A=new Ft(t.getBlackMatrix()).detect();a=this.decoder.decode(A.getBits()),o=A.getPoints()}const c=a.getRawBytes(),f=new Ae(a.getText(),c,8*c.length,o,pe.DATA_MATRIX,K.currentTimeMillis()),g=a.getByteSegments();g!=null&&f.putMetadata(ct.BYTE_SEGMENTS,g);const x=a.getECLevel();return x!=null&&f.putMetadata(ct.ERROR_CORRECTION_LEVEL,x),f}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),a=t.getBottomRightOnBit();if(i==null||a==null)throw new ee;const o=this.moduleSize(i,t);let c=i[1];const f=a[1];let g=i[0];const A=(a[0]-g+1)/o,v=(f-c+1)/o;if(A<=0||v<=0)throw new ee;const O=o/2;c+=O,g+=O;const I=new Ot(A,v);for(let B=0;B<v;B++){const k=c+B*o;for(let U=0;U<A;U++)t.get(g+U*o,k)&&I.set(U,B)}return I}static moduleSize(t,i){const a=i.getWidth();let o=t[0];const c=t[1];for(;o<a&&i.get(o,c);)o++;if(o===a)throw new ee;const f=o-t[0];if(f===0)throw new ee;return f}}ki.NO_POINTS=[];class ns extends we{constructor(t=500){super(new ki,t)}}var jr;(function(T){T[T.L=0]="L",T[T.M=1]="M",T[T.Q=2]="Q",T[T.H=3]="H"})(jr||(jr={}));class Ze{constructor(t,i,a){this.value=t,this.stringValue=i,this.bits=a,Ze.FOR_BITS.set(a,this),Ze.FOR_VALUE.set(t,this)}getValue(){return this.value}getBits(){return this.bits}static fromString(t){switch(t){case"L":return Ze.L;case"M":return Ze.M;case"Q":return Ze.Q;case"H":return Ze.H;default:throw new N(t+"not available")}}toString(){return this.stringValue}equals(t){if(!(t instanceof Ze))return!1;const i=t;return this.value===i.value}static forBits(t){if(t<0||t>=Ze.FOR_BITS.size)throw new D;return Ze.FOR_BITS.get(t)}}Ze.FOR_BITS=new Map,Ze.FOR_VALUE=new Map,Ze.L=new Ze(jr.L,"L",1),Ze.M=new Ze(jr.M,"M",0),Ze.Q=new Ze(jr.Q,"Q",3),Ze.H=new Ze(jr.H,"H",2);class un{constructor(t){this.errorCorrectionLevel=Ze.forBits(t>>3&3),this.dataMask=t&7}static numBitsDiffering(t,i){return te.bitCount(t^i)}static decodeFormatInformation(t,i){const a=un.doDecodeFormatInformation(t,i);return a!==null?a:un.doDecodeFormatInformation(t^un.FORMAT_INFO_MASK_QR,i^un.FORMAT_INFO_MASK_QR)}static doDecodeFormatInformation(t,i){let a=Number.MAX_SAFE_INTEGER,o=0;for(const c of un.FORMAT_INFO_DECODE_LOOKUP){const f=c[0];if(f===t||f===i)return new un(c[1]);let g=un.numBitsDiffering(t,f);g<a&&(o=c[1],a=g),t!==i&&(g=un.numBitsDiffering(i,f),g<a&&(o=c[1],a=g))}return a<=3?new un(o):null}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getDataMask(){return this.dataMask}hashCode(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask}equals(t){if(!(t instanceof un))return!1;const i=t;return this.errorCorrectionLevel===i.errorCorrectionLevel&&this.dataMask===i.dataMask}}un.FORMAT_INFO_MASK_QR=21522,un.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])];class G{constructor(t,...i){this.ecCodewordsPerBlock=t,this.ecBlocks=i}getECCodewordsPerBlock(){return this.ecCodewordsPerBlock}getNumBlocks(){let t=0;const i=this.ecBlocks;for(const a of i)t+=a.getCount();return t}getTotalECCodewords(){return this.ecCodewordsPerBlock*this.getNumBlocks()}getECBlocks(){return this.ecBlocks}}class M{constructor(t,i){this.count=t,this.dataCodewords=i}getCount(){return this.count}getDataCodewords(){return this.dataCodewords}}class Ce{constructor(t,i,...a){this.versionNumber=t,this.alignmentPatternCenters=i,this.ecBlocks=a;let o=0;const c=a[0].getECCodewordsPerBlock(),f=a[0].getECBlocks();for(const g of f)o+=g.getCount()*(g.getDataCodewords()+c);this.totalCodewords=o}getVersionNumber(){return this.versionNumber}getAlignmentPatternCenters(){return this.alignmentPatternCenters}getTotalCodewords(){return this.totalCodewords}getDimensionForVersion(){return 17+4*this.versionNumber}getECBlocksForLevel(t){return this.ecBlocks[t.getValue()]}static getProvisionalVersionForDimension(t){if(t%4!==1)throw new $;try{return this.getVersionForNumber((t-17)/4)}catch{throw new $}}static getVersionForNumber(t){if(t<1||t>40)throw new D;return Ce.VERSIONS[t-1]}static decodeVersionInformation(t){let i=Number.MAX_SAFE_INTEGER,a=0;for(let o=0;o<Ce.VERSION_DECODE_INFO.length;o++){const c=Ce.VERSION_DECODE_INFO[o];if(c===t)return Ce.getVersionForNumber(o+7);const f=un.numBitsDiffering(t,c);f<i&&(a=o+7,i=f)}return i<=3?Ce.getVersionForNumber(a):null}buildFunctionPattern(){const t=this.getDimensionForVersion(),i=new Ot(t);i.setRegion(0,0,9,9),i.setRegion(t-8,0,8,9),i.setRegion(0,t-8,9,8);const a=this.alignmentPatternCenters.length;for(let o=0;o<a;o++){const c=this.alignmentPatternCenters[o]-2;for(let f=0;f<a;f++)o===0&&(f===0||f===a-1)||o===a-1&&f===0||i.setRegion(this.alignmentPatternCenters[f]-2,c,5,5)}return i.setRegion(6,9,1,t-17),i.setRegion(9,6,t-17,1),this.versionNumber>6&&(i.setRegion(t-11,0,3,6),i.setRegion(0,t-11,6,3)),i}toString(){return""+this.versionNumber}}Ce.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),Ce.VERSIONS=[new Ce(1,new Int32Array(0),new G(7,new M(1,19)),new G(10,new M(1,16)),new G(13,new M(1,13)),new G(17,new M(1,9))),new Ce(2,Int32Array.from([6,18]),new G(10,new M(1,34)),new G(16,new M(1,28)),new G(22,new M(1,22)),new G(28,new M(1,16))),new Ce(3,Int32Array.from([6,22]),new G(15,new M(1,55)),new G(26,new M(1,44)),new G(18,new M(2,17)),new G(22,new M(2,13))),new Ce(4,Int32Array.from([6,26]),new G(20,new M(1,80)),new G(18,new M(2,32)),new G(26,new M(2,24)),new G(16,new M(4,9))),new Ce(5,Int32Array.from([6,30]),new G(26,new M(1,108)),new G(24,new M(2,43)),new G(18,new M(2,15),new M(2,16)),new G(22,new M(2,11),new M(2,12))),new Ce(6,Int32Array.from([6,34]),new G(18,new M(2,68)),new G(16,new M(4,27)),new G(24,new M(4,19)),new G(28,new M(4,15))),new Ce(7,Int32Array.from([6,22,38]),new G(20,new M(2,78)),new G(18,new M(4,31)),new G(18,new M(2,14),new M(4,15)),new G(26,new M(4,13),new M(1,14))),new Ce(8,Int32Array.from([6,24,42]),new G(24,new M(2,97)),new G(22,new M(2,38),new M(2,39)),new G(22,new M(4,18),new M(2,19)),new G(26,new M(4,14),new M(2,15))),new Ce(9,Int32Array.from([6,26,46]),new G(30,new M(2,116)),new G(22,new M(3,36),new M(2,37)),new G(20,new M(4,16),new M(4,17)),new G(24,new M(4,12),new M(4,13))),new Ce(10,Int32Array.from([6,28,50]),new G(18,new M(2,68),new M(2,69)),new G(26,new M(4,43),new M(1,44)),new G(24,new M(6,19),new M(2,20)),new G(28,new M(6,15),new M(2,16))),new Ce(11,Int32Array.from([6,30,54]),new G(20,new M(4,81)),new G(30,new M(1,50),new M(4,51)),new G(28,new M(4,22),new M(4,23)),new G(24,new M(3,12),new M(8,13))),new Ce(12,Int32Array.from([6,32,58]),new G(24,new M(2,92),new M(2,93)),new G(22,new M(6,36),new M(2,37)),new G(26,new M(4,20),new M(6,21)),new G(28,new M(7,14),new M(4,15))),new Ce(13,Int32Array.from([6,34,62]),new G(26,new M(4,107)),new G(22,new M(8,37),new M(1,38)),new G(24,new M(8,20),new M(4,21)),new G(22,new M(12,11),new M(4,12))),new Ce(14,Int32Array.from([6,26,46,66]),new G(30,new M(3,115),new M(1,116)),new G(24,new M(4,40),new M(5,41)),new G(20,new M(11,16),new M(5,17)),new G(24,new M(11,12),new M(5,13))),new Ce(15,Int32Array.from([6,26,48,70]),new G(22,new M(5,87),new M(1,88)),new G(24,new M(5,41),new M(5,42)),new G(30,new M(5,24),new M(7,25)),new G(24,new M(11,12),new M(7,13))),new Ce(16,Int32Array.from([6,26,50,74]),new G(24,new M(5,98),new M(1,99)),new G(28,new M(7,45),new M(3,46)),new G(24,new M(15,19),new M(2,20)),new G(30,new M(3,15),new M(13,16))),new Ce(17,Int32Array.from([6,30,54,78]),new G(28,new M(1,107),new M(5,108)),new G(28,new M(10,46),new M(1,47)),new G(28,new M(1,22),new M(15,23)),new G(28,new M(2,14),new M(17,15))),new Ce(18,Int32Array.from([6,30,56,82]),new G(30,new M(5,120),new M(1,121)),new G(26,new M(9,43),new M(4,44)),new G(28,new M(17,22),new M(1,23)),new G(28,new M(2,14),new M(19,15))),new Ce(19,Int32Array.from([6,30,58,86]),new G(28,new M(3,113),new M(4,114)),new G(26,new M(3,44),new M(11,45)),new G(26,new M(17,21),new M(4,22)),new G(26,new M(9,13),new M(16,14))),new Ce(20,Int32Array.from([6,34,62,90]),new G(28,new M(3,107),new M(5,108)),new G(26,new M(3,41),new M(13,42)),new G(30,new M(15,24),new M(5,25)),new G(28,new M(15,15),new M(10,16))),new Ce(21,Int32Array.from([6,28,50,72,94]),new G(28,new M(4,116),new M(4,117)),new G(26,new M(17,42)),new G(28,new M(17,22),new M(6,23)),new G(30,new M(19,16),new M(6,17))),new Ce(22,Int32Array.from([6,26,50,74,98]),new G(28,new M(2,111),new M(7,112)),new G(28,new M(17,46)),new G(30,new M(7,24),new M(16,25)),new G(24,new M(34,13))),new Ce(23,Int32Array.from([6,30,54,78,102]),new G(30,new M(4,121),new M(5,122)),new G(28,new M(4,47),new M(14,48)),new G(30,new M(11,24),new M(14,25)),new G(30,new M(16,15),new M(14,16))),new Ce(24,Int32Array.from([6,28,54,80,106]),new G(30,new M(6,117),new M(4,118)),new G(28,new M(6,45),new M(14,46)),new G(30,new M(11,24),new M(16,25)),new G(30,new M(30,16),new M(2,17))),new Ce(25,Int32Array.from([6,32,58,84,110]),new G(26,new M(8,106),new M(4,107)),new G(28,new M(8,47),new M(13,48)),new G(30,new M(7,24),new M(22,25)),new G(30,new M(22,15),new M(13,16))),new Ce(26,Int32Array.from([6,30,58,86,114]),new G(28,new M(10,114),new M(2,115)),new G(28,new M(19,46),new M(4,47)),new G(28,new M(28,22),new M(6,23)),new G(30,new M(33,16),new M(4,17))),new Ce(27,Int32Array.from([6,34,62,90,118]),new G(30,new M(8,122),new M(4,123)),new G(28,new M(22,45),new M(3,46)),new G(30,new M(8,23),new M(26,24)),new G(30,new M(12,15),new M(28,16))),new Ce(28,Int32Array.from([6,26,50,74,98,122]),new G(30,new M(3,117),new M(10,118)),new G(28,new M(3,45),new M(23,46)),new G(30,new M(4,24),new M(31,25)),new G(30,new M(11,15),new M(31,16))),new Ce(29,Int32Array.from([6,30,54,78,102,126]),new G(30,new M(7,116),new M(7,117)),new G(28,new M(21,45),new M(7,46)),new G(30,new M(1,23),new M(37,24)),new G(30,new M(19,15),new M(26,16))),new Ce(30,Int32Array.from([6,26,52,78,104,130]),new G(30,new M(5,115),new M(10,116)),new G(28,new M(19,47),new M(10,48)),new G(30,new M(15,24),new M(25,25)),new G(30,new M(23,15),new M(25,16))),new Ce(31,Int32Array.from([6,30,56,82,108,134]),new G(30,new M(13,115),new M(3,116)),new G(28,new M(2,46),new M(29,47)),new G(30,new M(42,24),new M(1,25)),new G(30,new M(23,15),new M(28,16))),new Ce(32,Int32Array.from([6,34,60,86,112,138]),new G(30,new M(17,115)),new G(28,new M(10,46),new M(23,47)),new G(30,new M(10,24),new M(35,25)),new G(30,new M(19,15),new M(35,16))),new Ce(33,Int32Array.from([6,30,58,86,114,142]),new G(30,new M(17,115),new M(1,116)),new G(28,new M(14,46),new M(21,47)),new G(30,new M(29,24),new M(19,25)),new G(30,new M(11,15),new M(46,16))),new Ce(34,Int32Array.from([6,34,62,90,118,146]),new G(30,new M(13,115),new M(6,116)),new G(28,new M(14,46),new M(23,47)),new G(30,new M(44,24),new M(7,25)),new G(30,new M(59,16),new M(1,17))),new Ce(35,Int32Array.from([6,30,54,78,102,126,150]),new G(30,new M(12,121),new M(7,122)),new G(28,new M(12,47),new M(26,48)),new G(30,new M(39,24),new M(14,25)),new G(30,new M(22,15),new M(41,16))),new Ce(36,Int32Array.from([6,24,50,76,102,128,154]),new G(30,new M(6,121),new M(14,122)),new G(28,new M(6,47),new M(34,48)),new G(30,new M(46,24),new M(10,25)),new G(30,new M(2,15),new M(64,16))),new Ce(37,Int32Array.from([6,28,54,80,106,132,158]),new G(30,new M(17,122),new M(4,123)),new G(28,new M(29,46),new M(14,47)),new G(30,new M(49,24),new M(10,25)),new G(30,new M(24,15),new M(46,16))),new Ce(38,Int32Array.from([6,32,58,84,110,136,162]),new G(30,new M(4,122),new M(18,123)),new G(28,new M(13,46),new M(32,47)),new G(30,new M(48,24),new M(14,25)),new G(30,new M(42,15),new M(32,16))),new Ce(39,Int32Array.from([6,26,54,82,110,138,166]),new G(30,new M(20,117),new M(4,118)),new G(28,new M(40,47),new M(7,48)),new G(30,new M(43,24),new M(22,25)),new G(30,new M(10,15),new M(67,16))),new Ce(40,Int32Array.from([6,30,58,86,114,142,170]),new G(30,new M(19,118),new M(6,119)),new G(28,new M(18,47),new M(31,48)),new G(30,new M(34,24),new M(34,25)),new G(30,new M(20,15),new M(61,16)))];var an;(function(T){T[T.DATA_MASK_000=0]="DATA_MASK_000",T[T.DATA_MASK_001=1]="DATA_MASK_001",T[T.DATA_MASK_010=2]="DATA_MASK_010",T[T.DATA_MASK_011=3]="DATA_MASK_011",T[T.DATA_MASK_100=4]="DATA_MASK_100",T[T.DATA_MASK_101=5]="DATA_MASK_101",T[T.DATA_MASK_110=6]="DATA_MASK_110",T[T.DATA_MASK_111=7]="DATA_MASK_111"})(an||(an={}));class zn{constructor(t,i){this.value=t,this.isMasked=i}unmaskBitMatrix(t,i){for(let a=0;a<i;a++)for(let o=0;o<i;o++)this.isMasked(a,o)&&t.flip(o,a)}}zn.values=new Map([[an.DATA_MASK_000,new zn(an.DATA_MASK_000,(T,t)=>(T+t&1)===0)],[an.DATA_MASK_001,new zn(an.DATA_MASK_001,(T,t)=>(T&1)===0)],[an.DATA_MASK_010,new zn(an.DATA_MASK_010,(T,t)=>t%3===0)],[an.DATA_MASK_011,new zn(an.DATA_MASK_011,(T,t)=>(T+t)%3===0)],[an.DATA_MASK_100,new zn(an.DATA_MASK_100,(T,t)=>(Math.floor(T/2)+Math.floor(t/3)&1)===0)],[an.DATA_MASK_101,new zn(an.DATA_MASK_101,(T,t)=>T*t%6===0)],[an.DATA_MASK_110,new zn(an.DATA_MASK_110,(T,t)=>T*t%6<3)],[an.DATA_MASK_111,new zn(an.DATA_MASK_111,(T,t)=>(T+t+T*t%3&1)===0)]]);class zr{constructor(t){const i=t.getHeight();if(i<21||(i&3)!==1)throw new $;this.bitMatrix=t}readFormatInformation(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;let t=0;for(let c=0;c<6;c++)t=this.copyBit(c,8,t);t=this.copyBit(7,8,t),t=this.copyBit(8,8,t),t=this.copyBit(8,7,t);for(let c=5;c>=0;c--)t=this.copyBit(8,c,t);const i=this.bitMatrix.getHeight();let a=0;const o=i-7;for(let c=i-1;c>=o;c--)a=this.copyBit(8,c,a);for(let c=i-8;c<i;c++)a=this.copyBit(c,8,a);if(this.parsedFormatInfo=un.decodeFormatInformation(t,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new $}readVersion(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;const t=this.bitMatrix.getHeight(),i=Math.floor((t-17)/4);if(i<=6)return Ce.getVersionForNumber(i);let a=0;const o=t-11;for(let f=5;f>=0;f--)for(let g=t-9;g>=o;g--)a=this.copyBit(g,f,a);let c=Ce.decodeVersionInformation(a);if(c!==null&&c.getDimensionForVersion()===t)return this.parsedVersion=c,c;a=0;for(let f=5;f>=0;f--)for(let g=t-9;g>=o;g--)a=this.copyBit(f,g,a);if(c=Ce.decodeVersionInformation(a),c!==null&&c.getDimensionForVersion()===t)return this.parsedVersion=c,c;throw new $}copyBit(t,i,a){return(this.isMirror?this.bitMatrix.get(i,t):this.bitMatrix.get(t,i))?a<<1|1:a<<1}readCodewords(){const t=this.readFormatInformation(),i=this.readVersion(),a=zn.values.get(t.getDataMask()),o=this.bitMatrix.getHeight();a.unmaskBitMatrix(this.bitMatrix,o);const c=i.buildFunctionPattern();let f=!0;const g=new Uint8Array(i.getTotalCodewords());let x=0,A=0,v=0;for(let O=o-1;O>0;O-=2){O===6&&O--;for(let I=0;I<o;I++){const B=f?o-1-I:I;for(let k=0;k<2;k++)c.get(O-k,B)||(v++,A<<=1,this.bitMatrix.get(O-k,B)&&(A|=1),v===8&&(g[x++]=A,v=0,A=0))}f=!f}if(x!==i.getTotalCodewords())throw new $;return g}remask(){if(this.parsedFormatInfo===null)return;const t=zn.values[this.parsedFormatInfo.getDataMask()],i=this.bitMatrix.getHeight();t.unmaskBitMatrix(this.bitMatrix,i)}setMirror(t){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=t}mirror(){const t=this.bitMatrix;for(let i=0,a=t.getWidth();i<a;i++)for(let o=i+1,c=t.getHeight();o<c;o++)t.get(i,o)!==t.get(o,i)&&(t.flip(o,i),t.flip(i,o))}}class tl{constructor(t,i){this.numDataCodewords=t,this.codewords=i}static getDataBlocks(t,i,a){if(t.length!==i.getTotalCodewords())throw new D;const o=i.getECBlocksForLevel(a);let c=0;const f=o.getECBlocks();for(const k of f)c+=k.getCount();const g=new Array(c);let x=0;for(const k of f)for(let U=0;U<k.getCount();U++){const V=k.getDataCodewords(),Z=o.getECCodewordsPerBlock()+V;g[x++]=new tl(V,new Uint8Array(Z))}const A=g[0].codewords.length;let v=g.length-1;for(;v>=0&&g[v].codewords.length!==A;)v--;v++;const O=A-o.getECCodewordsPerBlock();let I=0;for(let k=0;k<O;k++)for(let U=0;U<x;U++)g[U].codewords[k]=t[I++];for(let k=v;k<x;k++)g[k].codewords[O]=t[I++];const B=g[0].codewords.length;for(let k=O;k<B;k++)for(let U=0;U<x;U++){const V=U<v?k:k+1;g[U].codewords[V]=t[I++]}return g}getNumDataCodewords(){return this.numDataCodewords}getCodewords(){return this.codewords}}var Pn;(function(T){T[T.TERMINATOR=0]="TERMINATOR",T[T.NUMERIC=1]="NUMERIC",T[T.ALPHANUMERIC=2]="ALPHANUMERIC",T[T.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",T[T.BYTE=4]="BYTE",T[T.ECI=5]="ECI",T[T.KANJI=6]="KANJI",T[T.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",T[T.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",T[T.HANZI=9]="HANZI"})(Pn||(Pn={}));class Ne{constructor(t,i,a,o){this.value=t,this.stringValue=i,this.characterCountBitsForVersions=a,this.bits=o,Ne.FOR_BITS.set(o,this),Ne.FOR_VALUE.set(t,this)}static forBits(t){const i=Ne.FOR_BITS.get(t);if(i===void 0)throw new D;return i}getCharacterCountBits(t){const i=t.getVersionNumber();let a;return i<=9?a=0:i<=26?a=1:a=2,this.characterCountBitsForVersions[a]}getValue(){return this.value}getBits(){return this.bits}equals(t){if(!(t instanceof Ne))return!1;const i=t;return this.value===i.value}toString(){return this.stringValue}}Ne.FOR_BITS=new Map,Ne.FOR_VALUE=new Map,Ne.TERMINATOR=new Ne(Pn.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),Ne.NUMERIC=new Ne(Pn.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),Ne.ALPHANUMERIC=new Ne(Pn.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),Ne.STRUCTURED_APPEND=new Ne(Pn.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),Ne.BYTE=new Ne(Pn.BYTE,"BYTE",Int32Array.from([8,16,16]),4),Ne.ECI=new Ne(Pn.ECI,"ECI",Int32Array.from([0,0,0]),7),Ne.KANJI=new Ne(Pn.KANJI,"KANJI",Int32Array.from([8,10,12]),8),Ne.FNC1_FIRST_POSITION=new Ne(Pn.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),Ne.FNC1_SECOND_POSITION=new Ne(Pn.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),Ne.HANZI=new Ne(Pn.HANZI,"HANZI",Int32Array.from([8,10,12]),13);class Bt{static decode(t,i,a,o){const c=new ai(t);let f=new nt;const g=new Array;let x=-1,A=-1;try{let v=null,O=!1,I;do{if(c.available()<4)I=Ne.TERMINATOR;else{const B=c.readBits(4);I=Ne.forBits(B)}switch(I){case Ne.TERMINATOR:break;case Ne.FNC1_FIRST_POSITION:case Ne.FNC1_SECOND_POSITION:O=!0;break;case Ne.STRUCTURED_APPEND:if(c.available()<16)throw new $;x=c.readBits(8),A=c.readBits(8);break;case Ne.ECI:const B=Bt.parseECIValue(c);if(v=ce.getCharacterSetECIByValue(B),v===null)throw new $;break;case Ne.HANZI:const k=c.readBits(4),U=c.readBits(I.getCharacterCountBits(i));k===Bt.GB2312_SUBSET&&Bt.decodeHanziSegment(c,f,U);break;default:const V=c.readBits(I.getCharacterCountBits(i));switch(I){case Ne.NUMERIC:Bt.decodeNumericSegment(c,f,V);break;case Ne.ALPHANUMERIC:Bt.decodeAlphanumericSegment(c,f,V,O);break;case Ne.BYTE:Bt.decodeByteSegment(c,f,V,v,g,o);break;case Ne.KANJI:Bt.decodeKanjiSegment(c,f,V);break;default:throw new $}break}}while(I!==Ne.TERMINATOR)}catch{throw new $}return new Mt(t,f.toString(),g.length===0?null:g,a===null?null:a.toString(),x,A)}static decodeHanziSegment(t,i,a){if(a*13>t.available())throw new $;const o=new Uint8Array(2*a);let c=0;for(;a>0;){const f=t.readBits(13);let g=f/96<<8&4294967295|f%96;g<959?g+=41377:g+=42657,o[c]=g>>8&255,o[c+1]=g&255,c+=2,a--}try{i.append(Pt.decode(o,Te.GB2312))}catch(f){throw new $(f)}}static decodeKanjiSegment(t,i,a){if(a*13>t.available())throw new $;const o=new Uint8Array(2*a);let c=0;for(;a>0;){const f=t.readBits(13);let g=f/192<<8&4294967295|f%192;g<7936?g+=33088:g+=49472,o[c]=g>>8,o[c+1]=g,c+=2,a--}try{i.append(Pt.decode(o,Te.SHIFT_JIS))}catch(f){throw new $(f)}}static decodeByteSegment(t,i,a,o,c,f){if(8*a>t.available())throw new $;const g=new Uint8Array(a);for(let A=0;A<a;A++)g[A]=t.readBits(8);let x;o===null?x=Te.guessEncoding(g,f):x=o.getName();try{i.append(Pt.decode(g,x))}catch(A){throw new $(A)}c.push(g)}static toAlphaNumericChar(t){if(t>=Bt.ALPHANUMERIC_CHARS.length)throw new $;return Bt.ALPHANUMERIC_CHARS[t]}static decodeAlphanumericSegment(t,i,a,o){const c=i.length();for(;a>1;){if(t.available()<11)throw new $;const f=t.readBits(11);i.append(Bt.toAlphaNumericChar(Math.floor(f/45))),i.append(Bt.toAlphaNumericChar(f%45)),a-=2}if(a===1){if(t.available()<6)throw new $;i.append(Bt.toAlphaNumericChar(t.readBits(6)))}if(o)for(let f=c;f<i.length();f++)i.charAt(f)==="%"&&(f<i.length()-1&&i.charAt(f+1)==="%"?i.deleteCharAt(f+1):i.setCharAt(f,""))}static decodeNumericSegment(t,i,a){for(;a>=3;){if(t.available()<10)throw new $;const o=t.readBits(10);if(o>=1e3)throw new $;i.append(Bt.toAlphaNumericChar(Math.floor(o/100))),i.append(Bt.toAlphaNumericChar(Math.floor(o/10)%10)),i.append(Bt.toAlphaNumericChar(o%10)),a-=3}if(a===2){if(t.available()<7)throw new $;const o=t.readBits(7);if(o>=100)throw new $;i.append(Bt.toAlphaNumericChar(Math.floor(o/10))),i.append(Bt.toAlphaNumericChar(o%10))}else if(a===1){if(t.available()<4)throw new $;const o=t.readBits(4);if(o>=10)throw new $;i.append(Bt.toAlphaNumericChar(o))}}static parseECIValue(t){const i=t.readBits(8);if((i&128)===0)return i&127;if((i&192)===128){const a=t.readBits(8);return(i&63)<<8&4294967295|a}if((i&224)===192){const a=t.readBits(16);return(i&31)<<16&4294967295|a}throw new $}}Bt.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",Bt.GB2312_SUBSET=1;class oo{constructor(t){this.mirrored=t}isMirrored(){return this.mirrored}applyMirroredCorrection(t){if(!this.mirrored||t===null||t.length<3)return;const i=t[0];t[0]=t[2],t[2]=i}}class Vu{constructor(){this.rsDecoder=new sr(ht.QR_CODE_FIELD_256)}decodeBooleanArray(t,i){return this.decodeBitMatrix(Ot.parseFromBooleanArray(t),i)}decodeBitMatrix(t,i){const a=new zr(t);let o=null;try{return this.decodeBitMatrixParser(a,i)}catch(c){o=c}try{a.remask(),a.setMirror(!0),a.readVersion(),a.readFormatInformation(),a.mirror();const c=this.decodeBitMatrixParser(a,i);return c.setOther(new oo(!0)),c}catch(c){throw o!==null?o:c}}decodeBitMatrixParser(t,i){const a=t.readVersion(),o=t.readFormatInformation().getErrorCorrectionLevel(),c=t.readCodewords(),f=tl.getDataBlocks(c,a,o);let g=0;for(const v of f)g+=v.getNumDataCodewords();const x=new Uint8Array(g);let A=0;for(const v of f){const O=v.getCodewords(),I=v.getNumDataCodewords();this.correctErrors(O,I);for(let B=0;B<I;B++)x[A++]=O[B]}return Bt.decode(x,a,o,i)}correctErrors(t,i){const a=new Int32Array(t);try{this.rsDecoder.decode(a,t.length-i)}catch{throw new P}for(let o=0;o<i;o++)t[o]=a[o]}}class Pr extends Se{constructor(t,i,a){super(t,i),this.estimatedModuleSize=a}aboutEquals(t,i,a){if(Math.abs(i-this.getY())<=t&&Math.abs(a-this.getX())<=t){const o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(t,i,a){const o=(this.getX()+i)/2,c=(this.getY()+t)/2,f=(this.estimatedModuleSize+a)/2;return new Pr(o,c,f)}}class Xn{constructor(t,i,a,o,c,f,g){this.image=t,this.startX=i,this.startY=a,this.width=o,this.height=c,this.moduleSize=f,this.resultPointCallback=g,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}find(){const t=this.startX,i=this.height,a=this.width,o=t+a,c=this.startY+i/2,f=new Int32Array(3),g=this.image;for(let x=0;x<i;x++){const A=c+((x&1)===0?Math.floor((x+1)/2):-Math.floor((x+1)/2));f[0]=0,f[1]=0,f[2]=0;let v=t;for(;v<o&&!g.get(v,A);)v++;let O=0;for(;v<o;){if(g.get(v,A))if(O===1)f[1]++;else if(O===2){if(this.foundPatternCross(f)){const I=this.handlePossibleCenter(f,A,v);if(I!==null)return I}f[0]=f[2],f[1]=1,f[2]=0,O=1}else f[++O]++;else O===1&&O++,f[O]++;v++}if(this.foundPatternCross(f)){const I=this.handlePossibleCenter(f,A,o);if(I!==null)return I}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new ee}static centerFromEnd(t,i){return i-t[2]-t[1]/2}foundPatternCross(t){const i=this.moduleSize,a=i/2;for(let o=0;o<3;o++)if(Math.abs(i-t[o])>=a)return!1;return!0}crossCheckVertical(t,i,a,o){const c=this.image,f=c.getHeight(),g=this.crossCheckStateCount;g[0]=0,g[1]=0,g[2]=0;let x=t;for(;x>=0&&c.get(i,x)&&g[1]<=a;)g[1]++,x--;if(x<0||g[1]>a)return NaN;for(;x>=0&&!c.get(i,x)&&g[0]<=a;)g[0]++,x--;if(g[0]>a)return NaN;for(x=t+1;x<f&&c.get(i,x)&&g[1]<=a;)g[1]++,x++;if(x===f||g[1]>a)return NaN;for(;x<f&&!c.get(i,x)&&g[2]<=a;)g[2]++,x++;if(g[2]>a)return NaN;const A=g[0]+g[1]+g[2];return 5*Math.abs(A-o)>=2*o?NaN:this.foundPatternCross(g)?Xn.centerFromEnd(g,x):NaN}handlePossibleCenter(t,i,a){const o=t[0]+t[1]+t[2],c=Xn.centerFromEnd(t,a),f=this.crossCheckVertical(i,c,2*t[1],o);if(!isNaN(f)){const g=(t[0]+t[1]+t[2])/3;for(const A of this.possibleCenters)if(A.aboutEquals(g,f,c))return A.combineEstimate(f,c,g);const x=new Pr(c,f,g);this.possibleCenters.push(x),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(x)}return null}}class _a extends Se{constructor(t,i,a,o){super(t,i),this.estimatedModuleSize=a,this.count=o,o===void 0&&(this.count=1)}getEstimatedModuleSize(){return this.estimatedModuleSize}getCount(){return this.count}aboutEquals(t,i,a){if(Math.abs(i-this.getY())<=t&&Math.abs(a-this.getX())<=t){const o=Math.abs(t-this.estimatedModuleSize);return o<=1||o<=this.estimatedModuleSize}return!1}combineEstimate(t,i,a){const o=this.count+1,c=(this.count*this.getX()+i)/o,f=(this.count*this.getY()+t)/o,g=(this.count*this.estimatedModuleSize+a)/o;return new _a(c,f,g,o)}}class nl{constructor(t){this.bottomLeft=t[0],this.topLeft=t[1],this.topRight=t[2]}getBottomLeft(){return this.bottomLeft}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}}class Ht{constructor(t,i){this.image=t,this.resultPointCallback=i,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=i}getImage(){return this.image}getPossibleCenters(){return this.possibleCenters}find(t){const i=t!=null&&t.get(be.TRY_HARDER)!==void 0,a=t!=null&&t.get(be.PURE_BARCODE)!==void 0,o=this.image,c=o.getHeight(),f=o.getWidth();let g=Math.floor(3*c/(4*Ht.MAX_MODULES));(g<Ht.MIN_SKIP||i)&&(g=Ht.MIN_SKIP);let x=!1;const A=new Int32Array(5);for(let O=g-1;O<c&&!x;O+=g){A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0;let I=0;for(let B=0;B<f;B++)if(o.get(B,O))(I&1)===1&&I++,A[I]++;else if((I&1)===0)if(I===4)if(Ht.foundPatternCross(A)){if(this.handlePossibleCenter(A,O,B,a)===!0)if(g=2,this.hasSkipped===!0)x=this.haveMultiplyConfirmedCenters();else{const U=this.findRowSkip();U>A[2]&&(O+=U-A[2]-g,B=f-1)}else{A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,I=3;continue}I=0,A[0]=0,A[1]=0,A[2]=0,A[3]=0,A[4]=0}else A[0]=A[2],A[1]=A[3],A[2]=A[4],A[3]=1,A[4]=0,I=3;else A[++I]++;else A[I]++;Ht.foundPatternCross(A)&&this.handlePossibleCenter(A,O,f,a)===!0&&(g=A[0],this.hasSkipped&&(x=this.haveMultiplyConfirmedCenters()))}const v=this.selectBestPatterns();return Se.orderBestPatterns(v),new nl(v)}static centerFromEnd(t,i){return i-t[4]-t[3]-t[2]/2}static foundPatternCross(t){let i=0;for(let c=0;c<5;c++){const f=t[c];if(f===0)return!1;i+=f}if(i<7)return!1;const a=i/7,o=a/2;return Math.abs(a-t[0])<o&&Math.abs(a-t[1])<o&&Math.abs(3*a-t[2])<3*o&&Math.abs(a-t[3])<o&&Math.abs(a-t[4])<o}getCrossCheckStateCount(){const t=this.crossCheckStateCount;return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t}crossCheckDiagonal(t,i,a,o){const c=this.getCrossCheckStateCount();let f=0;const g=this.image;for(;t>=f&&i>=f&&g.get(i-f,t-f);)c[2]++,f++;if(t<f||i<f)return!1;for(;t>=f&&i>=f&&!g.get(i-f,t-f)&&c[1]<=a;)c[1]++,f++;if(t<f||i<f||c[1]>a)return!1;for(;t>=f&&i>=f&&g.get(i-f,t-f)&&c[0]<=a;)c[0]++,f++;if(c[0]>a)return!1;const x=g.getHeight(),A=g.getWidth();for(f=1;t+f<x&&i+f<A&&g.get(i+f,t+f);)c[2]++,f++;if(t+f>=x||i+f>=A)return!1;for(;t+f<x&&i+f<A&&!g.get(i+f,t+f)&&c[3]<a;)c[3]++,f++;if(t+f>=x||i+f>=A||c[3]>=a)return!1;for(;t+f<x&&i+f<A&&g.get(i+f,t+f)&&c[4]<a;)c[4]++,f++;if(c[4]>=a)return!1;const v=c[0]+c[1]+c[2]+c[3]+c[4];return Math.abs(v-o)<2*o&&Ht.foundPatternCross(c)}crossCheckVertical(t,i,a,o){const c=this.image,f=c.getHeight(),g=this.getCrossCheckStateCount();let x=t;for(;x>=0&&c.get(i,x);)g[2]++,x--;if(x<0)return NaN;for(;x>=0&&!c.get(i,x)&&g[1]<=a;)g[1]++,x--;if(x<0||g[1]>a)return NaN;for(;x>=0&&c.get(i,x)&&g[0]<=a;)g[0]++,x--;if(g[0]>a)return NaN;for(x=t+1;x<f&&c.get(i,x);)g[2]++,x++;if(x===f)return NaN;for(;x<f&&!c.get(i,x)&&g[3]<a;)g[3]++,x++;if(x===f||g[3]>=a)return NaN;for(;x<f&&c.get(i,x)&&g[4]<a;)g[4]++,x++;if(g[4]>=a)return NaN;const A=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(A-o)>=2*o?NaN:Ht.foundPatternCross(g)?Ht.centerFromEnd(g,x):NaN}crossCheckHorizontal(t,i,a,o){const c=this.image,f=c.getWidth(),g=this.getCrossCheckStateCount();let x=t;for(;x>=0&&c.get(x,i);)g[2]++,x--;if(x<0)return NaN;for(;x>=0&&!c.get(x,i)&&g[1]<=a;)g[1]++,x--;if(x<0||g[1]>a)return NaN;for(;x>=0&&c.get(x,i)&&g[0]<=a;)g[0]++,x--;if(g[0]>a)return NaN;for(x=t+1;x<f&&c.get(x,i);)g[2]++,x++;if(x===f)return NaN;for(;x<f&&!c.get(x,i)&&g[3]<a;)g[3]++,x++;if(x===f||g[3]>=a)return NaN;for(;x<f&&c.get(x,i)&&g[4]<a;)g[4]++,x++;if(g[4]>=a)return NaN;const A=g[0]+g[1]+g[2]+g[3]+g[4];return 5*Math.abs(A-o)>=o?NaN:Ht.foundPatternCross(g)?Ht.centerFromEnd(g,x):NaN}handlePossibleCenter(t,i,a,o){const c=t[0]+t[1]+t[2]+t[3]+t[4];let f=Ht.centerFromEnd(t,a),g=this.crossCheckVertical(i,Math.floor(f),t[2],c);if(!isNaN(g)&&(f=this.crossCheckHorizontal(Math.floor(f),Math.floor(g),t[2],c),!isNaN(f)&&(!o||this.crossCheckDiagonal(Math.floor(g),Math.floor(f),t[2],c)))){const x=c/7;let A=!1;const v=this.possibleCenters;for(let O=0,I=v.length;O<I;O++){const B=v[O];if(B.aboutEquals(x,g,f)){v[O]=B.combineEstimate(g,f,x),A=!0;break}}if(!A){const O=new _a(f,g,x);v.push(O),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(O)}return!0}return!1}findRowSkip(){if(this.possibleCenters.length<=1)return 0;let i=null;for(const a of this.possibleCenters)if(a.getCount()>=Ht.CENTER_QUORUM)if(i==null)i=a;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-a.getX())-Math.abs(i.getY()-a.getY()))/2);return 0}haveMultiplyConfirmedCenters(){let t=0,i=0;const a=this.possibleCenters.length;for(const f of this.possibleCenters)f.getCount()>=Ht.CENTER_QUORUM&&(t++,i+=f.getEstimatedModuleSize());if(t<3)return!1;const o=i/a;let c=0;for(const f of this.possibleCenters)c+=Math.abs(f.getEstimatedModuleSize()-o);return c<=.05*i}selectBestPatterns(){const t=this.possibleCenters.length;if(t<3)throw new ee;const i=this.possibleCenters;let a;if(t>3){let o=0,c=0;for(const x of this.possibleCenters){const A=x.getEstimatedModuleSize();o+=A,c+=A*A}a=o/t;let f=Math.sqrt(c/t-a*a);i.sort((x,A)=>{const v=Math.abs(A.getEstimatedModuleSize()-a),O=Math.abs(x.getEstimatedModuleSize()-a);return v<O?-1:v>O?1:0});const g=Math.max(.2*a,f);for(let x=0;x<i.length&&i.length>3;x++){const A=i[x];Math.abs(A.getEstimatedModuleSize()-a)>g&&(i.splice(x,1),x--)}}if(i.length>3){let o=0;for(const c of i)o+=c.getEstimatedModuleSize();a=o/i.length,i.sort((c,f)=>{if(f.getCount()===c.getCount()){const g=Math.abs(f.getEstimatedModuleSize()-a),x=Math.abs(c.getEstimatedModuleSize()-a);return g<x?1:g>x?-1:0}else return f.getCount()-c.getCount()}),i.splice(3)}return[i[0],i[1],i[2]]}}Ht.CENTER_QUORUM=2,Ht.MIN_SKIP=3,Ht.MAX_MODULES=57;class vi{constructor(t){this.image=t}getImage(){return this.image}getResultPointCallback(){return this.resultPointCallback}detect(t){this.resultPointCallback=t==null?null:t.get(be.NEED_RESULT_POINT_CALLBACK);const a=new Ht(this.image,this.resultPointCallback).find(t);return this.processFinderPatternInfo(a)}processFinderPatternInfo(t){const i=t.getTopLeft(),a=t.getTopRight(),o=t.getBottomLeft(),c=this.calculateModuleSize(i,a,o);if(c<1)throw new ee("No pattern found in proccess finder.");const f=vi.computeDimension(i,a,o,c),g=Ce.getProvisionalVersionForDimension(f),x=g.getDimensionForVersion()-7;let A=null;if(g.getAlignmentPatternCenters().length>0){const B=a.getX()-i.getX()+o.getX(),k=a.getY()-i.getY()+o.getY(),U=1-3/x,V=Math.floor(i.getX()+U*(B-i.getX())),Z=Math.floor(i.getY()+U*(k-i.getY()));for(let ge=4;ge<=16;ge<<=1)try{A=this.findAlignmentInRegion(c,V,Z,ge);break}catch(de){if(!(de instanceof ee))throw de}}const v=vi.createTransform(i,a,o,A,f),O=vi.sampleGrid(this.image,v,f);let I;return A===null?I=[o,i,a]:I=[o,i,a,A],new Ja(O,I)}static createTransform(t,i,a,o,c){const f=c-3.5;let g,x,A,v;return o!==null?(g=o.getX(),x=o.getY(),A=f-3,v=A):(g=i.getX()-t.getX()+a.getX(),x=i.getY()-t.getY()+a.getY(),A=f,v=f),Yn.quadrilateralToQuadrilateral(3.5,3.5,f,3.5,A,v,3.5,f,t.getX(),t.getY(),i.getX(),i.getY(),g,x,a.getX(),a.getY())}static sampleGrid(t,i,a){return ni.getInstance().sampleGridWithTransform(t,a,a,i)}static computeDimension(t,i,a,o){const c=Je.round(Se.distance(t,i)/o),f=Je.round(Se.distance(t,a)/o);let g=Math.floor((c+f)/2)+7;switch(g&3){case 0:g++;break;case 2:g--;break;case 3:throw new ee("Dimensions could be not found.")}return g}calculateModuleSize(t,i,a){return(this.calculateModuleSizeOneWay(t,i)+this.calculateModuleSizeOneWay(t,a))/2}calculateModuleSizeOneWay(t,i){const a=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(t.getX()),Math.floor(t.getY()),Math.floor(i.getX()),Math.floor(i.getY())),o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(i.getX()),Math.floor(i.getY()),Math.floor(t.getX()),Math.floor(t.getY()));return isNaN(a)?o/7:isNaN(o)?a/7:(a+o)/14}sizeOfBlackWhiteBlackRunBothWays(t,i,a,o){let c=this.sizeOfBlackWhiteBlackRun(t,i,a,o),f=1,g=t-(a-t);g<0?(f=t/(t-g),g=0):g>=this.image.getWidth()&&(f=(this.image.getWidth()-1-t)/(g-t),g=this.image.getWidth()-1);let x=Math.floor(i-(o-i)*f);return f=1,x<0?(f=i/(i-x),x=0):x>=this.image.getHeight()&&(f=(this.image.getHeight()-1-i)/(x-i),x=this.image.getHeight()-1),g=Math.floor(t+(g-t)*f),c+=this.sizeOfBlackWhiteBlackRun(t,i,g,x),c-1}sizeOfBlackWhiteBlackRun(t,i,a,o){const c=Math.abs(o-i)>Math.abs(a-t);if(c){let B=t;t=i,i=B,B=a,a=o,o=B}const f=Math.abs(a-t),g=Math.abs(o-i);let x=-f/2;const A=t<a?1:-1,v=i<o?1:-1;let O=0;const I=a+A;for(let B=t,k=i;B!==I;B+=A){const U=c?k:B,V=c?B:k;if(O===1===this.image.get(U,V)){if(O===2)return Je.distance(B,k,t,i);O++}if(x+=g,x>0){if(k===o)break;k+=v,x-=f}}return O===2?Je.distance(a+A,o,t,i):NaN}findAlignmentInRegion(t,i,a,o){const c=Math.floor(o*t),f=Math.max(0,i-c),g=Math.min(this.image.getWidth()-1,i+c);if(g-f<t*3)throw new ee("Alignment top exceeds estimated module size.");const x=Math.max(0,a-c),A=Math.min(this.image.getHeight()-1,a+c);if(A-x<t*3)throw new ee("Alignment bottom exceeds estimated module size.");return new Xn(this.image,f,x,g-f,A-x,t,this.resultPointCallback).find()}}class Ui{constructor(){this.decoder=new Vu}getDecoder(){return this.decoder}decode(t,i){let a,o;if(i!=null&&i.get(be.PURE_BARCODE)!==void 0){const x=Ui.extractPureBits(t.getBlackMatrix());a=this.decoder.decodeBitMatrix(x,i),o=Ui.NO_POINTS}else{const x=new vi(t.getBlackMatrix()).detect(i);a=this.decoder.decodeBitMatrix(x.getBits(),i),o=x.getPoints()}a.getOther()instanceof oo&&a.getOther().applyMirroredCorrection(o);const c=new Ae(a.getText(),a.getRawBytes(),void 0,o,pe.QR_CODE,void 0),f=a.getByteSegments();f!==null&&c.putMetadata(ct.BYTE_SEGMENTS,f);const g=a.getECLevel();return g!==null&&c.putMetadata(ct.ERROR_CORRECTION_LEVEL,g),a.hasStructuredAppend()&&(c.putMetadata(ct.STRUCTURED_APPEND_SEQUENCE,a.getStructuredAppendSequenceNumber()),c.putMetadata(ct.STRUCTURED_APPEND_PARITY,a.getStructuredAppendParity())),c}reset(){}static extractPureBits(t){const i=t.getTopLeftOnBit(),a=t.getBottomRightOnBit();if(i===null||a===null)throw new ee;const o=this.moduleSize(i,t);let c=i[1],f=a[1],g=i[0],x=a[0];if(g>=x||c>=f)throw new ee;if(f-c!==x-g&&(x=g+(f-c),x>=t.getWidth()))throw new ee;const A=Math.round((x-g+1)/o),v=Math.round((f-c+1)/o);if(A<=0||v<=0)throw new ee;if(v!==A)throw new ee;const O=Math.floor(o/2);c+=O,g+=O;const I=g+Math.floor((A-1)*o)-x;if(I>0){if(I>O)throw new ee;g-=I}const B=c+Math.floor((v-1)*o)-f;if(B>0){if(B>O)throw new ee;c-=B}const k=new Ot(A,v);for(let U=0;U<v;U++){const V=c+Math.floor(U*o);for(let Z=0;Z<A;Z++)t.get(g+Math.floor(Z*o),V)&&k.set(Z,U)}return k}static moduleSize(t,i){const a=i.getHeight(),o=i.getWidth();let c=t[0],f=t[1],g=!0,x=0;for(;c<o&&f<a;){if(g!==i.get(c,f)){if(++x===5)break;g=!g}c++,f++}if(c===o||f===a)throw new ee;return(c-t[0])/7}}Ui.NO_POINTS=new Array;class Be{PDF417Common(){}static getBitCountSum(t){return Je.sum(t)}static toIntArray(t){if(t==null||!t.length)return Be.EMPTY_INT_ARRAY;const i=new Int32Array(t.length);let a=0;for(const o of t)i[a++]=o;return i}static getCodeword(t){const i=fe.binarySearch(Be.SYMBOL_TABLE,t&262143);return i<0?-1:(Be.CODEWORD_TABLE[i]-1)%Be.NUMBER_OF_CODEWORDS}}Be.NUMBER_OF_CODEWORDS=929,Be.MAX_CODEWORDS_IN_BARCODE=Be.NUMBER_OF_CODEWORDS-1,Be.MIN_ROWS_IN_BARCODE=3,Be.MAX_ROWS_IN_BARCODE=90,Be.MODULES_IN_CODEWORD=17,Be.MODULES_IN_STOP_PATTERN=18,Be.BARS_IN_MODULE=8,Be.EMPTY_INT_ARRAY=new Int32Array([]),Be.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),Be.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]);class uo{constructor(t,i){this.bits=t,this.points=i}getBits(){return this.bits}getPoints(){return this.points}}class Pe{static detectMultiple(t,i,a){let o=t.getBlackMatrix(),c=Pe.detect(a,o);return c.length||(o=o.clone(),o.rotate180(),c=Pe.detect(a,o)),new uo(o,c)}static detect(t,i){const a=new Array;let o=0,c=0,f=!1;for(;o<i.getHeight();){const g=Pe.findVertices(i,o,c);if(g[0]==null&&g[3]==null){if(!f)break;f=!1,c=0;for(const x of a)x[1]!=null&&(o=Math.trunc(Math.max(o,x[1].getY()))),x[3]!=null&&(o=Math.max(o,Math.trunc(x[3].getY())));o+=Pe.ROW_STEP;continue}if(f=!0,a.push(g),!t)break;g[2]!=null?(c=Math.trunc(g[2].getX()),o=Math.trunc(g[2].getY())):(c=Math.trunc(g[4].getX()),o=Math.trunc(g[4].getY()))}return a}static findVertices(t,i,a){const o=t.getHeight(),c=t.getWidth(),f=new Array(8);return Pe.copyToResult(f,Pe.findRowsWithPattern(t,o,c,i,a,Pe.START_PATTERN),Pe.INDEXES_START_PATTERN),f[4]!=null&&(a=Math.trunc(f[4].getX()),i=Math.trunc(f[4].getY())),Pe.copyToResult(f,Pe.findRowsWithPattern(t,o,c,i,a,Pe.STOP_PATTERN),Pe.INDEXES_STOP_PATTERN),f}static copyToResult(t,i,a){for(let o=0;o<a.length;o++)t[a[o]]=i[o]}static findRowsWithPattern(t,i,a,o,c,f){const g=new Array(4);let x=!1;const A=new Int32Array(f.length);for(;o<i;o+=Pe.ROW_STEP){let O=Pe.findGuardPattern(t,c,o,a,!1,f,A);if(O!=null){for(;o>0;){const I=Pe.findGuardPattern(t,c,--o,a,!1,f,A);if(I!=null)O=I;else{o++;break}}g[0]=new Se(O[0],o),g[1]=new Se(O[1],o),x=!0;break}}let v=o+1;if(x){let O=0,I=Int32Array.from([Math.trunc(g[0].getX()),Math.trunc(g[1].getX())]);for(;v<i;v++){const B=Pe.findGuardPattern(t,I[0],v,a,!1,f,A);if(B!=null&&Math.abs(I[0]-B[0])<Pe.MAX_PATTERN_DRIFT&&Math.abs(I[1]-B[1])<Pe.MAX_PATTERN_DRIFT)I=B,O=0;else{if(O>Pe.SKIPPED_ROW_COUNT_MAX)break;O++}}v-=O+1,g[2]=new Se(I[0],v),g[3]=new Se(I[1],v)}return v-o<Pe.BARCODE_MIN_HEIGHT&&fe.fill(g,null),g}static findGuardPattern(t,i,a,o,c,f,g){fe.fillWithin(g,0,g.length,0);let x=i,A=0;for(;t.get(x,a)&&x>0&&A++<Pe.MAX_PIXEL_DRIFT;)x--;let v=x,O=0,I=f.length;for(let B=c;v<o;v++)if(t.get(v,a)!==B)g[O]++;else{if(O===I-1){if(Pe.patternMatchVariance(g,f,Pe.MAX_INDIVIDUAL_VARIANCE)<Pe.MAX_AVG_VARIANCE)return new Int32Array([x,v]);x+=g[0]+g[1],K.arraycopy(g,2,g,0,O-1),g[O-1]=0,g[O]=0,O--}else O++;g[O]=1,B=!B}return O===I-1&&Pe.patternMatchVariance(g,f,Pe.MAX_INDIVIDUAL_VARIANCE)<Pe.MAX_AVG_VARIANCE?new Int32Array([x,v-1]):null}static patternMatchVariance(t,i,a){let o=t.length,c=0,f=0;for(let A=0;A<o;A++)c+=t[A],f+=i[A];if(c<f)return 1/0;let g=c/f;a*=g;let x=0;for(let A=0;A<o;A++){let v=t[A],O=i[A]*g,I=v>O?v-O:O-v;if(I>a)return 1/0;x+=I}return x/c}}Pe.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),Pe.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),Pe.MAX_AVG_VARIANCE=.42,Pe.MAX_INDIVIDUAL_VARIANCE=.8,Pe.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),Pe.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),Pe.MAX_PIXEL_DRIFT=3,Pe.MAX_PATTERN_DRIFT=5,Pe.SKIPPED_ROW_COUNT_MAX=25,Pe.ROW_STEP=5,Pe.BARCODE_MIN_HEIGHT=10;class Lt{constructor(t,i){if(i.length===0)throw new D;this.field=t;let a=i.length;if(a>1&&i[0]===0){let o=1;for(;o<a&&i[o]===0;)o++;o===a?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(a-o),K.arraycopy(i,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=i}getCoefficients(){return this.coefficients}getDegree(){return this.coefficients.length-1}isZero(){return this.coefficients[0]===0}getCoefficient(t){return this.coefficients[this.coefficients.length-1-t]}evaluateAt(t){if(t===0)return this.getCoefficient(0);if(t===1){let o=0;for(let c of this.coefficients)o=this.field.add(o,c);return o}let i=this.coefficients[0],a=this.coefficients.length;for(let o=1;o<a;o++)i=this.field.add(this.field.multiply(t,i),this.coefficients[o]);return i}add(t){if(!this.field.equals(t.field))throw new D("ModulusPolys do not have same ModulusGF field");if(this.isZero())return t;if(t.isZero())return this;let i=this.coefficients,a=t.coefficients;if(i.length>a.length){let f=i;i=a,a=f}let o=new Int32Array(a.length),c=a.length-i.length;K.arraycopy(a,0,o,0,c);for(let f=c;f<a.length;f++)o[f]=this.field.add(i[f-c],a[f]);return new Lt(this.field,o)}subtract(t){if(!this.field.equals(t.field))throw new D("ModulusPolys do not have same ModulusGF field");return t.isZero()?this:this.add(t.negative())}multiply(t){return t instanceof Lt?this.multiplyOther(t):this.multiplyScalar(t)}multiplyOther(t){if(!this.field.equals(t.field))throw new D("ModulusPolys do not have same ModulusGF field");if(this.isZero()||t.isZero())return new Lt(this.field,new Int32Array([0]));let i=this.coefficients,a=i.length,o=t.coefficients,c=o.length,f=new Int32Array(a+c-1);for(let g=0;g<a;g++){let x=i[g];for(let A=0;A<c;A++)f[g+A]=this.field.add(f[g+A],this.field.multiply(x,o[A]))}return new Lt(this.field,f)}negative(){let t=this.coefficients.length,i=new Int32Array(t);for(let a=0;a<t;a++)i[a]=this.field.subtract(0,this.coefficients[a]);return new Lt(this.field,i)}multiplyScalar(t){if(t===0)return new Lt(this.field,new Int32Array([0]));if(t===1)return this;let i=this.coefficients.length,a=new Int32Array(i);for(let o=0;o<i;o++)a[o]=this.field.multiply(this.coefficients[o],t);return new Lt(this.field,a)}multiplyByMonomial(t,i){if(t<0)throw new D;if(i===0)return new Lt(this.field,new Int32Array([0]));let a=this.coefficients.length,o=new Int32Array(a+t);for(let c=0;c<a;c++)o[c]=this.field.multiply(this.coefficients[c],i);return new Lt(this.field,o)}toString(){let t=new nt;for(let i=this.getDegree();i>=0;i--){let a=this.getCoefficient(i);a!==0&&(a<0?(t.append(" - "),a=-a):t.length()>0&&t.append(" + "),(i===0||a!==1)&&t.append(a),i!==0&&(i===1?t.append("x"):(t.append("x^"),t.append(i))))}return t.toString()}}class il{add(t,i){return(t+i)%this.modulus}subtract(t,i){return(this.modulus+t-i)%this.modulus}exp(t){return this.expTable[t]}log(t){if(t===0)throw new D;return this.logTable[t]}inverse(t){if(t===0)throw new Dr;return this.expTable[this.modulus-this.logTable[t]-1]}multiply(t,i){return t===0||i===0?0:this.expTable[(this.logTable[t]+this.logTable[i])%(this.modulus-1)]}getSize(){return this.modulus}equals(t){return t===this}}class lr extends il{constructor(t,i){super(),this.modulus=t,this.expTable=new Int32Array(t),this.logTable=new Int32Array(t);let a=1;for(let o=0;o<t;o++)this.expTable[o]=a,a=a*i%t;for(let o=0;o<t-1;o++)this.logTable[this.expTable[o]]=o;this.zero=new Lt(this,new Int32Array([0])),this.one=new Lt(this,new Int32Array([1]))}getZero(){return this.zero}getOne(){return this.one}buildMonomial(t,i){if(t<0)throw new D;if(i===0)return this.zero;let a=new Int32Array(t+1);return a[0]=i,new Lt(this,a)}}lr.PDF417_GF=new lr(Be.NUMBER_OF_CODEWORDS,3);class ji{constructor(){this.field=lr.PDF417_GF}decode(t,i,a){let o=new Lt(this.field,t),c=new Int32Array(i),f=!1;for(let k=i;k>0;k--){let U=o.evaluateAt(this.field.exp(k));c[i-k]=U,U!==0&&(f=!0)}if(!f)return 0;let g=this.field.getOne();if(a!=null)for(const k of a){let U=this.field.exp(t.length-1-k),V=new Lt(this.field,new Int32Array([this.field.subtract(0,U),1]));g=g.multiply(V)}let x=new Lt(this.field,c),A=this.runEuclideanAlgorithm(this.field.buildMonomial(i,1),x,i),v=A[0],O=A[1],I=this.findErrorLocations(v),B=this.findErrorMagnitudes(O,v,I);for(let k=0;k<I.length;k++){let U=t.length-1-this.field.log(I[k]);if(U<0)throw P.getChecksumInstance();t[U]=this.field.subtract(t[U],B[k])}return I.length}runEuclideanAlgorithm(t,i,a){if(t.getDegree()<i.getDegree()){let I=t;t=i,i=I}let o=t,c=i,f=this.field.getZero(),g=this.field.getOne();for(;c.getDegree()>=Math.round(a/2);){let I=o,B=f;if(o=c,f=g,o.isZero())throw P.getChecksumInstance();c=I;let k=this.field.getZero(),U=o.getCoefficient(o.getDegree()),V=this.field.inverse(U);for(;c.getDegree()>=o.getDegree()&&!c.isZero();){let Z=c.getDegree()-o.getDegree(),ge=this.field.multiply(c.getCoefficient(c.getDegree()),V);k=k.add(this.field.buildMonomial(Z,ge)),c=c.subtract(o.multiplyByMonomial(Z,ge))}g=k.multiply(f).subtract(B).negative()}let x=g.getCoefficient(0);if(x===0)throw P.getChecksumInstance();let A=this.field.inverse(x),v=g.multiply(A),O=c.multiply(A);return[v,O]}findErrorLocations(t){let i=t.getDegree(),a=new Int32Array(i),o=0;for(let c=1;c<this.field.getSize()&&o<i;c++)t.evaluateAt(c)===0&&(a[o]=this.field.inverse(c),o++);if(o!==i)throw P.getChecksumInstance();return a}findErrorMagnitudes(t,i,a){let o=i.getDegree(),c=new Int32Array(o);for(let A=1;A<=o;A++)c[o-A]=this.field.multiply(A,i.getCoefficient(A));let f=new Lt(this.field,c),g=a.length,x=new Int32Array(g);for(let A=0;A<g;A++){let v=this.field.inverse(a[A]),O=this.field.subtract(0,t.evaluateAt(v)),I=this.field.inverse(f.evaluateAt(v));x[A]=this.field.multiply(O,I)}return x}}class zi{constructor(t,i,a,o,c){t instanceof zi?this.constructor_2(t):this.constructor_1(t,i,a,o,c)}constructor_1(t,i,a,o,c){const f=i==null||a==null,g=o==null||c==null;if(f&&g)throw new ee;f?(i=new Se(0,o.getY()),a=new Se(0,c.getY())):g&&(o=new Se(t.getWidth()-1,i.getY()),c=new Se(t.getWidth()-1,a.getY())),this.image=t,this.topLeft=i,this.bottomLeft=a,this.topRight=o,this.bottomRight=c,this.minX=Math.trunc(Math.min(i.getX(),a.getX())),this.maxX=Math.trunc(Math.max(o.getX(),c.getX())),this.minY=Math.trunc(Math.min(i.getY(),o.getY())),this.maxY=Math.trunc(Math.max(a.getY(),c.getY()))}constructor_2(t){this.image=t.image,this.topLeft=t.getTopLeft(),this.bottomLeft=t.getBottomLeft(),this.topRight=t.getTopRight(),this.bottomRight=t.getBottomRight(),this.minX=t.getMinX(),this.maxX=t.getMaxX(),this.minY=t.getMinY(),this.maxY=t.getMaxY()}static merge(t,i){return t==null?i:i==null?t:new zi(t.image,t.topLeft,t.bottomLeft,i.topRight,i.bottomRight)}addMissingRows(t,i,a){let o=this.topLeft,c=this.bottomLeft,f=this.topRight,g=this.bottomRight;if(t>0){let x=a?this.topLeft:this.topRight,A=Math.trunc(x.getY()-t);A<0&&(A=0);let v=new Se(x.getX(),A);a?o=v:f=v}if(i>0){let x=a?this.bottomLeft:this.bottomRight,A=Math.trunc(x.getY()+i);A>=this.image.getHeight()&&(A=this.image.getHeight()-1);let v=new Se(x.getX(),A);a?c=v:g=v}return new zi(this.image,o,c,f,g)}getMinX(){return this.minX}getMaxX(){return this.maxX}getMinY(){return this.minY}getMaxY(){return this.maxY}getTopLeft(){return this.topLeft}getTopRight(){return this.topRight}getBottomLeft(){return this.bottomLeft}getBottomRight(){return this.bottomRight}}class is{constructor(t,i,a,o){this.columnCount=t,this.errorCorrectionLevel=o,this.rowCountUpperPart=i,this.rowCountLowerPart=a,this.rowCount=i+a}getColumnCount(){return this.columnCount}getErrorCorrectionLevel(){return this.errorCorrectionLevel}getRowCount(){return this.rowCount}getRowCountUpperPart(){return this.rowCountUpperPart}getRowCountLowerPart(){return this.rowCountLowerPart}}class Fr{constructor(){this.buffer=""}static form(t,i){let a=-1;function o(f,g,x,A,v,O){if(f==="%%")return"%";if(i[++a]===void 0)return;f=A?parseInt(A.substr(1)):void 0;let I=v?parseInt(v.substr(1)):void 0,B;switch(O){case"s":B=i[a];break;case"c":B=i[a][0];break;case"f":B=parseFloat(i[a]).toFixed(f);break;case"p":B=parseFloat(i[a]).toPrecision(f);break;case"e":B=parseFloat(i[a]).toExponential(f);break;case"x":B=parseInt(i[a]).toString(I||16);break;case"d":B=parseFloat(parseInt(i[a],I||10).toPrecision(f)).toFixed(0);break}B=typeof B=="object"?JSON.stringify(B):(+B).toString(I);let k=parseInt(x),U=x&&x[0]+""=="0"?"0":" ";for(;B.length<k;)B=g!==void 0?B+U:U+B;return B}let c=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return t.replace(c,o)}format(t,...i){this.buffer+=Fr.form(t,i)}toString(){return this.buffer}}class Qi{constructor(t){this.boundingBox=new zi(t),this.codewords=new Array(t.getMaxY()-t.getMinY()+1)}getCodewordNearby(t){let i=this.getCodeword(t);if(i!=null)return i;for(let a=1;a<Qi.MAX_NEARBY_DISTANCE;a++){let o=this.imageRowToCodewordIndex(t)-a;if(o>=0&&(i=this.codewords[o],i!=null)||(o=this.imageRowToCodewordIndex(t)+a,o<this.codewords.length&&(i=this.codewords[o],i!=null)))return i}return null}imageRowToCodewordIndex(t){return t-this.boundingBox.getMinY()}setCodeword(t,i){this.codewords[this.imageRowToCodewordIndex(t)]=i}getCodeword(t){return this.codewords[this.imageRowToCodewordIndex(t)]}getBoundingBox(){return this.boundingBox}getCodewords(){return this.codewords}toString(){const t=new Fr;let i=0;for(const a of this.codewords){if(a==null){t.format("%3d:    |   %n",i++);continue}t.format("%3d: %3d|%3d%n",i++,a.getRowNumber(),a.getValue())}return t.toString()}}Qi.MAX_NEARBY_DISTANCE=5;class Ji{constructor(){this.values=new Map}setValue(t){t=Math.trunc(t);let i=this.values.get(t);i==null&&(i=0),i++,this.values.set(t,i)}getValue(){let t=-1,i=new Array;for(const[a,o]of this.values.entries()){const c={getKey:()=>a,getValue:()=>o};c.getValue()>t?(t=c.getValue(),i=[],i.push(c.getKey())):c.getValue()===t&&i.push(c.getKey())}return Be.toIntArray(i)}getConfidence(t){return this.values.get(t)}}class rl extends Qi{constructor(t,i){super(t),this._isLeft=i}setRowNumbers(){for(let t of this.getCodewords())t?.setRowNumberAsRowIndicatorColumn()}adjustCompleteIndicatorColumnRowNumbers(t){let i=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(i,t);let a=this.getBoundingBox(),o=this._isLeft?a.getTopLeft():a.getTopRight(),c=this._isLeft?a.getBottomLeft():a.getBottomRight(),f=this.imageRowToCodewordIndex(Math.trunc(o.getY())),g=this.imageRowToCodewordIndex(Math.trunc(c.getY())),x=-1,A=1,v=0;for(let O=f;O<g;O++){if(i[O]==null)continue;let I=i[O],B=I.getRowNumber()-x;if(B===0)v++;else if(B===1)A=Math.max(A,v),v=1,x=I.getRowNumber();else if(B<0||I.getRowNumber()>=t.getRowCount()||B>O)i[O]=null;else{let k;A>2?k=(A-2)*B:k=B;let U=k>=O;for(let V=1;V<=k&&!U;V++)U=i[O-V]!=null;U?i[O]=null:(x=I.getRowNumber(),v=1)}}}getRowHeights(){let t=this.getBarcodeMetadata();if(t==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(t);let i=new Int32Array(t.getRowCount());for(let a of this.getCodewords())if(a!=null){let o=a.getRowNumber();if(o>=i.length)continue;i[o]++}return i}adjustIncompleteIndicatorColumnRowNumbers(t){let i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),o=this._isLeft?i.getBottomLeft():i.getBottomRight(),c=this.imageRowToCodewordIndex(Math.trunc(a.getY())),f=this.imageRowToCodewordIndex(Math.trunc(o.getY())),g=this.getCodewords(),x=-1;for(let A=c;A<f;A++){if(g[A]==null)continue;let v=g[A];v.setRowNumberAsRowIndicatorColumn();let O=v.getRowNumber()-x;O===0||(O===1?x=v.getRowNumber():v.getRowNumber()>=t.getRowCount()?g[A]=null:x=v.getRowNumber())}}getBarcodeMetadata(){let t=this.getCodewords(),i=new Ji,a=new Ji,o=new Ji,c=new Ji;for(let g of t){if(g==null)continue;g.setRowNumberAsRowIndicatorColumn();let x=g.getValue()%30,A=g.getRowNumber();switch(this._isLeft||(A+=2),A%3){case 0:a.setValue(x*3+1);break;case 1:c.setValue(x/3),o.setValue(x%3);break;case 2:i.setValue(x+1);break}}if(i.getValue().length===0||a.getValue().length===0||o.getValue().length===0||c.getValue().length===0||i.getValue()[0]<1||a.getValue()[0]+o.getValue()[0]<Be.MIN_ROWS_IN_BARCODE||a.getValue()[0]+o.getValue()[0]>Be.MAX_ROWS_IN_BARCODE)return null;let f=new is(i.getValue()[0],a.getValue()[0],o.getValue()[0],c.getValue()[0]);return this.removeIncorrectCodewords(t,f),f}removeIncorrectCodewords(t,i){for(let a=0;a<t.length;a++){let o=t[a];if(t[a]==null)continue;let c=o.getValue()%30,f=o.getRowNumber();if(f>i.getRowCount()){t[a]=null;continue}switch(this._isLeft||(f+=2),f%3){case 0:c*3+1!==i.getRowCountUpperPart()&&(t[a]=null);break;case 1:(Math.trunc(c/3)!==i.getErrorCorrectionLevel()||c%3!==i.getRowCountLowerPart())&&(t[a]=null);break;case 2:c+1!==i.getColumnCount()&&(t[a]=null);break}}}isLeft(){return this._isLeft}toString(){return"IsLeft: "+this._isLeft+`
`+super.toString()}}class cn{constructor(t,i){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=t,this.barcodeColumnCount=t.getColumnCount(),this.boundingBox=i,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}getDetectionResultColumns(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);let t=Be.MAX_CODEWORDS_IN_BARCODE,i;do i=t,t=this.adjustRowNumbersAndGetCount();while(t>0&&t<i);return this.detectionResultColumns}adjustIndicatorColumnRowNumbers(t){t?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)}adjustRowNumbersAndGetCount(){let t=this.adjustRowNumbersByRow();if(t===0)return 0;for(let i=1;i<this.barcodeColumnCount+1;i++){let a=this.detectionResultColumns[i].getCodewords();for(let o=0;o<a.length;o++)a[o]!=null&&(a[o].hasValidRowNumber()||this.adjustRowNumbers(i,o,a))}return t}adjustRowNumbersByRow(){return this.adjustRowNumbersFromBothRI(),this.adjustRowNumbersFromLRI()+this.adjustRowNumbersFromRRI()}adjustRowNumbersFromBothRI(){if(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)return;let t=this.detectionResultColumns[0].getCodewords(),i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<t.length;a++)if(t[a]!=null&&i[a]!=null&&t[a].getRowNumber()===i[a].getRowNumber())for(let o=1;o<=this.barcodeColumnCount;o++){let c=this.detectionResultColumns[o].getCodewords()[a];c!=null&&(c.setRowNumber(t[a].getRowNumber()),c.hasValidRowNumber()||(this.detectionResultColumns[o].getCodewords()[a]=null))}}adjustRowNumbersFromRRI(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;let t=0,i=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords();for(let a=0;a<i.length;a++){if(i[a]==null)continue;let o=i[a].getRowNumber(),c=0;for(let f=this.barcodeColumnCount+1;f>0&&c<this.ADJUST_ROW_NUMBER_SKIP;f--){let g=this.detectionResultColumns[f].getCodewords()[a];g!=null&&(c=cn.adjustRowNumberIfValid(o,c,g),g.hasValidRowNumber()||t++)}}return t}adjustRowNumbersFromLRI(){if(this.detectionResultColumns[0]==null)return 0;let t=0,i=this.detectionResultColumns[0].getCodewords();for(let a=0;a<i.length;a++){if(i[a]==null)continue;let o=i[a].getRowNumber(),c=0;for(let f=1;f<this.barcodeColumnCount+1&&c<this.ADJUST_ROW_NUMBER_SKIP;f++){let g=this.detectionResultColumns[f].getCodewords()[a];g!=null&&(c=cn.adjustRowNumberIfValid(o,c,g),g.hasValidRowNumber()||t++)}}return t}static adjustRowNumberIfValid(t,i,a){return a==null||a.hasValidRowNumber()||(a.isValidRowNumber(t)?(a.setRowNumber(t),i=0):++i),i}adjustRowNumbers(t,i,a){if(!this.detectionResultColumns[t-1])return;let o=a[i],c=this.detectionResultColumns[t-1].getCodewords(),f=c;this.detectionResultColumns[t+1]!=null&&(f=this.detectionResultColumns[t+1].getCodewords());let g=new Array(14);g[2]=c[i],g[3]=f[i],i>0&&(g[0]=a[i-1],g[4]=c[i-1],g[5]=f[i-1]),i>1&&(g[8]=a[i-2],g[10]=c[i-2],g[11]=f[i-2]),i<a.length-1&&(g[1]=a[i+1],g[6]=c[i+1],g[7]=f[i+1]),i<a.length-2&&(g[9]=a[i+2],g[12]=c[i+2],g[13]=f[i+2]);for(let x of g)if(cn.adjustRowNumber(o,x))return}static adjustRowNumber(t,i){return i==null?!1:i.hasValidRowNumber()&&i.getBucket()===t.getBucket()?(t.setRowNumber(i.getRowNumber()),!0):!1}getBarcodeColumnCount(){return this.barcodeColumnCount}getBarcodeRowCount(){return this.barcodeMetadata.getRowCount()}getBarcodeECLevel(){return this.barcodeMetadata.getErrorCorrectionLevel()}setBoundingBox(t){this.boundingBox=t}getBoundingBox(){return this.boundingBox}setDetectionResultColumn(t,i){this.detectionResultColumns[t]=i}getDetectionResultColumn(t){return this.detectionResultColumns[t]}toString(){let t=this.detectionResultColumns[0];t==null&&(t=this.detectionResultColumns[this.barcodeColumnCount+1]);let i=new Fr;for(let a=0;a<t.getCodewords().length;a++){i.format("CW %3d:",a);for(let o=0;o<this.barcodeColumnCount+2;o++){if(this.detectionResultColumns[o]==null){i.format("    |   ");continue}let c=this.detectionResultColumns[o].getCodewords()[a];if(c==null){i.format("    |   ");continue}i.format(" %3d|%3d",c.getRowNumber(),c.getValue())}i.format("%n")}return i.toString()}}class si{constructor(t,i,a,o){this.rowNumber=si.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(t),this.endX=Math.trunc(i),this.bucket=Math.trunc(a),this.value=Math.trunc(o)}hasValidRowNumber(){return this.isValidRowNumber(this.rowNumber)}isValidRowNumber(t){return t!==si.BARCODE_ROW_UNKNOWN&&this.bucket===t%3*3}setRowNumberAsRowIndicatorColumn(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))}getWidth(){return this.endX-this.startX}getStartX(){return this.startX}getEndX(){return this.endX}getBucket(){return this.bucket}getValue(){return this.value}getRowNumber(){return this.rowNumber}setRowNumber(t){this.rowNumber=t}toString(){return this.rowNumber+"|"+this.value}}si.BARCODE_ROW_UNKNOWN=-1;class wn{static initialize(){for(let t=0;t<Be.SYMBOL_TABLE.length;t++){let i=Be.SYMBOL_TABLE[t],a=i&1;for(let o=0;o<Be.BARS_IN_MODULE;o++){let c=0;for(;(i&1)===a;)c+=1,i>>=1;a=i&1,wn.RATIOS_TABLE[t]||(wn.RATIOS_TABLE[t]=new Array(Be.BARS_IN_MODULE)),wn.RATIOS_TABLE[t][Be.BARS_IN_MODULE-o-1]=Math.fround(c/Be.MODULES_IN_CODEWORD)}}this.bSymbolTableReady=!0}static getDecodedValue(t){let i=wn.getDecodedCodewordValue(wn.sampleBitCounts(t));return i!==-1?i:wn.getClosestDecodedValue(t)}static sampleBitCounts(t){let i=Je.sum(t),a=new Int32Array(Be.BARS_IN_MODULE),o=0,c=0;for(let f=0;f<Be.MODULES_IN_CODEWORD;f++){let g=i/(2*Be.MODULES_IN_CODEWORD)+f*i/Be.MODULES_IN_CODEWORD;c+t[o]<=g&&(c+=t[o],o++),a[o]++}return a}static getDecodedCodewordValue(t){let i=wn.getBitValue(t);return Be.getCodeword(i)===-1?-1:i}static getBitValue(t){let i=0;for(let a=0;a<t.length;a++)for(let o=0;o<t[a];o++)i=i<<1|(a%2===0?1:0);return Math.trunc(i)}static getClosestDecodedValue(t){let i=Je.sum(t),a=new Array(Be.BARS_IN_MODULE);if(i>1)for(let f=0;f<a.length;f++)a[f]=Math.fround(t[f]/i);let o=Mr.MAX_VALUE,c=-1;this.bSymbolTableReady||wn.initialize();for(let f=0;f<wn.RATIOS_TABLE.length;f++){let g=0,x=wn.RATIOS_TABLE[f];for(let A=0;A<Be.BARS_IN_MODULE;A++){let v=Math.fround(x[A]-a[A]);if(g+=Math.fround(v*v),g>=o)break}g<o&&(o=g,c=Be.SYMBOL_TABLE[f])}return c}}wn.bSymbolTableReady=!1,wn.RATIOS_TABLE=new Array(Be.SYMBOL_TABLE.length).map(T=>new Array(Be.BARS_IN_MODULE));class Hr{constructor(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}getSegmentIndex(){return this.segmentIndex}setSegmentIndex(t){this.segmentIndex=t}getFileId(){return this.fileId}setFileId(t){this.fileId=t}getOptionalData(){return this.optionalData}setOptionalData(t){this.optionalData=t}isLastSegment(){return this.lastSegment}setLastSegment(t){this.lastSegment=t}getSegmentCount(){return this.segmentCount}setSegmentCount(t){this.segmentCount=t}getSender(){return this.sender||null}setSender(t){this.sender=t}getAddressee(){return this.addressee||null}setAddressee(t){this.addressee=t}getFileName(){return this.fileName}setFileName(t){this.fileName=t}getFileSize(){return this.fileSize}setFileSize(t){this.fileSize=t}getChecksum(){return this.checksum}setChecksum(t){this.checksum=t}getTimestamp(){return this.timestamp}setTimestamp(t){this.timestamp=t}}class co{static parseLong(t,i=void 0){return parseInt(t,i)}}class rs extends b{}rs.kind="NullPointerException";class al{writeBytes(t){this.writeBytesOffset(t,0,t.length)}writeBytesOffset(t,i,a){if(t==null)throw new rs;if(i<0||i>t.length||a<0||i+a>t.length||i+a<0)throw new oe;if(a===0)return;for(let o=0;o<a;o++)this.write(t[i+o])}flush(){}close(){}}class Ca extends b{}class as extends al{constructor(t=32){if(super(),this.count=0,t<0)throw new D("Negative initial size: "+t);this.buf=new Uint8Array(t)}ensureCapacity(t){t-this.buf.length>0&&this.grow(t)}grow(t){let a=this.buf.length<<1;if(a-t<0&&(a=t),a<0){if(t<0)throw new Ca;a=te.MAX_VALUE}this.buf=fe.copyOfUint8Array(this.buf,a)}write(t){this.ensureCapacity(this.count+1),this.buf[this.count]=t,this.count+=1}writeBytesOffset(t,i,a){if(i<0||i>t.length||a<0||i+a-t.length>0)throw new oe;this.ensureCapacity(this.count+a),K.arraycopy(t,i,this.buf,this.count,a),this.count+=a}writeTo(t){t.writeBytesOffset(this.buf,0,this.count)}reset(){this.count=0}toByteArray(){return fe.copyOfUint8Array(this.buf,this.count)}size(){return this.count}toString(t){return t?typeof t=="string"?this.toString_string(t):this.toString_number(t):this.toString_void()}toString_void(){return new String(this.buf).toString()}toString_string(t){return new String(this.buf).toString()}toString_number(t){return new String(this.buf).toString()}close(){}}var xt;(function(T){T[T.ALPHA=0]="ALPHA",T[T.LOWER=1]="LOWER",T[T.MIXED=2]="MIXED",T[T.PUNCT=3]="PUNCT",T[T.ALPHA_SHIFT=4]="ALPHA_SHIFT",T[T.PUNCT_SHIFT=5]="PUNCT_SHIFT"})(xt||(xt={}));function ho(){if(typeof window<"u")return window.BigInt||null;if(typeof vu<"u")return vu.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}let ss;function $i(T){if(typeof ss>"u"&&(ss=ho()),ss===null)throw new Error("BigInt is not supported!");return ss(T)}function sl(){let T=[];T[0]=$i(1);let t=$i(900);T[1]=t;for(let i=2;i<16;i++)T[i]=T[i-1]*t;return T}class W{static decode(t,i){let a=new nt(""),o=ce.ISO8859_1;a.enableDecoding(o);let c=1,f=t[c++],g=new Hr;for(;c<t[0];){switch(f){case W.TEXT_COMPACTION_MODE_LATCH:c=W.textCompaction(t,c,a);break;case W.BYTE_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:c=W.byteCompaction(f,t,o,c,a);break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:a.append(t[c++]);break;case W.NUMERIC_COMPACTION_MODE_LATCH:c=W.numericCompaction(t,c,a);break;case W.ECI_CHARSET:ce.getCharacterSetECIByValue(t[c++]);break;case W.ECI_GENERAL_PURPOSE:c+=2;break;case W.ECI_USER_DEFINED:c++;break;case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:c=W.decodeMacroBlock(t,c,g);break;case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:throw new $;default:c--,c=W.textCompaction(t,c,a);break}if(c<t.length)f=t[c++];else throw $.getFormatInstance()}if(a.length()===0)throw $.getFormatInstance();let x=new Mt(null,a.toString(),null,i);return x.setOther(g),x}static decodeMacroBlock(t,i,a){if(i+W.NUMBER_OF_SEQUENCE_CODEWORDS>t[0])throw $.getFormatInstance();let o=new Int32Array(W.NUMBER_OF_SEQUENCE_CODEWORDS);for(let g=0;g<W.NUMBER_OF_SEQUENCE_CODEWORDS;g++,i++)o[g]=t[i];a.setSegmentIndex(te.parseInt(W.decodeBase900toBase10(o,W.NUMBER_OF_SEQUENCE_CODEWORDS)));let c=new nt;i=W.textCompaction(t,i,c),a.setFileId(c.toString());let f=-1;for(t[i]===W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(f=i+1);i<t[0];)switch(t[i]){case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(i++,t[i]){case W.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:let g=new nt;i=W.textCompaction(t,i+1,g),a.setFileName(g.toString());break;case W.MACRO_PDF417_OPTIONAL_FIELD_SENDER:let x=new nt;i=W.textCompaction(t,i+1,x),a.setSender(x.toString());break;case W.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:let A=new nt;i=W.textCompaction(t,i+1,A),a.setAddressee(A.toString());break;case W.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:let v=new nt;i=W.numericCompaction(t,i+1,v),a.setSegmentCount(te.parseInt(v.toString()));break;case W.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:let O=new nt;i=W.numericCompaction(t,i+1,O),a.setTimestamp(co.parseLong(O.toString()));break;case W.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:let I=new nt;i=W.numericCompaction(t,i+1,I),a.setChecksum(te.parseInt(I.toString()));break;case W.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:let B=new nt;i=W.numericCompaction(t,i+1,B),a.setFileSize(co.parseLong(B.toString()));break;default:throw $.getFormatInstance()}break;case W.MACRO_PDF417_TERMINATOR:i++,a.setLastSegment(!0);break;default:throw $.getFormatInstance()}if(f!==-1){let g=i-f;a.isLastSegment()&&g--,a.setOptionalData(fe.copyOfRange(t,f,f+g))}return i}static textCompaction(t,i,a){let o=new Int32Array((t[0]-i)*2),c=new Int32Array((t[0]-i)*2),f=0,g=!1;for(;i<t[0]&&!g;){let x=t[i++];if(x<W.TEXT_COMPACTION_MODE_LATCH)o[f]=x/30,o[f+1]=x%30,f+=2;else switch(x){case W.TEXT_COMPACTION_MODE_LATCH:o[f++]=W.TEXT_COMPACTION_MODE_LATCH;break;case W.BYTE_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:case W.NUMERIC_COMPACTION_MODE_LATCH:case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:i--,g=!0;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[f]=W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,x=t[i++],c[f]=x,f++;break}}return W.decodeTextCompaction(o,c,f,a),i}static decodeTextCompaction(t,i,a,o){let c=xt.ALPHA,f=xt.ALPHA,g=0;for(;g<a;){let x=t[g],A="";switch(c){case xt.ALPHA:if(x<26)A=String.fromCharCode(65+x);else switch(x){case 26:A=" ";break;case W.LL:c=xt.LOWER;break;case W.ML:c=xt.MIXED;break;case W.PS:f=c,c=xt.PUNCT_SHIFT;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(i[g]);break;case W.TEXT_COMPACTION_MODE_LATCH:c=xt.ALPHA;break}break;case xt.LOWER:if(x<26)A=String.fromCharCode(97+x);else switch(x){case 26:A=" ";break;case W.AS:f=c,c=xt.ALPHA_SHIFT;break;case W.ML:c=xt.MIXED;break;case W.PS:f=c,c=xt.PUNCT_SHIFT;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(i[g]);break;case W.TEXT_COMPACTION_MODE_LATCH:c=xt.ALPHA;break}break;case xt.MIXED:if(x<W.PL)A=W.MIXED_CHARS[x];else switch(x){case W.PL:c=xt.PUNCT;break;case 26:A=" ";break;case W.LL:c=xt.LOWER;break;case W.AL:c=xt.ALPHA;break;case W.PS:f=c,c=xt.PUNCT_SHIFT;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(i[g]);break;case W.TEXT_COMPACTION_MODE_LATCH:c=xt.ALPHA;break}break;case xt.PUNCT:if(x<W.PAL)A=W.PUNCT_CHARS[x];else switch(x){case W.PAL:c=xt.ALPHA;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(i[g]);break;case W.TEXT_COMPACTION_MODE_LATCH:c=xt.ALPHA;break}break;case xt.ALPHA_SHIFT:if(c=f,x<26)A=String.fromCharCode(65+x);else switch(x){case 26:A=" ";break;case W.TEXT_COMPACTION_MODE_LATCH:c=xt.ALPHA;break}break;case xt.PUNCT_SHIFT:if(c=f,x<W.PAL)A=W.PUNCT_CHARS[x];else switch(x){case W.PAL:c=xt.ALPHA;break;case W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(i[g]);break;case W.TEXT_COMPACTION_MODE_LATCH:c=xt.ALPHA;break}break}A!==""&&o.append(A),g++}}static byteCompaction(t,i,a,o,c){let f=new as,g=0,x=0,A=!1;switch(t){case W.BYTE_COMPACTION_MODE_LATCH:let v=new Int32Array(6),O=i[o++];for(;o<i[0]&&!A;)switch(v[g++]=O,x=900*x+O,O=i[o++],O){case W.TEXT_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH:case W.NUMERIC_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:o--,A=!0;break;default:if(g%5===0&&g>0){for(let I=0;I<6;++I)f.write(Number($i(x)>>$i(8*(5-I))));x=0,g=0}break}o===i[0]&&O<W.TEXT_COMPACTION_MODE_LATCH&&(v[g++]=O);for(let I=0;I<g;I++)f.write(v[I]);break;case W.BYTE_COMPACTION_MODE_LATCH_6:for(;o<i[0]&&!A;){let I=i[o++];if(I<W.TEXT_COMPACTION_MODE_LATCH)g++,x=900*x+I;else switch(I){case W.TEXT_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH:case W.NUMERIC_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:o--,A=!0;break}if(g%5===0&&g>0){for(let B=0;B<6;++B)f.write(Number($i(x)>>$i(8*(5-B))));x=0,g=0}}break}return c.append(Pt.decode(f.toByteArray(),a)),o}static numericCompaction(t,i,a){let o=0,c=!1,f=new Int32Array(W.MAX_NUMERIC_CODEWORDS);for(;i<t[0]&&!c;){let g=t[i++];if(i===t[0]&&(c=!0),g<W.TEXT_COMPACTION_MODE_LATCH)f[o]=g,o++;else switch(g){case W.TEXT_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH:case W.BYTE_COMPACTION_MODE_LATCH_6:case W.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case W.MACRO_PDF417_TERMINATOR:i--,c=!0;break}(o%W.MAX_NUMERIC_CODEWORDS===0||g===W.NUMERIC_COMPACTION_MODE_LATCH||c)&&o>0&&(a.append(W.decodeBase900toBase10(f,o)),o=0)}return i}static decodeBase900toBase10(t,i){let a=$i(0);for(let c=0;c<i;c++)a+=W.EXP900[i-c-1]*$i(t[c]);let o=a.toString();if(o.charAt(0)!=="1")throw new $;return o.substring(1)}}W.TEXT_COMPACTION_MODE_LATCH=900,W.BYTE_COMPACTION_MODE_LATCH=901,W.NUMERIC_COMPACTION_MODE_LATCH=902,W.BYTE_COMPACTION_MODE_LATCH_6=924,W.ECI_USER_DEFINED=925,W.ECI_GENERAL_PURPOSE=926,W.ECI_CHARSET=927,W.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,W.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,W.MACRO_PDF417_TERMINATOR=922,W.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,W.MAX_NUMERIC_CODEWORDS=15,W.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,W.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,W.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,W.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,W.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,W.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,W.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,W.PL=25,W.LL=27,W.AS=27,W.ML=28,W.AL=28,W.PS=29,W.PAL=29,W.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,W.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",W.EXP900=ho()?sl():[],W.NUMBER_OF_SEQUENCE_CODEWORDS=2;class Ye{constructor(){}static decode(t,i,a,o,c,f,g){let x=new zi(t,i,a,o,c),A=null,v=null,O;for(let k=!0;;k=!1){if(i!=null&&(A=Ye.getRowIndicatorColumn(t,x,i,!0,f,g)),o!=null&&(v=Ye.getRowIndicatorColumn(t,x,o,!1,f,g)),O=Ye.merge(A,v),O==null)throw ee.getNotFoundInstance();let U=O.getBoundingBox();if(k&&U!=null&&(U.getMinY()<x.getMinY()||U.getMaxY()>x.getMaxY()))x=U;else break}O.setBoundingBox(x);let I=O.getBarcodeColumnCount()+1;O.setDetectionResultColumn(0,A),O.setDetectionResultColumn(I,v);let B=A!=null;for(let k=1;k<=I;k++){let U=B?k:I-k;if(O.getDetectionResultColumn(U)!==void 0)continue;let V;U===0||U===I?V=new rl(x,U===0):V=new Qi(x),O.setDetectionResultColumn(U,V);let Z=-1,ge=Z;for(let de=x.getMinY();de<=x.getMaxY();de++){if(Z=Ye.getStartColumn(O,U,de,B),Z<0||Z>x.getMaxX()){if(ge===-1)continue;Z=ge}let he=Ye.detectCodeword(t,x.getMinX(),x.getMaxX(),B,Z,de,f,g);he!=null&&(V.setCodeword(de,he),ge=Z,f=Math.min(f,he.getWidth()),g=Math.max(g,he.getWidth()))}}return Ye.createDecoderResult(O)}static merge(t,i){if(t==null&&i==null)return null;let a=Ye.getBarcodeMetadata(t,i);if(a==null)return null;let o=zi.merge(Ye.adjustBoundingBox(t),Ye.adjustBoundingBox(i));return new cn(a,o)}static adjustBoundingBox(t){if(t==null)return null;let i=t.getRowHeights();if(i==null)return null;let a=Ye.getMax(i),o=0;for(let g of i)if(o+=a-g,g>0)break;let c=t.getCodewords();for(let g=0;o>0&&c[g]==null;g++)o--;let f=0;for(let g=i.length-1;g>=0&&(f+=a-i[g],!(i[g]>0));g--);for(let g=c.length-1;f>0&&c[g]==null;g--)f--;return t.getBoundingBox().addMissingRows(o,f,t.isLeft())}static getMax(t){let i=-1;for(let a of t)i=Math.max(i,a);return i}static getBarcodeMetadata(t,i){let a;if(t==null||(a=t.getBarcodeMetadata())==null)return i==null?null:i.getBarcodeMetadata();let o;return i==null||(o=i.getBarcodeMetadata())==null?a:a.getColumnCount()!==o.getColumnCount()&&a.getErrorCorrectionLevel()!==o.getErrorCorrectionLevel()&&a.getRowCount()!==o.getRowCount()?null:a}static getRowIndicatorColumn(t,i,a,o,c,f){let g=new rl(i,o);for(let x=0;x<2;x++){let A=x===0?1:-1,v=Math.trunc(Math.trunc(a.getX()));for(let O=Math.trunc(Math.trunc(a.getY()));O<=i.getMaxY()&&O>=i.getMinY();O+=A){let I=Ye.detectCodeword(t,0,t.getWidth(),o,v,O,c,f);I!=null&&(g.setCodeword(O,I),o?v=I.getStartX():v=I.getEndX())}}return g}static adjustCodewordCount(t,i){let a=i[0][1],o=a.getValue(),c=t.getBarcodeColumnCount()*t.getBarcodeRowCount()-Ye.getNumberOfECCodeWords(t.getBarcodeECLevel());if(o.length===0){if(c<1||c>Be.MAX_CODEWORDS_IN_BARCODE)throw ee.getNotFoundInstance();a.setValue(c)}else o[0]!==c&&a.setValue(c)}static createDecoderResult(t){let i=Ye.createBarcodeMatrix(t);Ye.adjustCodewordCount(t,i);let a=new Array,o=new Int32Array(t.getBarcodeRowCount()*t.getBarcodeColumnCount()),c=[],f=new Array;for(let x=0;x<t.getBarcodeRowCount();x++)for(let A=0;A<t.getBarcodeColumnCount();A++){let v=i[x][A+1].getValue(),O=x*t.getBarcodeColumnCount()+A;v.length===0?a.push(O):v.length===1?o[O]=v[0]:(f.push(O),c.push(v))}let g=new Array(c.length);for(let x=0;x<g.length;x++)g[x]=c[x];return Ye.createDecoderResultFromAmbiguousValues(t.getBarcodeECLevel(),o,Be.toIntArray(a),Be.toIntArray(f),g)}static createDecoderResultFromAmbiguousValues(t,i,a,o,c){let f=new Int32Array(o.length),g=100;for(;g-- >0;){for(let x=0;x<f.length;x++)i[o[x]]=c[x][f[x]];try{return Ye.decodeCodewords(i,t,a)}catch(x){if(!(x instanceof P))throw x}if(f.length===0)throw P.getChecksumInstance();for(let x=0;x<f.length;x++)if(f[x]<c[x].length-1){f[x]++;break}else if(f[x]=0,x===f.length-1)throw P.getChecksumInstance()}throw P.getChecksumInstance()}static createBarcodeMatrix(t){let i=Array.from({length:t.getBarcodeRowCount()},()=>new Array(t.getBarcodeColumnCount()+2));for(let o=0;o<i.length;o++)for(let c=0;c<i[o].length;c++)i[o][c]=new Ji;let a=0;for(let o of t.getDetectionResultColumns()){if(o!=null){for(let c of o.getCodewords())if(c!=null){let f=c.getRowNumber();if(f>=0){if(f>=i.length)continue;i[f][a].setValue(c.getValue())}}}a++}return i}static isValidBarcodeColumn(t,i){return i>=0&&i<=t.getBarcodeColumnCount()+1}static getStartColumn(t,i,a,o){let c=o?1:-1,f=null;if(Ye.isValidBarcodeColumn(t,i-c)&&(f=t.getDetectionResultColumn(i-c).getCodeword(a)),f!=null)return o?f.getEndX():f.getStartX();if(f=t.getDetectionResultColumn(i).getCodewordNearby(a),f!=null)return o?f.getStartX():f.getEndX();if(Ye.isValidBarcodeColumn(t,i-c)&&(f=t.getDetectionResultColumn(i-c).getCodewordNearby(a)),f!=null)return o?f.getEndX():f.getStartX();let g=0;for(;Ye.isValidBarcodeColumn(t,i-c);){i-=c;for(let x of t.getDetectionResultColumn(i).getCodewords())if(x!=null)return(o?x.getEndX():x.getStartX())+c*g*(x.getEndX()-x.getStartX());g++}return o?t.getBoundingBox().getMinX():t.getBoundingBox().getMaxX()}static detectCodeword(t,i,a,o,c,f,g,x){c=Ye.adjustCodewordStartColumn(t,i,a,o,c,f);let A=Ye.getModuleBitCount(t,i,a,o,c,f);if(A==null)return null;let v,O=Je.sum(A);if(o)v=c+O;else{for(let k=0;k<A.length/2;k++){let U=A[k];A[k]=A[A.length-1-k],A[A.length-1-k]=U}v=c,c=v-O}if(!Ye.checkCodewordSkew(O,g,x))return null;let I=wn.getDecodedValue(A),B=Be.getCodeword(I);return B===-1?null:new si(c,v,Ye.getCodewordBucketNumber(I),B)}static getModuleBitCount(t,i,a,o,c,f){let g=c,x=new Int32Array(8),A=0,v=o?1:-1,O=o;for(;(o?g<a:g>=i)&&A<x.length;)t.get(g,f)===O?(x[A]++,g+=v):(A++,O=!O);return A===x.length||g===(o?a:i)&&A===x.length-1?x:null}static getNumberOfECCodeWords(t){return 2<<t}static adjustCodewordStartColumn(t,i,a,o,c,f){let g=c,x=o?-1:1;for(let A=0;A<2;A++){for(;(o?g>=i:g<a)&&o===t.get(g,f);){if(Math.abs(c-g)>Ye.CODEWORD_SKEW_SIZE)return c;g+=x}x=-x,o=!o}return g}static checkCodewordSkew(t,i,a){return i-Ye.CODEWORD_SKEW_SIZE<=t&&t<=a+Ye.CODEWORD_SKEW_SIZE}static decodeCodewords(t,i,a){if(t.length===0)throw $.getFormatInstance();let o=1<<i+1,c=Ye.correctErrors(t,a,o);Ye.verifyCodewordCount(t,o);let f=W.decode(t,""+i);return f.setErrorsCorrected(c),f.setErasures(a.length),f}static correctErrors(t,i,a){if(i!=null&&i.length>a/2+Ye.MAX_ERRORS||a<0||a>Ye.MAX_EC_CODEWORDS)throw P.getChecksumInstance();return Ye.errorCorrection.decode(t,a,i)}static verifyCodewordCount(t,i){if(t.length<4)throw $.getFormatInstance();let a=t[0];if(a>t.length)throw $.getFormatInstance();if(a===0)if(i<t.length)t[0]=t.length-i;else throw $.getFormatInstance()}static getBitCountForCodeword(t){let i=new Int32Array(8),a=0,o=i.length-1;for(;!((t&1)!==a&&(a=t&1,o--,o<0));)i[o]++,t>>=1;return i}static getCodewordBucketNumber(t){return t instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(t):this.getCodewordBucketNumber_number(t)}static getCodewordBucketNumber_number(t){return Ye.getCodewordBucketNumber(Ye.getBitCountForCodeword(t))}static getCodewordBucketNumber_Int32Array(t){return(t[0]-t[2]+t[4]-t[6]+9)%9}static toString(t){let i=new Fr;for(let a=0;a<t.length;a++){i.format("Row %2d: ",a);for(let o=0;o<t[a].length;o++){let c=t[a][o];c.getValue().length===0?i.format("        ",null):i.format("%4d(%2d)",c.getValue()[0],c.getConfidence(c.getValue()[0]))}i.format("%n")}return i.toString()}}Ye.CODEWORD_SKEW_SIZE=2,Ye.MAX_ERRORS=3,Ye.MAX_EC_CODEWORDS=512,Ye.errorCorrection=new ji;class An{decode(t,i=null){let a=An.decode(t,i,!1);if(a==null||a.length===0||a[0]==null)throw ee.getNotFoundInstance();return a[0]}decodeMultiple(t,i=null){try{return An.decode(t,i,!0)}catch(a){throw a instanceof $||a instanceof P?ee.getNotFoundInstance():a}}static decode(t,i,a){const o=new Array,c=Pe.detectMultiple(t,i,a);for(const f of c.getPoints()){const g=Ye.decode(c.getBits(),f[4],f[5],f[6],f[7],An.getMinCodewordWidth(f),An.getMaxCodewordWidth(f)),x=new Ae(g.getText(),g.getRawBytes(),void 0,f,pe.PDF_417);x.putMetadata(ct.ERROR_CORRECTION_LEVEL,g.getECLevel());const A=g.getOther();A!=null&&x.putMetadata(ct.PDF417_EXTRA_METADATA,A),o.push(x)}return o.map(f=>f)}static getMaxWidth(t,i){return t==null||i==null?0:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMinWidth(t,i){return t==null||i==null?te.MAX_VALUE:Math.trunc(Math.abs(t.getX()-i.getX()))}static getMaxCodewordWidth(t){return Math.floor(Math.max(Math.max(An.getMaxWidth(t[0],t[4]),An.getMaxWidth(t[6],t[2])*Be.MODULES_IN_CODEWORD/Be.MODULES_IN_STOP_PATTERN),Math.max(An.getMaxWidth(t[1],t[5]),An.getMaxWidth(t[7],t[3])*Be.MODULES_IN_CODEWORD/Be.MODULES_IN_STOP_PATTERN)))}static getMinCodewordWidth(t){return Math.floor(Math.min(Math.min(An.getMinWidth(t[0],t[4]),An.getMinWidth(t[6],t[2])*Be.MODULES_IN_CODEWORD/Be.MODULES_IN_STOP_PATTERN),Math.min(An.getMinWidth(t[1],t[5]),An.getMinWidth(t[7],t[3])*Be.MODULES_IN_CODEWORD/Be.MODULES_IN_STOP_PATTERN)))}reset(){}}class ls extends b{}ls.kind="ReaderException";class fo{constructor(t,i){this.verbose=t===!0,i&&this.setHints(i)}decode(t,i){return i&&this.setHints(i),this.decodeInternal(t)}decodeWithState(t){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(t)}setHints(t){this.hints=t;const i=!d(t)&&t.get(be.TRY_HARDER)===!0,a=d(t)?null:t.get(be.POSSIBLE_FORMATS),o=new Array;if(!d(a)){const c=a.some(f=>f===pe.UPC_A||f===pe.UPC_E||f===pe.EAN_13||f===pe.EAN_8||f===pe.CODABAR||f===pe.CODE_39||f===pe.CODE_93||f===pe.CODE_128||f===pe.ITF||f===pe.RSS_14||f===pe.RSS_EXPANDED);c&&!i&&o.push(new ri(t,this.verbose)),a.includes(pe.QR_CODE)&&o.push(new Ui),a.includes(pe.DATA_MATRIX)&&o.push(new ki),a.includes(pe.AZTEC)&&o.push(new $a),a.includes(pe.PDF_417)&&o.push(new An),c&&i&&o.push(new ri(t,this.verbose))}o.length===0&&(i||o.push(new ri(t,this.verbose)),o.push(new Ui),o.push(new ki),o.push(new $a),o.push(new An),i&&o.push(new ri(t,this.verbose))),this.readers=o}reset(){if(this.readers!==null)for(const t of this.readers)t.reset()}decodeInternal(t){if(this.readers===null)throw new ls("No readers where selected, nothing can be read.");for(const i of this.readers)try{return i.decode(t,this.hints)}catch(a){if(a instanceof ls)continue}throw new ee("No MultiFormat Readers were able to detect the code.")}}class go extends we{constructor(t=null,i=500){const a=new fo;a.setHints(t),super(a,i)}decodeBitmap(t){return this.reader.decodeWithState(t)}}class Gu extends we{constructor(t=500){super(new An,t)}}class Yu extends we{constructor(t=500){super(new Ui,t)}}var ll;(function(T){T[T.ERROR_CORRECTION=0]="ERROR_CORRECTION",T[T.CHARACTER_SET=1]="CHARACTER_SET",T[T.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",T[T.MIN_SIZE=3]="MIN_SIZE",T[T.MAX_SIZE=4]="MAX_SIZE",T[T.MARGIN=5]="MARGIN",T[T.PDF417_COMPACT=6]="PDF417_COMPACT",T[T.PDF417_COMPACTION=7]="PDF417_COMPACTION",T[T.PDF417_DIMENSIONS=8]="PDF417_DIMENSIONS",T[T.AZTEC_LAYERS=9]="AZTEC_LAYERS",T[T.QR_VERSION=10]="QR_VERSION"})(ll||(ll={}));var sn=ll;class Ta{constructor(t){this.field=t,this.cachedGenerators=[],this.cachedGenerators.push(new yn(t,Int32Array.from([1])))}buildGenerator(t){const i=this.cachedGenerators;if(t>=i.length){let a=i[i.length-1];const o=this.field;for(let c=i.length;c<=t;c++){const f=a.multiply(new yn(o,Int32Array.from([1,o.exp(c-1+o.getGeneratorBase())])));i.push(f),a=f}}return i[t]}encode(t,i){if(i===0)throw new D("No error correction bytes");const a=t.length-i;if(a<=0)throw new D("No data bytes provided");const o=this.buildGenerator(i),c=new Int32Array(a);K.arraycopy(t,0,c,0,a);let f=new yn(this.field,c);f=f.multiplyByMonomial(i,1);const x=f.divide(o)[1].getCoefficients(),A=i-x.length;for(let v=0;v<A;v++)t[a+v]=0;K.arraycopy(x,0,t,a+A,x.length)}}class qt{constructor(){}static applyMaskPenaltyRule1(t){return qt.applyMaskPenaltyRule1Internal(t,!0)+qt.applyMaskPenaltyRule1Internal(t,!1)}static applyMaskPenaltyRule2(t){let i=0;const a=t.getArray(),o=t.getWidth(),c=t.getHeight();for(let f=0;f<c-1;f++){const g=a[f];for(let x=0;x<o-1;x++){const A=g[x];A===g[x+1]&&A===a[f+1][x]&&A===a[f+1][x+1]&&i++}}return qt.N2*i}static applyMaskPenaltyRule3(t){let i=0;const a=t.getArray(),o=t.getWidth(),c=t.getHeight();for(let f=0;f<c;f++)for(let g=0;g<o;g++){const x=a[f];g+6<o&&x[g]===1&&x[g+1]===0&&x[g+2]===1&&x[g+3]===1&&x[g+4]===1&&x[g+5]===0&&x[g+6]===1&&(qt.isWhiteHorizontal(x,g-4,g)||qt.isWhiteHorizontal(x,g+7,g+11))&&i++,f+6<c&&a[f][g]===1&&a[f+1][g]===0&&a[f+2][g]===1&&a[f+3][g]===1&&a[f+4][g]===1&&a[f+5][g]===0&&a[f+6][g]===1&&(qt.isWhiteVertical(a,g,f-4,f)||qt.isWhiteVertical(a,g,f+7,f+11))&&i++}return i*qt.N3}static isWhiteHorizontal(t,i,a){i=Math.max(i,0),a=Math.min(a,t.length);for(let o=i;o<a;o++)if(t[o]===1)return!1;return!0}static isWhiteVertical(t,i,a,o){a=Math.max(a,0),o=Math.min(o,t.length);for(let c=a;c<o;c++)if(t[c][i]===1)return!1;return!0}static applyMaskPenaltyRule4(t){let i=0;const a=t.getArray(),o=t.getWidth(),c=t.getHeight();for(let x=0;x<c;x++){const A=a[x];for(let v=0;v<o;v++)A[v]===1&&i++}const f=t.getHeight()*t.getWidth();return Math.floor(Math.abs(i*2-f)*10/f)*qt.N4}static getDataMaskBit(t,i,a){let o,c;switch(t){case 0:o=a+i&1;break;case 1:o=a&1;break;case 2:o=i%3;break;case 3:o=(a+i)%3;break;case 4:o=Math.floor(a/2)+Math.floor(i/3)&1;break;case 5:c=a*i,o=(c&1)+c%3;break;case 6:c=a*i,o=(c&1)+c%3&1;break;case 7:c=a*i,o=c%3+(a+i&1)&1;break;default:throw new D("Invalid mask pattern: "+t)}return o===0}static applyMaskPenaltyRule1Internal(t,i){let a=0;const o=i?t.getHeight():t.getWidth(),c=i?t.getWidth():t.getHeight(),f=t.getArray();for(let g=0;g<o;g++){let x=0,A=-1;for(let v=0;v<c;v++){const O=i?f[g][v]:f[v][g];O===A?x++:(x>=5&&(a+=qt.N1+(x-5)),x=1,A=O)}x>=5&&(a+=qt.N1+(x-5))}return a}}qt.N1=3,qt.N2=3,qt.N3=40,qt.N4=10;class os{constructor(t,i){this.width=t,this.height=i;const a=new Array(i);for(let o=0;o!==i;o++)a[o]=new Uint8Array(t);this.bytes=a}getHeight(){return this.height}getWidth(){return this.width}get(t,i){return this.bytes[i][t]}getArray(){return this.bytes}setNumber(t,i,a){this.bytes[i][t]=a}setBoolean(t,i,a){this.bytes[i][t]=a?1:0}clear(t){for(const i of this.bytes)fe.fill(i,t)}equals(t){if(!(t instanceof os))return!1;const i=t;if(this.width!==i.width||this.height!==i.height)return!1;for(let a=0,o=this.height;a<o;++a){const c=this.bytes[a],f=i.bytes[a];for(let g=0,x=this.width;g<x;++g)if(c[g]!==f[g])return!1}return!0}toString(){const t=new nt;for(let i=0,a=this.height;i<a;++i){const o=this.bytes[i];for(let c=0,f=this.width;c<f;++c)switch(o[c]){case 0:t.append(" 0");break;case 1:t.append(" 1");break;default:t.append("  ");break}t.append(`
`)}return t.toString()}}class or{constructor(){this.maskPattern=-1}getMode(){return this.mode}getECLevel(){return this.ecLevel}getVersion(){return this.version}getMaskPattern(){return this.maskPattern}getMatrix(){return this.matrix}toString(){const t=new nt;return t.append(`<<
`),t.append(" mode: "),t.append(this.mode?this.mode.toString():"null"),t.append(`
 ecLevel: `),t.append(this.ecLevel?this.ecLevel.toString():"null"),t.append(`
 version: `),t.append(this.version?this.version.toString():"null"),t.append(`
 maskPattern: `),t.append(this.maskPattern.toString()),this.matrix?(t.append(`
 matrix:
`),t.append(this.matrix.toString())):t.append(`
 matrix: null
`),t.append(`>>
`),t.toString()}setMode(t){this.mode=t}setECLevel(t){this.ecLevel=t}setVersion(t){this.version=t}setMaskPattern(t){this.maskPattern=t}setMatrix(t){this.matrix=t}static isValidMaskPattern(t){return t>=0&&t<or.NUM_MASK_PATTERNS}}or.NUM_MASK_PATTERNS=8;class bt extends b{}bt.kind="WriterException";class Le{constructor(){}static clearMatrix(t){t.clear(255)}static buildMatrix(t,i,a,o,c){Le.clearMatrix(c),Le.embedBasicPatterns(a,c),Le.embedTypeInfo(i,o,c),Le.maybeEmbedVersionInfo(a,c),Le.embedDataBits(t,o,c)}static embedBasicPatterns(t,i){Le.embedPositionDetectionPatternsAndSeparators(i),Le.embedDarkDotAtLeftBottomCorner(i),Le.maybeEmbedPositionAdjustmentPatterns(t,i),Le.embedTimingPatterns(i)}static embedTypeInfo(t,i,a){const o=new xe;Le.makeTypeInfoBits(t,i,o);for(let c=0,f=o.getSize();c<f;++c){const g=o.get(o.getSize()-1-c),x=Le.TYPE_INFO_COORDINATES[c],A=x[0],v=x[1];if(a.setBoolean(A,v,g),c<8){const O=a.getWidth()-c-1;a.setBoolean(O,8,g)}else{const I=a.getHeight()-7+(c-8);a.setBoolean(8,I,g)}}}static maybeEmbedVersionInfo(t,i){if(t.getVersionNumber()<7)return;const a=new xe;Le.makeVersionInfoBits(t,a);let o=17;for(let c=0;c<6;++c)for(let f=0;f<3;++f){const g=a.get(o);o--,i.setBoolean(c,i.getHeight()-11+f,g),i.setBoolean(i.getHeight()-11+f,c,g)}}static embedDataBits(t,i,a){let o=0,c=-1,f=a.getWidth()-1,g=a.getHeight()-1;for(;f>0;){for(f===6&&(f-=1);g>=0&&g<a.getHeight();){for(let x=0;x<2;++x){const A=f-x;if(!Le.isEmpty(a.get(A,g)))continue;let v;o<t.getSize()?(v=t.get(o),++o):v=!1,i!==255&&qt.getDataMaskBit(i,A,g)&&(v=!v),a.setBoolean(A,g,v)}g+=c}c=-c,g+=c,f-=2}if(o!==t.getSize())throw new bt("Not all bits consumed: "+o+"/"+t.getSize())}static findMSBSet(t){return 32-te.numberOfLeadingZeros(t)}static calculateBCHCode(t,i){if(i===0)throw new D("0 polynomial");const a=Le.findMSBSet(i);for(t<<=a-1;Le.findMSBSet(t)>=a;)t^=i<<Le.findMSBSet(t)-a;return t}static makeTypeInfoBits(t,i,a){if(!or.isValidMaskPattern(i))throw new bt("Invalid mask pattern");const o=t.getBits()<<3|i;a.appendBits(o,5);const c=Le.calculateBCHCode(o,Le.TYPE_INFO_POLY);a.appendBits(c,10);const f=new xe;if(f.appendBits(Le.TYPE_INFO_MASK_PATTERN,15),a.xor(f),a.getSize()!==15)throw new bt("should not happen but we got: "+a.getSize())}static makeVersionInfoBits(t,i){i.appendBits(t.getVersionNumber(),6);const a=Le.calculateBCHCode(t.getVersionNumber(),Le.VERSION_INFO_POLY);if(i.appendBits(a,12),i.getSize()!==18)throw new bt("should not happen but we got: "+i.getSize())}static isEmpty(t){return t===255}static embedTimingPatterns(t){for(let i=8;i<t.getWidth()-8;++i){const a=(i+1)%2;Le.isEmpty(t.get(i,6))&&t.setNumber(i,6,a),Le.isEmpty(t.get(6,i))&&t.setNumber(6,i,a)}}static embedDarkDotAtLeftBottomCorner(t){if(t.get(8,t.getHeight()-8)===0)throw new bt;t.setNumber(8,t.getHeight()-8,1)}static embedHorizontalSeparationPattern(t,i,a){for(let o=0;o<8;++o){if(!Le.isEmpty(a.get(t+o,i)))throw new bt;a.setNumber(t+o,i,0)}}static embedVerticalSeparationPattern(t,i,a){for(let o=0;o<7;++o){if(!Le.isEmpty(a.get(t,i+o)))throw new bt;a.setNumber(t,i+o,0)}}static embedPositionAdjustmentPattern(t,i,a){for(let o=0;o<5;++o){const c=Le.POSITION_ADJUSTMENT_PATTERN[o];for(let f=0;f<5;++f)a.setNumber(t+f,i+o,c[f])}}static embedPositionDetectionPattern(t,i,a){for(let o=0;o<7;++o){const c=Le.POSITION_DETECTION_PATTERN[o];for(let f=0;f<7;++f)a.setNumber(t+f,i+o,c[f])}}static embedPositionDetectionPatternsAndSeparators(t){const i=Le.POSITION_DETECTION_PATTERN[0].length;Le.embedPositionDetectionPattern(0,0,t),Le.embedPositionDetectionPattern(t.getWidth()-i,0,t),Le.embedPositionDetectionPattern(0,t.getWidth()-i,t);const a=8;Le.embedHorizontalSeparationPattern(0,a-1,t),Le.embedHorizontalSeparationPattern(t.getWidth()-a,a-1,t),Le.embedHorizontalSeparationPattern(0,t.getWidth()-a,t);const o=7;Le.embedVerticalSeparationPattern(o,0,t),Le.embedVerticalSeparationPattern(t.getHeight()-o-1,0,t),Le.embedVerticalSeparationPattern(o,t.getHeight()-o,t)}static maybeEmbedPositionAdjustmentPatterns(t,i){if(t.getVersionNumber()<2)return;const a=t.getVersionNumber()-1,o=Le.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[a];for(let c=0,f=o.length;c!==f;c++){const g=o[c];if(g>=0)for(let x=0;x!==f;x++){const A=o[x];A>=0&&Le.isEmpty(i.get(A,g))&&Le.embedPositionAdjustmentPattern(A-2,g-2,i)}}}}Le.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),Le.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),Le.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),Le.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),Le.VERSION_INFO_POLY=7973,Le.TYPE_INFO_POLY=1335,Le.TYPE_INFO_MASK_PATTERN=21522;class qu{constructor(t,i){this.dataBytes=t,this.errorCorrectionBytes=i}getDataBytes(){return this.dataBytes}getErrorCorrectionBytes(){return this.errorCorrectionBytes}}class kt{constructor(){}static calculateMaskPenalty(t){return qt.applyMaskPenaltyRule1(t)+qt.applyMaskPenaltyRule2(t)+qt.applyMaskPenaltyRule3(t)+qt.applyMaskPenaltyRule4(t)}static encode(t,i,a=null){let o=kt.DEFAULT_BYTE_MODE_ENCODING;const c=a!==null&&a.get(sn.CHARACTER_SET)!==void 0;c&&(o=a.get(sn.CHARACTER_SET).toString());const f=this.chooseMode(t,o),g=new xe;if(f===Ne.BYTE&&(c||kt.DEFAULT_BYTE_MODE_ENCODING!==o)){const de=ce.getCharacterSetECIByName(o);de!==void 0&&this.appendECI(de,g)}this.appendModeInfo(f,g);const x=new xe;this.appendBytes(t,f,x,o);let A;if(a!==null&&a.get(sn.QR_VERSION)!==void 0){const de=Number.parseInt(a.get(sn.QR_VERSION).toString(),10);A=Ce.getVersionForNumber(de);const he=this.calculateBitsNeeded(f,g,x,A);if(!this.willFit(he,A,i))throw new bt("Data too big for requested version")}else A=this.recommendVersion(i,f,g,x);const v=new xe;v.appendBitArray(g);const O=f===Ne.BYTE?x.getSizeInBytes():t.length;this.appendLengthInfo(O,A,f,v),v.appendBitArray(x);const I=A.getECBlocksForLevel(i),B=A.getTotalCodewords()-I.getTotalECCodewords();this.terminateBits(B,v);const k=this.interleaveWithECBytes(v,A.getTotalCodewords(),B,I.getNumBlocks()),U=new or;U.setECLevel(i),U.setMode(f),U.setVersion(A);const V=A.getDimensionForVersion(),Z=new os(V,V),ge=this.chooseMaskPattern(k,i,A,Z);return U.setMaskPattern(ge),Le.buildMatrix(k,i,A,ge,Z),U.setMatrix(Z),U}static recommendVersion(t,i,a,o){const c=this.calculateBitsNeeded(i,a,o,Ce.getVersionForNumber(1)),f=this.chooseVersion(c,t),g=this.calculateBitsNeeded(i,a,o,f);return this.chooseVersion(g,t)}static calculateBitsNeeded(t,i,a,o){return i.getSize()+t.getCharacterCountBits(o)+a.getSize()}static getAlphanumericCode(t){return t<kt.ALPHANUMERIC_TABLE.length?kt.ALPHANUMERIC_TABLE[t]:-1}static chooseMode(t,i=null){if(ce.SJIS.getName()===i&&this.isOnlyDoubleByteKanji(t))return Ne.KANJI;let a=!1,o=!1;for(let c=0,f=t.length;c<f;++c){const g=t.charAt(c);if(kt.isDigit(g))a=!0;else if(this.getAlphanumericCode(g.charCodeAt(0))!==-1)o=!0;else return Ne.BYTE}return o?Ne.ALPHANUMERIC:a?Ne.NUMERIC:Ne.BYTE}static isOnlyDoubleByteKanji(t){let i;try{i=Pt.encode(t,ce.SJIS)}catch{return!1}const a=i.length;if(a%2!==0)return!1;for(let o=0;o<a;o+=2){const c=i[o]&255;if((c<129||c>159)&&(c<224||c>235))return!1}return!0}static chooseMaskPattern(t,i,a,o){let c=Number.MAX_SAFE_INTEGER,f=-1;for(let g=0;g<or.NUM_MASK_PATTERNS;g++){Le.buildMatrix(t,i,a,g,o);let x=this.calculateMaskPenalty(o);x<c&&(c=x,f=g)}return f}static chooseVersion(t,i){for(let a=1;a<=40;a++){const o=Ce.getVersionForNumber(a);if(kt.willFit(t,o,i))return o}throw new bt("Data too big")}static willFit(t,i,a){const o=i.getTotalCodewords(),f=i.getECBlocksForLevel(a).getTotalECCodewords(),g=o-f,x=(t+7)/8;return g>=x}static terminateBits(t,i){const a=t*8;if(i.getSize()>a)throw new bt("data bits cannot fit in the QR Code"+i.getSize()+" > "+a);for(let f=0;f<4&&i.getSize()<a;++f)i.appendBit(!1);const o=i.getSize()&7;if(o>0)for(let f=o;f<8;f++)i.appendBit(!1);const c=t-i.getSizeInBytes();for(let f=0;f<c;++f)i.appendBits((f&1)===0?236:17,8);if(i.getSize()!==a)throw new bt("Bits size does not equal capacity")}static getNumDataBytesAndNumECBytesForBlockID(t,i,a,o,c,f){if(o>=a)throw new bt("Block ID too large");const g=t%a,x=a-g,A=Math.floor(t/a),v=A+1,O=Math.floor(i/a),I=O+1,B=A-O,k=v-I;if(B!==k)throw new bt("EC bytes mismatch");if(a!==x+g)throw new bt("RS blocks mismatch");if(t!==(O+B)*x+(I+k)*g)throw new bt("Total bytes mismatch");o<x?(c[0]=O,f[0]=B):(c[0]=I,f[0]=k)}static interleaveWithECBytes(t,i,a,o){if(t.getSizeInBytes()!==a)throw new bt("Number of bits and data bytes does not match");let c=0,f=0,g=0;const x=new Array;for(let v=0;v<o;++v){const O=new Int32Array(1),I=new Int32Array(1);kt.getNumDataBytesAndNumECBytesForBlockID(i,a,o,v,O,I);const B=O[0],k=new Uint8Array(B);t.toBytes(8*c,k,0,B);const U=kt.generateECBytes(k,I[0]);x.push(new qu(k,U)),f=Math.max(f,B),g=Math.max(g,U.length),c+=O[0]}if(a!==c)throw new bt("Data bytes does not match offset");const A=new xe;for(let v=0;v<f;++v)for(const O of x){const I=O.getDataBytes();v<I.length&&A.appendBits(I[v],8)}for(let v=0;v<g;++v)for(const O of x){const I=O.getErrorCorrectionBytes();v<I.length&&A.appendBits(I[v],8)}if(i!==A.getSizeInBytes())throw new bt("Interleaving error: "+i+" and "+A.getSizeInBytes()+" differ.");return A}static generateECBytes(t,i){const a=t.length,o=new Int32Array(a+i);for(let f=0;f<a;f++)o[f]=t[f]&255;new Ta(ht.QR_CODE_FIELD_256).encode(o,i);const c=new Uint8Array(i);for(let f=0;f<i;f++)c[f]=o[a+f];return c}static appendModeInfo(t,i){i.appendBits(t.getBits(),4)}static appendLengthInfo(t,i,a,o){const c=a.getCharacterCountBits(i);if(t>=1<<c)throw new bt(t+" is bigger than "+((1<<c)-1));o.appendBits(t,c)}static appendBytes(t,i,a,o){switch(i){case Ne.NUMERIC:kt.appendNumericBytes(t,a);break;case Ne.ALPHANUMERIC:kt.appendAlphanumericBytes(t,a);break;case Ne.BYTE:kt.append8BitBytes(t,a,o);break;case Ne.KANJI:kt.appendKanjiBytes(t,a);break;default:throw new bt("Invalid mode: "+i)}}static getDigit(t){return t.charCodeAt(0)-48}static isDigit(t){const i=kt.getDigit(t);return i>=0&&i<=9}static appendNumericBytes(t,i){const a=t.length;let o=0;for(;o<a;){const c=kt.getDigit(t.charAt(o));if(o+2<a){const f=kt.getDigit(t.charAt(o+1)),g=kt.getDigit(t.charAt(o+2));i.appendBits(c*100+f*10+g,10),o+=3}else if(o+1<a){const f=kt.getDigit(t.charAt(o+1));i.appendBits(c*10+f,7),o+=2}else i.appendBits(c,4),o++}}static appendAlphanumericBytes(t,i){const a=t.length;let o=0;for(;o<a;){const c=kt.getAlphanumericCode(t.charCodeAt(o));if(c===-1)throw new bt;if(o+1<a){const f=kt.getAlphanumericCode(t.charCodeAt(o+1));if(f===-1)throw new bt;i.appendBits(c*45+f,11),o+=2}else i.appendBits(c,6),o++}}static append8BitBytes(t,i,a){let o;try{o=Pt.encode(t,a)}catch(c){throw new bt(c)}for(let c=0,f=o.length;c!==f;c++){const g=o[c];i.appendBits(g,8)}}static appendKanjiBytes(t,i){let a;try{a=Pt.encode(t,ce.SJIS)}catch(c){throw new bt(c)}const o=a.length;for(let c=0;c<o;c+=2){const f=a[c]&255,g=a[c+1]&255,x=f<<8&4294967295|g;let A=-1;if(x>=33088&&x<=40956?A=x-33088:x>=57408&&x<=60351&&(A=x-49472),A===-1)throw new bt("Invalid byte sequence");const v=(A>>8)*192+(A&255);i.appendBits(v,13)}}static appendECI(t,i){i.appendBits(Ne.ECI.getBits(),4),i.appendBits(t.getValue(),8)}}kt.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),kt.DEFAULT_BYTE_MODE_ENCODING=ce.UTF8.getName();class ur{write(t,i,a,o=null){if(t.length===0)throw new D("Found empty contents");if(i<0||a<0)throw new D("Requested dimensions are too small: "+i+"x"+a);let c=Ze.L,f=ur.QUIET_ZONE_SIZE;o!==null&&(o.get(sn.ERROR_CORRECTION)!==void 0&&(c=Ze.fromString(o.get(sn.ERROR_CORRECTION).toString())),o.get(sn.MARGIN)!==void 0&&(f=Number.parseInt(o.get(sn.MARGIN).toString(),10)));const g=kt.encode(t,c,o);return this.renderResult(g,i,a,f)}writeToDom(t,i,a,o,c=null){typeof t=="string"&&(t=document.querySelector(t));const f=this.write(i,a,o,c);t&&t.appendChild(f)}renderResult(t,i,a,o){const c=t.getMatrix();if(c===null)throw new Gn;const f=c.getWidth(),g=c.getHeight(),x=f+o*2,A=g+o*2,v=Math.max(i,x),O=Math.max(a,A),I=Math.min(Math.floor(v/x),Math.floor(O/A)),B=Math.floor((v-f*I)/2),k=Math.floor((O-g*I)/2),U=this.createSVGElement(v,O);for(let V=0,Z=k;V<g;V++,Z+=I)for(let ge=0,de=B;ge<f;ge++,de+=I)if(c.get(ge,V)===1){const he=this.createSvgRectElement(de,Z,I,I);U.appendChild(he)}return U}createSVGElement(t,i){const a=document.createElementNS(ur.SVG_NS,"svg");return a.setAttributeNS(null,"height",t.toString()),a.setAttributeNS(null,"width",i.toString()),a}createSvgRectElement(t,i,a,o){const c=document.createElementNS(ur.SVG_NS,"rect");return c.setAttributeNS(null,"x",t.toString()),c.setAttributeNS(null,"y",i.toString()),c.setAttributeNS(null,"height",a.toString()),c.setAttributeNS(null,"width",o.toString()),c.setAttributeNS(null,"fill","#000000"),c}}ur.QUIET_ZONE_SIZE=4,ur.SVG_NS="http://www.w3.org/2000/svg";class Vr{encode(t,i,a,o,c){if(t.length===0)throw new D("Found empty contents");if(i!==pe.QR_CODE)throw new D("Can only encode QR_CODE, but got "+i);if(a<0||o<0)throw new D(`Requested dimensions are too small: ${a}x${o}`);let f=Ze.L,g=Vr.QUIET_ZONE_SIZE;c!==null&&(c.get(sn.ERROR_CORRECTION)!==void 0&&(f=Ze.fromString(c.get(sn.ERROR_CORRECTION).toString())),c.get(sn.MARGIN)!==void 0&&(g=Number.parseInt(c.get(sn.MARGIN).toString(),10)));const x=kt.encode(t,f,c);return Vr.renderResult(x,a,o,g)}static renderResult(t,i,a,o){const c=t.getMatrix();if(c===null)throw new Gn;const f=c.getWidth(),g=c.getHeight(),x=f+o*2,A=g+o*2,v=Math.max(i,x),O=Math.max(a,A),I=Math.min(Math.floor(v/x),Math.floor(O/A)),B=Math.floor((v-f*I)/2),k=Math.floor((O-g*I)/2),U=new Ot(v,O);for(let V=0,Z=k;V<g;V++,Z+=I)for(let ge=0,de=B;ge<f;ge++,de+=I)c.get(ge,V)===1&&U.setRegion(de,Z,I,I);return U}}Vr.QUIET_ZONE_SIZE=4;class Xu{encode(t,i,a,o,c){let f;if(i===pe.QR_CODE)f=new Vr;else throw new D("No encoder available for format "+i);return f.encode(t,i,a,o,c)}}class Si extends De{constructor(t,i,a,o,c,f,g,x){if(super(f,g),this.yuvData=t,this.dataWidth=i,this.dataHeight=a,this.left=o,this.top=c,o+f>i||c+g>a)throw new D("Crop rectangle does not fit within image data.");x&&this.reverseHorizontal(f,g)}getRow(t,i){if(t<0||t>=this.getHeight())throw new D("Requested row is outside the image: "+t);const a=this.getWidth();(i==null||i.length<a)&&(i=new Uint8ClampedArray(a));const o=(t+this.top)*this.dataWidth+this.left;return K.arraycopy(this.yuvData,o,i,0,a),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.yuvData;const a=t*i,o=new Uint8ClampedArray(a);let c=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return K.arraycopy(this.yuvData,c,o,0,a),o;for(let f=0;f<i;f++){const g=f*t;K.arraycopy(this.yuvData,c,o,g,t),c+=this.dataWidth}return o}isCropSupported(){return!0}crop(t,i,a,o){return new Si(this.yuvData,this.dataWidth,this.dataHeight,this.left+t,this.top+i,a,o,!1)}renderThumbnail(){const t=this.getWidth()/Si.THUMBNAIL_SCALE_FACTOR,i=this.getHeight()/Si.THUMBNAIL_SCALE_FACTOR,a=new Int32Array(t*i),o=this.yuvData;let c=this.top*this.dataWidth+this.left;for(let f=0;f<i;f++){const g=f*t;for(let x=0;x<t;x++){const A=o[c+x*Si.THUMBNAIL_SCALE_FACTOR]&255;a[g+x]=4278190080|A*65793}c+=this.dataWidth*Si.THUMBNAIL_SCALE_FACTOR}return a}getThumbnailWidth(){return this.getWidth()/Si.THUMBNAIL_SCALE_FACTOR}getThumbnailHeight(){return this.getHeight()/Si.THUMBNAIL_SCALE_FACTOR}reverseHorizontal(t,i){const a=this.yuvData;for(let o=0,c=this.top*this.dataWidth+this.left;o<i;o++,c+=this.dataWidth){const f=c+t/2;for(let g=c,x=c+t-1;g<f;g++,x--){const A=a[g];a[g]=a[x],a[x]=A}}}invert(){return new Qe(this)}}Si.THUMBNAIL_SCALE_FACTOR=2;class ol extends De{constructor(t,i,a,o,c,f,g){if(super(i,a),this.dataWidth=o,this.dataHeight=c,this.left=f,this.top=g,t.BYTES_PER_ELEMENT===4){const x=i*a,A=new Uint8ClampedArray(x);for(let v=0;v<x;v++){const O=t[v],I=O>>16&255,B=O>>7&510,k=O&255;A[v]=(I+B+k)/4&255}this.luminances=A}else this.luminances=t;if(o===void 0&&(this.dataWidth=i),c===void 0&&(this.dataHeight=a),f===void 0&&(this.left=0),g===void 0&&(this.top=0),this.left+i>this.dataWidth||this.top+a>this.dataHeight)throw new D("Crop rectangle does not fit within image data.")}getRow(t,i){if(t<0||t>=this.getHeight())throw new D("Requested row is outside the image: "+t);const a=this.getWidth();(i==null||i.length<a)&&(i=new Uint8ClampedArray(a));const o=(t+this.top)*this.dataWidth+this.left;return K.arraycopy(this.luminances,o,i,0,a),i}getMatrix(){const t=this.getWidth(),i=this.getHeight();if(t===this.dataWidth&&i===this.dataHeight)return this.luminances;const a=t*i,o=new Uint8ClampedArray(a);let c=this.top*this.dataWidth+this.left;if(t===this.dataWidth)return K.arraycopy(this.luminances,c,o,0,a),o;for(let f=0;f<i;f++){const g=f*t;K.arraycopy(this.luminances,c,o,g,t),c+=this.dataWidth}return o}isCropSupported(){return!0}crop(t,i,a,o){return new ol(this.luminances,a,o,this.dataWidth,this.dataHeight,this.left+t,this.top+i)}invert(){return new Qe(this)}}class mo extends ce{static forName(t){return this.getCharacterSetECIByName(t)}}class Oa{}Oa.ISO_8859_1=ce.ISO8859_1;class Gr{isCompact(){return this.compact}setCompact(t){this.compact=t}getSize(){return this.size}setSize(t){this.size=t}getLayers(){return this.layers}setLayers(t){this.layers=t}getCodeWords(){return this.codeWords}setCodeWords(t){this.codeWords=t}getMatrix(){return this.matrix}setMatrix(t){this.matrix=t}}class yo{static singletonList(t){return[t]}static min(t,i){return t.sort(i)[0]}}class po{constructor(t){this.previous=t}getPrevious(){return this.previous}}class cr extends po{constructor(t,i,a){super(t),this.value=i,this.bitCount=a}appendTo(t,i){t.appendBits(this.value,this.bitCount)}add(t,i){return new cr(this,t,i)}addBinaryShift(t,i){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new cr(this,t,i)}toString(){let t=this.value&(1<<this.bitCount)-1;return t|=1<<this.bitCount,"<"+te.toBinaryString(t|1<<this.bitCount).substring(1)+">"}}class us extends cr{constructor(t,i,a){super(t,0,0),this.binaryShiftStart=i,this.binaryShiftByteCount=a}appendTo(t,i){for(let a=0;a<this.binaryShiftByteCount;a++)(a===0||a===31&&this.binaryShiftByteCount<=62)&&(t.appendBits(31,5),this.binaryShiftByteCount>62?t.appendBits(this.binaryShiftByteCount-31,16):a===0?t.appendBits(Math.min(this.binaryShiftByteCount,31),5):t.appendBits(this.binaryShiftByteCount-31,5)),t.appendBits(i[this.binaryShiftStart+a],8)}addBinaryShift(t,i){return new us(this,t,i)}toString(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"}}function xo(T,t,i){return new us(T,t,i)}function Yr(T,t,i){return new cr(T,t,i)}const qr=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],er=0,cs=1,Zn=2,ul=3,li=4,Ia=new cr(null,0,0),hr=[Int32Array.from([0,(5<<16)+28,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(9<<16)+480+14,0,(5<<16)+30,(5<<16)+29,656318]),Int32Array.from([(4<<16)+14,(9<<16)+448+28,0,(9<<16)+448+29,932798]),Int32Array.from([(5<<16)+29,(5<<16)+28,656318,0,(5<<16)+30]),Int32Array.from([(5<<16)+31,656380,656382,656381,0])];function Zu(T){for(let t of T)fe.fill(t,-1);return T[er][li]=0,T[cs][li]=0,T[cs][er]=28,T[ul][li]=0,T[Zn][li]=0,T[Zn][er]=15,T}const Na=Zu(fe.createInt32Array(6,6));class oi{constructor(t,i,a,o){this.token=t,this.mode=i,this.binaryShiftByteCount=a,this.bitCount=o}getMode(){return this.mode}getToken(){return this.token}getBinaryShiftByteCount(){return this.binaryShiftByteCount}getBitCount(){return this.bitCount}latchAndAppend(t,i){let a=this.bitCount,o=this.token;if(t!==this.mode){let f=hr[this.mode][t];o=Yr(o,f&65535,f>>16),a+=f>>16}let c=t===Zn?4:5;return o=Yr(o,i,c),new oi(o,t,0,a+c)}shiftAndAppend(t,i){let a=this.token,o=this.mode===Zn?4:5;return a=Yr(a,Na[this.mode][t],o),a=Yr(a,i,5),new oi(a,this.mode,0,this.bitCount+o+5)}addBinaryShiftChar(t){let i=this.token,a=this.mode,o=this.bitCount;if(this.mode===li||this.mode===Zn){let g=hr[a][er];i=Yr(i,g&65535,g>>16),o+=g>>16,a=er}let c=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,f=new oi(i,a,this.binaryShiftByteCount+1,o+c);return f.binaryShiftByteCount===2078&&(f=f.endBinaryShift(t+1)),f}endBinaryShift(t){if(this.binaryShiftByteCount===0)return this;let i=this.token;return i=xo(i,t-this.binaryShiftByteCount,this.binaryShiftByteCount),new oi(i,this.mode,0,this.bitCount)}isBetterThanOrEqualTo(t){let i=this.bitCount+(hr[this.mode][t.mode]>>16);return this.binaryShiftByteCount<t.binaryShiftByteCount?i+=oi.calculateBinaryShiftCost(t)-oi.calculateBinaryShiftCost(this):this.binaryShiftByteCount>t.binaryShiftByteCount&&t.binaryShiftByteCount>0&&(i+=10),i<=t.bitCount}toBitArray(t){let i=[];for(let o=this.endBinaryShift(t.length).token;o!==null;o=o.getPrevious())i.unshift(o);let a=new xe;for(const o of i)o.appendTo(a,t);return a}toString(){return Te.format("%s bits=%d bytes=%d",qr[this.mode],this.bitCount,this.binaryShiftByteCount)}static calculateBinaryShiftCost(t){return t.binaryShiftByteCount>62?21:t.binaryShiftByteCount>31?20:t.binaryShiftByteCount>0?10:0}}oi.INITIAL_STATE=new oi(Ia,er,0,0);function wo(T){const t=Te.getCharCode(" "),i=Te.getCharCode("."),a=Te.getCharCode(",");T[er][t]=1;const o=Te.getCharCode("Z"),c=Te.getCharCode("A");for(let I=c;I<=o;I++)T[er][I]=I-c+2;T[cs][t]=1;const f=Te.getCharCode("z"),g=Te.getCharCode("a");for(let I=g;I<=f;I++)T[cs][I]=I-g+2;T[Zn][t]=1;const x=Te.getCharCode("9"),A=Te.getCharCode("0");for(let I=A;I<=x;I++)T[Zn][I]=I-A+2;T[Zn][a]=12,T[Zn][i]=13;const v=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~",""];for(let I=0;I<v.length;I++)T[ul][Te.getCharCode(v[I])]=I;const O=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"];for(let I=0;I<O.length;I++)Te.getCharCode(O[I])>0&&(T[li][Te.getCharCode(O[I])]=I);return T}const Ra=wo(fe.createInt32Array(5,256));class fr{constructor(t){this.text=t}encode(){const t=Te.getCharCode(" "),i=Te.getCharCode(`
`);let a=yo.singletonList(oi.INITIAL_STATE);for(let c=0;c<this.text.length;c++){let f,g=c+1<this.text.length?this.text[c+1]:0;switch(this.text[c]){case Te.getCharCode("\r"):f=g===i?2:0;break;case Te.getCharCode("."):f=g===t?3:0;break;case Te.getCharCode(","):f=g===t?4:0;break;case Te.getCharCode(":"):f=g===t?5:0;break;default:f=0}f>0?(a=fr.updateStateListForPair(a,c,f),c++):a=this.updateStateListForChar(a,c)}return yo.min(a,(c,f)=>c.getBitCount()-f.getBitCount()).toBitArray(this.text)}updateStateListForChar(t,i){const a=[];for(let o of t)this.updateStateForChar(o,i,a);return fr.simplifyStates(a)}updateStateForChar(t,i,a){let o=this.text[i]&255,c=Ra[t.getMode()][o]>0,f=null;for(let g=0;g<=li;g++){let x=Ra[g][o];if(x>0){if(f==null&&(f=t.endBinaryShift(i)),!c||g===t.getMode()||g===Zn){const A=f.latchAndAppend(g,x);a.push(A)}if(!c&&Na[t.getMode()][g]>=0){const A=f.shiftAndAppend(g,x);a.push(A)}}}if(t.getBinaryShiftByteCount()>0||Ra[t.getMode()][o]===0){let g=t.addBinaryShiftChar(i);a.push(g)}}static updateStateListForPair(t,i,a){const o=[];for(let c of t)this.updateStateForPair(c,i,a,o);return this.simplifyStates(o)}static updateStateForPair(t,i,a,o){let c=t.endBinaryShift(i);if(o.push(c.latchAndAppend(li,a)),t.getMode()!==li&&o.push(c.shiftAndAppend(li,a)),a===3||a===4){let f=c.latchAndAppend(Zn,16-a).latchAndAppend(Zn,1);o.push(f)}if(t.getBinaryShiftByteCount()>0){let f=t.addBinaryShiftChar(i).addBinaryShiftChar(i+1);o.push(f)}}static simplifyStates(t){let i=[];for(const a of t){let o=!0;for(const c of i){if(c.isBetterThanOrEqualTo(a)){o=!1;break}a.isBetterThanOrEqualTo(c)&&(i=i.filter(f=>f!==c))}o&&i.push(a)}return i}}class at{constructor(){}static encodeBytes(t){return at.encode(t,at.DEFAULT_EC_PERCENT,at.DEFAULT_AZTEC_LAYERS)}static encode(t,i,a){let o=new fr(t).encode(),c=te.truncDivision(o.getSize()*i,100)+11,f=o.getSize()+c,g,x,A,v,O;if(a!==at.DEFAULT_AZTEC_LAYERS){if(g=a<0,x=Math.abs(a),x>(g?at.MAX_NB_BITS_COMPACT:at.MAX_NB_BITS))throw new D(Te.format("Illegal value %s for layers",a));A=at.totalBitsInLayer(x,g),v=at.WORD_SIZE[x];let he=A-A%v;if(O=at.stuffBits(o,v),O.getSize()+c>he)throw new D("Data to large for user specified layer");if(g&&O.getSize()>v*64)throw new D("Data to large for user specified layer")}else{v=0,O=null;for(let he=0;;he++){if(he>at.MAX_NB_BITS)throw new D("Data too large for an Aztec code");if(g=he<=3,x=g?he+1:he,A=at.totalBitsInLayer(x,g),f>A)continue;(O==null||v!==at.WORD_SIZE[x])&&(v=at.WORD_SIZE[x],O=at.stuffBits(o,v));let Xe=A-A%v;if(!(g&&O.getSize()>v*64)&&O.getSize()+c<=Xe)break}}let I=at.generateCheckWords(O,A,v),B=O.getSize()/v,k=at.generateModeMessage(g,x,B),U=(g?11:14)+x*4,V=new Int32Array(U),Z;if(g){Z=U;for(let he=0;he<V.length;he++)V[he]=he}else{Z=U+1+2*te.truncDivision(te.truncDivision(U,2)-1,15);let he=te.truncDivision(U,2),Xe=te.truncDivision(Z,2);for(let Fe=0;Fe<he;Fe++){let Jt=Fe+te.truncDivision(Fe,15);V[he-Fe-1]=Xe-Jt-1,V[he+Fe]=Xe+Jt+1}}let ge=new Ot(Z);for(let he=0,Xe=0;he<x;he++){let Fe=(x-he)*4+(g?9:12);for(let Jt=0;Jt<Fe;Jt++){let Wn=Jt*2;for(let On=0;On<2;On++)I.get(Xe+Wn+On)&&ge.set(V[he*2+On],V[he*2+Jt]),I.get(Xe+Fe*2+Wn+On)&&ge.set(V[he*2+Jt],V[U-1-he*2-On]),I.get(Xe+Fe*4+Wn+On)&&ge.set(V[U-1-he*2-On],V[U-1-he*2-Jt]),I.get(Xe+Fe*6+Wn+On)&&ge.set(V[U-1-he*2-Jt],V[he*2+On])}Xe+=Fe*8}if(at.drawModeMessage(ge,g,Z,k),g)at.drawBullsEye(ge,te.truncDivision(Z,2),5);else{at.drawBullsEye(ge,te.truncDivision(Z,2),7);for(let he=0,Xe=0;he<te.truncDivision(U,2)-1;he+=15,Xe+=16)for(let Fe=te.truncDivision(Z,2)&1;Fe<Z;Fe+=2)ge.set(te.truncDivision(Z,2)-Xe,Fe),ge.set(te.truncDivision(Z,2)+Xe,Fe),ge.set(Fe,te.truncDivision(Z,2)-Xe),ge.set(Fe,te.truncDivision(Z,2)+Xe)}let de=new Gr;return de.setCompact(g),de.setSize(Z),de.setLayers(x),de.setCodeWords(B),de.setMatrix(ge),de}static drawBullsEye(t,i,a){for(let o=0;o<a;o+=2)for(let c=i-o;c<=i+o;c++)t.set(c,i-o),t.set(c,i+o),t.set(i-o,c),t.set(i+o,c);t.set(i-a,i-a),t.set(i-a+1,i-a),t.set(i-a,i-a+1),t.set(i+a,i-a),t.set(i+a,i-a+1),t.set(i+a,i+a-1)}static generateModeMessage(t,i,a){let o=new xe;return t?(o.appendBits(i-1,2),o.appendBits(a-1,6),o=at.generateCheckWords(o,28,4)):(o.appendBits(i-1,5),o.appendBits(a-1,11),o=at.generateCheckWords(o,40,4)),o}static drawModeMessage(t,i,a,o){let c=te.truncDivision(a,2);if(i)for(let f=0;f<7;f++){let g=c-3+f;o.get(f)&&t.set(g,c-5),o.get(f+7)&&t.set(c+5,g),o.get(20-f)&&t.set(g,c+5),o.get(27-f)&&t.set(c-5,g)}else for(let f=0;f<10;f++){let g=c-5+f+te.truncDivision(f,5);o.get(f)&&t.set(g,c-7),o.get(f+10)&&t.set(c+7,g),o.get(29-f)&&t.set(g,c+7),o.get(39-f)&&t.set(c-7,g)}}static generateCheckWords(t,i,a){let o=t.getSize()/a,c=new Ta(at.getGF(a)),f=te.truncDivision(i,a),g=at.bitsToWords(t,a,f);c.encode(g,f-o);let x=i%a,A=new xe;A.appendBits(0,x);for(const v of Array.from(g))A.appendBits(v,a);return A}static bitsToWords(t,i,a){let o=new Int32Array(a),c,f;for(c=0,f=t.getSize()/i;c<f;c++){let g=0;for(let x=0;x<i;x++)g|=t.get(c*i+x)?1<<i-x-1:0;o[c]=g}return o}static getGF(t){switch(t){case 4:return ht.AZTEC_PARAM;case 6:return ht.AZTEC_DATA_6;case 8:return ht.AZTEC_DATA_8;case 10:return ht.AZTEC_DATA_10;case 12:return ht.AZTEC_DATA_12;default:throw new D("Unsupported word size "+t)}}static stuffBits(t,i){let a=new xe,o=t.getSize(),c=(1<<i)-2;for(let f=0;f<o;f+=i){let g=0;for(let x=0;x<i;x++)(f+x>=o||t.get(f+x))&&(g|=1<<i-1-x);(g&c)===c?(a.appendBits(g&c,i),f--):(g&c)===0?(a.appendBits(g|1,i),f--):a.appendBits(g,i)}return a}static totalBitsInLayer(t,i){return((i?88:112)+16*t)*t}}at.DEFAULT_EC_PERCENT=33,at.DEFAULT_AZTEC_LAYERS=0,at.MAX_NB_BITS=32,at.MAX_NB_BITS_COMPACT=4,at.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]);class Da{encode(t,i,a,o){return this.encodeWithHints(t,i,a,o,null)}encodeWithHints(t,i,a,o,c){let f=Oa.ISO_8859_1,g=at.DEFAULT_EC_PERCENT,x=at.DEFAULT_AZTEC_LAYERS;return c!=null&&(c.has(sn.CHARACTER_SET)&&(f=mo.forName(c.get(sn.CHARACTER_SET).toString())),c.has(sn.ERROR_CORRECTION)&&(g=te.parseInt(c.get(sn.ERROR_CORRECTION).toString())),c.has(sn.AZTEC_LAYERS)&&(x=te.parseInt(c.get(sn.AZTEC_LAYERS).toString()))),Da.encodeLayers(t,i,a,o,f,g,x)}static encodeLayers(t,i,a,o,c,f,g){if(i!==pe.AZTEC)throw new D("Can only encode AZTEC, but got "+i);let x=at.encode(Te.getBytes(t,c),f,g);return Da.renderResult(x,a,o)}static renderResult(t,i,a){let o=t.getMatrix();if(o==null)throw new Gn;let c=o.getWidth(),f=o.getHeight(),g=Math.max(i,c),x=Math.max(a,f),A=Math.min(g/c,x/f),v=(g-c*A)/2,O=(x-f*A)/2,I=new Ot(g,x);for(let B=0,k=O;B<f;B++,k+=A)for(let U=0,V=v;U<c;U++,V+=A)o.get(U,B)&&I.setRegion(V,k,A,A);return I}}l.AbstractExpandedDecoder=rn,l.ArgumentException=N,l.ArithmeticException=Dr,l.AztecCode=Gr,l.AztecCodeReader=$a,l.AztecCodeWriter=Da,l.AztecDecoder=vt,l.AztecDetector=Js,l.AztecDetectorResult=ro,l.AztecEncoder=at,l.AztecHighLevelEncoder=fr,l.AztecPoint=Cn,l.BarcodeFormat=pe,l.Binarizer=ne,l.BinaryBitmap=F,l.BitArray=xe,l.BitMatrix=Ot,l.BitSource=ai,l.BrowserAztecCodeReader=Pu,l.BrowserBarcodeReader=Fu,l.BrowserCodeReader=we,l.BrowserDatamatrixCodeReader=ns,l.BrowserMultiFormatReader=go,l.BrowserPDF417Reader=Gu,l.BrowserQRCodeReader=Yu,l.BrowserQRCodeSvgWriter=ur,l.CharacterSetECI=ce,l.ChecksumException=P,l.Code128Reader=me,l.Code39Reader=It,l.DataMatrixDecodedBitStreamParser=Li,l.DataMatrixReader=ki,l.DecodeHintType=be,l.DecoderResult=Mt,l.DefaultGridSampler=Qs,l.DetectorResult=Ja,l.EAN13Reader=Ai,l.EncodeHintType=sn,l.Exception=b,l.FormatException=$,l.GenericGF=ht,l.GenericGFPoly=yn,l.GlobalHistogramBinarizer=Q,l.GridSampler=Ks,l.GridSamplerInstance=ni,l.HTMLCanvasElementLuminanceSource=it,l.HybridBinarizer=se,l.ITFReader=Ge,l.IllegalArgumentException=D,l.IllegalStateException=Gn,l.InvertedLuminanceSource=Qe,l.LuminanceSource=De,l.MathUtils=Je,l.MultiFormatOneDReader=ri,l.MultiFormatReader=fo,l.MultiFormatWriter=Xu,l.NotFoundException=ee,l.OneDReader=jt,l.PDF417DecodedBitStreamParser=W,l.PDF417DecoderErrorCorrection=ji,l.PDF417Reader=An,l.PDF417ResultMetadata=Hr,l.PerspectiveTransform=Yn,l.PlanarYUVLuminanceSource=Si,l.QRCodeByteMatrix=os,l.QRCodeDataMask=zn,l.QRCodeDecodedBitStreamParser=Bt,l.QRCodeDecoderErrorCorrectionLevel=Ze,l.QRCodeDecoderFormatInformation=un,l.QRCodeEncoder=kt,l.QRCodeEncoderQRCode=or,l.QRCodeMaskUtil=qt,l.QRCodeMatrixUtil=Le,l.QRCodeMode=Ne,l.QRCodeReader=Ui,l.QRCodeVersion=Ce,l.QRCodeWriter=Vr,l.RGBLuminanceSource=ol,l.RSS14Reader=At,l.RSSExpandedReader=ue,l.ReaderException=ls,l.ReedSolomonDecoder=sr,l.ReedSolomonEncoder=Ta,l.ReedSolomonException=Vn,l.Result=Ae,l.ResultMetadataType=ct,l.ResultPoint=Se,l.StringUtils=Te,l.UnsupportedOperationException=ti,l.VideoInputDevice=z,l.WhiteRectangleDetector=Zt,l.WriterException=bt,l.ZXingArrays=fe,l.ZXingCharset=mo,l.ZXingInteger=te,l.ZXingStandardCharsets=Oa,l.ZXingStringBuilder=nt,l.ZXingStringEncoding=Pt,l.ZXingSystem=K,l.createAbstractExpandedDecoder=Lr,Object.defineProperty(l,"__esModule",{value:!0})}))})(ql,ql.exports)),ql.exports}var Wt=um();const cm=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));var O1=(function(){function u(r,l,d){if(this.formatMap=new Map([[ve.QR_CODE,Wt.BarcodeFormat.QR_CODE],[ve.AZTEC,Wt.BarcodeFormat.AZTEC],[ve.CODABAR,Wt.BarcodeFormat.CODABAR],[ve.CODE_39,Wt.BarcodeFormat.CODE_39],[ve.CODE_93,Wt.BarcodeFormat.CODE_93],[ve.CODE_128,Wt.BarcodeFormat.CODE_128],[ve.DATA_MATRIX,Wt.BarcodeFormat.DATA_MATRIX],[ve.MAXICODE,Wt.BarcodeFormat.MAXICODE],[ve.ITF,Wt.BarcodeFormat.ITF],[ve.EAN_13,Wt.BarcodeFormat.EAN_13],[ve.EAN_8,Wt.BarcodeFormat.EAN_8],[ve.PDF_417,Wt.BarcodeFormat.PDF_417],[ve.RSS_14,Wt.BarcodeFormat.RSS_14],[ve.RSS_EXPANDED,Wt.BarcodeFormat.RSS_EXPANDED],[ve.UPC_A,Wt.BarcodeFormat.UPC_A],[ve.UPC_E,Wt.BarcodeFormat.UPC_E],[ve.UPC_EAN_EXTENSION,Wt.BarcodeFormat.UPC_EAN_EXTENSION]]),this.reverseFormatMap=this.createReverseFormatMap(),!cm)throw"Use html5qrcode.min.js without edit, ZXing not found.";this.verbose=l,this.logger=d;var p=this.createZXingFormats(r),m=new Map;m.set(Wt.DecodeHintType.POSSIBLE_FORMATS,p),m.set(Wt.DecodeHintType.TRY_HARDER,!1),this.hints=m}return u.prototype.decodeAsync=function(r){var l=this;return new Promise(function(d,p){try{d(l.decode(r))}catch(m){p(m)}})},u.prototype.decode=function(r){var l=new Wt.MultiFormatReader(this.verbose,this.hints),d=new Wt.HTMLCanvasElementLuminanceSource(r),p=new Wt.BinaryBitmap(new Wt.HybridBinarizer(d)),m=l.decode(p);return{text:m.text,format:cg.create(this.toHtml5QrcodeSupportedFormats(m.format)),debugData:this.createDebugData()}},u.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(l,d,p){r.set(l,d)}),r},u.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},u.prototype.createZXingFormats=function(r){for(var l=[],d=0,p=r;d<p.length;d++){var m=p[d];this.formatMap.has(m)?l.push(this.formatMap.get(m)):this.logger.logError("".concat(m," is not supported by")+"ZXingHtml5QrcodeShim")}return l},u.prototype.createDebugData=function(){return{decoderName:"zxing-js"}},u})(),hm=function(u,r,l,d){function p(m){return m instanceof l?m:new l(function(E){E(m)})}return new(l||(l=Promise))(function(m,E){function _(N){try{b(d.next(N))}catch(D){E(D)}}function C(N){try{b(d.throw(N))}catch(D){E(D)}}function b(N){N.done?m(N.value):p(N.value).then(_,C)}b((d=d.apply(u,r||[])).next())})},fm=function(u,r){var l={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},d,p,m,E;return E={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function _(b){return function(N){return C([b,N])}}function C(b){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,b[0]&&(l=0)),l;)try{if(d=1,p&&(m=b[0]&2?p.return:b[0]?p.throw||((m=p.return)&&m.call(p),0):p.next)&&!(m=m.call(p,b[1])).done)return m;switch(p=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return l.label++,{value:b[1],done:!1};case 5:l.label++,p=b[1],b=[0];continue;case 7:b=l.ops.pop(),l.trys.pop();continue;default:if(m=l.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){l=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){l.label=b[1];break}if(b[0]===6&&l.label<m[1]){l.label=m[1],m=b;break}if(m&&l.label<m[2]){l.label=m[2],l.ops.push(b);break}m[2]&&l.ops.pop(),l.trys.pop();continue}b=r.call(u,l)}catch(N){b=[6,N],p=0}finally{d=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},I1=(function(){function u(r,l,d){if(this.formatMap=new Map([[ve.QR_CODE,"qr_code"],[ve.AZTEC,"aztec"],[ve.CODABAR,"codabar"],[ve.CODE_39,"code_39"],[ve.CODE_93,"code_93"],[ve.CODE_128,"code_128"],[ve.DATA_MATRIX,"data_matrix"],[ve.ITF,"itf"],[ve.EAN_13,"ean_13"],[ve.EAN_8,"ean_8"],[ve.PDF_417,"pdf417"],[ve.UPC_A,"upc_a"],[ve.UPC_E,"upc_e"]]),this.reverseFormatMap=this.createReverseFormatMap(),!u.isSupported())throw"Use html5qrcode.min.js without edit, Use BarcodeDetectorDelegate only if it isSupported();";this.verbose=l,this.logger=d;var p=this.createBarcodeDetectorFormats(r);if(this.detector=new BarcodeDetector(p),!this.detector)throw"BarcodeDetector detector not supported"}return u.isSupported=function(){if(!("BarcodeDetector"in window))return!1;var r=new BarcodeDetector({formats:["qr_code"]});return typeof r<"u"},u.prototype.decodeAsync=function(r){return hm(this,void 0,void 0,function(){var l,d;return fm(this,function(p){switch(p.label){case 0:return[4,this.detector.detect(r)];case 1:if(l=p.sent(),!l||l.length===0)throw"No barcode or QR code detected.";return d=this.selectLargestBarcode(l),[2,{text:d.rawValue,format:cg.create(this.toHtml5QrcodeSupportedFormats(d.format)),debugData:this.createDebugData()}]}})})},u.prototype.selectLargestBarcode=function(r){for(var l=null,d=0,p=0,m=r;p<m.length;p++){var E=m[p],_=E.boundingBox.width*E.boundingBox.height;_>d&&(d=_,l=E)}if(!l)throw"No largest barcode found";return l},u.prototype.createBarcodeDetectorFormats=function(r){for(var l=[],d=0,p=r;d<p.length;d++){var m=p[d];this.formatMap.has(m)?l.push(this.formatMap.get(m)):this.logger.warn("".concat(m," is not supported by")+"BarcodeDetectorDelegate")}return{formats:l}},u.prototype.toHtml5QrcodeSupportedFormats=function(r){if(!this.reverseFormatMap.has(r))throw"reverseFormatMap doesn't have ".concat(r);return this.reverseFormatMap.get(r)},u.prototype.createReverseFormatMap=function(){var r=new Map;return this.formatMap.forEach(function(l,d,p){r.set(l,d)}),r},u.prototype.createDebugData=function(){return{decoderName:"BarcodeDetector"}},u})(),N1=function(u,r,l,d){function p(m){return m instanceof l?m:new l(function(E){E(m)})}return new(l||(l=Promise))(function(m,E){function _(N){try{b(d.next(N))}catch(D){E(D)}}function C(N){try{b(d.throw(N))}catch(D){E(D)}}function b(N){N.done?m(N.value):p(N.value).then(_,C)}b((d=d.apply(u,r||[])).next())})},R1=function(u,r){var l={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},d,p,m,E;return E={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function _(b){return function(N){return C([b,N])}}function C(b){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,b[0]&&(l=0)),l;)try{if(d=1,p&&(m=b[0]&2?p.return:b[0]?p.throw||((m=p.return)&&m.call(p),0):p.next)&&!(m=m.call(p,b[1])).done)return m;switch(p=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return l.label++,{value:b[1],done:!1};case 5:l.label++,p=b[1],b=[0];continue;case 7:b=l.ops.pop(),l.trys.pop();continue;default:if(m=l.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){l=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){l.label=b[1];break}if(b[0]===6&&l.label<m[1]){l.label=m[1],m=b;break}if(m&&l.label<m[2]){l.label=m[2],l.ops.push(b);break}m[2]&&l.ops.pop(),l.trys.pop();continue}b=r.call(u,l)}catch(N){b=[6,N],p=0}finally{d=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},dm=(function(){function u(r,l,d,p){this.EXECUTIONS_TO_REPORT_PERFORMANCE=100,this.executions=0,this.executionResults=[],this.wasPrimaryDecoderUsedInLastDecode=!1,this.verbose=d,l&&I1.isSupported()?(this.primaryDecoder=new I1(r,d,p),this.secondaryDecoder=new O1(r,d,p)):this.primaryDecoder=new O1(r,d,p)}return u.prototype.decodeAsync=function(r){return N1(this,void 0,void 0,function(){var l;return R1(this,function(d){switch(d.label){case 0:l=performance.now(),d.label=1;case 1:return d.trys.push([1,,3,4]),[4,this.getDecoder().decodeAsync(r)];case 2:return[2,d.sent()];case 3:return this.possiblyLogPerformance(l),[7];case 4:return[2]}})})},u.prototype.decodeRobustlyAsync=function(r){return N1(this,void 0,void 0,function(){var l,d;return R1(this,function(p){switch(p.label){case 0:l=performance.now(),p.label=1;case 1:return p.trys.push([1,3,4,5]),[4,this.primaryDecoder.decodeAsync(r)];case 2:return[2,p.sent()];case 3:if(d=p.sent(),this.secondaryDecoder)return[2,this.secondaryDecoder.decodeAsync(r)];throw d;case 4:return this.possiblyLogPerformance(l),[7];case 5:return[2]}})})},u.prototype.getDecoder=function(){return this.secondaryDecoder?this.wasPrimaryDecoderUsedInLastDecode===!1?(this.wasPrimaryDecoderUsedInLastDecode=!0,this.primaryDecoder):(this.wasPrimaryDecoderUsedInLastDecode=!1,this.secondaryDecoder):this.primaryDecoder},u.prototype.possiblyLogPerformance=function(r){if(this.verbose){var l=performance.now()-r;this.executionResults.push(l),this.executions++,this.possiblyFlushPerformanceReport()}},u.prototype.possiblyFlushPerformanceReport=function(){if(!(this.executions<this.EXECUTIONS_TO_REPORT_PERFORMANCE)){for(var r=0,l=0,d=this.executionResults;l<d.length;l++){var p=d[l];r+=p}var m=r/this.executionResults.length;console.log("".concat(m," ms for ").concat(this.executionResults.length," last runs.")),this.executions=0,this.executionResults=[]}},u})(),lf=(function(){var u=function(r,l){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(d[m]=p[m])},u(r,l)};return function(r,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");u(r,l);function d(){this.constructor=r}r.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}})(),Ru=function(u,r,l,d){function p(m){return m instanceof l?m:new l(function(E){E(m)})}return new(l||(l=Promise))(function(m,E){function _(N){try{b(d.next(N))}catch(D){E(D)}}function C(N){try{b(d.throw(N))}catch(D){E(D)}}function b(N){N.done?m(N.value):p(N.value).then(_,C)}b((d=d.apply(u,r||[])).next())})},Du=function(u,r){var l={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},d,p,m,E;return E={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function _(b){return function(N){return C([b,N])}}function C(b){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,b[0]&&(l=0)),l;)try{if(d=1,p&&(m=b[0]&2?p.return:b[0]?p.throw||((m=p.return)&&m.call(p),0):p.next)&&!(m=m.call(p,b[1])).done)return m;switch(p=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return l.label++,{value:b[1],done:!1};case 5:l.label++,p=b[1],b=[0];continue;case 7:b=l.ops.pop(),l.trys.pop();continue;default:if(m=l.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){l=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){l.label=b[1];break}if(b[0]===6&&l.label<m[1]){l.label=m[1],m=b;break}if(m&&l.label<m[2]){l.label=m[2],l.ops.push(b);break}m[2]&&l.ops.pop(),l.trys.pop();continue}b=r.call(u,l)}catch(N){b=[6,N],p=0}finally{d=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},gg=(function(){function u(r,l){this.name=r,this.track=l}return u.prototype.isSupported=function(){return this.track.getCapabilities?this.name in this.track.getCapabilities():!1},u.prototype.apply=function(r){var l={};l[this.name]=r;var d={advanced:[l]};return this.track.applyConstraints(d)},u.prototype.value=function(){var r=this.track.getSettings();if(this.name in r){var l=r[this.name];return l}return null},u})(),gm=(function(u){lf(r,u);function r(l,d){return u.call(this,l,d)||this}return r.prototype.min=function(){return this.getCapabilities().min},r.prototype.max=function(){return this.getCapabilities().max},r.prototype.step=function(){return this.getCapabilities().step},r.prototype.apply=function(l){var d={};d[this.name]=l;var p={advanced:[d]};return this.track.applyConstraints(p)},r.prototype.getCapabilities=function(){this.failIfNotSupported();var l=this.track.getCapabilities(),d=l[this.name];return{min:d.min,max:d.max,step:d.step}},r.prototype.failIfNotSupported=function(){if(!this.isSupported())throw new Error("".concat(this.name," capability not supported"))},r})(gg),mm=(function(u){lf(r,u);function r(l){return u.call(this,"zoom",l)||this}return r})(gm),ym=(function(u){lf(r,u);function r(l){return u.call(this,"torch",l)||this}return r})(gg),pm=(function(){function u(r){this.track=r}return u.prototype.zoomFeature=function(){return new mm(this.track)},u.prototype.torchFeature=function(){return new ym(this.track)},u})(),xm=(function(){function u(r,l,d){this.isClosed=!1,this.parentElement=r,this.mediaStream=l,this.callbacks=d,this.surface=this.createVideoElement(this.parentElement.clientWidth),r.append(this.surface)}return u.prototype.createVideoElement=function(r){var l=document.createElement("video");return l.style.width="".concat(r,"px"),l.style.display="block",l.muted=!0,l.setAttribute("muted","true"),l.playsInline=!0,l},u.prototype.setupSurface=function(){var r=this;this.surface.onabort=function(){throw"RenderedCameraImpl video surface onabort() called"},this.surface.onerror=function(){throw"RenderedCameraImpl video surface onerror() called"};var l=function(){var d=r.surface.clientWidth,p=r.surface.clientHeight;r.callbacks.onRenderSurfaceReady(d,p),r.surface.removeEventListener("playing",l)};this.surface.addEventListener("playing",l),this.surface.srcObject=this.mediaStream,this.surface.play()},u.create=function(r,l,d,p){return Ru(this,void 0,void 0,function(){var m,E;return Du(this,function(_){switch(_.label){case 0:return m=new u(r,l,p),d.aspectRatio?(E={aspectRatio:d.aspectRatio},[4,m.getFirstTrackOrFail().applyConstraints(E)]):[3,2];case 1:_.sent(),_.label=2;case 2:return m.setupSurface(),[2,m]}})})},u.prototype.failIfClosed=function(){if(this.isClosed)throw"The RenderedCamera has already been closed."},u.prototype.getFirstTrackOrFail=function(){if(this.failIfClosed(),this.mediaStream.getVideoTracks().length===0)throw"No video tracks found";return this.mediaStream.getVideoTracks()[0]},u.prototype.pause=function(){this.failIfClosed(),this.surface.pause()},u.prototype.resume=function(r){this.failIfClosed();var l=this,d=function(){setTimeout(r,200),l.surface.removeEventListener("playing",d)};this.surface.addEventListener("playing",d),this.surface.play()},u.prototype.isPaused=function(){return this.failIfClosed(),this.surface.paused},u.prototype.getSurface=function(){return this.failIfClosed(),this.surface},u.prototype.getRunningTrackCapabilities=function(){return this.getFirstTrackOrFail().getCapabilities()},u.prototype.getRunningTrackSettings=function(){return this.getFirstTrackOrFail().getSettings()},u.prototype.applyVideoConstraints=function(r){return Ru(this,void 0,void 0,function(){return Du(this,function(l){if("aspectRatio"in r)throw"Changing 'aspectRatio' in run-time is not yet supported.";return[2,this.getFirstTrackOrFail().applyConstraints(r)]})})},u.prototype.close=function(){if(this.isClosed)return Promise.resolve();var r=this;return new Promise(function(l,d){var p=r.mediaStream.getVideoTracks(),m=p.length,E=0;r.mediaStream.getVideoTracks().forEach(function(_){r.mediaStream.removeTrack(_),_.stop(),++E,E>=m&&(r.isClosed=!0,r.parentElement.removeChild(r.surface),l())})})},u.prototype.getCapabilities=function(){return new pm(this.getFirstTrackOrFail())},u})(),wm=(function(){function u(r){this.mediaStream=r}return u.prototype.render=function(r,l,d){return Ru(this,void 0,void 0,function(){return Du(this,function(p){return[2,xm.create(r,this.mediaStream,l,d)]})})},u.create=function(r){return Ru(this,void 0,void 0,function(){var l,d;return Du(this,function(p){switch(p.label){case 0:if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return l={audio:!1,video:r},[4,navigator.mediaDevices.getUserMedia(l)];case 1:return d=p.sent(),[2,new u(d)]}})})},u})(),D1=function(u,r,l,d){function p(m){return m instanceof l?m:new l(function(E){E(m)})}return new(l||(l=Promise))(function(m,E){function _(N){try{b(d.next(N))}catch(D){E(D)}}function C(N){try{b(d.throw(N))}catch(D){E(D)}}function b(N){N.done?m(N.value):p(N.value).then(_,C)}b((d=d.apply(u,r||[])).next())})},M1=function(u,r){var l={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},d,p,m,E;return E={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function _(b){return function(N){return C([b,N])}}function C(b){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,b[0]&&(l=0)),l;)try{if(d=1,p&&(m=b[0]&2?p.return:b[0]?p.throw||((m=p.return)&&m.call(p),0):p.next)&&!(m=m.call(p,b[1])).done)return m;switch(p=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return l.label++,{value:b[1],done:!1};case 5:l.label++,p=b[1],b=[0];continue;case 7:b=l.ops.pop(),l.trys.pop();continue;default:if(m=l.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){l=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){l.label=b[1];break}if(b[0]===6&&l.label<m[1]){l.label=m[1],m=b;break}if(m&&l.label<m[2]){l.label=m[2],l.ops.push(b);break}m[2]&&l.ops.pop(),l.trys.pop();continue}b=r.call(u,l)}catch(N){b=[6,N],p=0}finally{d=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},Am=(function(){function u(){}return u.failIfNotSupported=function(){return D1(this,void 0,void 0,function(){return M1(this,function(r){if(!navigator.mediaDevices)throw"navigator.mediaDevices not supported";return[2,new u]})})},u.prototype.create=function(r){return D1(this,void 0,void 0,function(){return M1(this,function(l){return[2,wm.create(r)]})})},u})(),bm=function(u,r,l,d){function p(m){return m instanceof l?m:new l(function(E){E(m)})}return new(l||(l=Promise))(function(m,E){function _(N){try{b(d.next(N))}catch(D){E(D)}}function C(N){try{b(d.throw(N))}catch(D){E(D)}}function b(N){N.done?m(N.value):p(N.value).then(_,C)}b((d=d.apply(u,r||[])).next())})},Em=function(u,r){var l={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},d,p,m,E;return E={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function _(b){return function(N){return C([b,N])}}function C(b){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,b[0]&&(l=0)),l;)try{if(d=1,p&&(m=b[0]&2?p.return:b[0]?p.throw||((m=p.return)&&m.call(p),0):p.next)&&!(m=m.call(p,b[1])).done)return m;switch(p=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return l.label++,{value:b[1],done:!1};case 5:l.label++,p=b[1],b=[0];continue;case 7:b=l.ops.pop(),l.trys.pop();continue;default:if(m=l.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){l=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){l.label=b[1];break}if(b[0]===6&&l.label<m[1]){l.label=m[1],m=b;break}if(m&&l.label<m[2]){l.label=m[2],l.ops.push(b);break}m[2]&&l.ops.pop(),l.trys.pop();continue}b=r.call(u,l)}catch(N){b=[6,N],p=0}finally{d=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},vm=(function(){function u(){}return u.retrieve=function(){if(navigator.mediaDevices)return u.getCamerasFromMediaDevices();var r=MediaStreamTrack;return MediaStreamTrack&&r.getSources?u.getCamerasFromMediaStreamTrack():u.rejectWithError()},u.rejectWithError=function(){var r=qs.unableToQuerySupportedDevices();return u.isHttpsOrLocalhost()||(r=qs.insecureContextCameraQueryError()),Promise.reject(r)},u.isHttpsOrLocalhost=function(){if(location.protocol==="https:")return!0;var r=location.host.split(":")[0];return r==="127.0.0.1"||r==="localhost"},u.getCamerasFromMediaDevices=function(){return bm(this,void 0,void 0,function(){var r,l,d,p,m,E,_;return Em(this,function(C){switch(C.label){case 0:return r=function(b){for(var N=b.getVideoTracks(),D=0,F=N;D<F.length;D++){var P=F[D];P.enabled=!1,P.stop(),b.removeTrack(P)}},[4,navigator.mediaDevices.getUserMedia({audio:!1,video:!0})];case 1:return l=C.sent(),[4,navigator.mediaDevices.enumerateDevices()];case 2:for(d=C.sent(),p=[],m=0,E=d;m<E.length;m++)_=E[m],_.kind==="videoinput"&&p.push({id:_.deviceId,label:_.label});return r(l),[2,p]}})})},u.getCamerasFromMediaStreamTrack=function(){return new Promise(function(r,l){var d=function(m){for(var E=[],_=0,C=m;_<C.length;_++){var b=C[_];b.kind==="video"&&E.push({id:b.id,label:b.label})}r(E)},p=MediaStreamTrack;p.getSources(d)})},u})(),tn;(function(u){u[u.UNKNOWN=0]="UNKNOWN",u[u.NOT_STARTED=1]="NOT_STARTED",u[u.SCANNING=2]="SCANNING",u[u.PAUSED=3]="PAUSED"})(tn||(tn={}));var Sm=(function(){function u(){this.state=tn.NOT_STARTED,this.onGoingTransactionNewState=tn.UNKNOWN}return u.prototype.directTransition=function(r){this.failIfTransitionOngoing(),this.validateTransition(r),this.state=r},u.prototype.startTransition=function(r){return this.failIfTransitionOngoing(),this.validateTransition(r),this.onGoingTransactionNewState=r,this},u.prototype.execute=function(){if(this.onGoingTransactionNewState===tn.UNKNOWN)throw"Transaction is already cancelled, cannot execute().";var r=this.onGoingTransactionNewState;this.onGoingTransactionNewState=tn.UNKNOWN,this.directTransition(r)},u.prototype.cancel=function(){if(this.onGoingTransactionNewState===tn.UNKNOWN)throw"Transaction is already cancelled, cannot cancel().";this.onGoingTransactionNewState=tn.UNKNOWN},u.prototype.getState=function(){return this.state},u.prototype.failIfTransitionOngoing=function(){if(this.onGoingTransactionNewState!==tn.UNKNOWN)throw"Cannot transition to a new state, already under transition"},u.prototype.validateTransition=function(r){switch(this.state){case tn.UNKNOWN:throw"Transition from unknown is not allowed";case tn.NOT_STARTED:this.failIfNewStateIs(r,[tn.PAUSED]);break;case tn.SCANNING:break;case tn.PAUSED:break}},u.prototype.failIfNewStateIs=function(r,l){for(var d=0,p=l;d<p.length;d++){var m=p[d];if(r===m)throw"Cannot transition from ".concat(this.state," to ").concat(r)}},u})(),_m=(function(){function u(r){this.stateManager=r}return u.prototype.startTransition=function(r){return this.stateManager.startTransition(r)},u.prototype.directTransition=function(r){this.stateManager.directTransition(r)},u.prototype.getState=function(){return this.stateManager.getState()},u.prototype.canScanFile=function(){return this.stateManager.getState()===tn.NOT_STARTED},u.prototype.isScanning=function(){return this.stateManager.getState()!==tn.NOT_STARTED},u.prototype.isStrictlyScanning=function(){return this.stateManager.getState()===tn.SCANNING},u.prototype.isPaused=function(){return this.stateManager.getState()===tn.PAUSED},u})(),Cm=(function(){function u(){}return u.create=function(){return new _m(new Sm)},u})(),Tm=(function(){var u=function(r,l){return u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(d,p){d.__proto__=p}||function(d,p){for(var m in p)Object.prototype.hasOwnProperty.call(p,m)&&(d[m]=p[m])},u(r,l)};return function(r,l){if(typeof l!="function"&&l!==null)throw new TypeError("Class extends value "+String(l)+" is not a constructor or null");u(r,l);function d(){this.constructor=r}r.prototype=l===null?Object.create(l):(d.prototype=l.prototype,new d)}})(),yi=(function(u){Tm(r,u);function r(){return u!==null&&u.apply(this,arguments)||this}return r.DEFAULT_WIDTH=300,r.DEFAULT_WIDTH_OFFSET=2,r.FILE_SCAN_MIN_HEIGHT=300,r.FILE_SCAN_HIDDEN_CANVAS_PADDING=100,r.MIN_QR_BOX_SIZE=50,r.SHADED_LEFT=1,r.SHADED_RIGHT=2,r.SHADED_TOP=3,r.SHADED_BOTTOM=4,r.SHADED_REGION_ELEMENT_ID="qr-shaded-region",r.VERBOSE=!1,r.BORDER_SHADER_DEFAULT_COLOR="#ffffff",r.BORDER_SHADER_MATCH_COLOR="rgb(90, 193, 56)",r})(Yi),Om=(function(){function u(r,l){this.logger=l,this.fps=yi.SCAN_DEFAULT_FPS,r?(r.fps&&(this.fps=r.fps),this.disableFlip=r.disableFlip===!0,this.qrbox=r.qrbox,this.aspectRatio=r.aspectRatio,this.videoConstraints=r.videoConstraints):this.disableFlip=yi.DEFAULT_DISABLE_FLIP}return u.prototype.isMediaStreamConstraintsValid=function(){return this.videoConstraints?dg.isMediaStreamConstraintsValid(this.videoConstraints,this.logger):(this.logger.logError("Empty videoConstraints",!0),!1)},u.prototype.isShadedBoxEnabled=function(){return!ar(this.qrbox)},u.create=function(r,l){return new u(r,l)},u})(),B1=(function(){function u(r,l){if(this.element=null,this.canvasElement=null,this.scannerPausedUiElement=null,this.hasBorderShaders=null,this.borderShaders=null,this.qrMatch=null,this.renderedCamera=null,this.qrRegion=null,this.context=null,this.lastScanImageFile=null,this.isScanning=!1,!document.getElementById(r))throw"HTML Element with id=".concat(r," not found");this.elementId=r,this.verbose=!1;var d;typeof l=="boolean"?this.verbose=l===!0:l&&(d=l,this.verbose=d.verbose===!0,d.experimentalFeatures),this.logger=new fg(this.verbose),this.qrcode=new dm(this.getSupportedFormats(l),this.getUseBarCodeDetectorIfSupported(d),this.verbose,this.logger),this.foreverScanTimeout,this.shouldScan=!0,this.stateManagerProxy=Cm.create()}return u.prototype.start=function(r,l,d,p){var m=this;if(!r)throw"cameraIdOrConfig is required";if(!d||typeof d!="function")throw"qrCodeSuccessCallback is required and should be a function.";var E;p?E=p:E=this.verbose?this.logger.log:function(){};var _=Om.create(l,this.logger);this.clearElement();var C=!1;_.videoConstraints&&(_.isMediaStreamConstraintsValid()?C=!0:this.logger.logError("'videoConstraints' is not valid 'MediaStreamConstraints, it will be ignored.'",!0));var b=C,N=document.getElementById(this.elementId);N.clientWidth?N.clientWidth:yi.DEFAULT_WIDTH,N.style.position="relative",this.shouldScan=!0,this.element=N;var D=this,F=this.stateManagerProxy.startTransition(tn.SCANNING);return new Promise(function(P,ne){var K=b?_.videoConstraints:D.createVideoConstraints(r);if(!K){F.cancel(),ne("videoConstraints should be defined");return}var oe={};(!b||_.aspectRatio)&&(oe.aspectRatio=_.aspectRatio);var ye={onRenderSurfaceReady:function(fe,te){D.setupUi(fe,te,_),D.isScanning=!0,D.foreverScan(_,d,E)}};Am.failIfNotSupported().then(function(fe){fe.create(K).then(function(te){return te.render(m.element,oe,ye).then(function(xe){D.renderedCamera=xe,F.execute(),P(null)}).catch(function(xe){F.cancel(),ne(xe)})}).catch(function(te){F.cancel(),ne(qs.errorGettingUserMedia(te))})}).catch(function(fe){F.cancel(),ne(qs.cameraStreamingNotSupported())})})},u.prototype.pause=function(r){if(!this.stateManagerProxy.isStrictlyScanning())throw"Cannot pause, scanner is not scanning.";this.stateManagerProxy.directTransition(tn.PAUSED),this.showPausedState(),(ar(r)||r!==!0)&&(r=!1),r&&this.renderedCamera&&this.renderedCamera.pause()},u.prototype.resume=function(){if(!this.stateManagerProxy.isPaused())throw"Cannot result, scanner is not paused.";if(!this.renderedCamera)throw"renderedCamera doesn't exist while trying resume()";var r=this,l=function(){r.stateManagerProxy.directTransition(tn.SCANNING),r.hidePausedState()};if(!this.renderedCamera.isPaused()){l();return}this.renderedCamera.resume(function(){l()})},u.prototype.getState=function(){return this.stateManagerProxy.getState()},u.prototype.stop=function(){var r=this;if(!this.stateManagerProxy.isScanning())throw"Cannot stop, scanner is not running or paused.";var l=this.stateManagerProxy.startTransition(tn.NOT_STARTED);this.shouldScan=!1,this.foreverScanTimeout&&clearTimeout(this.foreverScanTimeout);var d=function(){if(r.element){var m=document.getElementById(yi.SHADED_REGION_ELEMENT_ID);m&&r.element.removeChild(m)}},p=this;return this.renderedCamera.close().then(function(){return p.renderedCamera=null,p.element&&(p.element.removeChild(p.canvasElement),p.canvasElement=null),d(),p.qrRegion&&(p.qrRegion=null),p.context&&(p.context=null),l.execute(),p.hidePausedState(),p.isScanning=!1,Promise.resolve()})},u.prototype.scanFile=function(r,l){return this.scanFileV2(r,l).then(function(d){return d.decodedText})},u.prototype.scanFileV2=function(r,l){var d=this;if(!r||!(r instanceof File))throw"imageFile argument is mandatory and should be instance of File. Use 'event.target.files[0]'.";if(ar(l)&&(l=!0),!this.stateManagerProxy.canScanFile())throw"Cannot start file scan - ongoing camera scan";return new Promise(function(p,m){d.possiblyCloseLastScanImageFile(),d.clearElement(),d.lastScanImageFile=URL.createObjectURL(r);var E=new Image;E.onload=function(){var _=E.width,C=E.height,b=document.getElementById(d.elementId),N=b.clientWidth?b.clientWidth:yi.DEFAULT_WIDTH,D=Math.max(b.clientHeight?b.clientHeight:C,yi.FILE_SCAN_MIN_HEIGHT),F=d.computeCanvasDrawConfig(_,C,N,D);if(l){var P=d.createCanvasElement(N,D,"qr-canvas-visible");P.style.display="inline-block",b.appendChild(P);var ne=P.getContext("2d");if(!ne)throw"Unable to get 2d context from canvas";ne.canvas.width=N,ne.canvas.height=D,ne.drawImage(E,0,0,_,C,F.x,F.y,F.width,F.height)}var K=yi.FILE_SCAN_HIDDEN_CANVAS_PADDING,oe=Math.max(E.width,F.width),ye=Math.max(E.height,F.height),fe=oe+2*K,te=ye+2*K,xe=d.createCanvasElement(fe,te);b.appendChild(xe);var Ke=xe.getContext("2d");if(!Ke)throw"Unable to get 2d context from canvas";Ke.canvas.width=fe,Ke.canvas.height=te,Ke.drawImage(E,0,0,_,C,K,K,oe,ye);try{d.qrcode.decodeRobustlyAsync(xe).then(function(be){p(_1.createFromQrcodeResult(be))}).catch(m)}catch(be){m("QR code parse error, error = ".concat(be))}},E.onerror=m,E.onabort=m,E.onstalled=m,E.onsuspend=m,E.src=URL.createObjectURL(r)})},u.prototype.clear=function(){this.clearElement()},u.getCameras=function(){return vm.retrieve()},u.prototype.getRunningTrackCapabilities=function(){return this.getRenderedCameraOrFail().getRunningTrackCapabilities()},u.prototype.getRunningTrackSettings=function(){return this.getRenderedCameraOrFail().getRunningTrackSettings()},u.prototype.getRunningTrackCameraCapabilities=function(){return this.getRenderedCameraOrFail().getCapabilities()},u.prototype.applyVideoConstraints=function(r){if(r){if(!dg.isMediaStreamConstraintsValid(r,this.logger))throw"invalid videoConstaints passed, check logs for more details"}else throw"videoConstaints is required argument.";return this.getRenderedCameraOrFail().applyVideoConstraints(r)},u.prototype.getRenderedCameraOrFail=function(){if(this.renderedCamera==null)throw"Scanning is not in running state, call this API only when QR code scanning using camera is in running state.";return this.renderedCamera},u.prototype.getSupportedFormats=function(r){var l=[ve.QR_CODE,ve.AZTEC,ve.CODABAR,ve.CODE_39,ve.CODE_93,ve.CODE_128,ve.DATA_MATRIX,ve.MAXICODE,ve.ITF,ve.EAN_13,ve.EAN_8,ve.PDF_417,ve.RSS_14,ve.RSS_EXPANDED,ve.UPC_A,ve.UPC_E,ve.UPC_EAN_EXTENSION];if(!r||typeof r=="boolean"||!r.formatsToSupport)return l;if(!Array.isArray(r.formatsToSupport))throw"configOrVerbosityFlag.formatsToSupport should be undefined or an array.";if(r.formatsToSupport.length===0)throw"Atleast 1 formatsToSupport is needed.";for(var d=[],p=0,m=r.formatsToSupport;p<m.length;p++){var E=m[p];sm(E)?d.push(E):this.logger.warn("Invalid format: ".concat(E," passed in config, ignoring."))}if(d.length===0)throw"None of formatsToSupport match supported values.";return d},u.prototype.getUseBarCodeDetectorIfSupported=function(r){if(ar(r))return!0;if(!ar(r.useBarCodeDetectorIfSupported))return r.useBarCodeDetectorIfSupported!==!1;if(ar(r.experimentalFeatures))return!0;var l=r.experimentalFeatures;return ar(l.useBarCodeDetectorIfSupported)?!0:l.useBarCodeDetectorIfSupported!==!1},u.prototype.validateQrboxSize=function(r,l,d){var p=this,m=d.qrbox;this.validateQrboxConfig(m);var E=this.toQrdimensions(r,l,m),_=function(b){if(b<yi.MIN_QR_BOX_SIZE)throw"minimum size of 'config.qrbox' dimension value is"+" ".concat(yi.MIN_QR_BOX_SIZE,"px.")},C=function(b){return b>r&&(p.logger.warn("`qrbox.width` or `qrbox` is larger than the width of the root element. The width will be truncated to the width of root element."),b=r),b};_(E.width),_(E.height),E.width=C(E.width)},u.prototype.validateQrboxConfig=function(r){if(typeof r!="number"&&typeof r!="function"&&(r.width===void 0||r.height===void 0))throw"Invalid instance of QrDimensions passed for 'config.qrbox'. Both 'width' and 'height' should be set."},u.prototype.toQrdimensions=function(r,l,d){if(typeof d=="number")return{width:d,height:d};if(typeof d=="function")try{return d(r,l)}catch(p){throw new Error("qrbox config was passed as a function but it failed with unknown error"+p)}return d},u.prototype.setupUi=function(r,l,d){d.isShadedBoxEnabled()&&this.validateQrboxSize(r,l,d);var p=ar(d.qrbox)?{width:r,height:l}:d.qrbox;this.validateQrboxConfig(p);var m=this.toQrdimensions(r,l,p);m.height>l&&this.logger.warn("[Html5Qrcode] config.qrbox has height that isgreater than the height of the video stream. Shading will be ignored");var E=d.isShadedBoxEnabled()&&m.height<=l,_={x:0,y:0,width:r,height:l},C=E?this.getShadedRegionBounds(r,l,m):_,b=this.createCanvasElement(C.width,C.height),N={willReadFrequently:!0},D=b.getContext("2d",N);D.canvas.width=C.width,D.canvas.height=C.height,this.element.append(b),E&&this.possiblyInsertShadingElement(this.element,r,l,m),this.createScannerPausedUiElement(this.element),this.qrRegion=C,this.context=D,this.canvasElement=b},u.prototype.createScannerPausedUiElement=function(r){var l=document.createElement("div");l.innerText=qs.scannerPaused(),l.style.display="none",l.style.position="absolute",l.style.top="0px",l.style.zIndex="1",l.style.background="rgba(9, 9, 9, 0.46)",l.style.color="#FFECEC",l.style.textAlign="center",l.style.width="100%",r.appendChild(l),this.scannerPausedUiElement=l},u.prototype.scanContext=function(r,l){var d=this;return this.stateManagerProxy.isPaused()?Promise.resolve(!1):this.qrcode.decodeAsync(this.canvasElement).then(function(p){return r(p.text,_1.createFromQrcodeResult(p)),d.possiblyUpdateShaders(!0),!0}).catch(function(p){d.possiblyUpdateShaders(!1);var m=qs.codeParseError(p);return l(m,hg.createFrom(m)),!1})},u.prototype.foreverScan=function(r,l,d){var p=this;if(this.shouldScan&&this.renderedCamera){var m=this.renderedCamera.getSurface(),E=m.videoWidth/m.clientWidth,_=m.videoHeight/m.clientHeight;if(!this.qrRegion)throw"qrRegion undefined when localMediaStream is ready.";var C=this.qrRegion.width*E,b=this.qrRegion.height*_,N=this.qrRegion.x*E,D=this.qrRegion.y*_;this.context.drawImage(m,N,D,C,b,0,0,this.qrRegion.width,this.qrRegion.height);var F=function(){p.foreverScanTimeout=setTimeout(function(){p.foreverScan(r,l,d)},p.getTimeoutFps(r.fps))};this.scanContext(l,d).then(function(P){!P&&r.disableFlip!==!0?(p.context.translate(p.context.canvas.width,0),p.context.scale(-1,1),p.scanContext(l,d).finally(function(){F()})):F()}).catch(function(P){p.logger.logError("Error happend while scanning context",P),F()})}},u.prototype.createVideoConstraints=function(r){if(typeof r=="string")return{deviceId:{exact:r}};if(typeof r=="object"){var l="facingMode",d="deviceId",p={user:!0,environment:!0},m="exact",E=function(ne){if(ne in p)return!0;throw"config has invalid 'facingMode' value = "+"'".concat(ne,"'")},_=Object.keys(r);if(_.length!==1)throw"'cameraIdOrConfig' object should have exactly 1 key,"+" if passed as an object, found ".concat(_.length," keys");var C=Object.keys(r)[0];if(C!==l&&C!==d)throw"Only '".concat(l,"' and '").concat(d,"' ")+" are supported for 'cameraIdOrConfig'";if(C===l){var b=r.facingMode;if(typeof b=="string"){if(E(b))return{facingMode:b}}else if(typeof b=="object")if(m in b){if(E(b["".concat(m)]))return{facingMode:{exact:b["".concat(m)]}}}else throw"'facingMode' should be string or object with"+" ".concat(m," as key.");else{var N=typeof b;throw"Invalid type of 'facingMode' = ".concat(N)}}else{var D=r.deviceId;if(typeof D=="string")return{deviceId:D};if(typeof D=="object"){if(m in D)return{deviceId:{exact:D["".concat(m)]}};throw"'deviceId' should be string or object with"+" ".concat(m," as key.")}else{var F=typeof D;throw"Invalid type of 'deviceId' = ".concat(F)}}}var P=typeof r;throw"Invalid type of 'cameraIdOrConfig' = ".concat(P)},u.prototype.computeCanvasDrawConfig=function(r,l,d,p){if(r<=d&&l<=p){var m=(d-r)/2,E=(p-l)/2;return{x:m,y:E,width:r,height:l}}else{var _=r,C=l;return r>d&&(l=d/r*l,r=d),l>p&&(r=p/l*r,l=p),this.logger.log("Image downsampled from "+"".concat(_,"X").concat(C)+" to ".concat(r,"X").concat(l,".")),this.computeCanvasDrawConfig(r,l,d,p)}},u.prototype.clearElement=function(){if(this.stateManagerProxy.isScanning())throw"Cannot clear while scan is ongoing, close it first.";var r=document.getElementById(this.elementId);r&&(r.innerHTML="")},u.prototype.possiblyUpdateShaders=function(r){this.qrMatch!==r&&(this.hasBorderShaders&&this.borderShaders&&this.borderShaders.length&&this.borderShaders.forEach(function(l){l.style.backgroundColor=r?yi.BORDER_SHADER_MATCH_COLOR:yi.BORDER_SHADER_DEFAULT_COLOR}),this.qrMatch=r)},u.prototype.possiblyCloseLastScanImageFile=function(){this.lastScanImageFile&&(URL.revokeObjectURL(this.lastScanImageFile),this.lastScanImageFile=null)},u.prototype.createCanvasElement=function(r,l,d){var p=r,m=l,E=document.createElement("canvas");return E.style.width="".concat(p,"px"),E.style.height="".concat(m,"px"),E.style.display="none",E.id=ar(d)?"qr-canvas":d,E},u.prototype.getShadedRegionBounds=function(r,l,d){if(d.width>r||d.height>l)throw"'config.qrbox' dimensions should not be greater than the dimensions of the root HTML element.";return{x:(r-d.width)/2,y:(l-d.height)/2,width:d.width,height:d.height}},u.prototype.possiblyInsertShadingElement=function(r,l,d,p){if(!(l-p.width<1||d-p.height<1)){var m=document.createElement("div");m.style.position="absolute";var E=(l-p.width)/2,_=(d-p.height)/2;if(m.style.borderLeft="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderRight="".concat(E,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderTop="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),m.style.borderBottom="".concat(_,"px solid rgba(0, 0, 0, 0.48)"),m.style.boxSizing="border-box",m.style.top="0px",m.style.bottom="0px",m.style.left="0px",m.style.right="0px",m.id="".concat(yi.SHADED_REGION_ELEMENT_ID),l-p.width<11||d-p.height<11)this.hasBorderShaders=!1;else{var C=5,b=40;this.insertShaderBorders(m,b,C,-C,null,0,!0),this.insertShaderBorders(m,b,C,-C,null,0,!1),this.insertShaderBorders(m,b,C,null,-C,0,!0),this.insertShaderBorders(m,b,C,null,-C,0,!1),this.insertShaderBorders(m,C,b+C,-C,null,-C,!0),this.insertShaderBorders(m,C,b+C,null,-C,-C,!0),this.insertShaderBorders(m,C,b+C,-C,null,-C,!1),this.insertShaderBorders(m,C,b+C,null,-C,-C,!1),this.hasBorderShaders=!0}r.append(m)}},u.prototype.insertShaderBorders=function(r,l,d,p,m,E,_){var C=document.createElement("div");C.style.position="absolute",C.style.backgroundColor=yi.BORDER_SHADER_DEFAULT_COLOR,C.style.width="".concat(l,"px"),C.style.height="".concat(d,"px"),p!==null&&(C.style.top="".concat(p,"px")),m!==null&&(C.style.bottom="".concat(m,"px")),_?C.style.left="".concat(E,"px"):C.style.right="".concat(E,"px"),this.borderShaders||(this.borderShaders=[]),this.borderShaders.push(C),r.appendChild(C)},u.prototype.showPausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="block"},u.prototype.hidePausedState=function(){if(!this.scannerPausedUiElement)throw"[internal error] scanner paused UI element not found";this.scannerPausedUiElement.style.display="none"},u.prototype.getTimeoutFps=function(r){return 1e3/r},u})(),of="data:image/svg+xml;base64,",Im=of+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzNzEuNjQzIDM3MS42NDMiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDM3MS42NDMgMzcxLjY0MyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTEwNS4wODQgMzguMjcxaDE2My43Njh2MjBIMTA1LjA4NHoiLz48cGF0aCBkPSJNMzExLjU5NiAxOTAuMTg5Yy03LjQ0MS05LjM0Ny0xOC40MDMtMTYuMjA2LTMyLjc0My0yMC41MjJWMzBjMC0xNi41NDItMTMuNDU4LTMwLTMwLTMwSDEyNS4wODRjLTE2LjU0MiAwLTMwIDEzLjQ1OC0zMCAzMHYxMjAuMTQzaC04LjI5NmMtMTYuNTQyIDAtMzAgMTMuNDU4LTMwIDMwdjEuMzMzYTI5LjgwNCAyOS44MDQgMCAwIDAgNC42MDMgMTUuOTM5Yy03LjM0IDUuNDc0LTEyLjEwMyAxNC4yMjEtMTIuMTAzIDI0LjA2MXYxLjMzM2MwIDkuODQgNC43NjMgMTguNTg3IDEyLjEwMyAyNC4wNjJhMjkuODEgMjkuODEgMCAwIDAtNC42MDMgMTUuOTM4djEuMzMzYzAgMTYuNTQyIDEzLjQ1OCAzMCAzMCAzMGg4LjMyNGMuNDI3IDExLjYzMSA3LjUwMyAyMS41ODcgMTcuNTM0IDI2LjE3Ny45MzEgMTAuNTAzIDQuMDg0IDMwLjE4NyAxNC43NjggNDUuNTM3YTkuOTg4IDkuOTg4IDAgMCAwIDguMjE2IDQuMjg4IDkuOTU4IDkuOTU4IDAgMCAwIDUuNzA0LTEuNzkzYzQuNTMzLTMuMTU1IDUuNjUtOS4zODggMi40OTUtMTMuOTIxLTYuNzk4LTkuNzY3LTkuNjAyLTIyLjYwOC0xMC43Ni0zMS40aDgyLjY4NWMuMjcyLjQxNC41NDUuODE4LjgxNSAxLjIxIDMuMTQyIDQuNTQxIDkuMzcyIDUuNjc5IDEzLjkxMyAyLjUzNCA0LjU0Mi0zLjE0MiA1LjY3Ny05LjM3MSAyLjUzNS0xMy45MTMtMTEuOTE5LTE3LjIyOS04Ljc4Ny0zNS44ODQgOS41ODEtNTcuMDEyIDMuMDY3LTIuNjUyIDEyLjMwNy0xMS43MzIgMTEuMjE3LTI0LjAzMy0uODI4LTkuMzQzLTcuMTA5LTE3LjE5NC0xOC42NjktMjMuMzM3YTkuODU3IDkuODU3IDAgMCAwLTEuMDYxLS40ODZjLS40NjYtLjE4Mi0xMS40MDMtNC41NzktOS43NDEtMTUuNzA2IDEuMDA3LTYuNzM3IDE0Ljc2OC04LjI3MyAyMy43NjYtNy42NjYgMjMuMTU2IDEuNTY5IDM5LjY5OCA3LjgwMyA0Ny44MzYgMTguMDI2IDUuNzUyIDcuMjI1IDcuNjA3IDE2LjYyMyA1LjY3MyAyOC43MzMtLjQxMyAyLjU4NS0uODI0IDUuMjQxLTEuMjQ1IDcuOTU5LTUuNzU2IDM3LjE5NC0xMi45MTkgODMuNDgzLTQ5Ljg3IDExNC42NjEtNC4yMjEgMy41NjEtNC43NTYgOS44Ny0xLjE5NCAxNC4wOTJhOS45OCA5Ljk4IDAgMCAwIDcuNjQ4IDMuNTUxIDkuOTU1IDkuOTU1IDAgMCAwIDYuNDQ0LTIuMzU4YzQyLjY3Mi0zNi4wMDUgNTAuODAyLTg4LjUzMyA1Ni43MzctMTI2Ljg4OC40MTUtMi42ODQuODIxLTUuMzA5IDEuMjI5LTcuODYzIDIuODM0LTE3LjcyMS0uNDU1LTMyLjY0MS05Ljc3Mi00NC4zNDV6bS0yMzIuMzA4IDQyLjYyYy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM2MwLTUuNTE0IDQuNDg2LTEwIDEwLTEwaDE1djIxLjMzM2gtMTV6bS0yLjUtNTIuNjY2YzAtNS41MTQgNC40ODYtMTAgMTAtMTBoNy41djIxLjMzM2gtNy41Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi0xLjMzM3ptMTcuNSA5My45OTloLTcuNWMtNS41MTQgMC0xMC00LjQ4Ni0xMC0xMHYtMS4zMzNjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGg3LjV2MjEuMzMzem0zMC43OTYgMjguODg3Yy01LjUxNCAwLTEwLTQuNDg2LTEwLTEwdi04LjI3MWg5MS40NTdjLS44NTEgNi42NjgtLjQzNyAxMi43ODcuNzMxIDE4LjI3MWgtODIuMTg4em03OS40ODItMTEzLjY5OGMtMy4xMjQgMjAuOTA2IDEyLjQyNyAzMy4xODQgMjEuNjI1IDM3LjA0IDUuNDQxIDIuOTY4IDcuNTUxIDUuNjQ3IDcuNzAxIDcuMTg4LjIxIDIuMTUtMi41NTMgNS42ODQtNC40NzcgNy4yNTEtLjQ4Mi4zNzgtLjkyOS44LTEuMzM1IDEuMjYxLTYuOTg3IDcuOTM2LTExLjk4MiAxNS41Mi0xNS40MzIgMjIuNjg4aC05Ny41NjRWMzBjMC01LjUxNCA0LjQ4Ni0xMCAxMC0xMGgxMjMuNzY5YzUuNTE0IDAgMTAgNC40ODYgMTAgMTB2MTM1LjU3OWMtMy4wMzItLjM4MS02LjE1LS42OTQtOS4zODktLjkxNC0yNS4xNTktMS42OTQtNDIuMzcgNy43NDgtNDQuODk4IDI0LjY2NnoiLz48cGF0aCBkPSJNMTc5LjEyOSA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXpNMTcyLjYyOSAxNDIuODZoLTEyLjU2VjEzMC44YTUgNSAwIDEgMC0xMCAwdjE3LjA2MWE1IDUgMCAwIDAgNSA1aDE3LjU2YTUgNSAwIDEgMCAwLTEwLjAwMXpNMjE2LjU2OCA4My4xNjdoLTI0LjA2YTUgNSAwIDAgMC01IDV2MjQuMDYxYTUgNSAwIDAgMCA1IDVoMjQuMDZhNSA1IDAgMCAwIDUtNVY4OC4xNjdhNSA1IDAgMCAwLTUtNXptLTUgMjQuMDYxaC0xNC4wNlY5My4xNjdoMTQuMDZ2MTQuMDYxek0yMTEuNjY5IDEyNS45MzZIMTk3LjQxYTUgNSAwIDAgMC01IDV2MTQuMjU3YTUgNSAwIDAgMCA1IDVoMTQuMjU5YTUgNSAwIDAgMCA1LTV2LTE0LjI1N2E1IDUgMCAwIDAtNS01eiIvPjwvc3ZnPg==",Nm=of+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1OS4wMTggNTkuMDE4IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA1OS4wMTggNTkuMDE4IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJtNTguNzQxIDU0LjgwOS01Ljk2OS02LjI0NGExMC43NCAxMC43NCAwIDAgMCAyLjgyLTcuMjVjMC01Ljk1My00Ljg0My0xMC43OTYtMTAuNzk2LTEwLjc5NlMzNCAzNS4zNjEgMzQgNDEuMzE0IDM4Ljg0MyA1Mi4xMSA0NC43OTYgNTIuMTFjMi40NDEgMCA0LjY4OC0uODI0IDYuNDk5LTIuMTk2bDYuMDAxIDYuMjc3YS45OTguOTk4IDAgMCAwIDEuNDE0LjAzMiAxIDEgMCAwIDAgLjAzMS0xLjQxNHpNMzYgNDEuMzE0YzAtNC44NSAzLjk0Ni04Ljc5NiA4Ljc5Ni04Ljc5NnM4Ljc5NiAzLjk0NiA4Ljc5NiA4Ljc5Ni0zLjk0NiA4Ljc5Ni04Ljc5NiA4Ljc5NlMzNiA0Ni4xNjQgMzYgNDEuMzE0ek0xMC40MzEgMTYuMDg4YzAgMy4wNyAyLjQ5OCA1LjU2OCA1LjU2OSA1LjU2OHM1LjU2OS0yLjQ5OCA1LjU2OS01LjU2OGMwLTMuMDcxLTIuNDk4LTUuNTY5LTUuNTY5LTUuNTY5cy01LjU2OSAyLjQ5OC01LjU2OSA1LjU2OXptOS4xMzggMGMwIDEuOTY4LTEuNjAyIDMuNTY4LTMuNTY5IDMuNTY4cy0zLjU2OS0xLjYwMS0zLjU2OS0zLjU2OCAxLjYwMi0zLjU2OSAzLjU2OS0zLjU2OSAzLjU2OSAxLjYwMSAzLjU2OSAzLjU2OXoiLz48cGF0aCBkPSJtMzAuODgyIDI4Ljk4NyA5LjE4LTEwLjA1NCAxMS4yNjIgMTAuMzIzYTEgMSAwIDAgMCAxLjM1MS0xLjQ3NWwtMTItMTFhMSAxIDAgMCAwLTEuNDE0LjA2M2wtOS43OTQgMTAuNzI3LTQuNzQzLTQuNzQzYTEuMDAzIDEuMDAzIDAgMCAwLTEuMzY4LS4wNDRMNi4zMzkgMzcuNzY4YTEgMSAwIDEgMCAxLjMyMiAxLjUwMWwxNi4zMTMtMTQuMzYyIDcuMzE5IDcuMzE4YS45OTkuOTk5IDAgMSAwIDEuNDE0LTEuNDE0bC0xLjgyNS0xLjgyNHoiLz48cGF0aCBkPSJNMzAgNDYuNTE4SDJ2LTQyaDU0djI4YTEgMSAwIDEgMCAyIDB2LTI5YTEgMSAwIDAgMC0xLTFIMWExIDEgMCAwIDAtMSAxdjQ0YTEgMSAwIDAgMCAxIDFoMjlhMSAxIDAgMSAwIDAtMnoiLz48L3N2Zz4=",L1=of+"PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0NjAgNDYwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCA0NjAgNDYwIiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjMwIDBDMTAyLjk3NSAwIDAgMTAyLjk3NSAwIDIzMHMxMDIuOTc1IDIzMCAyMzAgMjMwIDIzMC0xMDIuOTc0IDIzMC0yMzBTMzU3LjAyNSAwIDIzMCAwem0zOC4zMzMgMzc3LjM2YzAgOC42NzYtNy4wMzQgMTUuNzEtMTUuNzEgMTUuNzFoLTQzLjEwMWMtOC42NzYgMC0xNS43MS03LjAzNC0xNS43MS0xNS43MVYyMDIuNDc3YzAtOC42NzYgNy4wMzMtMTUuNzEgMTUuNzEtMTUuNzFoNDMuMTAxYzguNjc2IDAgMTUuNzEgNy4wMzMgMTUuNzEgMTUuNzFWMzc3LjM2ek0yMzAgMTU3Yy0yMS41MzkgMC0zOS0xNy40NjEtMzktMzlzMTcuNDYxLTM5IDM5LTM5IDM5IDE3LjQ2MSAzOSAzOS0xNy40NjEgMzktMzkgMzl6Ii8+PC9zdmc+",Rm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAAQgAAAEIBarqQRAAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAAE1SURBVDiNfdI7S0NBEAXgLya1otFgpbYSbISAgpXYi6CmiH9KCAiChaVga6OiWPgfRDQ+0itaGVNosXtluWwcuMzePfM4M3sq8lbHBubwg1dc4m1E/J/N4ghDPOIsfk/4xiEao5KX0McFljN4C9d4QTPXuY99jP3DsIoDPGM6BY5i5yI5R7O4q+ImFkJY2DCh3cAH2klyB+9J1xUMMAG7eCh1a+Mr+k48b5diXrFVwwLuS+BJ9MfR7+G0FHOHhTHhnXNWS87VDF4pcnfQK4Ep7XScNLmPTZgURNKKYENYWDpzW1BhscS1WHS8CDgURFJQrWcoF3c13KKbgg1BYQfy8xZWEzTTw1QZbAoKu8FqJnktdu5hcVSHmchiILzzuaDQvjBzV2m8yohCE1jHfPx/xhU+y4G/D75ELlRJsSYAAAAASUVORK5CYII=",k1=(function(){function u(){}return u.createDefault=function(){return{hasPermission:!1,lastUsedCameraId:null}},u})(),Dm=(function(){function u(){this.data=k1.createDefault();var r=localStorage.getItem(u.LOCAL_STORAGE_KEY);r?this.data=JSON.parse(r):this.reset()}return u.prototype.hasCameraPermissions=function(){return this.data.hasPermission},u.prototype.getLastUsedCameraId=function(){return this.data.lastUsedCameraId},u.prototype.setHasPermission=function(r){this.data.hasPermission=r,this.flush()},u.prototype.setLastUsedCameraId=function(r){this.data.lastUsedCameraId=r,this.flush()},u.prototype.resetLastUsedCameraId=function(){this.data.lastUsedCameraId=null,this.flush()},u.prototype.reset=function(){this.data=k1.createDefault(),this.flush()},u.prototype.flush=function(){localStorage.setItem(u.LOCAL_STORAGE_KEY,JSON.stringify(this.data))},u.LOCAL_STORAGE_KEY="HTML5_QRCODE_DATA",u})(),Mm=(function(){function u(){this.infoDiv=document.createElement("div")}return u.prototype.renderInto=function(r){this.infoDiv.style.position="absolute",this.infoDiv.style.top="10px",this.infoDiv.style.right="10px",this.infoDiv.style.zIndex="2",this.infoDiv.style.display="none",this.infoDiv.style.padding="5pt",this.infoDiv.style.border="1px solid #171717",this.infoDiv.style.fontSize="10pt",this.infoDiv.style.background="rgb(0 0 0 / 69%)",this.infoDiv.style.borderRadius="5px",this.infoDiv.style.textAlign="center",this.infoDiv.style.fontWeight="400",this.infoDiv.style.color="white",this.infoDiv.innerText=C1.poweredBy();var l=document.createElement("a");l.innerText="ScanApp",l.href="https://scanapp.org",l.target="new",l.style.color="white",this.infoDiv.appendChild(l);var d=document.createElement("br"),p=document.createElement("br");this.infoDiv.appendChild(d),this.infoDiv.appendChild(p);var m=document.createElement("a");m.innerText=C1.reportIssues(),m.href="https://github.com/mebjas/html5-qrcode/issues",m.target="new",m.style.color="white",this.infoDiv.appendChild(m),r.appendChild(this.infoDiv)},u.prototype.show=function(){this.infoDiv.style.display="block"},u.prototype.hide=function(){this.infoDiv.style.display="none"},u})(),Bm=(function(){function u(r,l){this.isShowingInfoIcon=!0,this.onTapIn=r,this.onTapOut=l,this.infoIcon=document.createElement("img")}return u.prototype.renderInto=function(r){var l=this;this.infoIcon.alt="Info icon",this.infoIcon.src=L1,this.infoIcon.style.position="absolute",this.infoIcon.style.top="4px",this.infoIcon.style.right="4px",this.infoIcon.style.opacity="0.6",this.infoIcon.style.cursor="pointer",this.infoIcon.style.zIndex="2",this.infoIcon.style.width="16px",this.infoIcon.style.height="16px",this.infoIcon.onmouseover=function(d){return l.onHoverIn()},this.infoIcon.onmouseout=function(d){return l.onHoverOut()},this.infoIcon.onclick=function(d){return l.onClick()},r.appendChild(this.infoIcon)},u.prototype.onHoverIn=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="1")},u.prototype.onHoverOut=function(){this.isShowingInfoIcon&&(this.infoIcon.style.opacity="0.6")},u.prototype.onClick=function(){this.isShowingInfoIcon?(this.isShowingInfoIcon=!1,this.onTapIn(),this.infoIcon.src=Rm,this.infoIcon.style.opacity="1"):(this.isShowingInfoIcon=!0,this.onTapOut(),this.infoIcon.src=L1,this.infoIcon.style.opacity="0.6")},u})(),Lm=(function(){function u(){var r=this;this.infoDiv=new Mm,this.infoIcon=new Bm(function(){r.infoDiv.show()},function(){r.infoDiv.hide()})}return u.prototype.renderInto=function(r){this.infoDiv.renderInto(r),this.infoIcon.renderInto(r)},u})(),km=function(u,r,l,d){function p(m){return m instanceof l?m:new l(function(E){E(m)})}return new(l||(l=Promise))(function(m,E){function _(N){try{b(d.next(N))}catch(D){E(D)}}function C(N){try{b(d.throw(N))}catch(D){E(D)}}function b(N){N.done?m(N.value):p(N.value).then(_,C)}b((d=d.apply(u,r||[])).next())})},Um=function(u,r){var l={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},d,p,m,E;return E={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function _(b){return function(N){return C([b,N])}}function C(b){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,b[0]&&(l=0)),l;)try{if(d=1,p&&(m=b[0]&2?p.return:b[0]?p.throw||((m=p.return)&&m.call(p),0):p.next)&&!(m=m.call(p,b[1])).done)return m;switch(p=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return l.label++,{value:b[1],done:!1};case 5:l.label++,p=b[1],b=[0];continue;case 7:b=l.ops.pop(),l.trys.pop();continue;default:if(m=l.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){l=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){l.label=b[1];break}if(b[0]===6&&l.label<m[1]){l.label=m[1],m=b;break}if(m&&l.label<m[2]){l.label=m[2],l.ops.push(b);break}m[2]&&l.ops.pop(),l.trys.pop();continue}b=r.call(u,l)}catch(N){b=[6,N],p=0}finally{d=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},U1=(function(){function u(){}return u.hasPermissions=function(){return km(this,void 0,void 0,function(){var r,l,d,p;return Um(this,function(m){switch(m.label){case 0:return[4,navigator.mediaDevices.enumerateDevices()];case 1:for(r=m.sent(),l=0,d=r;l<d.length;l++)if(p=d[l],p.kind==="videoinput"&&p.label)return[2,!0];return[2,!1]}})})},u})(),ya=(function(){function u(r){this.supportedScanTypes=this.validateAndReturnScanTypes(r)}return u.prototype.getDefaultScanType=function(){return this.supportedScanTypes[0]},u.prototype.hasMoreThanOneScanType=function(){return this.supportedScanTypes.length>1},u.prototype.isCameraScanRequired=function(){for(var r=0,l=this.supportedScanTypes;r<l.length;r++){var d=l[r];if(u.isCameraScanType(d))return!0}return!1},u.isCameraScanType=function(r){return r===Aa.SCAN_TYPE_CAMERA},u.isFileScanType=function(r){return r===Aa.SCAN_TYPE_FILE},u.prototype.validateAndReturnScanTypes=function(r){if(!r||r.length===0)return Yi.DEFAULT_SUPPORTED_SCAN_TYPE;var l=Yi.DEFAULT_SUPPORTED_SCAN_TYPE.length;if(r.length>l)throw"Max ".concat(l," values expected for ")+"supportedScanTypes";for(var d=0,p=r;d<p.length;d++){var m=p[d];if(!Yi.DEFAULT_SUPPORTED_SCAN_TYPE.includes(m))throw"Unsupported scan type ".concat(m)}return r},u})(),xi=(function(){function u(){}return u.ALL_ELEMENT_CLASS="html5-qrcode-element",u.CAMERA_PERMISSION_BUTTON_ID="html5-qrcode-button-camera-permission",u.CAMERA_START_BUTTON_ID="html5-qrcode-button-camera-start",u.CAMERA_STOP_BUTTON_ID="html5-qrcode-button-camera-stop",u.TORCH_BUTTON_ID="html5-qrcode-button-torch",u.CAMERA_SELECTION_SELECT_ID="html5-qrcode-select-camera",u.FILE_SELECTION_BUTTON_ID="html5-qrcode-button-file-selection",u.ZOOM_SLIDER_ID="html5-qrcode-input-range-zoom",u.SCAN_TYPE_CHANGE_ANCHOR_ID="html5-qrcode-anchor-scan-type-change",u.TORCH_BUTTON_CLASS_TORCH_ON="html5-qrcode-button-torch-on",u.TORCH_BUTTON_CLASS_TORCH_OFF="html5-qrcode-button-torch-off",u})(),Nr=(function(){function u(){}return u.createElement=function(r,l){var d=document.createElement(r);return d.id=l,d.classList.add(xi.ALL_ELEMENT_CLASS),r==="button"&&d.setAttribute("type","button"),d},u})(),mg=function(u,r,l,d){function p(m){return m instanceof l?m:new l(function(E){E(m)})}return new(l||(l=Promise))(function(m,E){function _(N){try{b(d.next(N))}catch(D){E(D)}}function C(N){try{b(d.throw(N))}catch(D){E(D)}}function b(N){N.done?m(N.value):p(N.value).then(_,C)}b((d=d.apply(u,r||[])).next())})},yg=function(u,r){var l={label:0,sent:function(){if(m[0]&1)throw m[1];return m[1]},trys:[],ops:[]},d,p,m,E;return E={next:_(0),throw:_(1),return:_(2)},typeof Symbol=="function"&&(E[Symbol.iterator]=function(){return this}),E;function _(b){return function(N){return C([b,N])}}function C(b){if(d)throw new TypeError("Generator is already executing.");for(;E&&(E=0,b[0]&&(l=0)),l;)try{if(d=1,p&&(m=b[0]&2?p.return:b[0]?p.throw||((m=p.return)&&m.call(p),0):p.next)&&!(m=m.call(p,b[1])).done)return m;switch(p=0,m&&(b=[b[0]&2,m.value]),b[0]){case 0:case 1:m=b;break;case 4:return l.label++,{value:b[1],done:!1};case 5:l.label++,p=b[1],b=[0];continue;case 7:b=l.ops.pop(),l.trys.pop();continue;default:if(m=l.trys,!(m=m.length>0&&m[m.length-1])&&(b[0]===6||b[0]===2)){l=0;continue}if(b[0]===3&&(!m||b[1]>m[0]&&b[1]<m[3])){l.label=b[1];break}if(b[0]===6&&l.label<m[1]){l.label=m[1],m=b;break}if(m&&l.label<m[2]){l.label=m[2],l.ops.push(b);break}m[2]&&l.ops.pop(),l.trys.pop();continue}b=r.call(u,l)}catch(N){b=[6,N],p=0}finally{d=m=0}if(b[0]&5)throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}},j1=(function(){function u(r,l,d){this.isTorchOn=!1,this.torchCapability=r,this.buttonController=l,this.onTorchActionFailureCallback=d}return u.prototype.isTorchEnabled=function(){return this.isTorchOn},u.prototype.flipState=function(){return mg(this,void 0,void 0,function(){var r,l;return yg(this,function(d){switch(d.label){case 0:this.buttonController.disable(),r=!this.isTorchOn,d.label=1;case 1:return d.trys.push([1,3,,4]),[4,this.torchCapability.apply(r)];case 2:return d.sent(),this.updateUiBasedOnLatestSettings(this.torchCapability.value(),r),[3,4];case 3:return l=d.sent(),this.propagateFailure(r,l),this.buttonController.enable(),[3,4];case 4:return[2]}})})},u.prototype.updateUiBasedOnLatestSettings=function(r,l){r===l?(this.buttonController.setText(l?Tt.torchOffButton():Tt.torchOnButton()),this.isTorchOn=l):this.propagateFailure(l),this.buttonController.enable()},u.prototype.propagateFailure=function(r,l){var d=r?Tt.torchOnFailedMessage():Tt.torchOffFailedMessage();l&&(d+="; Error = "+l),this.onTorchActionFailureCallback(d)},u.prototype.reset=function(){this.isTorchOn=!1},u})(),jm=(function(){function u(r,l){this.onTorchActionFailureCallback=l,this.torchButton=Nr.createElement("button",xi.TORCH_BUTTON_ID),this.torchController=new j1(r,this,l)}return u.prototype.render=function(r,l){var d=this;this.torchButton.innerText=Tt.torchOnButton(),this.torchButton.style.display=l.display,this.torchButton.style.marginLeft=l.marginLeft;var p=this;this.torchButton.addEventListener("click",function(m){return mg(d,void 0,void 0,function(){return yg(this,function(E){switch(E.label){case 0:return[4,p.torchController.flipState()];case 1:return E.sent(),p.torchController.isTorchEnabled()?(p.torchButton.classList.remove(xi.TORCH_BUTTON_CLASS_TORCH_OFF),p.torchButton.classList.add(xi.TORCH_BUTTON_CLASS_TORCH_ON)):(p.torchButton.classList.remove(xi.TORCH_BUTTON_CLASS_TORCH_ON),p.torchButton.classList.add(xi.TORCH_BUTTON_CLASS_TORCH_OFF)),[2]}})})}),r.appendChild(this.torchButton)},u.prototype.updateTorchCapability=function(r){this.torchController=new j1(r,this,this.onTorchActionFailureCallback)},u.prototype.getTorchButton=function(){return this.torchButton},u.prototype.hide=function(){this.torchButton.style.display="none"},u.prototype.show=function(){this.torchButton.style.display="inline-block"},u.prototype.disable=function(){this.torchButton.disabled=!0},u.prototype.enable=function(){this.torchButton.disabled=!1},u.prototype.setText=function(r){this.torchButton.innerText=r},u.prototype.reset=function(){this.torchButton.innerText=Tt.torchOnButton(),this.torchController.reset()},u.create=function(r,l,d,p){var m=new u(l,p);return m.render(r,d),m},u})(),zm=(function(){function u(r,l,d){this.fileBasedScanRegion=this.createFileBasedScanRegion(),this.fileBasedScanRegion.style.display=l?"block":"none",r.appendChild(this.fileBasedScanRegion);var p=document.createElement("label");p.setAttribute("for",this.getFileScanInputId()),p.style.display="inline-block",this.fileBasedScanRegion.appendChild(p),this.fileSelectionButton=Nr.createElement("button",xi.FILE_SELECTION_BUTTON_ID),this.setInitialValueToButton(),this.fileSelectionButton.addEventListener("click",function(_){p.click()}),p.append(this.fileSelectionButton),this.fileScanInput=Nr.createElement("input",this.getFileScanInputId()),this.fileScanInput.type="file",this.fileScanInput.accept="image/*",this.fileScanInput.style.display="none",p.appendChild(this.fileScanInput);var m=this;this.fileScanInput.addEventListener("change",function(_){if(!(_==null||_.target==null)){var C=_.target;if(!(C.files&&C.files.length===0)){var b=C.files,N=b[0],D=N.name;m.setImageNameToButton(D),d(N)}}});var E=this.createDragAndDropMessage();this.fileBasedScanRegion.appendChild(E),this.fileBasedScanRegion.addEventListener("dragenter",function(_){m.fileBasedScanRegion.style.border=m.fileBasedScanRegionActiveBorder(),_.stopPropagation(),_.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragleave",function(_){m.fileBasedScanRegion.style.border=m.fileBasedScanRegionDefaultBorder(),_.stopPropagation(),_.preventDefault()}),this.fileBasedScanRegion.addEventListener("dragover",function(_){m.fileBasedScanRegion.style.border=m.fileBasedScanRegionActiveBorder(),_.stopPropagation(),_.preventDefault()}),this.fileBasedScanRegion.addEventListener("drop",function(_){_.stopPropagation(),_.preventDefault(),m.fileBasedScanRegion.style.border=m.fileBasedScanRegionDefaultBorder();var C=_.dataTransfer;if(C){var b=C.files;if(!b||b.length===0)return;for(var N=!1,D=0;D<b.length;++D){var F=b.item(D);if(F){var P=/image.*/;if(F.type.match(P)){N=!0;var ne=F.name;m.setImageNameToButton(ne),d(F),E.innerText=Tt.dragAndDropMessage();break}}}N||(E.innerText=Tt.dragAndDropMessageOnlyImages())}})}return u.prototype.hide=function(){this.fileBasedScanRegion.style.display="none",this.fileScanInput.disabled=!0},u.prototype.show=function(){this.fileBasedScanRegion.style.display="block",this.fileScanInput.disabled=!1},u.prototype.isShowing=function(){return this.fileBasedScanRegion.style.display==="block"},u.prototype.resetValue=function(){this.fileScanInput.value="",this.setInitialValueToButton()},u.prototype.createFileBasedScanRegion=function(){var r=document.createElement("div");return r.style.textAlign="center",r.style.margin="auto",r.style.width="80%",r.style.maxWidth="600px",r.style.border=this.fileBasedScanRegionDefaultBorder(),r.style.padding="10px",r.style.marginBottom="10px",r},u.prototype.fileBasedScanRegionDefaultBorder=function(){return"6px dashed #ebebeb"},u.prototype.fileBasedScanRegionActiveBorder=function(){return"6px dashed rgb(153 151 151)"},u.prototype.createDragAndDropMessage=function(){var r=document.createElement("div");return r.innerText=Tt.dragAndDropMessage(),r.style.fontWeight="400",r},u.prototype.setImageNameToButton=function(r){var l=20;if(r.length>l){var d=r.substring(0,8),p=r.length,m=r.substring(p-8,p);r="".concat(d,"....").concat(m)}var E=Tt.fileSelectionChooseAnother()+" - "+r;this.fileSelectionButton.innerText=E},u.prototype.setInitialValueToButton=function(){var r=Tt.fileSelectionChooseImage()+" - "+Tt.fileSelectionNoImageSelected();this.fileSelectionButton.innerText=r},u.prototype.getFileScanInputId=function(){return"html5-qrcode-private-filescan-input"},u.create=function(r,l,d){var p=new u(r,l,d);return p},u})(),Pm=(function(){function u(r){this.selectElement=Nr.createElement("select",xi.CAMERA_SELECTION_SELECT_ID),this.cameras=r,this.options=[]}return u.prototype.render=function(r){var l=document.createElement("span");l.style.marginRight="10px";var d=this.cameras.length;if(d===0)throw new Error("No cameras found");if(d===1)l.style.display="none";else{var p=Tt.selectCamera();l.innerText="".concat(p," (").concat(this.cameras.length,")  ")}for(var m=1,E=0,_=this.cameras;E<_.length;E++){var C=_[E],b=C.id,N=C.label==null?b:C.label;(!N||N==="")&&(N=[Tt.anonymousCameraPrefix(),m++].join(" "));var D=document.createElement("option");D.value=b,D.innerText=N,this.options.push(D),this.selectElement.appendChild(D)}l.appendChild(this.selectElement),r.appendChild(l)},u.prototype.disable=function(){this.selectElement.disabled=!0},u.prototype.isDisabled=function(){return this.selectElement.disabled===!0},u.prototype.enable=function(){this.selectElement.disabled=!1},u.prototype.getValue=function(){return this.selectElement.value},u.prototype.hasValue=function(r){for(var l=0,d=this.options;l<d.length;l++){var p=d[l];if(p.value===r)return!0}return!1},u.prototype.setValue=function(r){if(!this.hasValue(r))throw new Error("".concat(r," is not present in the camera list."));this.selectElement.value=r},u.prototype.hasSingleItem=function(){return this.cameras.length===1},u.prototype.numCameras=function(){return this.cameras.length},u.create=function(r,l){var d=new u(l);return d.render(r),d},u})(),Fm=(function(){function u(){this.onChangeCallback=null,this.zoomElementContainer=document.createElement("div"),this.rangeInput=Nr.createElement("input",xi.ZOOM_SLIDER_ID),this.rangeInput.type="range",this.rangeText=document.createElement("span"),this.rangeInput.min="1",this.rangeInput.max="5",this.rangeInput.value="1",this.rangeInput.step="0.1"}return u.prototype.render=function(r,l){this.zoomElementContainer.style.display=l?"block":"none",this.zoomElementContainer.style.padding="5px 10px",this.zoomElementContainer.style.textAlign="center",r.appendChild(this.zoomElementContainer),this.rangeInput.style.display="inline-block",this.rangeInput.style.width="50%",this.rangeInput.style.height="5px",this.rangeInput.style.background="#d3d3d3",this.rangeInput.style.outline="none",this.rangeInput.style.opacity="0.7";var d=Tt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(d),this.rangeText.style.marginRight="10px";var p=this;this.rangeInput.addEventListener("input",function(){return p.onValueChange()}),this.rangeInput.addEventListener("change",function(){return p.onValueChange()}),this.zoomElementContainer.appendChild(this.rangeInput),this.zoomElementContainer.appendChild(this.rangeText)},u.prototype.onValueChange=function(){var r=Tt.zoom();this.rangeText.innerText="".concat(this.rangeInput.value,"x ").concat(r),this.onChangeCallback&&this.onChangeCallback(parseFloat(this.rangeInput.value))},u.prototype.setValues=function(r,l,d,p){this.rangeInput.min=r.toString(),this.rangeInput.max=l.toString(),this.rangeInput.step=p.toString(),this.rangeInput.value=d.toString(),this.onValueChange()},u.prototype.show=function(){this.zoomElementContainer.style.display="block"},u.prototype.hide=function(){this.zoomElementContainer.style.display="none"},u.prototype.setOnCameraZoomValueChangeCallback=function(r){this.onChangeCallback=r},u.prototype.removeOnCameraZoomValueChangeCallback=function(){this.onChangeCallback=null},u.create=function(r,l){var d=new u;return d.render(r,l),d},u})(),pi;(function(u){u[u.STATUS_DEFAULT=0]="STATUS_DEFAULT",u[u.STATUS_SUCCESS=1]="STATUS_SUCCESS",u[u.STATUS_WARNING=2]="STATUS_WARNING",u[u.STATUS_REQUESTING_PERMISSION=3]="STATUS_REQUESTING_PERMISSION"})(pi||(pi={}));function Hm(u){return{fps:u.fps,qrbox:u.qrbox,aspectRatio:u.aspectRatio,disableFlip:u.disableFlip,videoConstraints:u.videoConstraints}}function Vm(u,r){return{formatsToSupport:u.formatsToSupport,useBarCodeDetectorIfSupported:u.useBarCodeDetectorIfSupported,experimentalFeatures:u.experimentalFeatures,verbose:r}}var Gm=(function(){function u(r,l,d){if(this.lastMatchFound=null,this.cameraScanImage=null,this.fileScanImage=null,this.fileSelectionUi=null,this.elementId=r,this.config=this.createConfig(l),this.verbose=d===!0,!document.getElementById(r))throw"HTML Element with id=".concat(r," not found");this.scanTypeSelector=new ya(this.config.supportedScanTypes),this.currentScanType=this.scanTypeSelector.getDefaultScanType(),this.sectionSwapAllowed=!0,this.logger=new fg(this.verbose),this.persistedDataManager=new Dm,l.rememberLastUsedCamera!==!0&&this.persistedDataManager.reset()}return u.prototype.render=function(r,l){var d=this;this.lastMatchFound=null,this.qrCodeSuccessCallback=function(m,E){if(r)r(m,E);else{if(d.lastMatchFound===m)return;d.lastMatchFound=m,d.setHeaderMessage(Tt.lastMatch(m),pi.STATUS_SUCCESS)}},this.qrCodeErrorCallback=function(m,E){l&&l(m,E)};var p=document.getElementById(this.elementId);if(!p)throw"HTML Element with id=".concat(this.elementId," not found");p.innerHTML="",this.createBasicLayout(p),this.html5Qrcode=new B1(this.getScanRegionId(),Vm(this.config,this.verbose))},u.prototype.pause=function(r){(ar(r)||r!==!0)&&(r=!1),this.getHtml5QrcodeOrFail().pause(r)},u.prototype.resume=function(){this.getHtml5QrcodeOrFail().resume()},u.prototype.getState=function(){return this.getHtml5QrcodeOrFail().getState()},u.prototype.clear=function(){var r=this,l=function(){var d=document.getElementById(r.elementId);d&&(d.innerHTML="",r.resetBasicLayout(d))};return this.html5Qrcode?new Promise(function(d,p){if(!r.html5Qrcode){d();return}r.html5Qrcode.isScanning?r.html5Qrcode.stop().then(function(m){if(!r.html5Qrcode){d();return}r.html5Qrcode.clear(),l(),d()}).catch(function(m){r.verbose&&r.logger.logError("Unable to stop qrcode scanner",m),p(m)}):(r.html5Qrcode.clear(),l(),d())}):Promise.resolve()},u.prototype.getRunningTrackCapabilities=function(){return this.getHtml5QrcodeOrFail().getRunningTrackCapabilities()},u.prototype.getRunningTrackSettings=function(){return this.getHtml5QrcodeOrFail().getRunningTrackSettings()},u.prototype.applyVideoConstraints=function(r){return this.getHtml5QrcodeOrFail().applyVideoConstraints(r)},u.prototype.getHtml5QrcodeOrFail=function(){if(!this.html5Qrcode)throw"Code scanner not initialized.";return this.html5Qrcode},u.prototype.createConfig=function(r){return r?(r.fps||(r.fps=Yi.SCAN_DEFAULT_FPS),r.rememberLastUsedCamera!==!Yi.DEFAULT_REMEMBER_LAST_CAMERA_USED&&(r.rememberLastUsedCamera=Yi.DEFAULT_REMEMBER_LAST_CAMERA_USED),r.supportedScanTypes||(r.supportedScanTypes=Yi.DEFAULT_SUPPORTED_SCAN_TYPE),r):{fps:Yi.SCAN_DEFAULT_FPS,rememberLastUsedCamera:Yi.DEFAULT_REMEMBER_LAST_CAMERA_USED,supportedScanTypes:Yi.DEFAULT_SUPPORTED_SCAN_TYPE}},u.prototype.createBasicLayout=function(r){r.style.position="relative",r.style.padding="0px",r.style.border="1px solid silver",this.createHeader(r);var l=document.createElement("div"),d=this.getScanRegionId();l.id=d,l.style.width="100%",l.style.minHeight="100px",l.style.textAlign="center",r.appendChild(l),ya.isCameraScanType(this.currentScanType)?this.insertCameraScanImageToScanRegion():this.insertFileScanImageToScanRegion();var p=document.createElement("div"),m=this.getDashboardId();p.id=m,p.style.width="100%",r.appendChild(p),this.setupInitialDashboard(p)},u.prototype.resetBasicLayout=function(r){r.style.border="none"},u.prototype.setupInitialDashboard=function(r){this.createSection(r),this.createSectionControlPanel(),this.scanTypeSelector.hasMoreThanOneScanType()&&this.createSectionSwap()},u.prototype.createHeader=function(r){var l=document.createElement("div");l.style.textAlign="left",l.style.margin="0px",r.appendChild(l);var d=new Lm;d.renderInto(l);var p=document.createElement("div");p.id=this.getHeaderMessageContainerId(),p.style.display="none",p.style.textAlign="center",p.style.fontSize="14px",p.style.padding="2px 10px",p.style.margin="4px",p.style.borderTop="1px solid #f6f6f6",l.appendChild(p)},u.prototype.createSection=function(r){var l=document.createElement("div");l.id=this.getDashboardSectionId(),l.style.width="100%",l.style.padding="10px 0px 10px 0px",l.style.textAlign="left",r.appendChild(l)},u.prototype.createCameraListUi=function(r,l,d){var p=this;p.showHideScanTypeSwapLink(!1),p.setHeaderMessage(Tt.cameraPermissionRequesting());var m=function(){d||p.createPermissionButton(r,l)};B1.getCameras().then(function(E){p.persistedDataManager.setHasPermission(!0),p.showHideScanTypeSwapLink(!0),p.resetHeaderMessage(),E&&E.length>0?(r.removeChild(l),p.renderCameraSelection(E)):(p.setHeaderMessage(Tt.noCameraFound(),pi.STATUS_WARNING),m())}).catch(function(E){p.persistedDataManager.setHasPermission(!1),d?d.disabled=!1:m(),p.setHeaderMessage(E,pi.STATUS_WARNING),p.showHideScanTypeSwapLink(!0)})},u.prototype.createPermissionButton=function(r,l){var d=this,p=Nr.createElement("button",this.getCameraPermissionButtonId());p.innerText=Tt.cameraPermissionTitle(),p.addEventListener("click",function(){p.disabled=!0,d.createCameraListUi(r,l,p)}),l.appendChild(p)},u.prototype.createPermissionsUi=function(r,l){var d=this;if(ya.isCameraScanType(this.currentScanType)&&this.persistedDataManager.hasCameraPermissions()){U1.hasPermissions().then(function(p){p?d.createCameraListUi(r,l):(d.persistedDataManager.setHasPermission(!1),d.createPermissionButton(r,l))}).catch(function(p){d.persistedDataManager.setHasPermission(!1),d.createPermissionButton(r,l)});return}this.createPermissionButton(r,l)},u.prototype.createSectionControlPanel=function(){var r=document.getElementById(this.getDashboardSectionId()),l=document.createElement("div");r.appendChild(l);var d=document.createElement("div");d.id=this.getDashboardSectionCameraScanRegionId(),d.style.display=ya.isCameraScanType(this.currentScanType)?"block":"none",l.appendChild(d);var p=document.createElement("div");p.style.textAlign="center",d.appendChild(p),this.scanTypeSelector.isCameraScanRequired()&&this.createPermissionsUi(d,p),this.renderFileScanUi(l)},u.prototype.renderFileScanUi=function(r){var l=ya.isFileScanType(this.currentScanType),d=this,p=function(m){if(!d.html5Qrcode)throw"html5Qrcode not defined";ya.isFileScanType(d.currentScanType)&&(d.setHeaderMessage(Tt.loadingImage()),d.html5Qrcode.scanFileV2(m,!0).then(function(E){d.resetHeaderMessage(),d.qrCodeSuccessCallback(E.decodedText,E)}).catch(function(E){d.setHeaderMessage(E,pi.STATUS_WARNING),d.qrCodeErrorCallback(E,hg.createFrom(E))}))};this.fileSelectionUi=zm.create(r,l,p)},u.prototype.renderCameraSelection=function(r){var l=this,d=this,p=document.getElementById(this.getDashboardSectionCameraScanRegionId());p.style.textAlign="center";var m=Fm.create(p,!1),E=function(K){var oe=K.zoomFeature();if(oe.isSupported()){m.setOnCameraZoomValueChangeCallback(function(fe){oe.apply(fe)});var ye=1;l.config.defaultZoomValueIfSupported&&(ye=l.config.defaultZoomValueIfSupported),ye=lm(ye,oe.min(),oe.max()),m.setValues(oe.min(),oe.max(),ye,oe.step()),m.show()}},_=Pm.create(p,r),C=document.createElement("span"),b=Nr.createElement("button",xi.CAMERA_START_BUTTON_ID);b.innerText=Tt.scanButtonStartScanningText(),C.appendChild(b);var N=Nr.createElement("button",xi.CAMERA_STOP_BUTTON_ID);N.innerText=Tt.scanButtonStopScanningText(),N.style.display="none",N.disabled=!0,C.appendChild(N);var D,F=function(K){if(!K.torchFeature().isSupported()){D&&D.hide();return}D?D.updateTorchCapability(K.torchFeature()):D=jm.create(C,K.torchFeature(),{display:"none",marginLeft:"5px"},function(oe){d.setHeaderMessage(oe,pi.STATUS_WARNING)}),D.show()};p.appendChild(C);var P=function(K){K||(b.style.display="none"),b.innerText=Tt.scanButtonStartScanningText(),b.style.opacity="1",b.disabled=!1,K&&(b.style.display="inline-block")};if(b.addEventListener("click",function(K){b.innerText=Tt.scanButtonScanningStarting(),_.disable(),b.disabled=!0,b.style.opacity="0.5",l.scanTypeSelector.hasMoreThanOneScanType()&&d.showHideScanTypeSwapLink(!1),d.resetHeaderMessage();var oe=_.getValue();d.persistedDataManager.setLastUsedCameraId(oe),d.html5Qrcode.start(oe,Hm(d.config),d.qrCodeSuccessCallback,d.qrCodeErrorCallback).then(function(ye){N.disabled=!1,N.style.display="inline-block",P(!1);var fe=d.html5Qrcode.getRunningTrackCameraCapabilities();l.config.showTorchButtonIfSupported===!0&&F(fe),l.config.showZoomSliderIfSupported===!0&&E(fe)}).catch(function(ye){d.showHideScanTypeSwapLink(!0),_.enable(),P(!0),d.setHeaderMessage(ye,pi.STATUS_WARNING)})}),_.hasSingleItem()&&b.click(),N.addEventListener("click",function(K){if(!d.html5Qrcode)throw"html5Qrcode not defined";N.disabled=!0,d.html5Qrcode.stop().then(function(oe){l.scanTypeSelector.hasMoreThanOneScanType()&&d.showHideScanTypeSwapLink(!0),_.enable(),b.disabled=!1,N.style.display="none",b.style.display="inline-block",D&&(D.reset(),D.hide()),m.removeOnCameraZoomValueChangeCallback(),m.hide(),d.insertCameraScanImageToScanRegion()}).catch(function(oe){N.disabled=!1,d.setHeaderMessage(oe,pi.STATUS_WARNING)})}),d.persistedDataManager.getLastUsedCameraId()){var ne=d.persistedDataManager.getLastUsedCameraId();_.hasValue(ne)?(_.setValue(ne),b.click()):d.persistedDataManager.resetLastUsedCameraId()}},u.prototype.createSectionSwap=function(){var r=this,l=Tt.textIfCameraScanSelected(),d=Tt.textIfFileScanSelected(),p=document.getElementById(this.getDashboardSectionId()),m=document.createElement("div");m.style.textAlign="center";var E=Nr.createElement("span",this.getDashboardSectionSwapLinkId());E.style.textDecoration="underline",E.style.cursor="pointer",E.innerText=ya.isCameraScanType(this.currentScanType)?l:d,E.addEventListener("click",function(){if(!r.sectionSwapAllowed){r.verbose&&r.logger.logError("Section swap called when not allowed");return}r.resetHeaderMessage(),r.fileSelectionUi.resetValue(),r.sectionSwapAllowed=!1,ya.isCameraScanType(r.currentScanType)?(r.clearScanRegion(),r.getCameraScanRegion().style.display="none",r.fileSelectionUi.show(),E.innerText=d,r.currentScanType=Aa.SCAN_TYPE_FILE,r.insertFileScanImageToScanRegion()):(r.clearScanRegion(),r.getCameraScanRegion().style.display="block",r.fileSelectionUi.hide(),E.innerText=l,r.currentScanType=Aa.SCAN_TYPE_CAMERA,r.insertCameraScanImageToScanRegion(),r.startCameraScanIfPermissionExistsOnSwap()),r.sectionSwapAllowed=!0}),m.appendChild(E),p.appendChild(m)},u.prototype.startCameraScanIfPermissionExistsOnSwap=function(){var r=this,l=this;if(this.persistedDataManager.hasCameraPermissions()){U1.hasPermissions().then(function(d){if(d){var p=document.getElementById(l.getCameraPermissionButtonId());if(!p)throw r.logger.logError("Permission button not found, fail;"),"Permission button not found";p.click()}else l.persistedDataManager.setHasPermission(!1)}).catch(function(d){l.persistedDataManager.setHasPermission(!1)});return}},u.prototype.resetHeaderMessage=function(){var r=document.getElementById(this.getHeaderMessageContainerId());r.style.display="none"},u.prototype.setHeaderMessage=function(r,l){l||(l=pi.STATUS_DEFAULT);var d=this.getHeaderMessageDiv();switch(d.innerText=r,d.style.display="block",l){case pi.STATUS_SUCCESS:d.style.background="rgba(106, 175, 80, 0.26)",d.style.color="#477735";break;case pi.STATUS_WARNING:d.style.background="rgba(203, 36, 49, 0.14)",d.style.color="#cb2431";break;case pi.STATUS_DEFAULT:default:d.style.background="rgba(0, 0, 0, 0)",d.style.color="rgb(17, 17, 17)";break}},u.prototype.showHideScanTypeSwapLink=function(r){this.scanTypeSelector.hasMoreThanOneScanType()&&(r!==!0&&(r=!1),this.sectionSwapAllowed=r,this.getDashboardSectionSwapLink().style.display=r?"inline-block":"none")},u.prototype.insertCameraScanImageToScanRegion=function(){var r=this,l=document.getElementById(this.getScanRegionId());if(this.cameraScanImage){l.innerHTML="<br>",l.appendChild(this.cameraScanImage);return}this.cameraScanImage=new Image,this.cameraScanImage.onload=function(d){l.innerHTML="<br>",l.appendChild(r.cameraScanImage)},this.cameraScanImage.width=64,this.cameraScanImage.style.opacity="0.8",this.cameraScanImage.src=Im,this.cameraScanImage.alt=Tt.cameraScanAltText()},u.prototype.insertFileScanImageToScanRegion=function(){var r=this,l=document.getElementById(this.getScanRegionId());if(this.fileScanImage){l.innerHTML="<br>",l.appendChild(this.fileScanImage);return}this.fileScanImage=new Image,this.fileScanImage.onload=function(d){l.innerHTML="<br>",l.appendChild(r.fileScanImage)},this.fileScanImage.width=64,this.fileScanImage.style.opacity="0.8",this.fileScanImage.src=Nm,this.fileScanImage.alt=Tt.fileScanAltText()},u.prototype.clearScanRegion=function(){var r=document.getElementById(this.getScanRegionId());r.innerHTML=""},u.prototype.getDashboardSectionId=function(){return"".concat(this.elementId,"__dashboard_section")},u.prototype.getDashboardSectionCameraScanRegionId=function(){return"".concat(this.elementId,"__dashboard_section_csr")},u.prototype.getDashboardSectionSwapLinkId=function(){return xi.SCAN_TYPE_CHANGE_ANCHOR_ID},u.prototype.getScanRegionId=function(){return"".concat(this.elementId,"__scan_region")},u.prototype.getDashboardId=function(){return"".concat(this.elementId,"__dashboard")},u.prototype.getHeaderMessageContainerId=function(){return"".concat(this.elementId,"__header_message")},u.prototype.getCameraPermissionButtonId=function(){return xi.CAMERA_PERMISSION_BUTTON_ID},u.prototype.getCameraScanRegion=function(){return document.getElementById(this.getDashboardSectionCameraScanRegionId())},u.prototype.getDashboardSectionSwapLink=function(){return document.getElementById(this.getDashboardSectionSwapLinkId())},u.prototype.getHeaderMessageDiv=function(){return document.getElementById(this.getHeaderMessageContainerId())},u})();function ku(u,r){var l={};for(var d in u)Object.prototype.hasOwnProperty.call(u,d)&&r.indexOf(d)<0&&(l[d]=u[d]);if(u!=null&&typeof Object.getOwnPropertySymbols=="function")for(var p=0,d=Object.getOwnPropertySymbols(u);p<d.length;p++)r.indexOf(d[p])<0&&Object.prototype.propertyIsEnumerable.call(u,d[p])&&(l[d[p]]=u[d[p]]);return l}function Ym(u,r,l,d){function p(m){return m instanceof l?m:new l(function(E){E(m)})}return new(l||(l=Promise))(function(m,E){function _(N){try{b(d.next(N))}catch(D){E(D)}}function C(N){try{b(d.throw(N))}catch(D){E(D)}}function b(N){N.done?m(N.value):p(N.value).then(_,C)}b((d=d.apply(u,r||[])).next())})}const qm=u=>u?(...r)=>u(...r):(...r)=>fetch(...r);class uf extends Error{constructor(r,l="FunctionsError",d){super(r),this.name=l,this.context=d}}class Xm extends uf{constructor(r){super("Failed to send a request to the Edge Function","FunctionsFetchError",r)}}class z1 extends uf{constructor(r){super("Relay Error invoking the Edge Function","FunctionsRelayError",r)}}class P1 extends uf{constructor(r){super("Edge Function returned a non-2xx status code","FunctionsHttpError",r)}}var Wh;(function(u){u.Any="any",u.ApNortheast1="ap-northeast-1",u.ApNortheast2="ap-northeast-2",u.ApSouth1="ap-south-1",u.ApSoutheast1="ap-southeast-1",u.ApSoutheast2="ap-southeast-2",u.CaCentral1="ca-central-1",u.EuCentral1="eu-central-1",u.EuWest1="eu-west-1",u.EuWest2="eu-west-2",u.EuWest3="eu-west-3",u.SaEast1="sa-east-1",u.UsEast1="us-east-1",u.UsWest1="us-west-1",u.UsWest2="us-west-2"})(Wh||(Wh={}));class Zm{constructor(r,{headers:l={},customFetch:d,region:p=Wh.Any}={}){this.url=r,this.headers=l,this.region=p,this.fetch=qm(d)}setAuth(r){this.headers.Authorization=`Bearer ${r}`}invoke(r){return Ym(this,arguments,void 0,function*(l,d={}){var p;let m,E;try{const{headers:_,method:C,body:b,signal:N,timeout:D}=d;let F={},{region:P}=d;P||(P=this.region);const ne=new URL(`${this.url}/${l}`);P&&P!=="any"&&(F["x-region"]=P,ne.searchParams.set("forceFunctionRegion",P));let K;b&&(_&&!Object.prototype.hasOwnProperty.call(_,"Content-Type")||!_)?typeof Blob<"u"&&b instanceof Blob||b instanceof ArrayBuffer?(F["Content-Type"]="application/octet-stream",K=b):typeof b=="string"?(F["Content-Type"]="text/plain",K=b):typeof FormData<"u"&&b instanceof FormData?K=b:(F["Content-Type"]="application/json",K=JSON.stringify(b)):b&&typeof b!="string"&&!(typeof Blob<"u"&&b instanceof Blob)&&!(b instanceof ArrayBuffer)&&!(typeof FormData<"u"&&b instanceof FormData)?K=JSON.stringify(b):K=b;let oe=N;D&&(E=new AbortController,m=setTimeout(()=>E.abort(),D),N?(oe=E.signal,N.addEventListener("abort",()=>E.abort())):oe=E.signal);const ye=yield this.fetch(ne.toString(),{method:C||"POST",headers:Object.assign(Object.assign(Object.assign({},F),this.headers),_),body:K,signal:oe}).catch(Ke=>{throw new Xm(Ke)}),fe=ye.headers.get("x-relay-error");if(fe&&fe==="true")throw new z1(ye);if(!ye.ok)throw new P1(ye);let te=((p=ye.headers.get("Content-Type"))!==null&&p!==void 0?p:"text/plain").split(";")[0].trim(),xe;return te==="application/json"?xe=yield ye.json():te==="application/octet-stream"||te==="application/pdf"?xe=yield ye.blob():te==="text/event-stream"?xe=ye:te==="multipart/form-data"?xe=yield ye.formData():xe=yield ye.text(),{data:xe,error:null,response:ye}}catch(_){return{data:null,error:_,response:_ instanceof P1||_ instanceof z1?_.context:void 0}}finally{m&&clearTimeout(m)}})}}var Wm=class extends Error{constructor(u){super(u.message),this.name="PostgrestError",this.details=u.details,this.hint=u.hint,this.code=u.code}},Km=class{constructor(u){var r,l,d;this.shouldThrowOnError=!1,this.method=u.method,this.url=u.url,this.headers=new Headers(u.headers),this.schema=u.schema,this.body=u.body,this.shouldThrowOnError=(r=u.shouldThrowOnError)!==null&&r!==void 0?r:!1,this.signal=u.signal,this.isMaybeSingle=(l=u.isMaybeSingle)!==null&&l!==void 0?l:!1,this.urlLengthLimit=(d=u.urlLengthLimit)!==null&&d!==void 0?d:8e3,u.fetch?this.fetch=u.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,r){return this.headers=new Headers(this.headers),this.headers.set(u,r),this}then(u,r){var l=this;this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const d=this.fetch;let p=d(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async m=>{let E=null,_=null,C=null,b=m.status,N=m.statusText;if(m.ok){var D,F;if(l.method!=="HEAD"){var P;const ye=await m.text();ye===""||(l.headers.get("Accept")==="text/csv"||l.headers.get("Accept")&&(!((P=l.headers.get("Accept"))===null||P===void 0)&&P.includes("application/vnd.pgrst.plan+text"))?_=ye:_=JSON.parse(ye))}const K=(D=l.headers.get("Prefer"))===null||D===void 0?void 0:D.match(/count=(exact|planned|estimated)/),oe=(F=m.headers.get("content-range"))===null||F===void 0?void 0:F.split("/");K&&oe&&oe.length>1&&(C=parseInt(oe[1])),l.isMaybeSingle&&l.method==="GET"&&Array.isArray(_)&&(_.length>1?(E={code:"PGRST116",details:`Results contain ${_.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},_=null,C=null,b=406,N="Not Acceptable"):_.length===1?_=_[0]:_=null)}else{var ne;const K=await m.text();try{E=JSON.parse(K),Array.isArray(E)&&m.status===404&&(_=[],E=null,b=200,N="OK")}catch{m.status===404&&K===""?(b=204,N="No Content"):E={message:K}}if(E&&l.isMaybeSingle&&(!(E==null||(ne=E.details)===null||ne===void 0)&&ne.includes("0 rows"))&&(E=null,b=200,N="OK"),E&&l.shouldThrowOnError)throw new Wm(E)}return{error:E,data:_,count:C,status:b,statusText:N}});return this.shouldThrowOnError||(p=p.catch(m=>{var E;let _="",C="",b="";const N=m?.cause;if(N){var D,F,P,ne;const ye=(D=N?.message)!==null&&D!==void 0?D:"",fe=(F=N?.code)!==null&&F!==void 0?F:"";_=`${(P=m?.name)!==null&&P!==void 0?P:"FetchError"}: ${m?.message}`,_+=`

Caused by: ${(ne=N?.name)!==null&&ne!==void 0?ne:"Error"}: ${ye}`,fe&&(_+=` (${fe})`),N?.stack&&(_+=`
${N.stack}`)}else{var K;_=(K=m?.stack)!==null&&K!==void 0?K:""}const oe=this.url.toString().length;return m?.name==="AbortError"||m?.code==="ABORT_ERR"?(b="",C="Request was aborted (timeout or manual cancellation)",oe>this.urlLengthLimit&&(C+=`. Note: Your request URL is ${oe} characters, which may exceed server limits. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [many IDs])), consider using an RPC function to pass values server-side.`)):(N?.name==="HeadersOverflowError"||N?.code==="UND_ERR_HEADERS_OVERFLOW")&&(b="",C="HTTP headers exceeded server limits (typically 16KB)",oe>this.urlLengthLimit&&(C+=`. Your request URL is ${oe} characters. If selecting many fields, consider using views. If filtering with large arrays (e.g., .in('id', [200+ IDs])), consider using an RPC function instead.`)),{error:{message:`${(E=m?.name)!==null&&E!==void 0?E:"FetchError"}: ${m?.message}`,details:_,hint:C,code:b},data:null,count:null,status:0,statusText:""}})),p.then(u,r)}returns(){return this}overrideTypes(){return this}},Qm=class extends Km{select(u){let r=!1;const l=(u??"*").split("").map(d=>/\s/.test(d)&&!r?"":(d==='"'&&(r=!r),d)).join("");return this.url.searchParams.set("select",l),this.headers.append("Prefer","return=representation"),this}order(u,{ascending:r=!0,nullsFirst:l,foreignTable:d,referencedTable:p=d}={}){const m=p?`${p}.order`:"order",E=this.url.searchParams.get(m);return this.url.searchParams.set(m,`${E?`${E},`:""}${u}.${r?"asc":"desc"}${l===void 0?"":l?".nullsfirst":".nullslast"}`),this}limit(u,{foreignTable:r,referencedTable:l=r}={}){const d=typeof l>"u"?"limit":`${l}.limit`;return this.url.searchParams.set(d,`${u}`),this}range(u,r,{foreignTable:l,referencedTable:d=l}={}){const p=typeof d>"u"?"offset":`${d}.offset`,m=typeof d>"u"?"limit":`${d}.limit`;return this.url.searchParams.set(p,`${u}`),this.url.searchParams.set(m,`${r-u+1}`),this}abortSignal(u){return this.signal=u,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:u=!1,verbose:r=!1,settings:l=!1,buffers:d=!1,wal:p=!1,format:m="text"}={}){var E;const _=[u?"analyze":null,r?"verbose":null,l?"settings":null,d?"buffers":null,p?"wal":null].filter(Boolean).join("|"),C=(E=this.headers.get("Accept"))!==null&&E!==void 0?E:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${m}; for="${C}"; options=${_};`),m==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(u){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${u}`),this}};const F1=new RegExp("[,()]");var Vs=class extends Qm{eq(u,r){return this.url.searchParams.append(u,`eq.${r}`),this}neq(u,r){return this.url.searchParams.append(u,`neq.${r}`),this}gt(u,r){return this.url.searchParams.append(u,`gt.${r}`),this}gte(u,r){return this.url.searchParams.append(u,`gte.${r}`),this}lt(u,r){return this.url.searchParams.append(u,`lt.${r}`),this}lte(u,r){return this.url.searchParams.append(u,`lte.${r}`),this}like(u,r){return this.url.searchParams.append(u,`like.${r}`),this}likeAllOf(u,r){return this.url.searchParams.append(u,`like(all).{${r.join(",")}}`),this}likeAnyOf(u,r){return this.url.searchParams.append(u,`like(any).{${r.join(",")}}`),this}ilike(u,r){return this.url.searchParams.append(u,`ilike.${r}`),this}ilikeAllOf(u,r){return this.url.searchParams.append(u,`ilike(all).{${r.join(",")}}`),this}ilikeAnyOf(u,r){return this.url.searchParams.append(u,`ilike(any).{${r.join(",")}}`),this}regexMatch(u,r){return this.url.searchParams.append(u,`match.${r}`),this}regexIMatch(u,r){return this.url.searchParams.append(u,`imatch.${r}`),this}is(u,r){return this.url.searchParams.append(u,`is.${r}`),this}isDistinct(u,r){return this.url.searchParams.append(u,`isdistinct.${r}`),this}in(u,r){const l=Array.from(new Set(r)).map(d=>typeof d=="string"&&F1.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(u,`in.(${l})`),this}notIn(u,r){const l=Array.from(new Set(r)).map(d=>typeof d=="string"&&F1.test(d)?`"${d}"`:`${d}`).join(",");return this.url.searchParams.append(u,`not.in.(${l})`),this}contains(u,r){return typeof r=="string"?this.url.searchParams.append(u,`cs.${r}`):Array.isArray(r)?this.url.searchParams.append(u,`cs.{${r.join(",")}}`):this.url.searchParams.append(u,`cs.${JSON.stringify(r)}`),this}containedBy(u,r){return typeof r=="string"?this.url.searchParams.append(u,`cd.${r}`):Array.isArray(r)?this.url.searchParams.append(u,`cd.{${r.join(",")}}`):this.url.searchParams.append(u,`cd.${JSON.stringify(r)}`),this}rangeGt(u,r){return this.url.searchParams.append(u,`sr.${r}`),this}rangeGte(u,r){return this.url.searchParams.append(u,`nxl.${r}`),this}rangeLt(u,r){return this.url.searchParams.append(u,`sl.${r}`),this}rangeLte(u,r){return this.url.searchParams.append(u,`nxr.${r}`),this}rangeAdjacent(u,r){return this.url.searchParams.append(u,`adj.${r}`),this}overlaps(u,r){return typeof r=="string"?this.url.searchParams.append(u,`ov.${r}`):this.url.searchParams.append(u,`ov.{${r.join(",")}}`),this}textSearch(u,r,{config:l,type:d}={}){let p="";d==="plain"?p="pl":d==="phrase"?p="ph":d==="websearch"&&(p="w");const m=l===void 0?"":`(${l})`;return this.url.searchParams.append(u,`${p}fts${m}.${r}`),this}match(u){return Object.entries(u).forEach(([r,l])=>{this.url.searchParams.append(r,`eq.${l}`)}),this}not(u,r,l){return this.url.searchParams.append(u,`not.${r}.${l}`),this}or(u,{foreignTable:r,referencedTable:l=r}={}){const d=l?`${l}.or`:"or";return this.url.searchParams.append(d,`(${u})`),this}filter(u,r,l){return this.url.searchParams.append(u,`${r}.${l}`),this}},Jm=class{constructor(u,{headers:r={},schema:l,fetch:d,urlLengthLimit:p=8e3}){this.url=u,this.headers=new Headers(r),this.schema=l,this.fetch=d,this.urlLengthLimit=p}cloneRequestState(){return{url:new URL(this.url.toString()),headers:new Headers(this.headers)}}select(u,r){const{head:l=!1,count:d}=r??{},p=l?"HEAD":"GET";let m=!1;const E=(u??"*").split("").map(b=>/\s/.test(b)&&!m?"":(b==='"'&&(m=!m),b)).join(""),{url:_,headers:C}=this.cloneRequestState();return _.searchParams.set("select",E),d&&C.append("Prefer",`count=${d}`),new Vs({method:p,url:_,headers:C,schema:this.schema,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}insert(u,{count:r,defaultToNull:l=!0}={}){var d;const p="POST",{url:m,headers:E}=this.cloneRequestState();if(r&&E.append("Prefer",`count=${r}`),l||E.append("Prefer","missing=default"),Array.isArray(u)){const _=u.reduce((C,b)=>C.concat(Object.keys(b)),[]);if(_.length>0){const C=[...new Set(_)].map(b=>`"${b}"`);m.searchParams.set("columns",C.join(","))}}return new Vs({method:p,url:m,headers:E,schema:this.schema,body:u,fetch:(d=this.fetch)!==null&&d!==void 0?d:fetch,urlLengthLimit:this.urlLengthLimit})}upsert(u,{onConflict:r,ignoreDuplicates:l=!1,count:d,defaultToNull:p=!0}={}){var m;const E="POST",{url:_,headers:C}=this.cloneRequestState();if(C.append("Prefer",`resolution=${l?"ignore":"merge"}-duplicates`),r!==void 0&&_.searchParams.set("on_conflict",r),d&&C.append("Prefer",`count=${d}`),p||C.append("Prefer","missing=default"),Array.isArray(u)){const b=u.reduce((N,D)=>N.concat(Object.keys(D)),[]);if(b.length>0){const N=[...new Set(b)].map(D=>`"${D}"`);_.searchParams.set("columns",N.join(","))}}return new Vs({method:E,url:_,headers:C,schema:this.schema,body:u,fetch:(m=this.fetch)!==null&&m!==void 0?m:fetch,urlLengthLimit:this.urlLengthLimit})}update(u,{count:r}={}){var l;const d="PATCH",{url:p,headers:m}=this.cloneRequestState();return r&&m.append("Prefer",`count=${r}`),new Vs({method:d,url:p,headers:m,schema:this.schema,body:u,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch,urlLengthLimit:this.urlLengthLimit})}delete({count:u}={}){var r;const l="DELETE",{url:d,headers:p}=this.cloneRequestState();return u&&p.append("Prefer",`count=${u}`),new Vs({method:l,url:d,headers:p,schema:this.schema,fetch:(r=this.fetch)!==null&&r!==void 0?r:fetch,urlLengthLimit:this.urlLengthLimit})}};function Kl(u){"@babel/helpers - typeof";return Kl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Kl(u)}function $m(u,r){if(Kl(u)!="object"||!u)return u;var l=u[Symbol.toPrimitive];if(l!==void 0){var d=l.call(u,r);if(Kl(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(u)}function ey(u){var r=$m(u,"string");return Kl(r)=="symbol"?r:r+""}function ty(u,r,l){return(r=ey(r))in u?Object.defineProperty(u,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):u[r]=l,u}function H1(u,r){var l=Object.keys(u);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(u);r&&(d=d.filter(function(p){return Object.getOwnPropertyDescriptor(u,p).enumerable})),l.push.apply(l,d)}return l}function Su(u){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?H1(Object(l),!0).forEach(function(d){ty(u,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(l)):H1(Object(l)).forEach(function(d){Object.defineProperty(u,d,Object.getOwnPropertyDescriptor(l,d))})}return u}var ny=class pg{constructor(r,{headers:l={},schema:d,fetch:p,timeout:m,urlLengthLimit:E=8e3}={}){this.url=r,this.headers=new Headers(l),this.schemaName=d,this.urlLengthLimit=E;const _=p??globalThis.fetch;m!==void 0&&m>0?this.fetch=(C,b)=>{const N=new AbortController,D=setTimeout(()=>N.abort(),m),F=b?.signal;if(F){if(F.aborted)return clearTimeout(D),_(C,b);const P=()=>{clearTimeout(D),N.abort()};return F.addEventListener("abort",P,{once:!0}),_(C,Su(Su({},b),{},{signal:N.signal})).finally(()=>{clearTimeout(D),F.removeEventListener("abort",P)})}return _(C,Su(Su({},b),{},{signal:N.signal})).finally(()=>clearTimeout(D))}:this.fetch=_}from(r){if(!r||typeof r!="string"||r.trim()==="")throw new Error("Invalid relation name: relation must be a non-empty string.");return new Jm(new URL(`${this.url}/${r}`),{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}schema(r){return new pg(this.url,{headers:this.headers,schema:r,fetch:this.fetch,urlLengthLimit:this.urlLengthLimit})}rpc(r,l={},{head:d=!1,get:p=!1,count:m}={}){var E;let _;const C=new URL(`${this.url}/rpc/${r}`);let b;const N=P=>P!==null&&typeof P=="object"&&(!Array.isArray(P)||P.some(N)),D=d&&Object.values(l).some(N);D?(_="POST",b=l):d||p?(_=d?"HEAD":"GET",Object.entries(l).filter(([P,ne])=>ne!==void 0).map(([P,ne])=>[P,Array.isArray(ne)?`{${ne.join(",")}}`:`${ne}`]).forEach(([P,ne])=>{C.searchParams.append(P,ne)})):(_="POST",b=l);const F=new Headers(this.headers);return D?F.set("Prefer",m?`count=${m},return=minimal`:"return=minimal"):m&&F.set("Prefer",`count=${m}`),new Vs({method:_,url:C,headers:F,schema:this.schemaName,body:b,fetch:(E=this.fetch)!==null&&E!==void 0?E:fetch,urlLengthLimit:this.urlLengthLimit})}};class iy{constructor(){}static detectEnvironment(){var r;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((r=navigator.userAgent)===null||r===void 0)&&r.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};const l=globalThis.process;if(l){const d=l.versions;if(d&&d.node){const p=d.node,m=parseInt(p.replace(/^v/,"").split(".")[0]);return m>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${m} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${m} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const r=this.detectEnvironment();if(r.constructor)return r.constructor;let l=r.error||"WebSocket not supported in this environment.";throw r.workaround&&(l+=`

Suggested solution: ${r.workaround}`),new Error(l)}static createWebSocket(r,l){const d=this.getWebSocketConstructor();return new d(r,l)}static isWebSocketSupported(){try{const r=this.detectEnvironment();return r.type==="native"||r.type==="ws"}catch{return!1}}}const ry="2.97.0",ay=`realtime-js/${ry}`,sy="1.0.0",xg="2.0.0",V1=xg,Kh=1e4,ly=1e3,oy=100;var pa;(function(u){u[u.connecting=0]="connecting",u[u.open=1]="open",u[u.closing=2]="closing",u[u.closed=3]="closed"})(pa||(pa={}));var vn;(function(u){u.closed="closed",u.errored="errored",u.joined="joined",u.joining="joining",u.leaving="leaving"})(vn||(vn={}));var qi;(function(u){u.close="phx_close",u.error="phx_error",u.join="phx_join",u.reply="phx_reply",u.leave="phx_leave",u.access_token="access_token"})(qi||(qi={}));var Qh;(function(u){u.websocket="websocket"})(Qh||(Qh={}));var Wa;(function(u){u.Connecting="connecting",u.Open="open",u.Closing="closing",u.Closed="closed"})(Wa||(Wa={}));class uy{constructor(r){this.HEADER_LENGTH=1,this.USER_BROADCAST_PUSH_META_LENGTH=6,this.KINDS={userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST_EVENT="broadcast",this.allowedMetadataKeys=[],this.allowedMetadataKeys=r??[]}encode(r,l){if(r.event===this.BROADCAST_EVENT&&!(r.payload instanceof ArrayBuffer)&&typeof r.payload.event=="string")return l(this._binaryEncodeUserBroadcastPush(r));let d=[r.join_ref,r.ref,r.topic,r.event,r.payload];return l(JSON.stringify(d))}_binaryEncodeUserBroadcastPush(r){var l;return this._isArrayBuffer((l=r.payload)===null||l===void 0?void 0:l.payload)?this._encodeBinaryUserBroadcastPush(r):this._encodeJsonUserBroadcastPush(r)}_encodeBinaryUserBroadcastPush(r){var l,d;const p=(d=(l=r.payload)===null||l===void 0?void 0:l.payload)!==null&&d!==void 0?d:new ArrayBuffer(0);return this._encodeUserBroadcastPush(r,this.BINARY_ENCODING,p)}_encodeJsonUserBroadcastPush(r){var l,d;const p=(d=(l=r.payload)===null||l===void 0?void 0:l.payload)!==null&&d!==void 0?d:{},E=new TextEncoder().encode(JSON.stringify(p)).buffer;return this._encodeUserBroadcastPush(r,this.JSON_ENCODING,E)}_encodeUserBroadcastPush(r,l,d){var p,m;const E=r.topic,_=(p=r.ref)!==null&&p!==void 0?p:"",C=(m=r.join_ref)!==null&&m!==void 0?m:"",b=r.payload.event,N=this.allowedMetadataKeys?this._pick(r.payload,this.allowedMetadataKeys):{},D=Object.keys(N).length===0?"":JSON.stringify(N);if(C.length>255)throw new Error(`joinRef length ${C.length} exceeds maximum of 255`);if(_.length>255)throw new Error(`ref length ${_.length} exceeds maximum of 255`);if(E.length>255)throw new Error(`topic length ${E.length} exceeds maximum of 255`);if(b.length>255)throw new Error(`userEvent length ${b.length} exceeds maximum of 255`);if(D.length>255)throw new Error(`metadata length ${D.length} exceeds maximum of 255`);const F=this.USER_BROADCAST_PUSH_META_LENGTH+C.length+_.length+E.length+b.length+D.length,P=new ArrayBuffer(this.HEADER_LENGTH+F);let ne=new DataView(P),K=0;ne.setUint8(K++,this.KINDS.userBroadcastPush),ne.setUint8(K++,C.length),ne.setUint8(K++,_.length),ne.setUint8(K++,E.length),ne.setUint8(K++,b.length),ne.setUint8(K++,D.length),ne.setUint8(K++,l),Array.from(C,ye=>ne.setUint8(K++,ye.charCodeAt(0))),Array.from(_,ye=>ne.setUint8(K++,ye.charCodeAt(0))),Array.from(E,ye=>ne.setUint8(K++,ye.charCodeAt(0))),Array.from(b,ye=>ne.setUint8(K++,ye.charCodeAt(0))),Array.from(D,ye=>ne.setUint8(K++,ye.charCodeAt(0)));var oe=new Uint8Array(P.byteLength+d.byteLength);return oe.set(new Uint8Array(P),0),oe.set(new Uint8Array(d),P.byteLength),oe.buffer}decode(r,l){if(this._isArrayBuffer(r)){let d=this._binaryDecode(r);return l(d)}if(typeof r=="string"){const d=JSON.parse(r),[p,m,E,_,C]=d;return l({join_ref:p,ref:m,topic:E,event:_,payload:C})}return l({})}_binaryDecode(r){const l=new DataView(r),d=l.getUint8(0),p=new TextDecoder;if(d===this.KINDS.userBroadcast)return this._decodeUserBroadcast(r,l,p)}_decodeUserBroadcast(r,l,d){const p=l.getUint8(1),m=l.getUint8(2),E=l.getUint8(3),_=l.getUint8(4);let C=this.HEADER_LENGTH+4;const b=d.decode(r.slice(C,C+p));C=C+p;const N=d.decode(r.slice(C,C+m));C=C+m;const D=d.decode(r.slice(C,C+E));C=C+E;const F=r.slice(C,r.byteLength),P=_===this.JSON_ENCODING?JSON.parse(d.decode(F)):F,ne={type:this.BROADCAST_EVENT,event:N,payload:P};return E>0&&(ne.meta=JSON.parse(D)),{join_ref:null,ref:null,topic:b,event:this.BROADCAST_EVENT,payload:ne}}_isArrayBuffer(r){var l;return r instanceof ArrayBuffer||((l=r?.constructor)===null||l===void 0?void 0:l.name)==="ArrayBuffer"}_pick(r,l){return!r||typeof r!="object"?{}:Object.fromEntries(Object.entries(r).filter(([d])=>l.includes(d)))}}class wg{constructor(r,l){this.callback=r,this.timerCalc=l,this.timer=void 0,this.tries=0,this.callback=r,this.timerCalc=l}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var zt;(function(u){u.abstime="abstime",u.bool="bool",u.date="date",u.daterange="daterange",u.float4="float4",u.float8="float8",u.int2="int2",u.int4="int4",u.int4range="int4range",u.int8="int8",u.int8range="int8range",u.json="json",u.jsonb="jsonb",u.money="money",u.numeric="numeric",u.oid="oid",u.reltime="reltime",u.text="text",u.time="time",u.timestamp="timestamp",u.timestamptz="timestamptz",u.timetz="timetz",u.tsrange="tsrange",u.tstzrange="tstzrange"})(zt||(zt={}));const G1=(u,r,l={})=>{var d;const p=(d=l.skipTypes)!==null&&d!==void 0?d:[];return r?Object.keys(r).reduce((m,E)=>(m[E]=cy(E,u,r,p),m),{}):{}},cy=(u,r,l,d)=>{const p=r.find(_=>_.name===u),m=p?.type,E=l[u];return m&&!d.includes(m)?Ag(m,E):Jh(E)},Ag=(u,r)=>{if(u.charAt(0)==="_"){const l=u.slice(1,u.length);return gy(r,l)}switch(u){case zt.bool:return hy(r);case zt.float4:case zt.float8:case zt.int2:case zt.int4:case zt.int8:case zt.numeric:case zt.oid:return fy(r);case zt.json:case zt.jsonb:return dy(r);case zt.timestamp:return my(r);case zt.abstime:case zt.date:case zt.daterange:case zt.int4range:case zt.int8range:case zt.money:case zt.reltime:case zt.text:case zt.time:case zt.timestamptz:case zt.timetz:case zt.tsrange:case zt.tstzrange:return Jh(r);default:return Jh(r)}},Jh=u=>u,hy=u=>{switch(u){case"t":return!0;case"f":return!1;default:return u}},fy=u=>{if(typeof u=="string"){const r=parseFloat(u);if(!Number.isNaN(r))return r}return u},dy=u=>{if(typeof u=="string")try{return JSON.parse(u)}catch{return u}return u},gy=(u,r)=>{if(typeof u!="string")return u;const l=u.length-1,d=u[l];if(u[0]==="{"&&d==="}"){let m;const E=u.slice(1,l);try{m=JSON.parse("["+E+"]")}catch{m=E?E.split(","):[]}return m.map(_=>Ag(r,_))}return u},my=u=>typeof u=="string"?u.replace(" ","T"):u,bg=u=>{const r=new URL(u);return r.protocol=r.protocol.replace(/^ws/i,"http"),r.pathname=r.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),r.pathname===""||r.pathname==="/"?r.pathname="/api/broadcast":r.pathname=r.pathname+"/api/broadcast",r.href};class Fh{constructor(r,l,d={},p=Kh){this.channel=r,this.event=l,this.payload=d,this.timeout=p,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(r){this.timeout=r,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(r){this.payload=Object.assign(Object.assign({},this.payload),r)}receive(r,l){var d;return this._hasReceived(r)&&l((d=this.receivedResp)===null||d===void 0?void 0:d.response),this.recHooks.push({status:r,callback:l}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const r=l=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=l,this._matchReceive(l)};this.channel._on(this.refEvent,{},r),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(r,l){this.refEvent&&this.channel._trigger(this.refEvent,{status:r,response:l})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:r,response:l}){this.recHooks.filter(d=>d.status===r).forEach(d=>d.callback(l))}_hasReceived(r){return this.receivedResp&&this.receivedResp.status===r}}var Y1;(function(u){u.SYNC="sync",u.JOIN="join",u.LEAVE="leave"})(Y1||(Y1={}));class Zl{constructor(r,l){this.channel=r,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const d=l?.events||{state:"presence_state",diff:"presence_diff"};this.channel._on(d.state,{},p=>{const{onJoin:m,onLeave:E,onSync:_}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Zl.syncState(this.state,p,m,E),this.pendingDiffs.forEach(C=>{this.state=Zl.syncDiff(this.state,C,m,E)}),this.pendingDiffs=[],_()}),this.channel._on(d.diff,{},p=>{const{onJoin:m,onLeave:E,onSync:_}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(p):(this.state=Zl.syncDiff(this.state,p,m,E),_())}),this.onJoin((p,m,E)=>{this.channel._trigger("presence",{event:"join",key:p,currentPresences:m,newPresences:E})}),this.onLeave((p,m,E)=>{this.channel._trigger("presence",{event:"leave",key:p,currentPresences:m,leftPresences:E})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(r,l,d,p){const m=this.cloneDeep(r),E=this.transformState(l),_={},C={};return this.map(m,(b,N)=>{E[b]||(C[b]=N)}),this.map(E,(b,N)=>{const D=m[b];if(D){const F=N.map(oe=>oe.presence_ref),P=D.map(oe=>oe.presence_ref),ne=N.filter(oe=>P.indexOf(oe.presence_ref)<0),K=D.filter(oe=>F.indexOf(oe.presence_ref)<0);ne.length>0&&(_[b]=ne),K.length>0&&(C[b]=K)}else _[b]=N}),this.syncDiff(m,{joins:_,leaves:C},d,p)}static syncDiff(r,l,d,p){const{joins:m,leaves:E}={joins:this.transformState(l.joins),leaves:this.transformState(l.leaves)};return d||(d=()=>{}),p||(p=()=>{}),this.map(m,(_,C)=>{var b;const N=(b=r[_])!==null&&b!==void 0?b:[];if(r[_]=this.cloneDeep(C),N.length>0){const D=r[_].map(P=>P.presence_ref),F=N.filter(P=>D.indexOf(P.presence_ref)<0);r[_].unshift(...F)}d(_,N,C)}),this.map(E,(_,C)=>{let b=r[_];if(!b)return;const N=C.map(D=>D.presence_ref);b=b.filter(D=>N.indexOf(D.presence_ref)<0),r[_]=b,p(_,b,C),b.length===0&&delete r[_]}),r}static map(r,l){return Object.getOwnPropertyNames(r).map(d=>l(d,r[d]))}static transformState(r){return r=this.cloneDeep(r),Object.getOwnPropertyNames(r).reduce((l,d)=>{const p=r[d];return"metas"in p?l[d]=p.metas.map(m=>(m.presence_ref=m.phx_ref,delete m.phx_ref,delete m.phx_ref_prev,m)):l[d]=p,l},{})}static cloneDeep(r){return JSON.parse(JSON.stringify(r))}onJoin(r){this.caller.onJoin=r}onLeave(r){this.caller.onLeave=r}onSync(r){this.caller.onSync=r}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var q1;(function(u){u.ALL="*",u.INSERT="INSERT",u.UPDATE="UPDATE",u.DELETE="DELETE"})(q1||(q1={}));var Wl;(function(u){u.BROADCAST="broadcast",u.PRESENCE="presence",u.POSTGRES_CHANGES="postgres_changes",u.SYSTEM="system"})(Wl||(Wl={}));var Ir;(function(u){u.SUBSCRIBED="SUBSCRIBED",u.TIMED_OUT="TIMED_OUT",u.CLOSED="CLOSED",u.CHANNEL_ERROR="CHANNEL_ERROR"})(Ir||(Ir={}));class Xs{constructor(r,l={config:{}},d){var p,m;if(this.topic=r,this.params=l,this.socket=d,this.bindings={},this.state=vn.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=r.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},l.config),this.timeout=this.socket.timeout,this.joinPush=new Fh(this,qi.join,this.params,this.timeout),this.rejoinTimer=new wg(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=vn.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(E=>E.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=vn.closed,this.socket._remove(this)}),this._onError(E=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,E),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",E=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,E),this.state=vn.errored,this.rejoinTimer.scheduleTimeout())}),this._on(qi.reply,{},(E,_)=>{this._trigger(this._replyEventName(_),E)}),this.presence=new Zl(this),this.broadcastEndpointURL=bg(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((m=(p=this.params.config)===null||p===void 0?void 0:p.broadcast)===null||m===void 0)&&m.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(r,l=this.timeout){var d,p,m;if(this.socket.isConnected()||this.socket.connect(),this.state==vn.closed){const{config:{broadcast:E,presence:_,private:C}}=this.params,b=(p=(d=this.bindings.postgres_changes)===null||d===void 0?void 0:d.map(P=>P.filter))!==null&&p!==void 0?p:[],N=!!this.bindings[Wl.PRESENCE]&&this.bindings[Wl.PRESENCE].length>0||((m=this.params.config.presence)===null||m===void 0?void 0:m.enabled)===!0,D={},F={broadcast:E,presence:Object.assign(Object.assign({},_),{enabled:N}),postgres_changes:b,private:C};this.socket.accessTokenValue&&(D.access_token=this.socket.accessTokenValue),this._onError(P=>r?.(Ir.CHANNEL_ERROR,P)),this._onClose(()=>r?.(Ir.CLOSED)),this.updateJoinPayload(Object.assign({config:F},D)),this.joinedOnce=!0,this._rejoin(l),this.joinPush.receive("ok",async({postgres_changes:P})=>{var ne;if(this.socket._isManualToken()||this.socket.setAuth(),P===void 0){r?.(Ir.SUBSCRIBED);return}else{const K=this.bindings.postgres_changes,oe=(ne=K?.length)!==null&&ne!==void 0?ne:0,ye=[];for(let fe=0;fe<oe;fe++){const te=K[fe],{filter:{event:xe,schema:Ke,table:be,filter:$}}=te,Me=P&&P[fe];if(Me&&Me.event===xe&&Xs.isFilterValueEqual(Me.schema,Ke)&&Xs.isFilterValueEqual(Me.table,be)&&Xs.isFilterValueEqual(Me.filter,$))ye.push(Object.assign(Object.assign({},te),{id:Me.id}));else{this.unsubscribe(),this.state=vn.errored,r?.(Ir.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=ye,r&&r(Ir.SUBSCRIBED);return}}).receive("error",P=>{this.state=vn.errored,r?.(Ir.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(P).join(", ")||"error")))}).receive("timeout",()=>{r?.(Ir.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(r,l={}){return await this.send({type:"presence",event:"track",payload:r},l.timeout||this.timeout)}async untrack(r={}){return await this.send({type:"presence",event:"untrack"},r)}on(r,l,d){return this.state===vn.joined&&r===Wl.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(async()=>await this.subscribe())),this._on(r,l,d)}async httpSend(r,l,d={}){var p;if(l==null)return Promise.reject("Payload is required for httpSend()");const m={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(m.Authorization=`Bearer ${this.socket.accessTokenValue}`);const E={method:"POST",headers:m,body:JSON.stringify({messages:[{topic:this.subTopic,event:r,payload:l,private:this.private}]})},_=await this._fetchWithTimeout(this.broadcastEndpointURL,E,(p=d.timeout)!==null&&p!==void 0?p:this.timeout);if(_.status===202)return{success:!0};let C=_.statusText;try{const b=await _.json();C=b.error||b.message||C}catch{}return Promise.reject(new Error(C))}async send(r,l={}){var d,p;if(!this._canPush()&&r.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:m,payload:E}=r,_={apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"};this.socket.accessTokenValue&&(_.Authorization=`Bearer ${this.socket.accessTokenValue}`);const C={method:"POST",headers:_,body:JSON.stringify({messages:[{topic:this.subTopic,event:m,payload:E,private:this.private}]})};try{const b=await this._fetchWithTimeout(this.broadcastEndpointURL,C,(d=l.timeout)!==null&&d!==void 0?d:this.timeout);return await((p=b.body)===null||p===void 0?void 0:p.cancel()),b.ok?"ok":"error"}catch(b){return b.name==="AbortError"?"timed out":"error"}}else return new Promise(m=>{var E,_,C;const b=this._push(r.type,r,l.timeout||this.timeout);r.type==="broadcast"&&!(!((C=(_=(E=this.params)===null||E===void 0?void 0:E.config)===null||_===void 0?void 0:_.broadcast)===null||C===void 0)&&C.ack)&&m("ok"),b.receive("ok",()=>m("ok")),b.receive("error",()=>m("error")),b.receive("timeout",()=>m("timed out"))})}updateJoinPayload(r){this.joinPush.updatePayload(r)}unsubscribe(r=this.timeout){this.state=vn.leaving;const l=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(qi.close,"leave",this._joinRef())};this.joinPush.destroy();let d=null;return new Promise(p=>{d=new Fh(this,qi.leave,{},r),d.receive("ok",()=>{l(),p("ok")}).receive("timeout",()=>{l(),p("timed out")}).receive("error",()=>{p("error")}),d.send(),this._canPush()||d.trigger("ok",{})}).finally(()=>{d?.destroy()})}teardown(){this.pushBuffer.forEach(r=>r.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=vn.closed,this.bindings={}}async _fetchWithTimeout(r,l,d){const p=new AbortController,m=setTimeout(()=>p.abort(),d),E=await this.socket.fetch(r,Object.assign(Object.assign({},l),{signal:p.signal}));return clearTimeout(m),E}_push(r,l,d=this.timeout){if(!this.joinedOnce)throw`tried to push '${r}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let p=new Fh(this,r,l,d);return this._canPush()?p.send():this._addToPushBuffer(p),p}_addToPushBuffer(r){if(r.startTimeout(),this.pushBuffer.push(r),this.pushBuffer.length>oy){const l=this.pushBuffer.shift();l&&(l.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${l.event}`,l.payload))}}_onMessage(r,l,d){return l}_isMember(r){return this.topic===r}_joinRef(){return this.joinPush.ref}_trigger(r,l,d){var p,m;const E=r.toLocaleLowerCase(),{close:_,error:C,leave:b,join:N}=qi;if(d&&[_,C,b,N].indexOf(E)>=0&&d!==this._joinRef())return;let F=this._onMessage(E,l,d);if(l&&!F)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(E)?(p=this.bindings.postgres_changes)===null||p===void 0||p.filter(P=>{var ne,K,oe;return((ne=P.filter)===null||ne===void 0?void 0:ne.event)==="*"||((oe=(K=P.filter)===null||K===void 0?void 0:K.event)===null||oe===void 0?void 0:oe.toLocaleLowerCase())===E}).map(P=>P.callback(F,d)):(m=this.bindings[E])===null||m===void 0||m.filter(P=>{var ne,K,oe,ye,fe,te;if(["broadcast","presence","postgres_changes"].includes(E))if("id"in P){const xe=P.id,Ke=(ne=P.filter)===null||ne===void 0?void 0:ne.event;return xe&&((K=l.ids)===null||K===void 0?void 0:K.includes(xe))&&(Ke==="*"||Ke?.toLocaleLowerCase()===((oe=l.data)===null||oe===void 0?void 0:oe.type.toLocaleLowerCase()))}else{const xe=(fe=(ye=P?.filter)===null||ye===void 0?void 0:ye.event)===null||fe===void 0?void 0:fe.toLocaleLowerCase();return xe==="*"||xe===((te=l?.event)===null||te===void 0?void 0:te.toLocaleLowerCase())}else return P.type.toLocaleLowerCase()===E}).map(P=>{if(typeof F=="object"&&"ids"in F){const ne=F.data,{schema:K,table:oe,commit_timestamp:ye,type:fe,errors:te}=ne;F=Object.assign(Object.assign({},{schema:K,table:oe,commit_timestamp:ye,eventType:fe,new:{},old:{},errors:te}),this._getPayloadRecords(ne))}P.callback(F,d)})}_isClosed(){return this.state===vn.closed}_isJoined(){return this.state===vn.joined}_isJoining(){return this.state===vn.joining}_isLeaving(){return this.state===vn.leaving}_replyEventName(r){return`chan_reply_${r}`}_on(r,l,d){const p=r.toLocaleLowerCase(),m={type:p,filter:l,callback:d};return this.bindings[p]?this.bindings[p].push(m):this.bindings[p]=[m],this}_off(r,l){const d=r.toLocaleLowerCase();return this.bindings[d]&&(this.bindings[d]=this.bindings[d].filter(p=>{var m;return!(((m=p.type)===null||m===void 0?void 0:m.toLocaleLowerCase())===d&&Xs.isEqual(p.filter,l))})),this}static isEqual(r,l){if(Object.keys(r).length!==Object.keys(l).length)return!1;for(const d in r)if(r[d]!==l[d])return!1;return!0}static isFilterValueEqual(r,l){return(r??void 0)===(l??void 0)}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(r){this._on(qi.close,{},r)}_onError(r){this._on(qi.error,{},l=>r(l))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(r=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=vn.joining,this.joinPush.resend(r))}_getPayloadRecords(r){const l={new:{},old:{}};return(r.type==="INSERT"||r.type==="UPDATE")&&(l.new=G1(r.columns,r.record)),(r.type==="UPDATE"||r.type==="DELETE")&&(l.old=G1(r.columns,r.old_record)),l}}const Hh=()=>{},_u={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},yy=[1e3,2e3,5e3,1e4],py=1e4,xy=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class wy{constructor(r,l){var d;if(this.accessTokenValue=null,this.apiKey=null,this._manuallySetToken=!1,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Kh,this.transport=null,this.heartbeatIntervalMs=_u.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Hh,this.ref=0,this.reconnectTimer=null,this.vsn=V1,this.logger=Hh,this.conn=null,this.sendBuffer=[],this.serializer=new uy,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._heartbeatSentAt=null,this._resolveFetch=p=>p?(...m)=>p(...m):(...m)=>fetch(...m),!(!((d=l?.params)===null||d===void 0)&&d.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=l.params.apikey,this.endPoint=`${r}/${Qh.websocket}`,this.httpEndpoint=bg(r),this._initializeOptions(l),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(l?.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=iy.createWebSocket(this.endpointURL())}catch(r){this._setConnectionState("disconnected");const l=r.message;throw l.includes("Node.js")?new Error(`${l}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${l}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(r,l){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const d=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(d),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(r?this.conn.close(r,l??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(r){const l=await r.unsubscribe();return this.channels.length===0&&this.disconnect(),l}async removeAllChannels(){const r=await Promise.all(this.channels.map(l=>l.unsubscribe()));return this.channels=[],this.disconnect(),r}log(r,l,d){this.logger(r,l,d)}connectionState(){switch(this.conn&&this.conn.readyState){case pa.connecting:return Wa.Connecting;case pa.open:return Wa.Open;case pa.closing:return Wa.Closing;default:return Wa.Closed}}isConnected(){return this.connectionState()===Wa.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(r,l={config:{}}){const d=`realtime:${r}`,p=this.getChannels().find(m=>m.topic===d);if(p)return p;{const m=new Xs(`realtime:${r}`,l,this);return this.channels.push(m),m}}push(r){const{topic:l,event:d,payload:p,ref:m}=r,E=()=>{this.encode(r,_=>{var C;(C=this.conn)===null||C===void 0||C.send(_)})};this.log("push",`${l} ${d} (${m})`,p),this.isConnected()?E():this.sendBuffer.push(E)}async setAuth(r=null){this._authPromise=this._performAuth(r);try{await this._authPromise}finally{this._authPromise=null}}_isManualToken(){return this._manuallySetToken}async sendHeartbeat(){var r;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(l){this.log("error","error in heartbeat callback",l)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this._heartbeatSentAt=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(l){this.log("error","error in heartbeat callback",l)}this._wasManualDisconnect=!1,(r=this.conn)===null||r===void 0||r.close(ly,"heartbeat timeout"),setTimeout(()=>{var l;this.isConnected()||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout()},_u.HEARTBEAT_TIMEOUT_FALLBACK);return}this._heartbeatSentAt=Date.now(),this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(l){this.log("error","error in heartbeat callback",l)}this._setAuthSafely("heartbeat")}onHeartbeat(r){this.heartbeatCallback=r}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(r=>r()),this.sendBuffer=[])}_makeRef(){let r=this.ref+1;return r===this.ref?this.ref=0:this.ref=r,this.ref.toString()}_leaveOpenTopic(r){let l=this.channels.find(d=>d.topic===r&&(d._isJoined()||d._isJoining()));l&&(this.log("transport",`leaving duplicate topic "${r}"`),l.unsubscribe())}_remove(r){this.channels=this.channels.filter(l=>l.topic!==r.topic)}_onConnMessage(r){this.decode(r.data,l=>{if(l.topic==="phoenix"&&l.event==="phx_reply"&&l.ref&&l.ref===this.pendingHeartbeatRef){const b=this._heartbeatSentAt?Date.now()-this._heartbeatSentAt:void 0;try{this.heartbeatCallback(l.payload.status==="ok"?"ok":"error",b)}catch(N){this.log("error","error in heartbeat callback",N)}this._heartbeatSentAt=null,this.pendingHeartbeatRef=null}const{topic:d,event:p,payload:m,ref:E}=l,_=E?`(${E})`:"",C=m.status||"";this.log("receive",`${C} ${d} ${p} ${_}`.trim(),m),this.channels.filter(b=>b._isMember(d)).forEach(b=>b._trigger(p,m,E)),this._triggerStateCallbacks("message",l)})}_clearTimer(r){var l;r==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):r==="reconnect"&&((l=this.reconnectTimer)===null||l===void 0||l.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=r=>this._onConnError(r),this.conn.onmessage=r=>this._onConnMessage(r),this.conn.onclose=r=>this._onConnClose(r),this.conn.readyState===pa.open&&this._onConnOpen())}_teardownConnection(){if(this.conn){if(this.conn.readyState===pa.open||this.conn.readyState===pa.connecting)try{this.conn.close()}catch(r){this.log("error","Error closing connection",r)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this._terminateWorker(),this.channels.forEach(r=>r.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(l=>{this.log("error","error waiting for auth on connect",l),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const r=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(r),this.workerRef.onerror=l=>{this.log("worker","worker error",l.message),this._terminateWorker()},this.workerRef.onmessage=l=>{l.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_terminateWorker(){this.workerRef&&(this.log("worker","terminating worker"),this.workerRef.terminate(),this.workerRef=void 0)}_onConnClose(r){var l;this._setConnectionState("disconnected"),this.log("transport","close",r),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(l=this.reconnectTimer)===null||l===void 0||l.scheduleTimeout(),this._triggerStateCallbacks("close",r)}_onConnError(r){this._setConnectionState("disconnected"),this.log("transport",`${r}`),this._triggerChanError(),this._triggerStateCallbacks("error",r);try{this.heartbeatCallback("error")}catch(l){this.log("error","error in heartbeat callback",l)}}_triggerChanError(){this.channels.forEach(r=>r._trigger(qi.error))}_appendParams(r,l){if(Object.keys(l).length===0)return r;const d=r.match(/\?/)?"&":"?",p=new URLSearchParams(l);return`${r}${d}${p}`}_workerObjectUrl(r){let l;if(r)l=r;else{const d=new Blob([xy],{type:"application/javascript"});l=URL.createObjectURL(d)}return l}_setConnectionState(r,l=!1){this._connectionState=r,r==="connecting"?this._wasManualDisconnect=!1:r==="disconnecting"&&(this._wasManualDisconnect=l)}async _performAuth(r=null){let l,d=!1;if(r)l=r,d=!0;else if(this.accessToken)try{l=await this.accessToken()}catch(p){this.log("error","Error fetching access token from callback",p),l=this.accessTokenValue}else l=this.accessTokenValue;d?this._manuallySetToken=!0:this.accessToken&&(this._manuallySetToken=!1),this.accessTokenValue!=l&&(this.accessTokenValue=l,this.channels.forEach(p=>{const m={access_token:l,version:ay};l&&p.updateJoinPayload(m),p.joinedOnce&&p._isJoined()&&p._push(qi.access_token,{access_token:l})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(r="general"){this._isManualToken()||this.setAuth().catch(l=>{this.log("error",`Error setting auth in ${r}`,l)})}_triggerStateCallbacks(r,l){try{this.stateChangeCallbacks[r].forEach(d=>{try{d(l)}catch(p){this.log("error",`error in ${r} callback`,p)}})}catch(d){this.log("error",`error triggering ${r} callbacks`,d)}}_setupReconnectionTimer(){this.reconnectTimer=new wg(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},_u.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(r){var l,d,p,m,E,_,C,b,N,D,F,P;switch(this.transport=(l=r?.transport)!==null&&l!==void 0?l:null,this.timeout=(d=r?.timeout)!==null&&d!==void 0?d:Kh,this.heartbeatIntervalMs=(p=r?.heartbeatIntervalMs)!==null&&p!==void 0?p:_u.HEARTBEAT_INTERVAL,this.worker=(m=r?.worker)!==null&&m!==void 0?m:!1,this.accessToken=(E=r?.accessToken)!==null&&E!==void 0?E:null,this.heartbeatCallback=(_=r?.heartbeatCallback)!==null&&_!==void 0?_:Hh,this.vsn=(C=r?.vsn)!==null&&C!==void 0?C:V1,r?.params&&(this.params=r.params),r?.logger&&(this.logger=r.logger),(r?.logLevel||r?.log_level)&&(this.logLevel=r.logLevel||r.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(b=r?.reconnectAfterMs)!==null&&b!==void 0?b:(ne=>yy[ne-1]||py),this.vsn){case sy:this.encode=(N=r?.encode)!==null&&N!==void 0?N:((ne,K)=>K(JSON.stringify(ne))),this.decode=(D=r?.decode)!==null&&D!==void 0?D:((ne,K)=>K(JSON.parse(ne)));break;case xg:this.encode=(F=r?.encode)!==null&&F!==void 0?F:this.serializer.encode.bind(this.serializer),this.decode=(P=r?.decode)!==null&&P!==void 0?P:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=r?.workerUrl}}}var Ql=class extends Error{constructor(u,r){super(u),this.name="IcebergError",this.status=r.status,this.icebergType=r.icebergType,this.icebergCode=r.icebergCode,this.details=r.details,this.isCommitStateUnknown=r.icebergType==="CommitStateUnknownException"||[500,502,504].includes(r.status)&&r.icebergType?.includes("CommitState")===!0}isNotFound(){return this.status===404}isConflict(){return this.status===409}isAuthenticationTimeout(){return this.status===419}};function Ay(u,r,l){const d=new URL(r,u);if(l)for(const[p,m]of Object.entries(l))m!==void 0&&d.searchParams.set(p,m);return d.toString()}async function by(u){return!u||u.type==="none"?{}:u.type==="bearer"?{Authorization:`Bearer ${u.token}`}:u.type==="header"?{[u.name]:u.value}:u.type==="custom"?await u.getHeaders():{}}function Ey(u){const r=u.fetchImpl??globalThis.fetch;return{async request({method:l,path:d,query:p,body:m,headers:E}){const _=Ay(u.baseUrl,d,p),C=await by(u.auth),b=await r(_,{method:l,headers:{...m?{"Content-Type":"application/json"}:{},...C,...E},body:m?JSON.stringify(m):void 0}),N=await b.text(),D=(b.headers.get("content-type")||"").includes("application/json"),F=D&&N?JSON.parse(N):N;if(!b.ok){const P=D?F:void 0,ne=P?.error;throw new Ql(ne?.message??`Request failed with status ${b.status}`,{status:b.status,icebergType:ne?.type,icebergCode:ne?.code,details:P})}return{status:b.status,headers:b.headers,data:F}}}}function Cu(u){return u.join("")}var vy=class{constructor(u,r=""){this.client=u,this.prefix=r}async listNamespaces(u){const r=u?{parent:Cu(u.namespace)}:void 0;return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces`,query:r})).data.namespaces.map(d=>({namespace:d}))}async createNamespace(u,r){const l={namespace:u.namespace,properties:r?.properties};return(await this.client.request({method:"POST",path:`${this.prefix}/namespaces`,body:l})).data}async dropNamespace(u){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Cu(u.namespace)}`})}async loadNamespaceMetadata(u){return{properties:(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Cu(u.namespace)}`})).data.properties}}async namespaceExists(u){try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Cu(u.namespace)}`}),!0}catch(r){if(r instanceof Ql&&r.status===404)return!1;throw r}}async createNamespaceIfNotExists(u,r){try{return await this.createNamespace(u,r)}catch(l){if(l instanceof Ql&&l.status===409)return;throw l}}};function Us(u){return u.join("")}var Sy=class{constructor(u,r="",l){this.client=u,this.prefix=r,this.accessDelegation=l}async listTables(u){return(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Us(u.namespace)}/tables`})).data.identifiers}async createTable(u,r){const l={};return this.accessDelegation&&(l["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Us(u.namespace)}/tables`,body:r,headers:l})).data.metadata}async updateTable(u,r){const l=await this.client.request({method:"POST",path:`${this.prefix}/namespaces/${Us(u.namespace)}/tables/${u.name}`,body:r});return{"metadata-location":l.data["metadata-location"],metadata:l.data.metadata}}async dropTable(u,r){await this.client.request({method:"DELETE",path:`${this.prefix}/namespaces/${Us(u.namespace)}/tables/${u.name}`,query:{purgeRequested:String(r?.purge??!1)}})}async loadTable(u){const r={};return this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation),(await this.client.request({method:"GET",path:`${this.prefix}/namespaces/${Us(u.namespace)}/tables/${u.name}`,headers:r})).data.metadata}async tableExists(u){const r={};this.accessDelegation&&(r["X-Iceberg-Access-Delegation"]=this.accessDelegation);try{return await this.client.request({method:"HEAD",path:`${this.prefix}/namespaces/${Us(u.namespace)}/tables/${u.name}`,headers:r}),!0}catch(l){if(l instanceof Ql&&l.status===404)return!1;throw l}}async createTableIfNotExists(u,r){try{return await this.createTable(u,r)}catch(l){if(l instanceof Ql&&l.status===409)return await this.loadTable({namespace:u.namespace,name:r.name});throw l}}},_y=class{constructor(u){let r="v1";u.catalogName&&(r+=`/${u.catalogName}`);const l=u.baseUrl.endsWith("/")?u.baseUrl:`${u.baseUrl}/`;this.client=Ey({baseUrl:l,auth:u.auth,fetchImpl:u.fetch}),this.accessDelegation=u.accessDelegation?.join(","),this.namespaceOps=new vy(this.client,r),this.tableOps=new Sy(this.client,r,this.accessDelegation)}async listNamespaces(u){return this.namespaceOps.listNamespaces(u)}async createNamespace(u,r){return this.namespaceOps.createNamespace(u,r)}async dropNamespace(u){await this.namespaceOps.dropNamespace(u)}async loadNamespaceMetadata(u){return this.namespaceOps.loadNamespaceMetadata(u)}async listTables(u){return this.tableOps.listTables(u)}async createTable(u,r){return this.tableOps.createTable(u,r)}async updateTable(u,r){return this.tableOps.updateTable(u,r)}async dropTable(u,r){await this.tableOps.dropTable(u,r)}async loadTable(u){return this.tableOps.loadTable(u)}async namespaceExists(u){return this.namespaceOps.namespaceExists(u)}async tableExists(u){return this.tableOps.tableExists(u)}async createNamespaceIfNotExists(u,r){return this.namespaceOps.createNamespaceIfNotExists(u,r)}async createTableIfNotExists(u,r){return this.tableOps.createTableIfNotExists(u,r)}},Uu=class extends Error{constructor(u,r="storage",l,d){super(u),this.__isStorageError=!0,this.namespace=r,this.name=r==="vectors"?"StorageVectorsError":"StorageError",this.status=l,this.statusCode=d}};function ju(u){return typeof u=="object"&&u!==null&&"__isStorageError"in u}var Tu=class extends Uu{constructor(u,r,l,d="storage"){super(u,d,r,l),this.name=d==="vectors"?"StorageVectorsApiError":"StorageApiError",this.status=r,this.statusCode=l}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}},Eg=class extends Uu{constructor(u,r,l="storage"){super(u,l),this.name=l==="vectors"?"StorageVectorsUnknownError":"StorageUnknownError",this.originalError=r}};const Cy=u=>u?(...r)=>u(...r):(...r)=>fetch(...r),Ty=u=>{if(typeof u!="object"||u===null)return!1;const r=Object.getPrototypeOf(u);return(r===null||r===Object.prototype||Object.getPrototypeOf(r)===null)&&!(Symbol.toStringTag in u)&&!(Symbol.iterator in u)},$h=u=>{if(Array.isArray(u))return u.map(l=>$h(l));if(typeof u=="function"||u!==Object(u))return u;const r={};return Object.entries(u).forEach(([l,d])=>{const p=l.replace(/([-_][a-z])/gi,m=>m.toUpperCase().replace(/[-_]/g,""));r[p]=$h(d)}),r},Oy=u=>!u||typeof u!="string"||u.length===0||u.length>100||u.trim()!==u||u.includes("/")||u.includes("\\")?!1:/^[\w!.\*'() &$@=;:+,?-]+$/.test(u);function Jl(u){"@babel/helpers - typeof";return Jl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},Jl(u)}function Iy(u,r){if(Jl(u)!="object"||!u)return u;var l=u[Symbol.toPrimitive];if(l!==void 0){var d=l.call(u,r);if(Jl(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(u)}function Ny(u){var r=Iy(u,"string");return Jl(r)=="symbol"?r:r+""}function Ry(u,r,l){return(r=Ny(r))in u?Object.defineProperty(u,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):u[r]=l,u}function X1(u,r){var l=Object.keys(u);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(u);r&&(d=d.filter(function(p){return Object.getOwnPropertyDescriptor(u,p).enumerable})),l.push.apply(l,d)}return l}function Ue(u){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?X1(Object(l),!0).forEach(function(d){Ry(u,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(l)):X1(Object(l)).forEach(function(d){Object.defineProperty(u,d,Object.getOwnPropertyDescriptor(l,d))})}return u}const Z1=u=>{var r;return u.msg||u.message||u.error_description||(typeof u.error=="string"?u.error:(r=u.error)===null||r===void 0?void 0:r.message)||JSON.stringify(u)},Dy=async(u,r,l,d)=>{if(u&&typeof u=="object"&&"status"in u&&"ok"in u&&typeof u.status=="number"&&!l?.noResolveJson){const p=u,m=p.status||500;if(typeof p.json=="function")p.json().then(E=>{const _=E?.statusCode||E?.code||m+"";r(new Tu(Z1(E),m,_,d))}).catch(()=>{if(d==="vectors"){const E=m+"";r(new Tu(p.statusText||`HTTP ${m} error`,m,E,d))}else{const E=m+"";r(new Tu(p.statusText||`HTTP ${m} error`,m,E,d))}});else{const E=m+"";r(new Tu(p.statusText||`HTTP ${m} error`,m,E,d))}}else r(new Eg(Z1(u),u,d))},My=(u,r,l,d)=>{const p={method:u,headers:r?.headers||{}};return u==="GET"||u==="HEAD"||!d?Ue(Ue({},p),l):(Ty(d)?(p.headers=Ue({"Content-Type":"application/json"},r?.headers),p.body=JSON.stringify(d)):p.body=d,r?.duplex&&(p.duplex=r.duplex),Ue(Ue({},p),l))};async function Yl(u,r,l,d,p,m,E){return new Promise((_,C)=>{u(l,My(r,d,p,m)).then(b=>{if(!b.ok)throw b;if(d?.noResolveJson)return b;if(E==="vectors"){const N=b.headers.get("content-type");if(b.headers.get("content-length")==="0"||b.status===204)return{};if(!N||!N.includes("application/json"))return{}}return b.json()}).then(b=>_(b)).catch(b=>Dy(b,C,d,E))})}function vg(u="storage"){return{get:async(r,l,d,p)=>Yl(r,"GET",l,d,p,void 0,u),post:async(r,l,d,p,m)=>Yl(r,"POST",l,p,m,d,u),put:async(r,l,d,p,m)=>Yl(r,"PUT",l,p,m,d,u),head:async(r,l,d,p)=>Yl(r,"HEAD",l,Ue(Ue({},d),{},{noResolveJson:!0}),p,void 0,u),remove:async(r,l,d,p,m)=>Yl(r,"DELETE",l,p,m,d,u)}}const By=vg("storage"),{get:$l,post:Gi,put:ef,head:Ly,remove:cf}=By,wi=vg("vectors");var Ws=class{constructor(u,r={},l,d="storage"){this.shouldThrowOnError=!1,this.url=u,this.headers=r,this.fetch=Cy(l),this.namespace=d}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(u,r){return this.headers=Ue(Ue({},this.headers),{},{[u]:r}),this}async handleOperation(u){var r=this;try{return{data:await u(),error:null}}catch(l){if(r.shouldThrowOnError)throw l;if(ju(l))return{data:null,error:l};throw l}}},ky=class{constructor(u,r){this.downloadFn=u,this.shouldThrowOnError=r}then(u,r){return this.execute().then(u,r)}async execute(){var u=this;try{return{data:(await u.downloadFn()).body,error:null}}catch(r){if(u.shouldThrowOnError)throw r;if(ju(r))return{data:null,error:r};throw r}}};let Sg;Sg=Symbol.toStringTag;var Uy=class{constructor(u,r){this.downloadFn=u,this.shouldThrowOnError=r,this[Sg]="BlobDownloadBuilder",this.promise=null}asStream(){return new ky(this.downloadFn,this.shouldThrowOnError)}then(u,r){return this.getPromise().then(u,r)}catch(u){return this.getPromise().catch(u)}finally(u){return this.getPromise().finally(u)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}async execute(){var u=this;try{return{data:await(await u.downloadFn()).blob(),error:null}}catch(r){if(u.shouldThrowOnError)throw r;if(ju(r))return{data:null,error:r};throw r}}};const jy={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},W1={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};var zy=class extends Ws{constructor(u,r={},l,d){super(u,r,d,"storage"),this.bucketId=l}async uploadOrUpdate(u,r,l,d){var p=this;return p.handleOperation(async()=>{let m;const E=Ue(Ue({},W1),d);let _=Ue(Ue({},p.headers),u==="POST"&&{"x-upsert":String(E.upsert)});const C=E.metadata;typeof Blob<"u"&&l instanceof Blob?(m=new FormData,m.append("cacheControl",E.cacheControl),C&&m.append("metadata",p.encodeMetadata(C)),m.append("",l)):typeof FormData<"u"&&l instanceof FormData?(m=l,m.has("cacheControl")||m.append("cacheControl",E.cacheControl),C&&!m.has("metadata")&&m.append("metadata",p.encodeMetadata(C))):(m=l,_["cache-control"]=`max-age=${E.cacheControl}`,_["content-type"]=E.contentType,C&&(_["x-metadata"]=p.toBase64(p.encodeMetadata(C))),(typeof ReadableStream<"u"&&m instanceof ReadableStream||m&&typeof m=="object"&&"pipe"in m&&typeof m.pipe=="function")&&!E.duplex&&(E.duplex="half")),d?.headers&&(_=Ue(Ue({},_),d.headers));const b=p._removeEmptyFolders(r),N=p._getFinalPath(b),D=await(u=="PUT"?ef:Gi)(p.fetch,`${p.url}/object/${N}`,m,Ue({headers:_},E?.duplex?{duplex:E.duplex}:{}));return{path:b,id:D.Id,fullPath:D.Key}})}async upload(u,r,l){return this.uploadOrUpdate("POST",u,r,l)}async uploadToSignedUrl(u,r,l,d){var p=this;const m=p._removeEmptyFolders(u),E=p._getFinalPath(m),_=new URL(p.url+`/object/upload/sign/${E}`);return _.searchParams.set("token",r),p.handleOperation(async()=>{let C;const b=Ue({upsert:W1.upsert},d),N=Ue(Ue({},p.headers),{"x-upsert":String(b.upsert)});return typeof Blob<"u"&&l instanceof Blob?(C=new FormData,C.append("cacheControl",b.cacheControl),C.append("",l)):typeof FormData<"u"&&l instanceof FormData?(C=l,C.append("cacheControl",b.cacheControl)):(C=l,N["cache-control"]=`max-age=${b.cacheControl}`,N["content-type"]=b.contentType),{path:m,fullPath:(await ef(p.fetch,_.toString(),C,{headers:N})).Key}})}async createSignedUploadUrl(u,r){var l=this;return l.handleOperation(async()=>{let d=l._getFinalPath(u);const p=Ue({},l.headers);r?.upsert&&(p["x-upsert"]="true");const m=await Gi(l.fetch,`${l.url}/object/upload/sign/${d}`,{},{headers:p}),E=new URL(l.url+m.url),_=E.searchParams.get("token");if(!_)throw new Uu("No token returned by API");return{signedUrl:E.toString(),path:u,token:_}})}async update(u,r,l){return this.uploadOrUpdate("PUT",u,r,l)}async move(u,r,l){var d=this;return d.handleOperation(async()=>await Gi(d.fetch,`${d.url}/object/move`,{bucketId:d.bucketId,sourceKey:u,destinationKey:r,destinationBucket:l?.destinationBucket},{headers:d.headers}))}async copy(u,r,l){var d=this;return d.handleOperation(async()=>({path:(await Gi(d.fetch,`${d.url}/object/copy`,{bucketId:d.bucketId,sourceKey:u,destinationKey:r,destinationBucket:l?.destinationBucket},{headers:d.headers})).Key}))}async createSignedUrl(u,r,l){var d=this;return d.handleOperation(async()=>{let p=d._getFinalPath(u),m=await Gi(d.fetch,`${d.url}/object/sign/${p}`,Ue({expiresIn:r},l?.transform?{transform:l.transform}:{}),{headers:d.headers});const E=l?.download?`&download=${l.download===!0?"":l.download}`:"";return{signedUrl:encodeURI(`${d.url}${m.signedURL}${E}`)}})}async createSignedUrls(u,r,l){var d=this;return d.handleOperation(async()=>{const p=await Gi(d.fetch,`${d.url}/object/sign/${d.bucketId}`,{expiresIn:r,paths:u},{headers:d.headers}),m=l?.download?`&download=${l.download===!0?"":l.download}`:"";return p.map(E=>Ue(Ue({},E),{},{signedUrl:E.signedURL?encodeURI(`${d.url}${E.signedURL}${m}`):null}))})}download(u,r,l){const d=typeof r?.transform<"u"?"render/image/authenticated":"object",p=this.transformOptsToQueryString(r?.transform||{}),m=p?`?${p}`:"",E=this._getFinalPath(u),_=()=>$l(this.fetch,`${this.url}/${d}/${E}${m}`,{headers:this.headers,noResolveJson:!0},l);return new Uy(_,this.shouldThrowOnError)}async info(u){var r=this;const l=r._getFinalPath(u);return r.handleOperation(async()=>$h(await $l(r.fetch,`${r.url}/object/info/${l}`,{headers:r.headers})))}async exists(u){var r=this;const l=r._getFinalPath(u);try{return await Ly(r.fetch,`${r.url}/object/${l}`,{headers:r.headers}),{data:!0,error:null}}catch(d){if(r.shouldThrowOnError)throw d;if(ju(d)&&d instanceof Eg){const p=d.originalError;if([400,404].includes(p?.status))return{data:!1,error:d}}throw d}}getPublicUrl(u,r){const l=this._getFinalPath(u),d=[],p=r?.download?`download=${r.download===!0?"":r.download}`:"";p!==""&&d.push(p);const m=typeof r?.transform<"u"?"render/image":"object",E=this.transformOptsToQueryString(r?.transform||{});E!==""&&d.push(E);let _=d.join("&");return _!==""&&(_=`?${_}`),{data:{publicUrl:encodeURI(`${this.url}/${m}/public/${l}${_}`)}}}async remove(u){var r=this;return r.handleOperation(async()=>await cf(r.fetch,`${r.url}/object/${r.bucketId}`,{prefixes:u},{headers:r.headers}))}async list(u,r,l){var d=this;return d.handleOperation(async()=>{const p=Ue(Ue(Ue({},jy),r),{},{prefix:u||""});return await Gi(d.fetch,`${d.url}/object/list/${d.bucketId}`,p,{headers:d.headers},l)})}async listV2(u,r){var l=this;return l.handleOperation(async()=>{const d=Ue({},u);return await Gi(l.fetch,`${l.url}/object/list-v2/${l.bucketId}`,d,{headers:l.headers},r)})}encodeMetadata(u){return JSON.stringify(u)}toBase64(u){return typeof Buffer<"u"?Buffer.from(u).toString("base64"):btoa(u)}_getFinalPath(u){return`${this.bucketId}/${u.replace(/^\/+/,"")}`}_removeEmptyFolders(u){return u.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(u){const r=[];return u.width&&r.push(`width=${u.width}`),u.height&&r.push(`height=${u.height}`),u.resize&&r.push(`resize=${u.resize}`),u.format&&r.push(`format=${u.format}`),u.quality&&r.push(`quality=${u.quality}`),r.join("&")}};const Py="2.97.0",io={"X-Client-Info":`storage-js/${Py}`};var Fy=class extends Ws{constructor(u,r={},l,d){const p=new URL(u);d?.useNewHostname&&/supabase\.(co|in|red)$/.test(p.hostname)&&!p.hostname.includes("storage.supabase.")&&(p.hostname=p.hostname.replace("supabase.","storage.supabase."));const m=p.href.replace(/\/$/,""),E=Ue(Ue({},io),r);super(m,E,l,"storage")}async listBuckets(u){var r=this;return r.handleOperation(async()=>{const l=r.listBucketOptionsToQueryString(u);return await $l(r.fetch,`${r.url}/bucket${l}`,{headers:r.headers})})}async getBucket(u){var r=this;return r.handleOperation(async()=>await $l(r.fetch,`${r.url}/bucket/${u}`,{headers:r.headers}))}async createBucket(u,r={public:!1}){var l=this;return l.handleOperation(async()=>await Gi(l.fetch,`${l.url}/bucket`,{id:u,name:u,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:l.headers}))}async updateBucket(u,r){var l=this;return l.handleOperation(async()=>await ef(l.fetch,`${l.url}/bucket/${u}`,{id:u,name:u,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:l.headers}))}async emptyBucket(u){var r=this;return r.handleOperation(async()=>await Gi(r.fetch,`${r.url}/bucket/${u}/empty`,{},{headers:r.headers}))}async deleteBucket(u){var r=this;return r.handleOperation(async()=>await cf(r.fetch,`${r.url}/bucket/${u}`,{},{headers:r.headers}))}listBucketOptionsToQueryString(u){const r={};return u&&("limit"in u&&(r.limit=String(u.limit)),"offset"in u&&(r.offset=String(u.offset)),u.search&&(r.search=u.search),u.sortColumn&&(r.sortColumn=u.sortColumn),u.sortOrder&&(r.sortOrder=u.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}},Hy=class extends Ws{constructor(u,r={},l){const d=u.replace(/\/$/,""),p=Ue(Ue({},io),r);super(d,p,l,"storage")}async createBucket(u){var r=this;return r.handleOperation(async()=>await Gi(r.fetch,`${r.url}/bucket`,{name:u},{headers:r.headers}))}async listBuckets(u){var r=this;return r.handleOperation(async()=>{const l=new URLSearchParams;u?.limit!==void 0&&l.set("limit",u.limit.toString()),u?.offset!==void 0&&l.set("offset",u.offset.toString()),u?.sortColumn&&l.set("sortColumn",u.sortColumn),u?.sortOrder&&l.set("sortOrder",u.sortOrder),u?.search&&l.set("search",u.search);const d=l.toString(),p=d?`${r.url}/bucket?${d}`:`${r.url}/bucket`;return await $l(r.fetch,p,{headers:r.headers})})}async deleteBucket(u){var r=this;return r.handleOperation(async()=>await cf(r.fetch,`${r.url}/bucket/${u}`,{},{headers:r.headers}))}from(u){var r=this;if(!Oy(u))throw new Uu("Invalid bucket name: File, folder, and bucket names must follow AWS object key naming guidelines and should avoid the use of any other characters.");const l=new _y({baseUrl:this.url,catalogName:u,auth:{type:"custom",getHeaders:async()=>r.headers},fetch:this.fetch}),d=this.shouldThrowOnError;return new Proxy(l,{get(p,m){const E=p[m];return typeof E!="function"?E:async(..._)=>{try{return{data:await E.apply(p,_),error:null}}catch(C){if(d)throw C;return{data:null,error:C}}}}})}},Vy=class extends Ws{constructor(u,r={},l){const d=u.replace(/\/$/,""),p=Ue(Ue({},io),{},{"Content-Type":"application/json"},r);super(d,p,l,"vectors")}async createIndex(u){var r=this;return r.handleOperation(async()=>await wi.post(r.fetch,`${r.url}/CreateIndex`,u,{headers:r.headers})||{})}async getIndex(u,r){var l=this;return l.handleOperation(async()=>await wi.post(l.fetch,`${l.url}/GetIndex`,{vectorBucketName:u,indexName:r},{headers:l.headers}))}async listIndexes(u){var r=this;return r.handleOperation(async()=>await wi.post(r.fetch,`${r.url}/ListIndexes`,u,{headers:r.headers}))}async deleteIndex(u,r){var l=this;return l.handleOperation(async()=>await wi.post(l.fetch,`${l.url}/DeleteIndex`,{vectorBucketName:u,indexName:r},{headers:l.headers})||{})}},Gy=class extends Ws{constructor(u,r={},l){const d=u.replace(/\/$/,""),p=Ue(Ue({},io),{},{"Content-Type":"application/json"},r);super(d,p,l,"vectors")}async putVectors(u){var r=this;if(u.vectors.length<1||u.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return r.handleOperation(async()=>await wi.post(r.fetch,`${r.url}/PutVectors`,u,{headers:r.headers})||{})}async getVectors(u){var r=this;return r.handleOperation(async()=>await wi.post(r.fetch,`${r.url}/GetVectors`,u,{headers:r.headers}))}async listVectors(u){var r=this;if(u.segmentCount!==void 0){if(u.segmentCount<1||u.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(u.segmentIndex!==void 0&&(u.segmentIndex<0||u.segmentIndex>=u.segmentCount))throw new Error(`segmentIndex must be between 0 and ${u.segmentCount-1}`)}return r.handleOperation(async()=>await wi.post(r.fetch,`${r.url}/ListVectors`,u,{headers:r.headers}))}async queryVectors(u){var r=this;return r.handleOperation(async()=>await wi.post(r.fetch,`${r.url}/QueryVectors`,u,{headers:r.headers}))}async deleteVectors(u){var r=this;if(u.keys.length<1||u.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return r.handleOperation(async()=>await wi.post(r.fetch,`${r.url}/DeleteVectors`,u,{headers:r.headers})||{})}},Yy=class extends Ws{constructor(u,r={},l){const d=u.replace(/\/$/,""),p=Ue(Ue({},io),{},{"Content-Type":"application/json"},r);super(d,p,l,"vectors")}async createBucket(u){var r=this;return r.handleOperation(async()=>await wi.post(r.fetch,`${r.url}/CreateVectorBucket`,{vectorBucketName:u},{headers:r.headers})||{})}async getBucket(u){var r=this;return r.handleOperation(async()=>await wi.post(r.fetch,`${r.url}/GetVectorBucket`,{vectorBucketName:u},{headers:r.headers}))}async listBuckets(u={}){var r=this;return r.handleOperation(async()=>await wi.post(r.fetch,`${r.url}/ListVectorBuckets`,u,{headers:r.headers}))}async deleteBucket(u){var r=this;return r.handleOperation(async()=>await wi.post(r.fetch,`${r.url}/DeleteVectorBucket`,{vectorBucketName:u},{headers:r.headers})||{})}},qy=class extends Yy{constructor(u,r={}){super(u,r.headers||{},r.fetch)}from(u){return new Xy(this.url,this.headers,u,this.fetch)}async createBucket(u){var r=()=>super.createBucket,l=this;return r().call(l,u)}async getBucket(u){var r=()=>super.getBucket,l=this;return r().call(l,u)}async listBuckets(u={}){var r=()=>super.listBuckets,l=this;return r().call(l,u)}async deleteBucket(u){var r=()=>super.deleteBucket,l=this;return r().call(l,u)}},Xy=class extends Vy{constructor(u,r,l,d){super(u,r,d),this.vectorBucketName=l}async createIndex(u){var r=()=>super.createIndex,l=this;return r().call(l,Ue(Ue({},u),{},{vectorBucketName:l.vectorBucketName}))}async listIndexes(u={}){var r=()=>super.listIndexes,l=this;return r().call(l,Ue(Ue({},u),{},{vectorBucketName:l.vectorBucketName}))}async getIndex(u){var r=()=>super.getIndex,l=this;return r().call(l,l.vectorBucketName,u)}async deleteIndex(u){var r=()=>super.deleteIndex,l=this;return r().call(l,l.vectorBucketName,u)}index(u){return new Zy(this.url,this.headers,this.vectorBucketName,u,this.fetch)}},Zy=class extends Gy{constructor(u,r,l,d,p){super(u,r,p),this.vectorBucketName=l,this.indexName=d}async putVectors(u){var r=()=>super.putVectors,l=this;return r().call(l,Ue(Ue({},u),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async getVectors(u){var r=()=>super.getVectors,l=this;return r().call(l,Ue(Ue({},u),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async listVectors(u={}){var r=()=>super.listVectors,l=this;return r().call(l,Ue(Ue({},u),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async queryVectors(u){var r=()=>super.queryVectors,l=this;return r().call(l,Ue(Ue({},u),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}async deleteVectors(u){var r=()=>super.deleteVectors,l=this;return r().call(l,Ue(Ue({},u),{},{vectorBucketName:l.vectorBucketName,indexName:l.indexName}))}},Wy=class extends Fy{constructor(u,r={},l,d){super(u,r,l,d)}from(u){return new zy(this.url,this.headers,u,this.fetch)}get vectors(){return new qy(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Hy(this.url+"/iceberg",this.headers,this.fetch)}};const _g="2.97.0",Gs=30*1e3,tf=3,Vh=tf*Gs,Ky="http://localhost:9999",Qy="supabase.auth.token",Jy={"X-Client-Info":`gotrue-js/${_g}`},nf="X-Supabase-Api-Version",Cg={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},$y=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ep=600*1e3;class eo extends Error{constructor(r,l,d){super(r),this.__isAuthError=!0,this.name="AuthError",this.status=l,this.code=d}}function Ie(u){return typeof u=="object"&&u!==null&&"__isAuthError"in u}class tp extends eo{constructor(r,l,d){super(r,l,d),this.name="AuthApiError",this.status=l,this.code=d}}function np(u){return Ie(u)&&u.name==="AuthApiError"}class Ka extends eo{constructor(r,l){super(r),this.name="AuthUnknownError",this.originalError=l}}class Rr extends eo{constructor(r,l,d,p){super(r,d,p),this.name=l,this.status=d}}class mi extends Rr{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Gh(u){return Ie(u)&&u.name==="AuthSessionMissingError"}class js extends Rr{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Ou extends Rr{constructor(r){super(r,"AuthInvalidCredentialsError",400,void 0)}}class Iu extends Rr{constructor(r,l=null){super(r,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function ip(u){return Ie(u)&&u.name==="AuthImplicitGrantRedirectError"}class K1 extends Rr{constructor(r,l=null){super(r,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=l}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class rp extends Rr{constructor(){super("PKCE code verifier not found in storage. This can happen if the auth flow was initiated in a different browser or device, or if the storage was cleared. For SSR frameworks (Next.js, SvelteKit, etc.), use @supabase/ssr on both the server and client to store the code verifier in cookies.","AuthPKCECodeVerifierMissingError",400,"pkce_code_verifier_not_found")}}class rf extends Rr{constructor(r,l){super(r,"AuthRetryableFetchError",l,void 0)}}function Yh(u){return Ie(u)&&u.name==="AuthRetryableFetchError"}class Q1 extends Rr{constructor(r,l,d){super(r,"AuthWeakPasswordError",l,"weak_password"),this.reasons=d}}class af extends Rr{constructor(r){super(r,"AuthInvalidJwtError",400,"invalid_jwt")}}const Mu="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),J1=` 	
\r=`.split(""),ap=(()=>{const u=new Array(128);for(let r=0;r<u.length;r+=1)u[r]=-1;for(let r=0;r<J1.length;r+=1)u[J1[r].charCodeAt(0)]=-2;for(let r=0;r<Mu.length;r+=1)u[Mu[r].charCodeAt(0)]=r;return u})();function $1(u,r,l){if(u!==null)for(r.queue=r.queue<<8|u,r.queuedBits+=8;r.queuedBits>=6;){const d=r.queue>>r.queuedBits-6&63;l(Mu[d]),r.queuedBits-=6}else if(r.queuedBits>0)for(r.queue=r.queue<<6-r.queuedBits,r.queuedBits=6;r.queuedBits>=6;){const d=r.queue>>r.queuedBits-6&63;l(Mu[d]),r.queuedBits-=6}}function Tg(u,r,l){const d=ap[u];if(d>-1)for(r.queue=r.queue<<6|d,r.queuedBits+=6;r.queuedBits>=8;)l(r.queue>>r.queuedBits-8&255),r.queuedBits-=8;else{if(d===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(u)}"`)}}function eg(u){const r=[],l=E=>{r.push(String.fromCodePoint(E))},d={utf8seq:0,codepoint:0},p={queue:0,queuedBits:0},m=E=>{op(E,d,l)};for(let E=0;E<u.length;E+=1)Tg(u.charCodeAt(E),p,m);return r.join("")}function sp(u,r){if(u<=127){r(u);return}else if(u<=2047){r(192|u>>6),r(128|u&63);return}else if(u<=65535){r(224|u>>12),r(128|u>>6&63),r(128|u&63);return}else if(u<=1114111){r(240|u>>18),r(128|u>>12&63),r(128|u>>6&63),r(128|u&63);return}throw new Error(`Unrecognized Unicode codepoint: ${u.toString(16)}`)}function lp(u,r){for(let l=0;l<u.length;l+=1){let d=u.charCodeAt(l);if(d>55295&&d<=56319){const p=(d-55296)*1024&65535;d=(u.charCodeAt(l+1)-56320&65535|p)+65536,l+=1}sp(d,r)}}function op(u,r,l){if(r.utf8seq===0){if(u<=127){l(u);return}for(let d=1;d<6;d+=1)if((u>>7-d&1)===0){r.utf8seq=d;break}if(r.utf8seq===2)r.codepoint=u&31;else if(r.utf8seq===3)r.codepoint=u&15;else if(r.utf8seq===4)r.codepoint=u&7;else throw new Error("Invalid UTF-8 sequence");r.utf8seq-=1}else if(r.utf8seq>0){if(u<=127)throw new Error("Invalid UTF-8 sequence");r.codepoint=r.codepoint<<6|u&63,r.utf8seq-=1,r.utf8seq===0&&l(r.codepoint)}}function Zs(u){const r=[],l={queue:0,queuedBits:0},d=p=>{r.push(p)};for(let p=0;p<u.length;p+=1)Tg(u.charCodeAt(p),l,d);return new Uint8Array(r)}function up(u){const r=[];return lp(u,l=>r.push(l)),new Uint8Array(r)}function Qa(u){const r=[],l={queue:0,queuedBits:0},d=p=>{r.push(p)};return u.forEach(p=>$1(p,l,d)),$1(null,l,d),r.join("")}function cp(u){return Math.round(Date.now()/1e3)+u}function hp(){return Symbol("auth-callback")}const Bn=()=>typeof window<"u"&&typeof document<"u",qa={tested:!1,writable:!1},Og=()=>{if(!Bn())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(qa.tested)return qa.writable;const u=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(u,u),globalThis.localStorage.removeItem(u),qa.tested=!0,qa.writable=!0}catch{qa.tested=!0,qa.writable=!1}return qa.writable};function fp(u){const r={},l=new URL(u);if(l.hash&&l.hash[0]==="#")try{new URLSearchParams(l.hash.substring(1)).forEach((p,m)=>{r[m]=p})}catch{}return l.searchParams.forEach((d,p)=>{r[p]=d}),r}const Ig=u=>u?(...r)=>u(...r):(...r)=>fetch(...r),dp=u=>typeof u=="object"&&u!==null&&"status"in u&&"ok"in u&&"json"in u&&typeof u.json=="function",Ys=async(u,r,l)=>{await u.setItem(r,JSON.stringify(l))},Xa=async(u,r)=>{const l=await u.getItem(r);if(!l)return null;try{return JSON.parse(l)}catch{return l}},Mn=async(u,r)=>{await u.removeItem(r)};class zu{constructor(){this.promise=new zu.promiseConstructor((r,l)=>{this.resolve=r,this.reject=l})}}zu.promiseConstructor=Promise;function Nu(u){const r=u.split(".");if(r.length!==3)throw new af("Invalid JWT structure");for(let d=0;d<r.length;d++)if(!$y.test(r[d]))throw new af("JWT not in base64url format");return{header:JSON.parse(eg(r[0])),payload:JSON.parse(eg(r[1])),signature:Zs(r[2]),raw:{header:r[0],payload:r[1]}}}async function gp(u){return await new Promise(r=>{setTimeout(()=>r(null),u)})}function mp(u,r){return new Promise((d,p)=>{(async()=>{for(let m=0;m<1/0;m++)try{const E=await u(m);if(!r(m,null,E)){d(E);return}}catch(E){if(!r(m,E)){p(E);return}}})()})}function yp(u){return("0"+u.toString(16)).substr(-2)}function pp(){const r=new Uint32Array(56);if(typeof crypto>"u"){const l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",d=l.length;let p="";for(let m=0;m<56;m++)p+=l.charAt(Math.floor(Math.random()*d));return p}return crypto.getRandomValues(r),Array.from(r,yp).join("")}async function xp(u){const l=new TextEncoder().encode(u),d=await crypto.subtle.digest("SHA-256",l),p=new Uint8Array(d);return Array.from(p).map(m=>String.fromCharCode(m)).join("")}async function wp(u){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),u;const l=await xp(u);return btoa(l).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function zs(u,r,l=!1){const d=pp();let p=d;l&&(p+="/PASSWORD_RECOVERY"),await Ys(u,`${r}-code-verifier`,p);const m=await wp(d);return[m,d===m?"plain":"s256"]}const Ap=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function bp(u){const r=u.headers.get(nf);if(!r||!r.match(Ap))return null;try{return new Date(`${r}T00:00:00.0Z`)}catch{return null}}function Ep(u){if(!u)throw new Error("Missing exp claim");const r=Math.floor(Date.now()/1e3);if(u<=r)throw new Error("JWT has expired")}function vp(u){switch(u){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Sp=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ps(u){if(!Sp.test(u))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function qh(){const u={};return new Proxy(u,{get:(r,l)=>{if(l==="__isUserNotAvailableProxy")return!0;if(typeof l=="symbol"){const d=l.toString();if(d==="Symbol(Symbol.toPrimitive)"||d==="Symbol(Symbol.toStringTag)"||d==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${l}" property of the session object is not supported. Please use getUser() instead.`)},set:(r,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(r,l)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${l}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function _p(u,r){return new Proxy(u,{get:(l,d,p)=>{if(d==="__isInsecureUserWarningProxy")return!0;if(typeof d=="symbol"){const m=d.toString();if(m==="Symbol(Symbol.toPrimitive)"||m==="Symbol(Symbol.toStringTag)"||m==="Symbol(util.inspect.custom)"||m==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(l,d,p)}return!r.value&&typeof d=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),r.value=!0),Reflect.get(l,d,p)}})}function tg(u){return JSON.parse(JSON.stringify(u))}const Za=u=>u.msg||u.message||u.error_description||u.error||JSON.stringify(u),Cp=[502,503,504];async function ng(u){var r;if(!dp(u))throw new rf(Za(u),0);if(Cp.includes(u.status))throw new rf(Za(u),u.status);let l;try{l=await u.json()}catch(m){throw new Ka(Za(m),m)}let d;const p=bp(u);if(p&&p.getTime()>=Cg["2024-01-01"].timestamp&&typeof l=="object"&&l&&typeof l.code=="string"?d=l.code:typeof l=="object"&&l&&typeof l.error_code=="string"&&(d=l.error_code),d){if(d==="weak_password")throw new Q1(Za(l),u.status,((r=l.weak_password)===null||r===void 0?void 0:r.reasons)||[]);if(d==="session_not_found")throw new mi}else if(typeof l=="object"&&l&&typeof l.weak_password=="object"&&l.weak_password&&Array.isArray(l.weak_password.reasons)&&l.weak_password.reasons.length&&l.weak_password.reasons.reduce((m,E)=>m&&typeof E=="string",!0))throw new Q1(Za(l),u.status,l.weak_password.reasons);throw new tp(Za(l),u.status||500,d)}const Tp=(u,r,l,d)=>{const p={method:u,headers:r?.headers||{}};return u==="GET"?p:(p.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},r?.headers),p.body=JSON.stringify(d),Object.assign(Object.assign({},p),l))};async function je(u,r,l,d){var p;const m=Object.assign({},d?.headers);m[nf]||(m[nf]=Cg["2024-01-01"].name),d?.jwt&&(m.Authorization=`Bearer ${d.jwt}`);const E=(p=d?.query)!==null&&p!==void 0?p:{};d?.redirectTo&&(E.redirect_to=d.redirectTo);const _=Object.keys(E).length?"?"+new URLSearchParams(E).toString():"",C=await Op(u,r,l+_,{headers:m,noResolveJson:d?.noResolveJson},{},d?.body);return d?.xform?d?.xform(C):{data:Object.assign({},C),error:null}}async function Op(u,r,l,d,p,m){const E=Tp(r,d,p,m);let _;try{_=await u(l,Object.assign({},E))}catch(C){throw console.error(C),new rf(Za(C),0)}if(_.ok||await ng(_),d?.noResolveJson)return _;try{return await _.json()}catch(C){await ng(C)}}function Vi(u){var r;let l=null;Rp(u)&&(l=Object.assign({},u),u.expires_at||(l.expires_at=cp(u.expires_in)));const d=(r=u.user)!==null&&r!==void 0?r:u;return{data:{session:l,user:d},error:null}}function ig(u){const r=Vi(u);return!r.error&&u.weak_password&&typeof u.weak_password=="object"&&Array.isArray(u.weak_password.reasons)&&u.weak_password.reasons.length&&u.weak_password.message&&typeof u.weak_password.message=="string"&&u.weak_password.reasons.reduce((l,d)=>l&&typeof d=="string",!0)&&(r.data.weak_password=u.weak_password),r}function xa(u){var r;return{data:{user:(r=u.user)!==null&&r!==void 0?r:u},error:null}}function Ip(u){return{data:u,error:null}}function Np(u){const{action_link:r,email_otp:l,hashed_token:d,redirect_to:p,verification_type:m}=u,E=ku(u,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),_={action_link:r,email_otp:l,hashed_token:d,redirect_to:p,verification_type:m},C=Object.assign({},E);return{data:{properties:_,user:C},error:null}}function rg(u){return u}function Rp(u){return u.access_token&&u.refresh_token&&u.expires_in}const Xh=["global","local","others"];class Dp{constructor({url:r="",headers:l={},fetch:d}){this.url=r,this.headers=l,this.fetch=Ig(d),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(r,l=Xh[0]){if(Xh.indexOf(l)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Xh.join(", ")}`);try{return await je(this.fetch,"POST",`${this.url}/logout?scope=${l}`,{headers:this.headers,jwt:r,noResolveJson:!0}),{data:null,error:null}}catch(d){if(Ie(d))return{data:null,error:d};throw d}}async inviteUserByEmail(r,l={}){try{return await je(this.fetch,"POST",`${this.url}/invite`,{body:{email:r,data:l.data},headers:this.headers,redirectTo:l.redirectTo,xform:xa})}catch(d){if(Ie(d))return{data:{user:null},error:d};throw d}}async generateLink(r){try{const{options:l}=r,d=ku(r,["options"]),p=Object.assign(Object.assign({},d),l);return"newEmail"in d&&(p.new_email=d?.newEmail,delete p.newEmail),await je(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:p,headers:this.headers,xform:Np,redirectTo:l?.redirectTo})}catch(l){if(Ie(l))return{data:{properties:null,user:null},error:l};throw l}}async createUser(r){try{return await je(this.fetch,"POST",`${this.url}/admin/users`,{body:r,headers:this.headers,xform:xa})}catch(l){if(Ie(l))return{data:{user:null},error:l};throw l}}async listUsers(r){var l,d,p,m,E,_,C;try{const b={nextPage:null,lastPage:0,total:0},N=await je(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(d=(l=r?.page)===null||l===void 0?void 0:l.toString())!==null&&d!==void 0?d:"",per_page:(m=(p=r?.perPage)===null||p===void 0?void 0:p.toString())!==null&&m!==void 0?m:""},xform:rg});if(N.error)throw N.error;const D=await N.json(),F=(E=N.headers.get("x-total-count"))!==null&&E!==void 0?E:0,P=(C=(_=N.headers.get("link"))===null||_===void 0?void 0:_.split(","))!==null&&C!==void 0?C:[];return P.length>0&&(P.forEach(ne=>{const K=parseInt(ne.split(";")[0].split("=")[1].substring(0,1)),oe=JSON.parse(ne.split(";")[1].split("=")[1]);b[`${oe}Page`]=K}),b.total=parseInt(F)),{data:Object.assign(Object.assign({},D),b),error:null}}catch(b){if(Ie(b))return{data:{users:[]},error:b};throw b}}async getUserById(r){Ps(r);try{return await je(this.fetch,"GET",`${this.url}/admin/users/${r}`,{headers:this.headers,xform:xa})}catch(l){if(Ie(l))return{data:{user:null},error:l};throw l}}async updateUserById(r,l){Ps(r);try{return await je(this.fetch,"PUT",`${this.url}/admin/users/${r}`,{body:l,headers:this.headers,xform:xa})}catch(d){if(Ie(d))return{data:{user:null},error:d};throw d}}async deleteUser(r,l=!1){Ps(r);try{return await je(this.fetch,"DELETE",`${this.url}/admin/users/${r}`,{headers:this.headers,body:{should_soft_delete:l},xform:xa})}catch(d){if(Ie(d))return{data:{user:null},error:d};throw d}}async _listFactors(r){Ps(r.userId);try{const{data:l,error:d}=await je(this.fetch,"GET",`${this.url}/admin/users/${r.userId}/factors`,{headers:this.headers,xform:p=>({data:{factors:p},error:null})});return{data:l,error:d}}catch(l){if(Ie(l))return{data:null,error:l};throw l}}async _deleteFactor(r){Ps(r.userId),Ps(r.id);try{return{data:await je(this.fetch,"DELETE",`${this.url}/admin/users/${r.userId}/factors/${r.id}`,{headers:this.headers}),error:null}}catch(l){if(Ie(l))return{data:null,error:l};throw l}}async _listOAuthClients(r){var l,d,p,m,E,_,C;try{const b={nextPage:null,lastPage:0,total:0},N=await je(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(d=(l=r?.page)===null||l===void 0?void 0:l.toString())!==null&&d!==void 0?d:"",per_page:(m=(p=r?.perPage)===null||p===void 0?void 0:p.toString())!==null&&m!==void 0?m:""},xform:rg});if(N.error)throw N.error;const D=await N.json(),F=(E=N.headers.get("x-total-count"))!==null&&E!==void 0?E:0,P=(C=(_=N.headers.get("link"))===null||_===void 0?void 0:_.split(","))!==null&&C!==void 0?C:[];return P.length>0&&(P.forEach(ne=>{const K=parseInt(ne.split(";")[0].split("=")[1].substring(0,1)),oe=JSON.parse(ne.split(";")[1].split("=")[1]);b[`${oe}Page`]=K}),b.total=parseInt(F)),{data:Object.assign(Object.assign({},D),b),error:null}}catch(b){if(Ie(b))return{data:{clients:[]},error:b};throw b}}async _createOAuthClient(r){try{return await je(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:r,headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(Ie(l))return{data:null,error:l};throw l}}async _getOAuthClient(r){try{return await je(this.fetch,"GET",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(Ie(l))return{data:null,error:l};throw l}}async _updateOAuthClient(r,l){try{return await je(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${r}`,{body:l,headers:this.headers,xform:d=>({data:d,error:null})})}catch(d){if(Ie(d))return{data:null,error:d};throw d}}async _deleteOAuthClient(r){try{return await je(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${r}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(l){if(Ie(l))return{data:null,error:l};throw l}}async _regenerateOAuthClientSecret(r){try{return await je(this.fetch,"POST",`${this.url}/admin/oauth/clients/${r}/regenerate_secret`,{headers:this.headers,xform:l=>({data:l,error:null})})}catch(l){if(Ie(l))return{data:null,error:l};throw l}}}function ag(u={}){return{getItem:r=>u[r]||null,setItem:(r,l)=>{u[r]=l},removeItem:r=>{delete u[r]}}}const Fs={debug:!!(globalThis&&Og()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Ng extends Error{constructor(r){super(r),this.isAcquireTimeout=!0}}class sg extends Ng{}async function Mp(u,r,l){Fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",u,r);const d=new globalThis.AbortController;r>0&&setTimeout(()=>{d.abort(),Fs.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",u)},r),await Promise.resolve();try{return await globalThis.navigator.locks.request(u,r===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:d.signal},async p=>{if(p){Fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",u,p.name);try{return await l()}finally{Fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",u,p.name)}}else{if(r===0)throw Fs.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",u),new sg(`Acquiring an exclusive Navigator LockManager lock "${u}" immediately failed`);if(Fs.debug)try{const m=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(m,null,"  "))}catch(m){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",m)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await l()}})}catch(p){throw p?.name==="AbortError"?new sg(`Acquiring an exclusive Navigator LockManager lock "${u}" timed out waiting ${r}ms`):p}}function Bp(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function Rg(u){if(!/^0x[a-fA-F0-9]{40}$/.test(u))throw new Error(`@supabase/auth-js: Address "${u}" is invalid.`);return u.toLowerCase()}function Lp(u){return parseInt(u,16)}function kp(u){const r=new TextEncoder().encode(u);return"0x"+Array.from(r,d=>d.toString(16).padStart(2,"0")).join("")}function Up(u){var r;const{chainId:l,domain:d,expirationTime:p,issuedAt:m=new Date,nonce:E,notBefore:_,requestId:C,resources:b,scheme:N,uri:D,version:F}=u;{if(!Number.isInteger(l))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${l}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(E&&E.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${E}`);if(!D)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(F!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${F}`);if(!((r=u.statement)===null||r===void 0)&&r.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${u.statement}`)}const P=Rg(u.address),ne=N?`${N}://${d}`:d,K=u.statement?`${u.statement}
`:"",oe=`${ne} wants you to sign in with your Ethereum account:
${P}

${K}`;let ye=`URI: ${D}
Version: ${F}
Chain ID: ${l}${E?`
Nonce: ${E}`:""}
Issued At: ${m.toISOString()}`;if(p&&(ye+=`
Expiration Time: ${p.toISOString()}`),_&&(ye+=`
Not Before: ${_.toISOString()}`),C&&(ye+=`
Request ID: ${C}`),b){let fe=`
Resources:`;for(const te of b){if(!te||typeof te!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${te}`);fe+=`
- ${te}`}ye+=fe}return`${oe}
${ye}`}class mn extends Error{constructor({message:r,code:l,cause:d,name:p}){var m;super(r,{cause:d}),this.__isWebAuthnError=!0,this.name=(m=p??(d instanceof Error?d.name:void 0))!==null&&m!==void 0?m:"Unknown Error",this.code=l}}class Bu extends mn{constructor(r,l){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:l,message:r}),this.name="WebAuthnUnknownError",this.originalError=l}}function jp({error:u,options:r}){var l,d,p;const{publicKey:m}=r;if(!m)throw Error("options was missing required publicKey property");if(u.name==="AbortError"){if(r.signal instanceof AbortSignal)return new mn({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:u})}else if(u.name==="ConstraintError"){if(((l=m.authenticatorSelection)===null||l===void 0?void 0:l.requireResidentKey)===!0)return new mn({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:u});if(r.mediation==="conditional"&&((d=m.authenticatorSelection)===null||d===void 0?void 0:d.userVerification)==="required")return new mn({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:u});if(((p=m.authenticatorSelection)===null||p===void 0?void 0:p.userVerification)==="required")return new mn({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:u})}else{if(u.name==="InvalidStateError")return new mn({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:u});if(u.name==="NotAllowedError")return new mn({message:u.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:u});if(u.name==="NotSupportedError")return m.pubKeyCredParams.filter(_=>_.type==="public-key").length===0?new mn({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:u}):new mn({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:u});if(u.name==="SecurityError"){const E=window.location.hostname;if(Dg(E)){if(m.rp.id!==E)return new mn({message:`The RP ID "${m.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:u})}else return new mn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:u})}else if(u.name==="TypeError"){if(m.user.id.byteLength<1||m.user.id.byteLength>64)return new mn({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:u})}else if(u.name==="UnknownError")return new mn({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:u})}return new mn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:u})}function zp({error:u,options:r}){const{publicKey:l}=r;if(!l)throw Error("options was missing required publicKey property");if(u.name==="AbortError"){if(r.signal instanceof AbortSignal)return new mn({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:u})}else{if(u.name==="NotAllowedError")return new mn({message:u.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:u});if(u.name==="SecurityError"){const d=window.location.hostname;if(Dg(d)){if(l.rpId!==d)return new mn({message:`The RP ID "${l.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:u})}else return new mn({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:u})}else if(u.name==="UnknownError")return new mn({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:u})}return new mn({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:u})}class Pp{createNewAbortSignal(){if(this.controller){const l=new Error("Cancelling existing WebAuthn API call for new one");l.name="AbortError",this.controller.abort(l)}const r=new AbortController;return this.controller=r,r.signal}cancelCeremony(){if(this.controller){const r=new Error("Manually cancelling existing WebAuthn API call");r.name="AbortError",this.controller.abort(r),this.controller=void 0}}}const Fp=new Pp;function Hp(u){if(!u)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(u);const{challenge:r,user:l,excludeCredentials:d}=u,p=ku(u,["challenge","user","excludeCredentials"]),m=Zs(r).buffer,E=Object.assign(Object.assign({},l),{id:Zs(l.id).buffer}),_=Object.assign(Object.assign({},p),{challenge:m,user:E});if(d&&d.length>0){_.excludeCredentials=new Array(d.length);for(let C=0;C<d.length;C++){const b=d[C];_.excludeCredentials[C]=Object.assign(Object.assign({},b),{id:Zs(b.id).buffer,type:b.type||"public-key",transports:b.transports})}}return _}function Vp(u){if(!u)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(u);const{challenge:r,allowCredentials:l}=u,d=ku(u,["challenge","allowCredentials"]),p=Zs(r).buffer,m=Object.assign(Object.assign({},d),{challenge:p});if(l&&l.length>0){m.allowCredentials=new Array(l.length);for(let E=0;E<l.length;E++){const _=l[E];m.allowCredentials[E]=Object.assign(Object.assign({},_),{id:Zs(_.id).buffer,type:_.type||"public-key",transports:_.transports})}}return m}function Gp(u){var r;if("toJSON"in u&&typeof u.toJSON=="function")return u.toJSON();const l=u;return{id:u.id,rawId:u.id,response:{attestationObject:Qa(new Uint8Array(u.response.attestationObject)),clientDataJSON:Qa(new Uint8Array(u.response.clientDataJSON))},type:"public-key",clientExtensionResults:u.getClientExtensionResults(),authenticatorAttachment:(r=l.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Yp(u){var r;if("toJSON"in u&&typeof u.toJSON=="function")return u.toJSON();const l=u,d=u.getClientExtensionResults(),p=u.response;return{id:u.id,rawId:u.id,response:{authenticatorData:Qa(new Uint8Array(p.authenticatorData)),clientDataJSON:Qa(new Uint8Array(p.clientDataJSON)),signature:Qa(new Uint8Array(p.signature)),userHandle:p.userHandle?Qa(new Uint8Array(p.userHandle)):void 0},type:"public-key",clientExtensionResults:d,authenticatorAttachment:(r=l.authenticatorAttachment)!==null&&r!==void 0?r:void 0}}function Dg(u){return u==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(u)}function lg(){var u,r;return!!(Bn()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((u=navigator?.credentials)===null||u===void 0?void 0:u.create)=="function"&&typeof((r=navigator?.credentials)===null||r===void 0?void 0:r.get)=="function")}async function qp(u){try{const r=await navigator.credentials.create(u);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Bu("Browser returned unexpected credential type",r)}:{data:null,error:new Bu("Empty credential response",r)}}catch(r){return{data:null,error:jp({error:r,options:u})}}}async function Xp(u){try{const r=await navigator.credentials.get(u);return r?r instanceof PublicKeyCredential?{data:r,error:null}:{data:null,error:new Bu("Browser returned unexpected credential type",r)}:{data:null,error:new Bu("Empty credential response",r)}}catch(r){return{data:null,error:zp({error:r,options:u})}}}const Zp={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Wp={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function Lu(...u){const r=p=>p!==null&&typeof p=="object"&&!Array.isArray(p),l=p=>p instanceof ArrayBuffer||ArrayBuffer.isView(p),d={};for(const p of u)if(p)for(const m in p){const E=p[m];if(E!==void 0)if(Array.isArray(E))d[m]=E;else if(l(E))d[m]=E;else if(r(E)){const _=d[m];r(_)?d[m]=Lu(_,E):d[m]=Lu(E)}else d[m]=E}return d}function Kp(u,r){return Lu(Zp,u,r||{})}function Qp(u,r){return Lu(Wp,u,r||{})}class Jp{constructor(r){this.client=r,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(r){return this.client.mfa.enroll(Object.assign(Object.assign({},r),{factorType:"webauthn"}))}async _challenge({factorId:r,webauthn:l,friendlyName:d,signal:p},m){var E;try{const{data:_,error:C}=await this.client.mfa.challenge({factorId:r,webauthn:l});if(!_)return{data:null,error:C};const b=p??Fp.createNewAbortSignal();if(_.webauthn.type==="create"){const{user:N}=_.webauthn.credential_options.publicKey;if(!N.name){const D=d;if(D)N.name=`${N.id}:${D}`;else{const P=(await this.client.getUser()).data.user,ne=((E=P?.user_metadata)===null||E===void 0?void 0:E.name)||P?.email||P?.id||"User";N.name=`${N.id}:${ne}`}}N.displayName||(N.displayName=N.name)}switch(_.webauthn.type){case"create":{const N=Kp(_.webauthn.credential_options.publicKey,m?.create),{data:D,error:F}=await qp({publicKey:N,signal:b});return D?{data:{factorId:r,challengeId:_.id,webauthn:{type:_.webauthn.type,credential_response:D}},error:null}:{data:null,error:F}}case"request":{const N=Qp(_.webauthn.credential_options.publicKey,m?.request),{data:D,error:F}=await Xp(Object.assign(Object.assign({},_.webauthn.credential_options),{publicKey:N,signal:b}));return D?{data:{factorId:r,challengeId:_.id,webauthn:{type:_.webauthn.type,credential_response:D}},error:null}:{data:null,error:F}}}}catch(_){return Ie(_)?{data:null,error:_}:{data:null,error:new Ka("Unexpected error in challenge",_)}}}async _verify({challengeId:r,factorId:l,webauthn:d}){return this.client.mfa.verify({factorId:l,challengeId:r,webauthn:d})}async _authenticate({factorId:r,webauthn:{rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:d=typeof window<"u"?[window.location.origin]:void 0,signal:p}={}},m){if(!l)return{data:null,error:new eo("rpId is required for WebAuthn authentication")};try{if(!lg())return{data:null,error:new Ka("Browser does not support WebAuthn",null)};const{data:E,error:_}=await this.challenge({factorId:r,webauthn:{rpId:l,rpOrigins:d},signal:p},{request:m});if(!E)return{data:null,error:_};const{webauthn:C}=E;return this._verify({factorId:r,challengeId:E.challengeId,webauthn:{type:C.type,rpId:l,rpOrigins:d,credential_response:C.credential_response}})}catch(E){return Ie(E)?{data:null,error:E}:{data:null,error:new Ka("Unexpected error in authenticate",E)}}}async _register({friendlyName:r,webauthn:{rpId:l=typeof window<"u"?window.location.hostname:void 0,rpOrigins:d=typeof window<"u"?[window.location.origin]:void 0,signal:p}={}},m){if(!l)return{data:null,error:new eo("rpId is required for WebAuthn registration")};try{if(!lg())return{data:null,error:new Ka("Browser does not support WebAuthn",null)};const{data:E,error:_}=await this._enroll({friendlyName:r});if(!E)return await this.client.mfa.listFactors().then(N=>{var D;return(D=N.data)===null||D===void 0?void 0:D.all.find(F=>F.factor_type==="webauthn"&&F.friendly_name===r&&F.status!=="unverified")}).then(N=>N?this.client.mfa.unenroll({factorId:N?.id}):void 0),{data:null,error:_};const{data:C,error:b}=await this._challenge({factorId:E.id,friendlyName:E.friendly_name,webauthn:{rpId:l,rpOrigins:d},signal:p},{create:m});return C?this._verify({factorId:E.id,challengeId:C.challengeId,webauthn:{rpId:l,rpOrigins:d,type:C.webauthn.type,credential_response:C.webauthn.credential_response}}):{data:null,error:b}}catch(E){return Ie(E)?{data:null,error:E}:{data:null,error:new Ka("Unexpected error in register",E)}}}}Bp();const $p={url:Ky,storageKey:Qy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Jy,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1,lockAcquireTimeout:1e4,skipAutoInitialize:!1};async function og(u,r,l){return await l()}const Hs={};class to{get jwks(){var r,l;return(l=(r=Hs[this.storageKey])===null||r===void 0?void 0:r.jwks)!==null&&l!==void 0?l:{keys:[]}}set jwks(r){Hs[this.storageKey]=Object.assign(Object.assign({},Hs[this.storageKey]),{jwks:r})}get jwks_cached_at(){var r,l;return(l=(r=Hs[this.storageKey])===null||r===void 0?void 0:r.cachedAt)!==null&&l!==void 0?l:Number.MIN_SAFE_INTEGER}set jwks_cached_at(r){Hs[this.storageKey]=Object.assign(Object.assign({},Hs[this.storageKey]),{cachedAt:r})}constructor(r){var l,d,p;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.autoRefreshTickTimeout=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const m=Object.assign(Object.assign({},$p),r);if(this.storageKey=m.storageKey,this.instanceID=(l=to.nextInstanceID[this.storageKey])!==null&&l!==void 0?l:0,to.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!m.debug,typeof m.debug=="function"&&(this.logger=m.debug),this.instanceID>0&&Bn()){const E=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(E),this.logDebugMessages&&console.trace(E)}if(this.persistSession=m.persistSession,this.autoRefreshToken=m.autoRefreshToken,this.admin=new Dp({url:m.url,headers:m.headers,fetch:m.fetch}),this.url=m.url,this.headers=m.headers,this.fetch=Ig(m.fetch),this.lock=m.lock||og,this.detectSessionInUrl=m.detectSessionInUrl,this.flowType=m.flowType,this.hasCustomAuthorizationHeader=m.hasCustomAuthorizationHeader,this.throwOnError=m.throwOnError,this.lockAcquireTimeout=m.lockAcquireTimeout,m.lock?this.lock=m.lock:this.persistSession&&Bn()&&(!((d=globalThis?.navigator)===null||d===void 0)&&d.locks)?this.lock=Mp:this.lock=og,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Jp(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this),listGrants:this._listOAuthGrants.bind(this),revokeGrant:this._revokeOAuthGrant.bind(this)},this.persistSession?(m.storage?this.storage=m.storage:Og()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=ag(this.memoryStorage)),m.userStorage&&(this.userStorage=m.userStorage)):(this.memoryStorage={},this.storage=ag(this.memoryStorage)),Bn()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(E){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",E)}(p=this.broadcastChannel)===null||p===void 0||p.addEventListener("message",async E=>{this._debug("received broadcast notification from other tab or client",E);try{await this._notifyAllSubscribers(E.data.event,E.data.session,!1)}catch(_){this._debug("#broadcastChannel","error",_)}})}m.skipAutoInitialize||this.initialize().catch(E=>{this._debug("#initialize()","error",E)})}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(r){if(this.throwOnError&&r&&r.error)throw r.error;return r}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${_g}) ${new Date().toISOString()}`}_debug(...r){return this.logDebugMessages&&this.logger(this._logPrefix(),...r),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(this.lockAcquireTimeout,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var r;try{let l={},d="none";if(Bn()&&(l=fp(window.location.href),this._isImplicitGrantCallback(l)?d="implicit":await this._isPKCECallback(l)&&(d="pkce")),Bn()&&this.detectSessionInUrl&&d!=="none"){const{data:p,error:m}=await this._getSessionFromURL(l,d);if(m){if(this._debug("#_initialize()","error detecting session from URL",m),ip(m)){const C=(r=m.details)===null||r===void 0?void 0:r.code;if(C==="identity_already_exists"||C==="identity_not_found"||C==="single_identity_not_deletable")return{error:m}}return{error:m}}const{session:E,redirectType:_}=p;return this._debug("#_initialize()","detected session in URL",E,"redirect type",_),await this._saveSession(E),setTimeout(async()=>{_==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",E):await this._notifyAllSubscribers("SIGNED_IN",E)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(l){return Ie(l)?this._returnResult({error:l}):this._returnResult({error:new Ka("Unexpected error during initialization",l)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(r){var l,d,p;try{const m=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(d=(l=r?.options)===null||l===void 0?void 0:l.data)!==null&&d!==void 0?d:{},gotrue_meta_security:{captcha_token:(p=r?.options)===null||p===void 0?void 0:p.captchaToken}},xform:Vi}),{data:E,error:_}=m;if(_||!E)return this._returnResult({data:{user:null,session:null},error:_});const C=E.session,b=E.user;return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",C)),this._returnResult({data:{user:b,session:C},error:null})}catch(m){if(Ie(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signUp(r){var l,d,p;try{let m;if("email"in r){const{email:N,password:D,options:F}=r;let P=null,ne=null;this.flowType==="pkce"&&([P,ne]=await zs(this.storage,this.storageKey)),m=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:F?.emailRedirectTo,body:{email:N,password:D,data:(l=F?.data)!==null&&l!==void 0?l:{},gotrue_meta_security:{captcha_token:F?.captchaToken},code_challenge:P,code_challenge_method:ne},xform:Vi})}else if("phone"in r){const{phone:N,password:D,options:F}=r;m=await je(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:N,password:D,data:(d=F?.data)!==null&&d!==void 0?d:{},channel:(p=F?.channel)!==null&&p!==void 0?p:"sms",gotrue_meta_security:{captcha_token:F?.captchaToken}},xform:Vi})}else throw new Ou("You must provide either an email or phone number and a password");const{data:E,error:_}=m;if(_||!E)return await Mn(this.storage,`${this.storageKey}-code-verifier`),this._returnResult({data:{user:null,session:null},error:_});const C=E.session,b=E.user;return E.session&&(await this._saveSession(E.session),await this._notifyAllSubscribers("SIGNED_IN",C)),this._returnResult({data:{user:b,session:C},error:null})}catch(m){if(await Mn(this.storage,`${this.storageKey}-code-verifier`),Ie(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async signInWithPassword(r){try{let l;if("email"in r){const{email:m,password:E,options:_}=r;l=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:m,password:E,gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:ig})}else if("phone"in r){const{phone:m,password:E,options:_}=r;l=await je(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:m,password:E,gotrue_meta_security:{captcha_token:_?.captchaToken}},xform:ig})}else throw new Ou("You must provide either an email or phone number and a password");const{data:d,error:p}=l;if(p)return this._returnResult({data:{user:null,session:null},error:p});if(!d||!d.session||!d.user){const m=new js;return this._returnResult({data:{user:null,session:null},error:m})}return d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("SIGNED_IN",d.session)),this._returnResult({data:Object.assign({user:d.user,session:d.session},d.weak_password?{weakPassword:d.weak_password}:null),error:p})}catch(l){if(Ie(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithOAuth(r){var l,d,p,m;return await this._handleProviderSignIn(r.provider,{redirectTo:(l=r.options)===null||l===void 0?void 0:l.redirectTo,scopes:(d=r.options)===null||d===void 0?void 0:d.scopes,queryParams:(p=r.options)===null||p===void 0?void 0:p.queryParams,skipBrowserRedirect:(m=r.options)===null||m===void 0?void 0:m.skipBrowserRedirect})}async exchangeCodeForSession(r){return await this.initializePromise,this._acquireLock(this.lockAcquireTimeout,async()=>this._exchangeCodeForSession(r))}async signInWithWeb3(r){const{chain:l}=r;switch(l){case"ethereum":return await this.signInWithEthereum(r);case"solana":return await this.signInWithSolana(r);default:throw new Error(`@supabase/auth-js: Unsupported chain "${l}"`)}}async signInWithEthereum(r){var l,d,p,m,E,_,C,b,N,D,F;let P,ne;if("message"in r)P=r.message,ne=r.signature;else{const{chain:K,wallet:oe,statement:ye,options:fe}=r;let te;if(Bn())if(typeof oe=="object")te=oe;else{const ce=window;if("ethereum"in ce&&typeof ce.ethereum=="object"&&"request"in ce.ethereum&&typeof ce.ethereum.request=="function")te=ce.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof oe!="object"||!fe?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");te=oe}const xe=new URL((l=fe?.url)!==null&&l!==void 0?l:window.location.href),Ke=await te.request({method:"eth_requestAccounts"}).then(ce=>ce).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!Ke||Ke.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const be=Rg(Ke[0]);let $=(d=fe?.signInWithEthereum)===null||d===void 0?void 0:d.chainId;if(!$){const ce=await te.request({method:"eth_chainId"});$=Lp(ce)}const Me={domain:xe.host,address:be,statement:ye,uri:xe.href,version:"1",chainId:$,nonce:(p=fe?.signInWithEthereum)===null||p===void 0?void 0:p.nonce,issuedAt:(E=(m=fe?.signInWithEthereum)===null||m===void 0?void 0:m.issuedAt)!==null&&E!==void 0?E:new Date,expirationTime:(_=fe?.signInWithEthereum)===null||_===void 0?void 0:_.expirationTime,notBefore:(C=fe?.signInWithEthereum)===null||C===void 0?void 0:C.notBefore,requestId:(b=fe?.signInWithEthereum)===null||b===void 0?void 0:b.requestId,resources:(N=fe?.signInWithEthereum)===null||N===void 0?void 0:N.resources};P=Up(Me),ne=await te.request({method:"personal_sign",params:[kp(P),be]})}try{const{data:K,error:oe}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:P,signature:ne},!((D=r.options)===null||D===void 0)&&D.captchaToken?{gotrue_meta_security:{captcha_token:(F=r.options)===null||F===void 0?void 0:F.captchaToken}}:null),xform:Vi});if(oe)throw oe;if(!K||!K.session||!K.user){const ye=new js;return this._returnResult({data:{user:null,session:null},error:ye})}return K.session&&(await this._saveSession(K.session),await this._notifyAllSubscribers("SIGNED_IN",K.session)),this._returnResult({data:Object.assign({},K),error:oe})}catch(K){if(Ie(K))return this._returnResult({data:{user:null,session:null},error:K});throw K}}async signInWithSolana(r){var l,d,p,m,E,_,C,b,N,D,F,P;let ne,K;if("message"in r)ne=r.message,K=r.signature;else{const{chain:oe,wallet:ye,statement:fe,options:te}=r;let xe;if(Bn())if(typeof ye=="object")xe=ye;else{const be=window;if("solana"in be&&typeof be.solana=="object"&&("signIn"in be.solana&&typeof be.solana.signIn=="function"||"signMessage"in be.solana&&typeof be.solana.signMessage=="function"))xe=be.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof ye!="object"||!te?.url)throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");xe=ye}const Ke=new URL((l=te?.url)!==null&&l!==void 0?l:window.location.href);if("signIn"in xe&&xe.signIn){const be=await xe.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},te?.signInWithSolana),{version:"1",domain:Ke.host,uri:Ke.href}),fe?{statement:fe}:null));let $;if(Array.isArray(be)&&be[0]&&typeof be[0]=="object")$=be[0];else if(be&&typeof be=="object"&&"signedMessage"in be&&"signature"in be)$=be;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in $&&"signature"in $&&(typeof $.signedMessage=="string"||$.signedMessage instanceof Uint8Array)&&$.signature instanceof Uint8Array)ne=typeof $.signedMessage=="string"?$.signedMessage:new TextDecoder().decode($.signedMessage),K=$.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in xe)||typeof xe.signMessage!="function"||!("publicKey"in xe)||typeof xe!="object"||!xe.publicKey||!("toBase58"in xe.publicKey)||typeof xe.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");ne=[`${Ke.host} wants you to sign in with your Solana account:`,xe.publicKey.toBase58(),...fe?["",fe,""]:[""],"Version: 1",`URI: ${Ke.href}`,`Issued At: ${(p=(d=te?.signInWithSolana)===null||d===void 0?void 0:d.issuedAt)!==null&&p!==void 0?p:new Date().toISOString()}`,...!((m=te?.signInWithSolana)===null||m===void 0)&&m.notBefore?[`Not Before: ${te.signInWithSolana.notBefore}`]:[],...!((E=te?.signInWithSolana)===null||E===void 0)&&E.expirationTime?[`Expiration Time: ${te.signInWithSolana.expirationTime}`]:[],...!((_=te?.signInWithSolana)===null||_===void 0)&&_.chainId?[`Chain ID: ${te.signInWithSolana.chainId}`]:[],...!((C=te?.signInWithSolana)===null||C===void 0)&&C.nonce?[`Nonce: ${te.signInWithSolana.nonce}`]:[],...!((b=te?.signInWithSolana)===null||b===void 0)&&b.requestId?[`Request ID: ${te.signInWithSolana.requestId}`]:[],...!((D=(N=te?.signInWithSolana)===null||N===void 0?void 0:N.resources)===null||D===void 0)&&D.length?["Resources",...te.signInWithSolana.resources.map($=>`- ${$}`)]:[]].join(`
`);const be=await xe.signMessage(new TextEncoder().encode(ne),"utf8");if(!be||!(be instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");K=be}}try{const{data:oe,error:ye}=await je(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:ne,signature:Qa(K)},!((F=r.options)===null||F===void 0)&&F.captchaToken?{gotrue_meta_security:{captcha_token:(P=r.options)===null||P===void 0?void 0:P.captchaToken}}:null),xform:Vi});if(ye)throw ye;if(!oe||!oe.session||!oe.user){const fe=new js;return this._returnResult({data:{user:null,session:null},error:fe})}return oe.session&&(await this._saveSession(oe.session),await this._notifyAllSubscribers("SIGNED_IN",oe.session)),this._returnResult({data:Object.assign({},oe),error:ye})}catch(oe){if(Ie(oe))return this._returnResult({data:{user:null,session:null},error:oe});throw oe}}async _exchangeCodeForSession(r){const l=await Xa(this.storage,`${this.storageKey}-code-verifier`),[d,p]=(l??"").split("/");try{if(!d&&this.flowType==="pkce")throw new rp;const{data:m,error:E}=await je(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:r,code_verifier:d},xform:Vi});if(await Mn(this.storage,`${this.storageKey}-code-verifier`),E)throw E;if(!m||!m.session||!m.user){const _=new js;return this._returnResult({data:{user:null,session:null,redirectType:null},error:_})}return m.session&&(await this._saveSession(m.session),await this._notifyAllSubscribers("SIGNED_IN",m.session)),this._returnResult({data:Object.assign(Object.assign({},m),{redirectType:p??null}),error:E})}catch(m){if(await Mn(this.storage,`${this.storageKey}-code-verifier`),Ie(m))return this._returnResult({data:{user:null,session:null,redirectType:null},error:m});throw m}}async signInWithIdToken(r){try{const{options:l,provider:d,token:p,access_token:m,nonce:E}=r,_=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:d,id_token:p,access_token:m,nonce:E,gotrue_meta_security:{captcha_token:l?.captchaToken}},xform:Vi}),{data:C,error:b}=_;if(b)return this._returnResult({data:{user:null,session:null},error:b});if(!C||!C.session||!C.user){const N=new js;return this._returnResult({data:{user:null,session:null},error:N})}return C.session&&(await this._saveSession(C.session),await this._notifyAllSubscribers("SIGNED_IN",C.session)),this._returnResult({data:C,error:b})}catch(l){if(Ie(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithOtp(r){var l,d,p,m,E;try{if("email"in r){const{email:_,options:C}=r;let b=null,N=null;this.flowType==="pkce"&&([b,N]=await zs(this.storage,this.storageKey));const{error:D}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:_,data:(l=C?.data)!==null&&l!==void 0?l:{},create_user:(d=C?.shouldCreateUser)!==null&&d!==void 0?d:!0,gotrue_meta_security:{captcha_token:C?.captchaToken},code_challenge:b,code_challenge_method:N},redirectTo:C?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:D})}if("phone"in r){const{phone:_,options:C}=r,{data:b,error:N}=await je(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:_,data:(p=C?.data)!==null&&p!==void 0?p:{},create_user:(m=C?.shouldCreateUser)!==null&&m!==void 0?m:!0,gotrue_meta_security:{captcha_token:C?.captchaToken},channel:(E=C?.channel)!==null&&E!==void 0?E:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:b?.message_id},error:N})}throw new Ou("You must provide either an email or phone number.")}catch(_){if(await Mn(this.storage,`${this.storageKey}-code-verifier`),Ie(_))return this._returnResult({data:{user:null,session:null},error:_});throw _}}async verifyOtp(r){var l,d;try{let p,m;"options"in r&&(p=(l=r.options)===null||l===void 0?void 0:l.redirectTo,m=(d=r.options)===null||d===void 0?void 0:d.captchaToken);const{data:E,error:_}=await je(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},r),{gotrue_meta_security:{captcha_token:m}}),redirectTo:p,xform:Vi});if(_)throw _;if(!E)throw new Error("An error occurred on token verification.");const C=E.session,b=E.user;return C?.access_token&&(await this._saveSession(C),await this._notifyAllSubscribers(r.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",C)),this._returnResult({data:{user:b,session:C},error:null})}catch(p){if(Ie(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async signInWithSSO(r){var l,d,p,m,E;try{let _=null,C=null;this.flowType==="pkce"&&([_,C]=await zs(this.storage,this.storageKey));const b=await je(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in r?{provider_id:r.providerId}:null),"domain"in r?{domain:r.domain}:null),{redirect_to:(d=(l=r.options)===null||l===void 0?void 0:l.redirectTo)!==null&&d!==void 0?d:void 0}),!((p=r?.options)===null||p===void 0)&&p.captchaToken?{gotrue_meta_security:{captcha_token:r.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:_,code_challenge_method:C}),headers:this.headers,xform:Ip});return!((m=b.data)===null||m===void 0)&&m.url&&Bn()&&!(!((E=r.options)===null||E===void 0)&&E.skipBrowserRedirect)&&window.location.assign(b.data.url),this._returnResult(b)}catch(_){if(await Mn(this.storage,`${this.storageKey}-code-verifier`),Ie(_))return this._returnResult({data:null,error:_});throw _}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async r=>{const{data:{session:l},error:d}=r;if(d)throw d;if(!l)throw new mi;const{error:p}=await je(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:l.access_token});return this._returnResult({data:{user:null,session:null},error:p})})}catch(r){if(Ie(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async resend(r){try{const l=`${this.url}/resend`;if("email"in r){const{email:d,type:p,options:m}=r,{error:E}=await je(this.fetch,"POST",l,{headers:this.headers,body:{email:d,type:p,gotrue_meta_security:{captcha_token:m?.captchaToken}},redirectTo:m?.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:E})}else if("phone"in r){const{phone:d,type:p,options:m}=r,{data:E,error:_}=await je(this.fetch,"POST",l,{headers:this.headers,body:{phone:d,type:p,gotrue_meta_security:{captcha_token:m?.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:E?.message_id},error:_})}throw new Ou("You must provide either an email or phone number and a type")}catch(l){if(Ie(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async getSession(){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>this._useSession(async l=>l))}async _acquireLock(r,l){this._debug("#_acquireLock","begin",r);try{if(this.lockAcquired){const d=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),p=(async()=>(await d,await l()))();return this.pendingInLock.push((async()=>{try{await p}catch{}})()),p}return await this.lock(`lock:${this.storageKey}`,r,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const d=l();for(this.pendingInLock.push((async()=>{try{await d}catch{}})()),await d;this.pendingInLock.length;){const p=[...this.pendingInLock];await Promise.all(p),this.pendingInLock.splice(0,p.length)}return await d}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(r){this._debug("#_useSession","begin");try{const l=await this.__loadSession();return await r(l)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let r=null;const l=await Xa(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",l),l!==null&&(this._isValidSession(l)?r=l:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!r)return{data:{session:null},error:null};const d=r.expires_at?r.expires_at*1e3-Date.now()<Vh:!1;if(this._debug("#__loadSession()",`session has${d?"":" not"} expired`,"expires_at",r.expires_at),!d){if(this.userStorage){const E=await Xa(this.userStorage,this.storageKey+"-user");E?.user?r.user=E.user:r.user=qh()}if(this.storage.isServer&&r.user&&!r.user.__isUserNotAvailableProxy){const E={value:this.suppressGetSessionWarning};r.user=_p(r.user,E),E.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:r},error:null}}const{data:p,error:m}=await this._callRefreshToken(r.refresh_token);return m?this._returnResult({data:{session:null},error:m}):this._returnResult({data:{session:p},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(r){if(r)return await this._getUser(r);await this.initializePromise;const l=await this._acquireLock(this.lockAcquireTimeout,async()=>await this._getUser());return l.data.user&&(this.suppressGetSessionWarning=!0),l}async _getUser(r){try{return r?await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:r,xform:xa}):await this._useSession(async l=>{var d,p,m;const{data:E,error:_}=l;if(_)throw _;return!(!((d=E.session)===null||d===void 0)&&d.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new mi}:await je(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(m=(p=E.session)===null||p===void 0?void 0:p.access_token)!==null&&m!==void 0?m:void 0,xform:xa})})}catch(l){if(Ie(l))return Gh(l)&&(await this._removeSession(),await Mn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:l});throw l}}async updateUser(r,l={}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._updateUser(r,l))}async _updateUser(r,l={}){try{return await this._useSession(async d=>{const{data:p,error:m}=d;if(m)throw m;if(!p.session)throw new mi;const E=p.session;let _=null,C=null;this.flowType==="pkce"&&r.email!=null&&([_,C]=await zs(this.storage,this.storageKey));const{data:b,error:N}=await je(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:l?.emailRedirectTo,body:Object.assign(Object.assign({},r),{code_challenge:_,code_challenge_method:C}),jwt:E.access_token,xform:xa});if(N)throw N;return E.user=b.user,await this._saveSession(E),await this._notifyAllSubscribers("USER_UPDATED",E),this._returnResult({data:{user:E.user},error:null})})}catch(d){if(await Mn(this.storage,`${this.storageKey}-code-verifier`),Ie(d))return this._returnResult({data:{user:null},error:d});throw d}}async setSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._setSession(r))}async _setSession(r){try{if(!r.access_token||!r.refresh_token)throw new mi;const l=Date.now()/1e3;let d=l,p=!0,m=null;const{payload:E}=Nu(r.access_token);if(E.exp&&(d=E.exp,p=d<=l),p){const{data:_,error:C}=await this._callRefreshToken(r.refresh_token);if(C)return this._returnResult({data:{user:null,session:null},error:C});if(!_)return{data:{user:null,session:null},error:null};m=_}else{const{data:_,error:C}=await this._getUser(r.access_token);if(C)return this._returnResult({data:{user:null,session:null},error:C});m={access_token:r.access_token,refresh_token:r.refresh_token,user:_.user,token_type:"bearer",expires_in:d-l,expires_at:d},await this._saveSession(m),await this._notifyAllSubscribers("SIGNED_IN",m)}return this._returnResult({data:{user:m.user,session:m},error:null})}catch(l){if(Ie(l))return this._returnResult({data:{session:null,user:null},error:l});throw l}}async refreshSession(r){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._refreshSession(r))}async _refreshSession(r){try{return await this._useSession(async l=>{var d;if(!r){const{data:E,error:_}=l;if(_)throw _;r=(d=E.session)!==null&&d!==void 0?d:void 0}if(!r?.refresh_token)throw new mi;const{data:p,error:m}=await this._callRefreshToken(r.refresh_token);return m?this._returnResult({data:{user:null,session:null},error:m}):p?this._returnResult({data:{user:p.user,session:p},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(l){if(Ie(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async _getSessionFromURL(r,l){try{if(!Bn())throw new Iu("No browser detected.");if(r.error||r.error_description||r.error_code)throw new Iu(r.error_description||"Error in URL with unspecified error_description",{error:r.error||"unspecified_error",code:r.error_code||"unspecified_code"});switch(l){case"implicit":if(this.flowType==="pkce")throw new K1("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Iu("Not a valid implicit grant flow url.");break;default:}if(l==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!r.code)throw new K1("No code detected.");const{data:fe,error:te}=await this._exchangeCodeForSession(r.code);if(te)throw te;const xe=new URL(window.location.href);return xe.searchParams.delete("code"),window.history.replaceState(window.history.state,"",xe.toString()),{data:{session:fe.session,redirectType:null},error:null}}const{provider_token:d,provider_refresh_token:p,access_token:m,refresh_token:E,expires_in:_,expires_at:C,token_type:b}=r;if(!m||!_||!E||!b)throw new Iu("No session defined in URL");const N=Math.round(Date.now()/1e3),D=parseInt(_);let F=N+D;C&&(F=parseInt(C));const P=F-N;P*1e3<=Gs&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${P}s, should have been closer to ${D}s`);const ne=F-D;N-ne>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",ne,F,N):N-ne<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",ne,F,N);const{data:K,error:oe}=await this._getUser(m);if(oe)throw oe;const ye={provider_token:d,provider_refresh_token:p,access_token:m,expires_in:D,expires_at:F,refresh_token:E,token_type:b,user:K.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:ye,redirectType:r.type},error:null})}catch(d){if(Ie(d))return this._returnResult({data:{session:null,redirectType:null},error:d});throw d}}_isImplicitGrantCallback(r){return typeof this.detectSessionInUrl=="function"?this.detectSessionInUrl(new URL(window.location.href),r):!!(r.access_token||r.error_description)}async _isPKCECallback(r){const l=await Xa(this.storage,`${this.storageKey}-code-verifier`);return!!(r.code&&l)}async signOut(r={scope:"global"}){return await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>await this._signOut(r))}async _signOut({scope:r}={scope:"global"}){return await this._useSession(async l=>{var d;const{data:p,error:m}=l;if(m&&!Gh(m))return this._returnResult({error:m});const E=(d=p.session)===null||d===void 0?void 0:d.access_token;if(E){const{error:_}=await this.admin.signOut(E,r);if(_&&!(np(_)&&(_.status===404||_.status===401||_.status===403)||Gh(_)))return this._returnResult({error:_})}return r!=="others"&&(await this._removeSession(),await Mn(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(r){const l=hp(),d={id:l,callback:r,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",l),this.stateChangeEmitters.delete(l)}};return this._debug("#onAuthStateChange()","registered callback with id",l),this.stateChangeEmitters.set(l,d),(async()=>(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{this._emitInitialSession(l)})))(),{data:{subscription:d}}}async _emitInitialSession(r){return await this._useSession(async l=>{var d,p;try{const{data:{session:m},error:E}=l;if(E)throw E;await((d=this.stateChangeEmitters.get(r))===null||d===void 0?void 0:d.callback("INITIAL_SESSION",m)),this._debug("INITIAL_SESSION","callback id",r,"session",m)}catch(m){await((p=this.stateChangeEmitters.get(r))===null||p===void 0?void 0:p.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",r,"error",m),console.error(m)}})}async resetPasswordForEmail(r,l={}){let d=null,p=null;this.flowType==="pkce"&&([d,p]=await zs(this.storage,this.storageKey,!0));try{return await je(this.fetch,"POST",`${this.url}/recover`,{body:{email:r,code_challenge:d,code_challenge_method:p,gotrue_meta_security:{captcha_token:l.captchaToken}},headers:this.headers,redirectTo:l.redirectTo})}catch(m){if(await Mn(this.storage,`${this.storageKey}-code-verifier`),Ie(m))return this._returnResult({data:null,error:m});throw m}}async getUserIdentities(){var r;try{const{data:l,error:d}=await this.getUser();if(d)throw d;return this._returnResult({data:{identities:(r=l.user.identities)!==null&&r!==void 0?r:[]},error:null})}catch(l){if(Ie(l))return this._returnResult({data:null,error:l});throw l}}async linkIdentity(r){return"token"in r?this.linkIdentityIdToken(r):this.linkIdentityOAuth(r)}async linkIdentityOAuth(r){var l;try{const{data:d,error:p}=await this._useSession(async m=>{var E,_,C,b,N;const{data:D,error:F}=m;if(F)throw F;const P=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,r.provider,{redirectTo:(E=r.options)===null||E===void 0?void 0:E.redirectTo,scopes:(_=r.options)===null||_===void 0?void 0:_.scopes,queryParams:(C=r.options)===null||C===void 0?void 0:C.queryParams,skipBrowserRedirect:!0});return await je(this.fetch,"GET",P,{headers:this.headers,jwt:(N=(b=D.session)===null||b===void 0?void 0:b.access_token)!==null&&N!==void 0?N:void 0})});if(p)throw p;return Bn()&&!(!((l=r.options)===null||l===void 0)&&l.skipBrowserRedirect)&&window.location.assign(d?.url),this._returnResult({data:{provider:r.provider,url:d?.url},error:null})}catch(d){if(Ie(d))return this._returnResult({data:{provider:r.provider,url:null},error:d});throw d}}async linkIdentityIdToken(r){return await this._useSession(async l=>{var d;try{const{error:p,data:{session:m}}=l;if(p)throw p;const{options:E,provider:_,token:C,access_token:b,nonce:N}=r,D=await je(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(d=m?.access_token)!==null&&d!==void 0?d:void 0,body:{provider:_,id_token:C,access_token:b,nonce:N,link_identity:!0,gotrue_meta_security:{captcha_token:E?.captchaToken}},xform:Vi}),{data:F,error:P}=D;return P?this._returnResult({data:{user:null,session:null},error:P}):!F||!F.session||!F.user?this._returnResult({data:{user:null,session:null},error:new js}):(F.session&&(await this._saveSession(F.session),await this._notifyAllSubscribers("USER_UPDATED",F.session)),this._returnResult({data:F,error:P}))}catch(p){if(await Mn(this.storage,`${this.storageKey}-code-verifier`),Ie(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}})}async unlinkIdentity(r){try{return await this._useSession(async l=>{var d,p;const{data:m,error:E}=l;if(E)throw E;return await je(this.fetch,"DELETE",`${this.url}/user/identities/${r.identity_id}`,{headers:this.headers,jwt:(p=(d=m.session)===null||d===void 0?void 0:d.access_token)!==null&&p!==void 0?p:void 0})})}catch(l){if(Ie(l))return this._returnResult({data:null,error:l});throw l}}async _refreshAccessToken(r){const l=`#_refreshAccessToken(${r.substring(0,5)}...)`;this._debug(l,"begin");try{const d=Date.now();return await mp(async p=>(p>0&&await gp(200*Math.pow(2,p-1)),this._debug(l,"refreshing attempt",p),await je(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:r},headers:this.headers,xform:Vi})),(p,m)=>{const E=200*Math.pow(2,p);return m&&Yh(m)&&Date.now()+E-d<Gs})}catch(d){if(this._debug(l,"error",d),Ie(d))return this._returnResult({data:{session:null,user:null},error:d});throw d}finally{this._debug(l,"end")}}_isValidSession(r){return typeof r=="object"&&r!==null&&"access_token"in r&&"refresh_token"in r&&"expires_at"in r}async _handleProviderSignIn(r,l){const d=await this._getUrlForProvider(`${this.url}/authorize`,r,{redirectTo:l.redirectTo,scopes:l.scopes,queryParams:l.queryParams});return this._debug("#_handleProviderSignIn()","provider",r,"options",l,"url",d),Bn()&&!l.skipBrowserRedirect&&window.location.assign(d),{data:{provider:r,url:d},error:null}}async _recoverAndRefresh(){var r,l;const d="#_recoverAndRefresh()";this._debug(d,"begin");try{const p=await Xa(this.storage,this.storageKey);if(p&&this.userStorage){let E=await Xa(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!E&&(E={user:p.user},await Ys(this.userStorage,this.storageKey+"-user",E)),p.user=(r=E?.user)!==null&&r!==void 0?r:qh()}else if(p&&!p.user&&!p.user){const E=await Xa(this.storage,this.storageKey+"-user");E&&E?.user?(p.user=E.user,await Mn(this.storage,this.storageKey+"-user"),await Ys(this.storage,this.storageKey,p)):p.user=qh()}if(this._debug(d,"session from storage",p),!this._isValidSession(p)){this._debug(d,"session is not valid"),p!==null&&await this._removeSession();return}const m=((l=p.expires_at)!==null&&l!==void 0?l:1/0)*1e3-Date.now()<Vh;if(this._debug(d,`session has${m?"":" not"} expired with margin of ${Vh}s`),m){if(this.autoRefreshToken&&p.refresh_token){const{error:E}=await this._callRefreshToken(p.refresh_token);E&&(console.error(E),Yh(E)||(this._debug(d,"refresh failed with a non-retryable error, removing the session",E),await this._removeSession()))}}else if(p.user&&p.user.__isUserNotAvailableProxy===!0)try{const{data:E,error:_}=await this._getUser(p.access_token);!_&&E?.user?(p.user=E.user,await this._saveSession(p),await this._notifyAllSubscribers("SIGNED_IN",p)):this._debug(d,"could not get user data, skipping SIGNED_IN notification")}catch(E){console.error("Error getting user data:",E),this._debug(d,"error getting user data, skipping SIGNED_IN notification",E)}else await this._notifyAllSubscribers("SIGNED_IN",p)}catch(p){this._debug(d,"error",p),console.error(p);return}finally{this._debug(d,"end")}}async _callRefreshToken(r){var l,d;if(!r)throw new mi;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const p=`#_callRefreshToken(${r.substring(0,5)}...)`;this._debug(p,"begin");try{this.refreshingDeferred=new zu;const{data:m,error:E}=await this._refreshAccessToken(r);if(E)throw E;if(!m.session)throw new mi;await this._saveSession(m.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",m.session);const _={data:m.session,error:null};return this.refreshingDeferred.resolve(_),_}catch(m){if(this._debug(p,"error",m),Ie(m)){const E={data:null,error:m};return Yh(m)||await this._removeSession(),(l=this.refreshingDeferred)===null||l===void 0||l.resolve(E),E}throw(d=this.refreshingDeferred)===null||d===void 0||d.reject(m),m}finally{this.refreshingDeferred=null,this._debug(p,"end")}}async _notifyAllSubscribers(r,l,d=!0){const p=`#_notifyAllSubscribers(${r})`;this._debug(p,"begin",l,`broadcast = ${d}`);try{this.broadcastChannel&&d&&this.broadcastChannel.postMessage({event:r,session:l});const m=[],E=Array.from(this.stateChangeEmitters.values()).map(async _=>{try{await _.callback(r,l)}catch(C){m.push(C)}});if(await Promise.all(E),m.length>0){for(let _=0;_<m.length;_+=1)console.error(m[_]);throw m[0]}}finally{this._debug(p,"end")}}async _saveSession(r){this._debug("#_saveSession()",r),this.suppressGetSessionWarning=!0,await Mn(this.storage,`${this.storageKey}-code-verifier`);const l=Object.assign({},r),d=l.user&&l.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!d&&l.user&&await Ys(this.userStorage,this.storageKey+"-user",{user:l.user});const p=Object.assign({},l);delete p.user;const m=tg(p);await Ys(this.storage,this.storageKey,m)}else{const p=tg(l);await Ys(this.storage,this.storageKey,p)}}async _removeSession(){this._debug("#_removeSession()"),this.suppressGetSessionWarning=!1,await Mn(this.storage,this.storageKey),await Mn(this.storage,this.storageKey+"-code-verifier"),await Mn(this.storage,this.storageKey+"-user"),this.userStorage&&await Mn(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const r=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{r&&Bn()&&window?.removeEventListener&&window.removeEventListener("visibilitychange",r)}catch(l){console.error("removing visibilitychange callback failed",l)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const r=setInterval(()=>this._autoRefreshTokenTick(),Gs);this.autoRefreshTicker=r,r&&typeof r=="object"&&typeof r.unref=="function"?r.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(r);const l=setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0);this.autoRefreshTickTimeout=l,l&&typeof l=="object"&&typeof l.unref=="function"?l.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(l)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const r=this.autoRefreshTicker;this.autoRefreshTicker=null,r&&clearInterval(r);const l=this.autoRefreshTickTimeout;this.autoRefreshTickTimeout=null,l&&clearTimeout(l)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const r=Date.now();try{return await this._useSession(async l=>{const{data:{session:d}}=l;if(!d||!d.refresh_token||!d.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const p=Math.floor((d.expires_at*1e3-r)/Gs);this._debug("#_autoRefreshTokenTick()",`access token expires in ${p} ticks, a tick lasts ${Gs}ms, refresh threshold is ${tf} ticks`),p<=tf&&await this._callRefreshToken(d.refresh_token)})}catch(l){console.error("Auto refresh tick failed with error. This is likely a transient error.",l)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(r){if(r.isAcquireTimeout||r instanceof Ng)this._debug("auto refresh token tick lock not available");else throw r}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Bn()||!window?.addEventListener)return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>{try{await this._onVisibilityChanged(!1)}catch(r){this._debug("#visibilityChangedCallback","error",r)}},window?.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(r){console.error("_handleVisibilityChange",r)}}async _onVisibilityChanged(r){const l=`#_onVisibilityChanged(${r})`;this._debug(l,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),r||(await this.initializePromise,await this._acquireLock(this.lockAcquireTimeout,async()=>{if(document.visibilityState!=="visible"){this._debug(l,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(r,l,d){const p=[`provider=${encodeURIComponent(l)}`];if(d?.redirectTo&&p.push(`redirect_to=${encodeURIComponent(d.redirectTo)}`),d?.scopes&&p.push(`scopes=${encodeURIComponent(d.scopes)}`),this.flowType==="pkce"){const[m,E]=await zs(this.storage,this.storageKey),_=new URLSearchParams({code_challenge:`${encodeURIComponent(m)}`,code_challenge_method:`${encodeURIComponent(E)}`});p.push(_.toString())}if(d?.queryParams){const m=new URLSearchParams(d.queryParams);p.push(m.toString())}return d?.skipBrowserRedirect&&p.push(`skip_http_redirect=${d.skipBrowserRedirect}`),`${r}?${p.join("&")}`}async _unenroll(r){try{return await this._useSession(async l=>{var d;const{data:p,error:m}=l;return m?this._returnResult({data:null,error:m}):await je(this.fetch,"DELETE",`${this.url}/factors/${r.factorId}`,{headers:this.headers,jwt:(d=p?.session)===null||d===void 0?void 0:d.access_token})})}catch(l){if(Ie(l))return this._returnResult({data:null,error:l});throw l}}async _enroll(r){try{return await this._useSession(async l=>{var d,p;const{data:m,error:E}=l;if(E)return this._returnResult({data:null,error:E});const _=Object.assign({friendly_name:r.friendlyName,factor_type:r.factorType},r.factorType==="phone"?{phone:r.phone}:r.factorType==="totp"?{issuer:r.issuer}:{}),{data:C,error:b}=await je(this.fetch,"POST",`${this.url}/factors`,{body:_,headers:this.headers,jwt:(d=m?.session)===null||d===void 0?void 0:d.access_token});return b?this._returnResult({data:null,error:b}):(r.factorType==="totp"&&C.type==="totp"&&(!((p=C?.totp)===null||p===void 0)&&p.qr_code)&&(C.totp.qr_code=`data:image/svg+xml;utf-8,${C.totp.qr_code}`),this._returnResult({data:C,error:null}))})}catch(l){if(Ie(l))return this._returnResult({data:null,error:l});throw l}}async _verify(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async l=>{var d;const{data:p,error:m}=l;if(m)return this._returnResult({data:null,error:m});const E=Object.assign({challenge_id:r.challengeId},"webauthn"in r?{webauthn:Object.assign(Object.assign({},r.webauthn),{credential_response:r.webauthn.type==="create"?Gp(r.webauthn.credential_response):Yp(r.webauthn.credential_response)})}:{code:r.code}),{data:_,error:C}=await je(this.fetch,"POST",`${this.url}/factors/${r.factorId}/verify`,{body:E,headers:this.headers,jwt:(d=p?.session)===null||d===void 0?void 0:d.access_token});return C?this._returnResult({data:null,error:C}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+_.expires_in},_)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",_),this._returnResult({data:_,error:C}))})}catch(l){if(Ie(l))return this._returnResult({data:null,error:l});throw l}})}async _challenge(r){return this._acquireLock(this.lockAcquireTimeout,async()=>{try{return await this._useSession(async l=>{var d;const{data:p,error:m}=l;if(m)return this._returnResult({data:null,error:m});const E=await je(this.fetch,"POST",`${this.url}/factors/${r.factorId}/challenge`,{body:r,headers:this.headers,jwt:(d=p?.session)===null||d===void 0?void 0:d.access_token});if(E.error)return E;const{data:_}=E;if(_.type!=="webauthn")return{data:_,error:null};switch(_.webauthn.type){case"create":return{data:Object.assign(Object.assign({},_),{webauthn:Object.assign(Object.assign({},_.webauthn),{credential_options:Object.assign(Object.assign({},_.webauthn.credential_options),{publicKey:Hp(_.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},_),{webauthn:Object.assign(Object.assign({},_.webauthn),{credential_options:Object.assign(Object.assign({},_.webauthn.credential_options),{publicKey:Vp(_.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(l){if(Ie(l))return this._returnResult({data:null,error:l});throw l}})}async _challengeAndVerify(r){const{data:l,error:d}=await this._challenge({factorId:r.factorId});return d?this._returnResult({data:null,error:d}):await this._verify({factorId:r.factorId,challengeId:l.id,code:r.code})}async _listFactors(){var r;const{data:{user:l},error:d}=await this.getUser();if(d)return{data:null,error:d};const p={all:[],phone:[],totp:[],webauthn:[]};for(const m of(r=l?.factors)!==null&&r!==void 0?r:[])p.all.push(m),m.status==="verified"&&p[m.factor_type].push(m);return{data:p,error:null}}async _getAuthenticatorAssuranceLevel(r){var l,d,p,m;if(r)try{const{payload:P}=Nu(r);let ne=null;P.aal&&(ne=P.aal);let K=ne;const{data:{user:oe},error:ye}=await this.getUser(r);if(ye)return this._returnResult({data:null,error:ye});((d=(l=oe?.factors)===null||l===void 0?void 0:l.filter(xe=>xe.status==="verified"))!==null&&d!==void 0?d:[]).length>0&&(K="aal2");const te=P.amr||[];return{data:{currentLevel:ne,nextLevel:K,currentAuthenticationMethods:te},error:null}}catch(P){if(Ie(P))return this._returnResult({data:null,error:P});throw P}const{data:{session:E},error:_}=await this.getSession();if(_)return this._returnResult({data:null,error:_});if(!E)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:C}=Nu(E.access_token);let b=null;C.aal&&(b=C.aal);let N=b;((m=(p=E.user.factors)===null||p===void 0?void 0:p.filter(P=>P.status==="verified"))!==null&&m!==void 0?m:[]).length>0&&(N="aal2");const F=C.amr||[];return{data:{currentLevel:b,nextLevel:N,currentAuthenticationMethods:F},error:null}}async _getAuthorizationDetails(r){try{return await this._useSession(async l=>{const{data:{session:d},error:p}=l;return p?this._returnResult({data:null,error:p}):d?await je(this.fetch,"GET",`${this.url}/oauth/authorizations/${r}`,{headers:this.headers,jwt:d.access_token,xform:m=>({data:m,error:null})}):this._returnResult({data:null,error:new mi})})}catch(l){if(Ie(l))return this._returnResult({data:null,error:l});throw l}}async _approveAuthorization(r,l){try{return await this._useSession(async d=>{const{data:{session:p},error:m}=d;if(m)return this._returnResult({data:null,error:m});if(!p)return this._returnResult({data:null,error:new mi});const E=await je(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:p.access_token,body:{action:"approve"},xform:_=>({data:_,error:null})});return E.data&&E.data.redirect_url&&Bn()&&!l?.skipBrowserRedirect&&window.location.assign(E.data.redirect_url),E})}catch(d){if(Ie(d))return this._returnResult({data:null,error:d});throw d}}async _denyAuthorization(r,l){try{return await this._useSession(async d=>{const{data:{session:p},error:m}=d;if(m)return this._returnResult({data:null,error:m});if(!p)return this._returnResult({data:null,error:new mi});const E=await je(this.fetch,"POST",`${this.url}/oauth/authorizations/${r}/consent`,{headers:this.headers,jwt:p.access_token,body:{action:"deny"},xform:_=>({data:_,error:null})});return E.data&&E.data.redirect_url&&Bn()&&!l?.skipBrowserRedirect&&window.location.assign(E.data.redirect_url),E})}catch(d){if(Ie(d))return this._returnResult({data:null,error:d});throw d}}async _listOAuthGrants(){try{return await this._useSession(async r=>{const{data:{session:l},error:d}=r;return d?this._returnResult({data:null,error:d}):l?await je(this.fetch,"GET",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:l.access_token,xform:p=>({data:p,error:null})}):this._returnResult({data:null,error:new mi})})}catch(r){if(Ie(r))return this._returnResult({data:null,error:r});throw r}}async _revokeOAuthGrant(r){try{return await this._useSession(async l=>{const{data:{session:d},error:p}=l;return p?this._returnResult({data:null,error:p}):d?(await je(this.fetch,"DELETE",`${this.url}/user/oauth/grants`,{headers:this.headers,jwt:d.access_token,query:{client_id:r.clientId},noResolveJson:!0}),{data:{},error:null}):this._returnResult({data:null,error:new mi})})}catch(l){if(Ie(l))return this._returnResult({data:null,error:l});throw l}}async fetchJwk(r,l={keys:[]}){let d=l.keys.find(_=>_.kid===r);if(d)return d;const p=Date.now();if(d=this.jwks.keys.find(_=>_.kid===r),d&&this.jwks_cached_at+ep>p)return d;const{data:m,error:E}=await je(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(E)throw E;return!m.keys||m.keys.length===0||(this.jwks=m,this.jwks_cached_at=p,d=m.keys.find(_=>_.kid===r),!d)?null:d}async getClaims(r,l={}){try{let d=r;if(!d){const{data:P,error:ne}=await this.getSession();if(ne||!P.session)return this._returnResult({data:null,error:ne});d=P.session.access_token}const{header:p,payload:m,signature:E,raw:{header:_,payload:C}}=Nu(d);l?.allowExpired||Ep(m.exp);const b=!p.alg||p.alg.startsWith("HS")||!p.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(p.kid,l?.keys?{keys:l.keys}:l?.jwks);if(!b){const{error:P}=await this.getUser(d);if(P)throw P;return{data:{claims:m,header:p,signature:E},error:null}}const N=vp(p.alg),D=await crypto.subtle.importKey("jwk",b,N,!0,["verify"]);if(!await crypto.subtle.verify(N,D,E,up(`${_}.${C}`)))throw new af("Invalid JWT signature");return{data:{claims:m,header:p,signature:E},error:null}}catch(d){if(Ie(d))return this._returnResult({data:null,error:d});throw d}}}to.nextInstanceID={};const ex=to,tx="2.97.0";let Xl="";typeof Deno<"u"?Xl="deno":typeof document<"u"?Xl="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Xl="react-native":Xl="node";const nx={"X-Client-Info":`supabase-js-${Xl}/${tx}`},ix={headers:nx},rx={schema:"public"},ax={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},sx={};function no(u){"@babel/helpers - typeof";return no=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(r){return typeof r}:function(r){return r&&typeof Symbol=="function"&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},no(u)}function lx(u,r){if(no(u)!="object"||!u)return u;var l=u[Symbol.toPrimitive];if(l!==void 0){var d=l.call(u,r);if(no(d)!="object")return d;throw new TypeError("@@toPrimitive must return a primitive value.")}return(r==="string"?String:Number)(u)}function ox(u){var r=lx(u,"string");return no(r)=="symbol"?r:r+""}function ux(u,r,l){return(r=ox(r))in u?Object.defineProperty(u,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):u[r]=l,u}function ug(u,r){var l=Object.keys(u);if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(u);r&&(d=d.filter(function(p){return Object.getOwnPropertyDescriptor(u,p).enumerable})),l.push.apply(l,d)}return l}function nn(u){for(var r=1;r<arguments.length;r++){var l=arguments[r]!=null?arguments[r]:{};r%2?ug(Object(l),!0).forEach(function(d){ux(u,d,l[d])}):Object.getOwnPropertyDescriptors?Object.defineProperties(u,Object.getOwnPropertyDescriptors(l)):ug(Object(l)).forEach(function(d){Object.defineProperty(u,d,Object.getOwnPropertyDescriptor(l,d))})}return u}const cx=u=>u?(...r)=>u(...r):(...r)=>fetch(...r),hx=()=>Headers,fx=(u,r,l)=>{const d=cx(l),p=hx();return async(m,E)=>{var _;const C=(_=await r())!==null&&_!==void 0?_:u;let b=new p(E?.headers);return b.has("apikey")||b.set("apikey",u),b.has("Authorization")||b.set("Authorization",`Bearer ${C}`),d(m,nn(nn({},E),{},{headers:b}))}};function dx(u){return u.endsWith("/")?u:u+"/"}function gx(u,r){var l,d;const{db:p,auth:m,realtime:E,global:_}=u,{db:C,auth:b,realtime:N,global:D}=r,F={db:nn(nn({},C),p),auth:nn(nn({},b),m),realtime:nn(nn({},N),E),storage:{},global:nn(nn(nn({},D),_),{},{headers:nn(nn({},(l=D?.headers)!==null&&l!==void 0?l:{}),(d=_?.headers)!==null&&d!==void 0?d:{})}),accessToken:async()=>""};return u.accessToken?F.accessToken=u.accessToken:delete F.accessToken,F}function mx(u){const r=u?.trim();if(!r)throw new Error("supabaseUrl is required.");if(!r.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(dx(r))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}var yx=class extends ex{constructor(u){super(u)}},px=class{constructor(u,r,l){var d,p;this.supabaseUrl=u,this.supabaseKey=r;const m=mx(u);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",m),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",m),this.storageUrl=new URL("storage/v1",m),this.functionsUrl=new URL("functions/v1",m);const E=`sb-${m.hostname.split(".")[0]}-auth-token`,_={db:rx,realtime:sx,auth:nn(nn({},ax),{},{storageKey:E}),global:ix},C=gx(l??{},_);if(this.storageKey=(d=C.auth.storageKey)!==null&&d!==void 0?d:"",this.headers=(p=C.global.headers)!==null&&p!==void 0?p:{},C.accessToken)this.accessToken=C.accessToken,this.auth=new Proxy({},{get:(N,D)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(D)} is not possible`)}});else{var b;this.auth=this._initSupabaseAuthClient((b=C.auth)!==null&&b!==void 0?b:{},this.headers,C.global.fetch)}this.fetch=fx(r,this._getAccessToken.bind(this),C.global.fetch),this.realtime=this._initRealtimeClient(nn({headers:this.headers,accessToken:this._getAccessToken.bind(this)},C.realtime)),this.accessToken&&Promise.resolve(this.accessToken()).then(N=>this.realtime.setAuth(N)).catch(N=>console.warn("Failed to set initial Realtime auth token:",N)),this.rest=new ny(new URL("rest/v1",m).href,{headers:this.headers,schema:C.db.schema,fetch:this.fetch,timeout:C.db.timeout,urlLengthLimit:C.db.urlLengthLimit}),this.storage=new Wy(this.storageUrl.href,this.headers,this.fetch,l?.storage),C.accessToken||this._listenForAuthEvents()}get functions(){return new Zm(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(u){return this.rest.from(u)}schema(u){return this.rest.schema(u)}rpc(u,r={},l={head:!1,get:!1,count:void 0}){return this.rest.rpc(u,r,l)}channel(u,r={config:{}}){return this.realtime.channel(u,r)}getChannels(){return this.realtime.getChannels()}removeChannel(u){return this.realtime.removeChannel(u)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var u=this,r,l;if(u.accessToken)return await u.accessToken();const{data:d}=await u.auth.getSession();return(r=(l=d.session)===null||l===void 0?void 0:l.access_token)!==null&&r!==void 0?r:u.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:u,persistSession:r,detectSessionInUrl:l,storage:d,userStorage:p,storageKey:m,flowType:E,lock:_,debug:C,throwOnError:b},N,D){const F={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new yx({url:this.authUrl.href,headers:nn(nn({},F),N),storageKey:m,autoRefreshToken:u,persistSession:r,detectSessionInUrl:l,storage:d,userStorage:p,flowType:E,lock:_,debug:C,throwOnError:b,fetch:D,hasCustomAuthorizationHeader:Object.keys(this.headers).some(P=>P.toLowerCase()==="authorization")})}_initRealtimeClient(u){return new wy(this.realtimeUrl.href,nn(nn({},u),{},{params:nn(nn({},{apikey:this.supabaseKey}),u?.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((u,r)=>{this._handleTokenChanged(u,"CLIENT",r?.access_token)})}_handleTokenChanged(u,r,l){(u==="TOKEN_REFRESHED"||u==="SIGNED_IN")&&this.changedAccessToken!==l?(this.changedAccessToken=l,this.realtime.setAuth(l)):u==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}};const xx=(u,r,l)=>new px(u,r,l);function wx(){if(typeof window<"u")return!1;const u=globalThis.process;if(!u)return!1;const r=u.version;if(r==null)return!1;const l=r.match(/^v(\d+)\./);return l?parseInt(l[1],10)<=18:!1}wx()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Ax="https://sblytncqvxnqsjbaniww.supabase.co",bx="sb_publishable_uzPU1dorBnIhoxIjNVCY-Q_2fpmSsam",Ex=xx(Ax,bx),vx=({studentData:u,scanResult:r,onReset:l})=>{const d=u.status==="success";return We.jsxs("div",{className:`p-8 rounded-2xl w-full max-w-sm flex flex-col items-center justify-center text-center shadow-2xl transition-all duration-300 animate-in fade-in zoom-in-95 ${d?"bg-gradient-to-br from-green-500 to-green-700 shadow-green-900/50":"bg-gradient-to-br from-red-500 to-red-700 shadow-red-900/50"}`,children:[We.jsx("div",{className:"w-20 h-20 rounded-full bg-white/20 flex items-center justify-center mb-6 backdrop-blur-sm",children:d?We.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:We.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})}):We.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-10 w-10 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:We.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M6 18L18 6M6 6l12 12"})})}),We.jsx("h2",{className:"text-3xl font-black mb-1 text-white uppercase tracking-tight",children:d?"ENTRY GRANTED":"ACCESS DENIED"}),d&&u.full_name&&We.jsxs("div",{className:"mt-6 bg-white/10 w-full rounded-xl py-4 px-2 backdrop-blur-sm",children:[We.jsx("p",{className:"text-slate-100 text-sm font-medium uppercase tracking-wider mb-1",children:"Student / Guest"}),We.jsx("p",{className:"text-2xl font-bold text-white",children:u.full_name})]}),!d&&u.message&&We.jsx("div",{className:"mt-4 mb-2",children:We.jsx("p",{className:"text-lg font-medium text-white/90",children:u.message})}),We.jsxs("div",{className:"mt-6 w-full",children:[We.jsx("p",{className:"text-white/60 text-xs font-mono mb-1",children:"SCANNED PIN"}),We.jsx("p",{className:"font-mono text-white/80 bg-black/20 py-2 rounded-lg break-all px-2 text-sm",children:r})]}),We.jsx("button",{onClick:l,className:"mt-8 bg-white text-slate-900 hover:bg-slate-100 px-8 py-4 rounded-xl font-bold text-lg w-full transition-colors shadow-lg active:scale-95",children:"Scan Next"})]})},Sx=()=>{const[u,r]=wa.useState(null),[l,d]=wa.useState(null),[p,m]=wa.useState(!0);wa.useEffect(()=>{let b=null;return p&&!u&&(b=new Gm("reader",{fps:10,qrbox:{width:250,height:250}},!1),b.render(E,_)),()=>{b&&b.clear().catch(N=>{console.error("Failed to clear html5QrcodeScanner. ",N)})}},[p,u]);const E=async b=>{r(b),m(!1);try{const{data:N,error:D}=await Ex.from("maitri_registrations").select("full_name, pin_number").eq("pin_number",b).single();D&&console.warn("Supabase lookup error or not found:",D),d(N?{status:"success",...N}:{status:"error",message:"Invalid Pass or Not Registered"})}catch(N){console.error("Database connection error:",N),d({status:"error",message:"Connection Error"})}},_=b=>{},C=()=>{d(null),r(null),m(!0)};return We.jsxs("div",{className:"flex flex-col items-center p-4 bg-slate-900 min-h-screen text-white",children:[We.jsxs("div",{className:"w-full max-w-sm flex items-center justify-between mb-8 mt-4",children:[We.jsx("h1",{className:"text-2xl font-black text-purple-400 tracking-tight",children:"VERIFIER"}),We.jsx("div",{className:"h-3 w-3 rounded-full bg-green-500 shadow-[0_0_10px_rgba(34,197,94,0.7)] animate-pulse"})]}),l?We.jsx(vx,{studentData:l,scanResult:u,onReset:C}):We.jsxs("div",{className:"w-full max-w-sm",children:[We.jsx("p",{className:"text-slate-400 text-center mb-4 text-sm font-medium uppercase tracking-widest",children:"Point Camera at QR Code"}),We.jsx("div",{className:"rounded-xl overflow-hidden border-2 border-purple-500/50 bg-slate-800 shadow-xl shadow-purple-900/20 relative",children:We.jsx("div",{id:"reader",className:"w-full scanner-container"})})]})]})};function _x(){const[u,r]=wa.useState(!1),[l,d]=wa.useState(""),[p,m]=wa.useState(""),E=_=>{_.preventDefault(),l==="maitri2026"?(r(!0),m("")):m("Incorrect Password")};return u?We.jsx(Sx,{}):We.jsx("div",{className:"flex flex-col items-center justify-center min-h-screen bg-slate-900 text-white p-4",children:We.jsxs("div",{className:"bg-slate-800 p-8 rounded-xl shadow-lg shadow-purple-900/20 w-full max-w-sm border border-slate-700",children:[We.jsxs("div",{className:"text-center mb-8",children:[We.jsx("h1",{className:"text-3xl font-black text-purple-400 mb-2",children:"MAITRI '26"}),We.jsx("p",{className:"text-slate-400 text-sm font-medium tracking-widest uppercase",children:"Staff Portal"})]}),We.jsxs("form",{onSubmit:E,className:"flex flex-col gap-4",children:[We.jsxs("div",{children:[We.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-1",children:"Admin Password"}),We.jsx("input",{type:"password",className:"w-full bg-slate-900 border border-slate-600 rounded-lg py-3 px-4 text-white focus:outline-none focus:border-purple-500 focus:ring-1 focus:ring-purple-500 transition-colors",value:l,onChange:_=>d(_.target.value),placeholder:"Enter password"})]}),p&&We.jsx("p",{className:"text-red-400 text-sm text-center",children:p}),We.jsx("button",{type:"submit",className:"mt-4 bg-purple-600 hover:bg-purple-500 text-white font-bold py-3 px-6 text-lg rounded-lg transition-colors w-full uppercase tracking-wider",children:"Access Scanner"})]})]})})}am.createRoot(document.getElementById("root")).render(We.jsx(wa.StrictMode,{children:We.jsx(_x,{})}));
